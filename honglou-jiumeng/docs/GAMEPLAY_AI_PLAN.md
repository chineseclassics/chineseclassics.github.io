# 《紅樓舊夢》遊戲性與 AI 應用優化計劃（草案）

> 版本：v0.2 草案  
> 目的：作為後續迭代與實作的「設計藍圖」，**不是**最終敲定方案。  
> 核心方向：在不出現「做題感」的前提下，一方面加強遊戲與《紅樓夢》文本的連結，另一方面向《星露谷物語》等農場／建造遊戲學習，強化「大觀園建造＋花魂養成」的長期黏性，並適度引入 DeepSeek。整體世界觀以「石頭記成書前的記憶整理」為背景，核心主題為「記憶與時間」。

---

## 一、設計目標與原則

### 1.1 核心目標

- **增強遊戲性**
  - 獲得「絳珠淚」「靈石」「記憶碎片」的過程，不能只是「無腦點按鈕」，而要包含：
    - 選擇與取捨（要哪條劇情線？先救哪個院子？先培養哪個花魂？）
    - 風險與回報（激烈路線帶來更大收穫，也可能更快走向「白茫茫」）
    - 長期規劃（當輪與多輪迴的策略差異）

- **寓教於樂**
  - 遊戲行為與《紅樓夢》的人物、情節、意象有緊密對應：
    - 黛玉的不同「淚」對應不同場景與心境。
    - 花魂／鳥靈的性格與原著形象相呼應。
    - 建築與節氣對應原著中的具體事件（瀟湘館、蘅蕪苑、元妃省親等）。
  - 學生在追求遊戲勝利時，自然會去關心這些文本細節，而不是被迫「做題」。

- **合理使用 AI**
  - DeepSeek 主要用來：
    - 提供「批語式」短評與命運總結（增加文學氣氛）。
    - 為固定記憶文字增加一兩句「情緒補光」。
    - 少量可選的角色對話互動。
  - 避免：
    - 把核心資源邏輯交給 AI（不可控且成本高）。
    - 讓學生在遊戲中大量看到「閱讀理解／選擇題」。

### 1.2 設計原則

- **不做題**：  
  遊戲過程中盡量不出現「題目」「選項 A/B/C」「答對/答錯」等 UI。  
  知識應該藏在：
  - 劇情線、事件觸發條件
  - 資源加成或減益
  - 花魂／鳥靈的偏好表現

- **可感知但不明說的規則**：  
  對了解原文的玩家比較友善，讓他們有「懂的人自然懂」的體驗。  
  不懂的人也可以透過多次嘗試摸索出規律，之後若去閱讀原文，會有「對上號」的驚喜。

- **低頻率、高品質 AI 調用**：  
  - 寧可少用，但每次調用都設計精準的提示詞與場景。  
  - 大部分 AI 文本輸出控制在 1–2 句，並盡量快取重用。

- **循序漸進實作**：  
  - 優先在「黛玉線 + 瀟湘館 + 黛玉花魂」上試驗新機制。  
  - 確認體驗良好後，再擴展到寶釵、湘雲、探春等角色。

---

## 二、世界觀與主題：石頭記成書前的記憶整理

> 本節只定義大的 RPG 世界觀與情感基調，具體玩法在後續章節展開。

### 2.1 世界觀時間點

- 故事發生在《紅樓夢》正文結束之後、空空道人發現石頭之前：
  - 石頭（神瑛侍者／賈寶玉）已經「幻形入世、歷盡榮枯」並回到青埂峰附近。
  - 但此時石頭上還沒有被刻滿故事，空空道人尚未抄錄《石頭記》。
- 遊戲所在空間：
  - 不是現實中的大觀園，而是**石頭內部的記憶空間／太虛幻境版大觀園**。
  - 玩家看到與建造的一切建築、花魂、節氣，本質都是「曾經的大觀園記憶」的投影。

### 2.2 玩家身份與動機

- 玩家 = 神瑛侍者 = 下凡的寶玉 = 那塊靈石的「自我意識」。
- 在「白茫茫大地一片真乾淨」之後，石頭自覺：
  - 現實已經結束，人生不能重來；
  - 但這場夢若不記下，很快會被時間完全抹去。
- 動機不是改寫命運，也不是讓誰少受苦，而是：
  - **用有限的記憶與淚水，盡可能重現並保存大觀園中最美好的那些光景**；
  - 最後將這些整理好的記憶刻入石頭，成為後來被抄錄的《石頭記》。

### 2.3 核心主題：記憶與時間（非人物高下比較）

- 主題不是「誰最重要」「誰更幸福」，而是：
  - **時間會把一切沖淡，而你只能用有限的精力去保存部分記憶。**
- 林黛玉在這個框架裡：
  - 自然是石頭／寶玉記憶中的精神中心，無需用機制去比較「重要性」；
  - 遊戲設計上默認瀟湘館與黛玉相關記憶為大觀園記憶的「燈芯」。
- 其他女子（寶釵、湘雲、探春等）：
  - 不是用來強化矛盾或比較高下，而是共同構成「那段最美好、最熱鬧的大觀園時光」。
  - 遊戲中的記憶偏向詩社、遊園、笑談、日常趣味，少刻意營造人際衝突。

### 2.4 主線三幕結構（只定義情感與方向）

- **第一幕：記憶甦醒（白地開園、第一輪迴）**
  - 白茫茫之上，石頭的記憶支離破碎，只剩模糊感覺：「有很多女子」「她們行止見識在我之上」。
  - 警幻仙子提醒：若因你不肖，連「閨閣中本自歷歷有人」也一併泯滅，實在不公。
  - 玩家用最初的淚水與靈石，建出第一批院落（如瀟湘館），喚醒黛玉花魂與幾段關鍵記憶。

- **第二幕：記憶展開與細節累積（數輪迴、大觀園逐步豐滿）**
  - 隨著花魂與建築增加，大觀園記憶變得細膩：詩社、聚會、聯句、四季景致逐一被重現。
  - 時間仍在推進：長久不被重溫的細節會模糊、簡化甚至消失，只留下概括印象。
  - 玩家主要在做的事：  
    不是「選擇誰重要」，而是「用建造與養成，盡量讓更多細節被再次記起」。

- **第三幕：刻石與定稿（終局、白茫茫再臨）**
  - 若干輪迴後，警幻提示：時間差不多了，石頭必須接受「這只是其中一個版本的記憶」。
  - 遊戲總結的是：  
    這一局，你成功讓大觀園的哪些季節、哪些場景、哪些日常，被刻得較清晰、較完整。
  - 結尾敘事（可結合 AI 命運總結）指向：  
    後來空空道人經過青埂峰，看到你刻好的這塊石頭，把它抄錄成一部《石頭記》——  
    也就是本局遊戲所「整理完成」的那一版夢。

---

## 三、非「做題式」遊戲性強化設計

### 2.1 記憶「連鎖劇情」系統

#### 2.1.1 概念

- 每個記憶碎片不再是完全獨立，而是掛在特定的「劇情線」上：
  - `storyLineId`（例如：黛玉·葬花線、黛玉·焚稿線、寶玉·金玉與木石線）。
  - `orderIndex`（表示在該劇情線中的前後順序）。
- 玩家在一個輪迴或多輪迴中，**湊齊同一劇情線的多個片段**，就會獲得額外加成。

#### 2.1.2 黛玉線示例（只示意，之後可細化）

- 劇情線 A：黛玉一生悲歡輪廓
  1. 初入榮府
  2. 與寶玉相知
  3. 葬花
  4. 焚稿
  5. 病重

- 劇情線 B：黛玉的酸楚與妒意
  1. 聽聞金玉良緣
  2. 與寶釵言語交鋒
  3. 抄檢大觀園後的冷清

#### 2.1.3 機制

- 記憶碎片 UI 中可以有一個小小的「線索條」或「線索標籤」，顯示它屬於哪條線，已解鎖幾段。
- 當玩家在某段時間（例如一輪迴內）完成同一條劇情線的前 N 段：
  - 觸發「劇情小完結」：
    - 獎勵：高品質絳珠／大量靈石 或 某花魂的一次性成長 boost。
    - 特效：簡短演出或特殊 UI 提示。
- 學生看起來是在「湊故事」，而不是在「答題」。

---

### 2.2 花魂「情境共鳴」機制

#### 2.2.1 核心想法

- 花魂成長受多重因素影響：
  - 當前節氣／季節（春夏秋冬）。
  - 所在建築／格子（瀟湘館、蘅蕪苑等）。
  - 最近發生的記憶類型（葬花、宴飲、抄檢、大婚…）。
- 在「對的情境」使用「對應的淚」，成長效率顯著提高。

#### 2.2.2 黛玉花魂情境示例

- 黛玉花魂（瀟湘館）：
  - 春天／清明前後，使用「葬花淚」：
    - 成長值 ×2，或額外增加隱藏的「共鳴值」。
  - 在大寒使用歡樂宴飲類記憶衍生的淚：
    - 成長正常或略低。
- UI 不直接展示公式，只在花魂說明中用文字暗示：
  - 「春風裡，這株花似乎對『葬花時的淚』格外敏感。」

#### 2.2.3 教育效果

- 讀過原文的玩家，自然會聯想到：
  - 黛玉＝葬花＝春天＝瀟湘館。
- 沒讀過的玩家也可以透過實驗慢慢抓到規律，之後若去讀《紅樓夢》，會產生「原來如此」的共鳴。

---

### 2.3 「回目路線」 Buff：選故事線而非做題

#### 2.3.1 概念

- 每次新輪迴開始前，玩家選擇本輪要追的「回目路線」，類似選擇一種世界走向／難度風格。
- 路線只影響：
  - 記憶／淚水類型出現機率。
  - 建築成本／上限。
  - 某些事件觸發機率。

#### 2.3.2 路線示例

- 路線 1：黛玉初入榮府線
  - 黛玉相關早期記憶生成率↑。
  - 瀟湘館建造成本↓。
- 路線 2：元妃省親線
  - 富麗相關建築可同時存在更多座。
  - 資源壓力（維護成本）↑。
- 路線 3：抄檢大觀園線
  - 建築衰敗速度↑。
  - 若成功維持關鍵建築，可獲得結局大獎勵。

#### 2.3.3 呈現方式

- 頁面彈出 2–3 張「書籤卡」：
  - 每張卡有簡短的文字描述與象徵圖示（不放題目）。
  - 選中後，本輪狀態列顯示「本輪追憶：XXX」。

---

### 2.4 鳥靈「性格與偏好」系統

#### 2.4.1 概念

- 鳥靈（丫鬟化身）的覺醒與被動效果，來源於：
  - 玩家整體遊戲風格，而非單一操作結果。
- 例子：
  - 若玩家常常選擇「穩定修園」路線，襲人鳥靈更易覺醒，偏向維護型被動。
  - 若玩家偏愛「激烈戲劇」路線，晴雯鳥靈覺醒時偏向爆發型被動。

#### 2.4.2 被動設計示意

- 襲人（喜鵲）
  - 若系統判定玩家風格偏「穩重」：
    - 被動：每輪迴自動修復少量建築衰敗。
- 晴雯（金翅雀）
  - 若玩家經常選擇衝突大的故事線：
    - 被動：在某幾個節氣中大幅提高淚水／靈石獲得，但同步讓建築衰敗加速。

#### 2.4.3 呈現方式

- 透過角色口吻與小圖示反映：
  - 「晴雯對你這般不怕折騰頗為賞識。」  
  - 「襲人悄悄替你收拾了不少殘局。」
- 玩家透過長期體驗理解人物性格，而不是被「考性格題」。

---

### 2.5 命運與結局「故事化總結」

#### 2.5.1 概念

- 遊戲結束時，根據玩家整體行為，生成一段「紅樓命運小故事」，而非只顯示分數。

#### 2.5.2 內部記錄（示意）

- 統計：
  - 各花魂的最終等級與成長。
  - 建築建成／衰敗次數。
  - 選過的回目路線。
  - 使用最多的淚水類型。

#### 2.5.3 輸出

- 用較文學化的語言敘述：
  - 「此番輪迴中，瀟湘館光景最盛，黛玉花魂多賴你淚水澆灌；  
    然園中別處卻漸染風霜，似預示抄檢一場難以避免。」  
- 結尾可附**非強制**閱讀建議：
  - 「若想尋找與此命運最相近的篇章，可細讀《紅樓夢》第 XX–XX 回。」

---

### 2.6 節氣行動力與「每日循環」設計（向《星露谷》學習）

#### 2.6.1 核心想法

- 將「節氣」類比為《星露谷》的一天：  
  每推進一個節氣前，玩家有固定量的「行動力」，必須在澆灌、建造、修復、尋找記憶之間做取捨。
- 目標是讓每個節氣都變成一個小小的「日程規劃」：
  - 今天（此節氣）要先澆哪一株花魂？  
  - 哪一棟建築再不修就要廢掉？  
  - 還能不能抽空去園裡找一個記憶碎片？

#### 2.6.2 行動力系統（示意）

- 每個節氣玩家獲得 N 點行動力（例如 4 點，可後續調整）。
- 典型行動與消耗：
  - 澆灌一個花魂：1 點。
  - 修復一棟建築：2–3 點（視衰敗程度）。
  - 種植新花魂／花苗：2 點。
  - 在園中搜尋記憶碎片：1–2 點（機率受其他因素影響）。
- 當行動力用完後，玩家只能選擇「推進節氣」，進入下一「天」。

#### 2.6.3 預期效果

- 玩家不再只是「無限點按鈕」，而是：
  - 規劃當前節氣的重點任務。
  - 被迫在「當下收益」（修復、收集）與「長期投資」（種植新花魂、建新院子）之間做選擇。
- 這種「每天只有一點體力，要用在哪裡？」的張力，是《星露谷》讓人上癮的重要來源之一。

---

### 2.7 園林佈局連鎖 Buff：大觀園作為「紅樓版農場」

#### 2.7.1 核心想法

- 借鑑農場遊戲的「作物佈局」「灑水範圍」「果樹圈」等設計，讓**大觀園格局本身產生連鎖效果**。
- 玩家不只是把建築和花魂隨便放，而是：
  - 計畫哪些格子留給瀟湘館周邊景觀。
  - 哪裡要做「海棠社」、哪裡做「規整花圃」。

#### 2.7.2 佈局 Buff 範例

- 瀟湘館周邊 Buff：
  - 在瀟湘館周圍一定半徑內（例如 3×3 或十字形）種滿水邊／芙蓉類植物：
    - 黛玉花魂成長速度 +X%，葬花淚效果提升。
- 蘅蕪苑周邊 Buff：
  - 若蘅蕪苑附近佈局整齊、花圃呈條理化排列：
    - 寶釵花魂穩定度提高，建築衰敗速度下降。
- 海棠社 Buff：
  - 以海棠＋石桌＋酒壺裝飾成「詩酒之地」：
    - 湘雲花魂在此處澆灌時，獲得額外靈石或特殊淚水。

#### 2.7.3 UI 與玩家體驗

- UI 不需要顯示複雜公式，只要：
  - 在建築／花魂詳情中提示「附近若有 XXX，似乎精神更好」。
  - 當達成某佈局條件時，播放小特效或顯示小圖示（例如「佈局加成已生效」）。
- 玩家會自然進入：
  - 「畫自己大觀園藍圖」的狀態：
    - 這塊地先留給瀟湘館；
    - 那一區專門給詩社；
    - 另一區試試「極簡冷清風」。

---

### 2.8 花魂多路線培育與品質系統

#### 2.8.1 核心想法

- 參考《星露谷》的作物品質（普通／銀星／金星）與不同作物搭配玩法，  
  把「花魂」做成**可走多條培育路線的單位**，而不只是「等級越高越好」。

#### 2.8.2 黛玉花魂雙路線示例

- 路線 A：極致悲情路線
  - 若玩家澆灌黛玉花魂時，多使用「葬花」「焚稿」「身世悲涼」類淚水：
    - 花魂走向「極致悲情」：
      - 可能帶來更高單次資源／共鳴值，但也使某些結局更容易走向「極端悲劇」。
      - 外觀表現：花姿越發絕美但略顯枯瘦。
- 路線 B：柔中帶剛路線
  - 若更多使用「姐妹情誼」「詩社相聚」類記憶：
    - 花魂走向「柔中帶剛」：
      - 整體表現較穩定，與其他花魂／建築的共鳴更均衡。
      - 外觀表現：花型較溫潤、顏色稍暖。

#### 2.8.3 品質與視覺回饋

- 花魂可以有品質或「狀態」標記（類似星級）：
  - 普通／稀有／絕俗 等，對應不同成長曲線與特效。
- 玩家在視覺上明顯感受到：
  - 不同培養方式會讓同一個角色「長成不同樣子」，  
  進而激發開新局重玩、追求不同風格大觀園的動機。

---

### 2.9 節氣事件與「碎片獎勵」節奏

#### 2.9.1 核心想法

- 借鑑《星露谷》每日郵件、節日、隨機事件的設計，  
  讓**每一個節氣都盡量有一點點不同的小驚喜或變化**，形成「再推一節氣看看」的動力。

#### 2.9.2 事件示例

- 固定節氣事件：
  - 清明：更容易觸發葬花相關記憶，黛玉花魂有特殊反應。
  - 中秋：湘雲／詩社相關事件概率上升，酒宴類記憶出現。
- 隨機小事件：
  - 某些節氣會讓特定花魂突然「心情很好／不好」，帶來一點資源波動。
  - 某隻鳥靈突然現身，在一回合內提供小 buff（例如自動修復一棟建築的部分衰敗）。

#### 2.9.3 「碎片獎勵」節奏感

- 設定目標：**幾乎每推進 1–2 個節氣，都能看到一點進展或變化**：
  - 有花魂提升一點點。
  - 某棟建築狀態更新。
  - 解鎖了新記憶／新路線提示。
- 這種「碎片回饋」能讓玩家很自然地說：「再多玩一個節氣就好」，形成正向循環。

---

## 四、DeepSeek AI 應用設計（成本可控）

> 原則：**AI 只負責「文學味與批語」，不負責核心數值。**  
> 所有 AI 調用盡量短小、低頻，結果可快取。

### 3.1 警幻仙子／批語者短評（輪迴級）

#### 3.1.1 觸發時機

- 每輪迴結束（24 節氣走完）呼叫一次（可選）。
- 或當玩家達成重要里程碑（首次建成瀟湘館、黛玉花魂達 Lv3 等）。

#### 3.1.2 內容

- 1–2 句評語，口吻可以設定為：
  - 警幻仙子、脂硯齋、冥官等。
- 依據的輸入（由遊戲生成的摘要）：
  - 本輪主要成長的花魂／建築狀況／常用淚水類型等。

#### 3.1.3 成本控制

- 每次輸出限制約 50–80 tokens。
- 每局遊戲總調用次數可預設為 3–5 次上限。
- 若調用失敗，退回到本地預設文案。

---

### 3.2 記憶「情緒補光」一句話

#### 3.2.1 用途

- 在顯示固定的記憶文本／原文節選之後，用 AI 加上一句「人物心聲」或「旁白」，增強情緒感染力。

#### 3.2.2 機制

- 只在玩家**首次抽到某一種記憶**時調用 DeepSeek：
  - 傳入該記憶的簡要內容（非完整原文，避免洩漏與成本過高）。
  - 請 AI 生成 1 句 20–40 字左右的心理描寫。
- 生成結果快取在 `localStorage` 或遊戲存檔中：
  - 之後再遇到同一記憶時，直接顯示已生成的那句話，不再重複調用。

#### 3.2.3 成本控制

- 單句輸出極短，token 極低。
- 每個記憶只調用一次，總數量可控。

---

### 3.3 「對角色說一句話」的情感互動（可選）

#### 3.3.1 概念

- 玩家在某些時刻可以對黛玉／寶玉等說一句話，AI 以角色口吻回一句。
- 強調「情感交流」，**不綁定資源獎懲**。

#### 3.3.2 限制與設計

- 頻率：每輪迴對同一角色最多 1 次（可在設定中開關）。
- 回覆長度：約 30–50 字。
- 提示詞控制風格：
  - 黛玉偏細膩敏感。
  - 寶玉偏情重理輕。

---

### 3.4 終局「命運總結」小故事

#### 3.4.1 觸發

- 第三輪迴「白茫茫」結局，或玩家主動選擇結束遊戲。

#### 3.4.2 輸入摘要

- 由遊戲生成簡短摘要（JSON 或文字），例如：
  - 黛玉花魂 Lv4、寶釵 Lv2、湘雲 Lv1；
  - 建成建築：瀟湘館、怡紅院、蘅蕪苑；
  - 常用淚水：葬花淚、離別淚；
  - 選過的路線：黛玉初入榮府、抄檢大觀園。

#### 3.4.3 輸出

- 生成約 120–200 字的命運敘述：
  - 描述此局大觀園的榮枯走向。
  - 比較幾位女子的命運光景。
  - 用一兩句帶出對應原書的閱讀建議。

#### 3.4.4 成本

- 每局只調用一次，長度略長但仍在合理範圍。

---

## 五、分階段實作路線（建議）

### 4.1 階段一：非 AI 機制試驗（黛玉線優先）

**目標**：先在不調用 DeepSeek 的情況下，驗證新機制是否好玩。

- 步驟 S1：
  - 為黛玉相關記憶增加 `storyLineId` 與 `orderIndex` 欄位。
  - 實作基本「連鎖劇情完成 bonus」系統（湊齊前 N 段給一次性獎勵）。

- 步驟 S2：
  - 為黛玉花魂實作「情境共鳴」：
    - 春季＋葬花淚 → 成長加倍。
    - 其他情境 → 正常成長。

- 步驟 S3：
  - 增加一個簡化版「本輪路線選擇」介面，至少提供一條黛玉主題路線。

- 步驟 S4：
  - 在不使用 AI 的前提下，以固定邏輯（if／權重）調整鳥靈被動效果，觀察體驗。

### 4.2 階段二：引入 DeepSeek 作為「文字調味」

**目標**：在不改動核心數值邏輯的前提下，增加 AI 文字層次。

- 步驟 A1：
  - 實作輪迴結束的「警幻仙子／批語者短評」：  
    - 設計 Prompt 模板（繁體中文、指定口吻）。  
    - 加入錯誤處理與降級策略（失敗時用本地備用文字）。

- 步驟 A2：
  - 為部分黛玉記憶實作「情緒補光」一句話：  
    - 首次抽到記憶時調用 DeepSeek，寫入快取。

- 步驟 A3（可選）：
  - 實作「對黛玉說一句話」的小互動：  
    - 預設關閉，供教師／玩家自行開啟。

### 4.3 階段三：擴展到其他角色與多結局

**目標**：將黛玉線的設計模式推廣到其他主要角色與更多結局。

- 步驟 B1：
  - 設計寶釵、湘雲、探春等的劇情連鎖與情境共鳴：
    - 寶釵：穩重、金玉良緣、蘅蕪苑。
    - 湘雲：中秋、酒宴、海棠社。
    - 探春：治家、遠嫁、秋爽齋。

- 步驟 B2：
  - 擴充回目路線卡，加入：
    - 元妃省親線、抄檢大觀園線、金玉良緣線等。

- 步驟 B3：
  - 調整終局命運總結 Prompt，使其：
    - 能同時提及多位角色花魂的命運對照。
    - 對應不同路線給出不同風格的結語。

---

## 六、技術選型與未來打包策略（簡要）

> 本節不是馬上要做的工作，而是幫未來「打包成 App / Steam 遊戲」預留方向。

### 6.1 目前與近期的技術方向

- **保持 Web 單頁遊戲架構**：
  - 使用現有的 `index.html + css + 原生 JavaScript` 形式。
  - 後續重構時，將 `js/main.js` 拆分為多個 ES 模組：
    - 例如：`state.js`（遊戲狀態）、`garden.js`（園林與建築）、`flowers.js`（花魂系統）、`memories.js`（記憶管理）、`ui-dialogs.js`（對話與教學）、`ai-integration.js`（DeepSeek 調用）等。
  - 所有資源（圖片、音效、字體等）盡量放在專案內的 `assets/`，並使用相對路徑，方便未來離線打包。

- **暫不引入大型前端框架（Vue / React / Svelte 等）**：
  - 目前遊戲以單人開發為主，重心在內容與玩法設計。
  - 原生 JS + 模組化 + 一個簡單的打包工具（未來可考慮 Vite 或 Rollup）足以支撐後續功能擴展。
  - 若未來想嘗試框架，建議先在小型獨立專案試驗，避免為現有成熟遊戲整體更換技術棧。

### 6.2 預留的 iOS 打包路線

- **目標**：將 Web 遊戲打包成 iOS App，而不用重寫為 Swift / SwiftUI。
- **建議方案**：
  - 使用 **Capacitor** 或 **Cordova** 作為「殼」：
    - 保留現有 Web 專案為核心，外層以 Capacitor 包裝成 iOS App（內部使用 WKWebView 顯示）。
  - 實施要點：
    - 確保遊戲可以作為單一入口頁（例如 `index.html`）獨立運行。
    - 避免依賴外部 CDN 過多關鍵資源（或在打包時下載到本地），以提高離線體驗。
    - 做好觸控操作與全螢幕適配（尤其是手機和平板）。

### 6.3 預留的 Steam / 桌面版打包路線

- **目標**：在 Windows / macOS / Linux 上以桌面應用形式分發。
- **建議方案**：
  - 使用 **Electron**（教學資源多，上手較簡單）或 **Tauri**（體積較小，但需要 Rust）：
    - 外層提供桌面視窗與系統整合；
    - 內部仍然是同一套 Web 遊戲（HTML + CSS + JS）。
  - 實施要點：
    - 遊戲入口與資源組織方式與 iOS 打包需求一致：自包含、可離線。
    - 未來可按需增加桌面特有功能（如本地存檔路徑選擇），但初期可先作為純 WebView 遊戲使用。

### 6.4 原則總結

- 近期專注於：  
  **把《紅樓舊夢》打磨成結構清晰的 Web 單頁遊戲（模組化 JS、資源本地化、邏輯清楚）。**
- 未來若要：
  - 上 iOS：用 Capacitor/Cordova 包一層殼；
  - 上 Steam／桌面：用 Electron/Tauri 包一層殼。
- 無需為了「未來可能的打包」而現在就大幅更換技術棧；  
  只要在設計與重構時，遵守「單一入口頁 + 模組化 + 自包含資源」即可。

---

## 七、UI 與視覺風格設計方向（含 AI 圖像策略）

> 本節定義整體視覺路線，方便之後在 Vibe Coding／Tailwind／圖像 AI 裡保持一致。

### 7.1 整體風格定位

- **不採用重度像素風**：
  - 星露谷式像素風雖然好看，但要維持一致的像素格規則與細節，需要大量手工調整與專用美術能力。
  - 一般圖像生成 AI 很難生成一組畫風完全一致的像素素材，容易出現「拼在一起很亂」的問題。

- **推薦主風格**：  
  「**簡化中國風插畫／淡彩水墨＋扁平色塊**」：
  - 背景：淡米色／淺灰藍紙張感，帶少量噪點或紙紋。
  - 建築與植物：輪廓清晰、用色柔和的插畫，而非寫實或過度細節。
  - 整體感覺：介於「古典插畫」與「現代扁平 UI」之間，既有紅樓氣質，又保持清爽易讀。

### 7.2 地圖與卡片式佈局

- 地圖仍然使用格子（grid）結構，但每一格不必是完整場景，而是一張**小插畫卡片**：
  - 例如：「瀟湘館小畫」「怡紅院小畫」「芙蓉小畫」「海棠小畫」。
  - 每格顯示：小插圖 + 簡短名稱或圖示，而詳細資訊在右側面板／彈窗呈現。
- 好處：
  - 視覺清楚、易於排版與響應式；
  - 同一張插畫可以在多處重用（地圖格子＋詳情卡片上方背景）。

### 7.3 Emoji 替代：SVG 圖標系統

- 盡量減少界面上的 Emoji 使用，改為**一套自製 SVG 圖標 + 文字**組合：
  - 靈石：小玉石／寶玉形象。
  - 絳珠：帶光暈的淚滴。
  - 記憶：一卷書／一塊刻字的石片。
  - 花魂：小花＋光環或細小光粒。
  - 鳥靈：簡化的鳥剪影或羽毛。
- 技術層面：
  - 圖標使用 SVG（或高解析 PNG，並限制尺寸），配合 Tailwind 控制顏色與大小；
  - 資源列（靈石／絳珠／記憶碎片）使用「SVG + 數字 + 文本」組合，替代當前 Emoji 方案。

### 7.4 CSS / Tailwind 與插畫的分工

- **CSS / Tailwind 負責**：
  - 版面：格子地圖、右側面板、頂部狀態列、對話框、新手教學氣泡、主選單等。
  - 視覺元素：背景色、漸層、陰影、圓角、邊框、紙張感（可透過背景圖疊加）。
  - 互動效果：hover/active 樣式、按鈕壓下效果、卡片放大等。

- **插畫圖檔（PNG/WebP）負責**：
  - 每個主要院子的一張插畫：
    - 瀟湘館、怡紅院、蘅蕪苑、海棠社、秋爽齋等。
  - 主要花魂的角色／花卉形象插畫：
    - 如「黛玉芙蓉」「寶釵牡丹」「湘雲海棠」「探春秋爽」。
  - 1–2 張整體大觀園遠景插圖（用於標題畫面或背景）。

### 7.5 AI 圖像生成策略

- 使用圖像生成 AI（如 Midjourney、Stable Diffusion、DALL·E 等）時：
  - Prompt 方向：  
    - 「淡彩中國風插畫」「水墨感大觀園小場景」「簡化構圖」「柔和色彩」「留白較多」等關鍵字。
  - 目標：  
    - 生成一系列色調統一的小場景插畫（院子／花魂／遠景），而不是細節過滿的大圖。
- 數量控制：
  - 核心插畫數量保持在「每個院子 1–2 張，主要花魂各 1 張，大觀園遠景 1–2 張」的量級；
  - 盡量重用同一插畫於不同 UI（例如地圖格子縮略圖＋詳情卡片背景），減少素材管理負擔。

### 7.6 Vibe Coding 實作建議

- 在 Cursor 的 Vibe Coding 模式中：
  - 用自然語言描述風格：「淡彩紙張背景、卡片式格子、右側面板、頂部狀態列、SVG 圖標」；
  - 讓 AI 幫生成：
    - Tailwind class 組合（顏色、陰影、邊框、圓角）；
    - 卡片排版樣式（插圖區、標題、描述與狀態標籤）。
- 實作順序建議：
  1. 先用 Tailwind 做出一套乾淨的卡片／面板／頂部狀態列樣式（不依賴圖片）。
  2. 再將 AI 生成的少量插畫嵌入卡片指定區域，調整尺寸與比例。
  3. 最後逐步把現有 Emoji 替換成 SVG 圖標。

---

## 八、後續需要一起決定的設計細節

1. **優先情節選擇**
   - 黛玉線：你最希望先實作哪幾個關鍵情節？  
     （例如：初入榮府、葬花、焚稿、病重、抄檢後心境…）

2. **文本篇幅與難度**
   - 一段記憶中顯示的原文要多長才合適？  
   - 是否需要加上少量白話提示，或完全保留文言？

3. **教學搭配**
   - 是否希望遊戲中的劇情線，優先對應你在課堂上會教到的回目？  
   - 是否需要在教師模式中顯示「此條劇情線涉及第幾回」做備註？

4. **AI 風格校準**
   - DeepSeek 的輸出風格需多大程度模仿《紅樓夢》原文？  
   - 是否允許 AI 自由創作小段落（只要保持風格貼合），還是要嚴格限制在「評論／旁白」層？

此計劃可作為後續一系列小步驟實作的「總藍圖」。  
之後每一個階段（例如「黛玉連鎖劇情」或「輪迴短評 Prompt」）都可以從這份文件中單獨切出來，逐步落實與調整。***

