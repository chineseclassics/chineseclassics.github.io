# 《紅樓舊夢》遊戲設計文檔（v1.0）

> **文檔目的**：完整設計說明，供實作與迭代使用（含 AI 協助開發）  
> **來源依據**：整合 `DESIGN.md`、`GAMEPLAY_AI_PLAN.md`、`LIN_DAIYU_TEARS.md`、`STORY_THEME_DESIGN.md`

---

## 📖 快速索引

| 章節 | 內容 | 實作優先級 |
|------|------|-----------|
| [一、核心概念](#一核心概念30-秒速覽) | 遊戲核心設計理念 | ⭐⭐⭐ 必讀 |
| [二、MVP 實作範圍](#二mvp-實作範圍第一版要做什麼) | 第一版開發清單 | ⭐⭐⭐ 必讀 |
| [三、世界觀與主題](#三世界觀與主題) | 故事背景與敘事框架 | ⭐⭐ 重要 |
| [四、核心玩法](#四核心玩法與遊戲循環) | 遊戲循環設計 | ⭐⭐⭐ 必讀 |
| [五、系統設計](#五系統設計詳解) | 各系統詳細規格 | ⭐⭐⭐ 必讀 |
| [六、AI 應用](#六deepseek-ai-應用) | DeepSeek 整合方案 | ⭐ 可延後 |
| [七、視覺與技術](#七ui視覺風格與技術選型) | UI 與技術選型 | ⭐⭐ 重要 |
| [八、開發路線](#八分階段開發路線) | 分階段實作計劃 | ⭐⭐⭐ 必讀 |

---

## 一、核心概念（30 秒速覽）

### 🎮 遊戲本質

**一句話描述**：  
玩家作為石頭（寶玉），用林黛玉的絳珠灌溉大觀園花魂，重建園中景致與眾人的美好記憶。

### 🎯 六大設計支柱

| 支柱 | 說明 |
|------|------|
| **世界觀** | 正文結束後，石頭在太虛幻境版大觀園中整理記憶 |
| **主題** | 記憶 vs 時間（不是改命，不是比較人物高下） |
| **範圍** | 只取前八十回，以大觀園內情節為主 |
| **核心資源** | 只有林黛玉的絳珠可澆灌所有花魂 |
| **核心玩法** | 節氣行動力＋花魂養成（建築與鳥靈為輔） |
| **教學理念** | 不出現做題 UI，知識藏在遊戲機制中 |

### 📦 十大系統

1. **資源系統** - 絳珠（核心，統一資源）、靈石（次要）、記憶碎片
2. **園林建築** - 5×5 格子地圖，院子解鎖花魂
3. **花魂養成** - 等級、成長值系統
4. **絳珠收集** - 通過重新尋回黛玉哭泣場景的記憶獲得
5. **記憶劇情** - 故事線、記憶碎片（完成後獲得絳珠）
6. **閱讀同步** - 閱讀解鎖機制，促進閱讀前八十回（核心教育目標）
7. **節氣循環** - 24 節氣行動力系統
8. **鳥靈輔助** - 丫鬟化身，被動加成
9. **事件結局** - 固定/隨機事件、刻石終局
10. **AI 調味** - 批語、補光、命運總結（可選）

---

## 二、MVP 實作範圍（第一版要做什麼）

### ✅ 必做系統（核心可玩）

| 系統 | 具體內容 | 預估工作量 |
|------|----------|-----------|
| **節氣循環** | 24 節氣序列 + 每節氣 4 點行動力 | 小 |
| **基礎資源** | 絳珠總量系統（統一資源，通過記憶收集獲得） | 小 |
| **園林地圖** | 5×5 格子 + 瀟湘館解鎖邏輯 | 中 |
| **黛玉花魂** | 等級 0-5 + 成長值 + 澆灌機制 | 中 |
| **記憶系統** | 1 條黛玉故事線（3-5 段記憶） | 中 |
| **行動消耗** | 澆灌/種植等行動消耗行動力（答題解鎖記憶不消耗行動力） | 小 |
| **簡單終局** | 本地文本總結（不依賴 AI） | 小 |

### 🔄 可延後系統（第二版再做）

- 鳥靈系統（丫鬟輔助）
- 複雜佈局 buff（園林策略）
- 多角色花魂（寶釵、湘雲、探春）
- DeepSeek AI 整合
- 隨機事件系統

### 📋 MVP 開發檢查清單

```
□ 建立專案結構（HTML + CSS + JS 模組）
□ 實作節氣循環與行動力消耗
□ 實作絳珠獲取與消耗
□ 實作瀟湘館解鎖（靈石消耗）
□ 實作黛玉花魂種植與澆灌
□ 實作花魂等級與成長值顯示
□ 實作 1 條黛玉記憶故事線
□ 實作記憶碎片收集獎勵
□ 實作基本 UI（狀態列、地圖、面板）
□ 實作簡單終局總結
```

---

## 三、世界觀與主題

### 🌏 遊戲定位

**題材**：紅樓夢題材單機網頁遊戲  
**風格**：文學向、節奏溫和、寓教於樂  
**目標玩家**：
- 主要：國中/高中學生（配合教學）
- 次要：紅樓夢愛好者、園林/RPG 玩家

**教學目標**：
- **核心目標**：促進學生閱讀紅樓夢前八十回，閱讀與遊戲同步進行
- **閱讀覆蓋範圍**：由於紅樓夢前八十回中，大部分章回都有賈寶玉和林黛玉出場，因此通過寶黛相關記憶可以覆蓋大部分回目（部分回目可能不包含）
- 在遊戲中自然接觸原文情節與語言
- 體會「記憶 vs 時間」的主題與無常感
- 不是背情節，不是做題
- **閱讀驅動遊戲**：讀完對應回目才能解鎖相關記憶，形成「閱讀→解鎖→遊戲」的循環

**核心賣點**：
- 紅樓夢 × 大觀園建造 × 記憶養成（不是做題遊戲）
- 嚴謹對應原文的場景/詩詞（通過記憶收集絳珠）
- DeepSeek 提供文學風味（批語/旁白/命運總結）

### 📍 故事框架

**時間設定**：  
正文結束後（白茫茫一片），石頭在回想大觀園記憶

**素材範圍**：  
只取前八十回，特別是**大觀園內**的情節與氛圍

**玩家身份**：  
神瑛侍者 = 賈寶玉 = 青埂峰頑石（三位一體）

**遊戲空間**：  
石頭內部的記憶空間版大觀園（所有建築/花魂/季節都是記憶投影）

### 🎭 核心主題：記憶 vs 時間

**不是**：改命、救人、比較人物高下  
**而是**：在時間抹平一切前，保留大觀園最美好的記憶與細節

**重點場景**：
- ✅ 詩社、遊園、四季景致等園內日常
- ❌ 家族興衰、後期崩壞（只作餘韻暗示）

**核心院落**：
- 瀟湘館、怡紅院、蘅蕪苑、海棠社、秋爽齋
- 詩社聚會場所、園中亭台樓閣、湖石花徑

### 📜 三幕式敘事結構

| 幕次 | 名稱 | 內容 |
|------|------|------|
| **第一幕** | 記憶甦醒 | 白茫茫之上記憶破碎，警幻仙子指引開墾初始建築（警幻仙閣、部分院落雛形） |
| **第二幕** | 記憶展開 | 園林漸成，四季流轉，詩社/遊園記憶一段段找回，花魂陸續甦醒 |
| **第三幕** | 刻石定稿 | 盡可能重建並解鎖所有院落、花魂與美好記憶，由系統依據你的收集成果刻出本局的《石頭記》版本 |

---

## 四、核心玩法與遊戲循環

### 🎯 核心挑戰與策略

**遊戲的核心玩法圍繞兩個關鍵決策**：

#### 0️⃣ 閱讀原文（流程起點，核心教育目標）

**閱讀是整個遊戲流程的起點**，所有後續內容都建立在閱讀基礎上：

**記憶解鎖流程**（閱讀系統隱性化，不消耗行動力）：
1. **發現記憶**：遊戲中發現記憶（顯示「第 X 回的記憶」）
2. **答題解鎖**（不消耗行動力）：點擊記憶，回答關鍵情節選擇題（對應第 X 回）
3. **自然閱讀**：玩家為了答對題目，自然會去閱讀第 X 回（遊戲外完成）
4. **獲得資源**：答對後，記憶解鎖 + 直接獲得資源（絳珠或靈石）
5. **使用資源進行行動**（消耗行動力）：使用資源解鎖建築、種植花魂、澆灌培養

**每個節氣的完整循環**：
- **答題解鎖記憶**（不消耗行動力）→ 獲得資源
- **使用資源進行行動**（消耗行動力）→ 解鎖建築、種植花魂、澆灌培養
- **花魂升級** → 解鎖新記憶 → 回到第一步

**設計理念**：
- **閱讀系統隱性化**：不在遊戲中明確告訴玩家「去閱讀」，而是通過題目自然引導
- **題目提示回目**：題目會顯示「第 X 回的記憶」，玩家為了答對題目，自然會去閱讀
- **答對即解鎖**：答對選擇題後，記憶立即解鎖並獲得資源，不需要額外的「搜尋記憶」步驟
- **自然引導**：遊戲進度引導閱讀順序，閱讀進度推動遊戲進度

#### 1️⃣ 如何獲得絳珠和靈石（核心挑戰）

**資源獲取是遊戲的核心挑戰**，所有資源都通過記憶收集獲得：

**絳珠獲取**（pearl 類記憶）：
- **發現記憶**：在遊戲流程中出現「第 X 回的記憶」（黛玉哭泣相關場景）
- **答題解鎖**：點擊記憶，回答 3 題關鍵情節選擇題並全部答對
- **完成記憶收集**：記憶解鎖後，獲得絳珠獎勵（5-15 顆）
- **節氣事件**：特定節氣（如清明）可能提供額外絳珠機會
- **故事線完成**：完成整條記憶故事線獲得額外絳珠獎勵

**靈石獲取**（stone 類記憶，獨立獲取，對應賈寶玉）：
- **發現記憶**：在遊戲流程中出現「第 X 回的記憶」（賈寶玉相關場景）
- **答題解鎖**：點擊記憶，回答 3 題關鍵情節選擇題並全部答對
- **完成記憶收集**：記憶解鎖後，獲得靈石獎勵（數量待定，但記憶數量可能較多）
- **節氣事件**：特定節氣可能提供額外靈石機會
- **故事線完成**：完成整條記憶故事線獲得額外靈石獎勵
- **數量優勢**：stone 類記憶（寶玉相關）可能比 pearl 類記憶（黛玉相關）更多，因為寶玉出場頻率更高

**挑戰性設計**：
- **答題挑戰**：必須答對選擇題才能解鎖記憶並獲得資源
- **閱讀引導**：題目顯示「第 X 回的記憶」，玩家為了答對題目，自然會去閱讀
- **答題不消耗行動力**：答題解鎖記憶不消耗行動力，可以隨時進行
- **行動力限制**：每節氣只有 4 點行動力，需要策略性分配：
  - 種植花魂（消耗 2 點行動力）
  - 澆灌花魂（消耗 1 點行動力）
  - 解鎖建築（不消耗行動力，只消耗靈石）
- **記憶解鎖條件**：記憶需要通過答題才能解鎖，答錯可以重試
- **資源平衡**：需要同時收集 pearl 類記憶（絳珠）和 stone 類記憶（靈石）
- **完整循環**：每個節氣都應該包含「答題解鎖記憶」和「使用資源進行行動」兩個部分

#### 2️⃣ 如何策略性分配絳珠（核心策略）

絳珠有限，如何分配使用是玩家需要做出的關鍵策略決策：

**分配選擇**：
- **優先澆灌哪個花魂**：不同花魂可能有不同的成長效率或解鎖條件
- **立即收益 vs 長期投資**：是優先提升已有花魂，還是先解鎖新花魂？
- **季節考量**：某些季節可能影響花魂成長效率
- **解鎖優先級**：某些花魂達到特定等級後可能解鎖新內容（新記憶、新建築）

**策略深度**：
- **資源稀缺性**：絳珠有限，不能無腦澆灌所有花魂
- **成長效率差異**：不同花魂可能需要不同數量的絳珠才能升級
- **解鎖連鎖反應**：優先培養某個花魂可能解鎖更多記憶收集機會
- **終局目標導向**：根據終局目標（如「完成黛玉主線」）決定分配策略

### 🔄 兩層循環結構

#### 1️⃣ 節氣循環（最小單位，類似《星露谷》的一天）

```
開始節氣 → 獲得 4 點行動力 → 策略選擇 → 行動力耗盡 → 進入下一節氣
```

**核心決策循環**（每個節氣都包含完整的行動循環）：
1. **答題解鎖記憶**（不消耗行動力）
   - 發現記憶：遊戲中發現記憶（顯示「第 X 回的記憶」）
   - 答題解鎖：點擊記憶，回答關鍵情節選擇題（對應第 X 回）
     - 答對 → 記憶解鎖 + 直接獲得資源（絳珠或靈石）
     - 答錯 → 可以重試（玩家自然會去閱讀第 X 回）

2. **使用資源進行行動**（消耗行動力）
   - **解鎖建築**：使用靈石解鎖建築（如瀟湘館）（不消耗行動力）
   - **種植花魂**：在解鎖的建築中種植對應的花魂（消耗 2 點行動力）
   - **分配絳珠**：選擇澆灌哪個花魂 → 消耗絳珠 → 花魂成長（消耗 1 點行動力）

3. **花魂升級，解鎖新記憶**
   - 花魂等級提升 → 解鎖新記憶 → 回到步驟 1

**重要原則**：
- 每個節氣都應該包含「答題解鎖記憶」和「使用資源進行行動」兩個部分
- 答題解鎖記憶不消耗行動力，可以隨時進行
- 使用資源進行行動消耗行動力，需要策略性分配

**可選行動**（每項消耗 1-3 點）：
- **答題解鎖記憶**（不消耗行動力）：點擊記憶，回答選擇題，答對後直接獲得資源
  - pearl 類記憶 → 獲得絳珠
  - stone 類記憶 → 獲得靈石
- **澆灌花魂**（1 點）：消耗絳珠，推動花魂成長
- **解鎖建築**（消耗靈石，不消耗行動力）：解鎖新院子，解鎖新花魂種植機會
- **種植新花魂**（2 點）：在解鎖的建築中種植對應的花魂

#### 2️⃣ 全局進程（從白地到全收集）

```
白地開園 → 
【節氣 1】
發現記憶（第 1 回的記憶）→ 答題解鎖 → 答對 → 獲得靈石 → 
發現記憶（第 3 回的記憶）→ 答題解鎖 → 答對 → 獲得絳珠 → 
用靈石解鎖建築（瀟湘館）→ 在建築中種植花魂（黛玉花魂）→ 
【節氣 2】
用絳珠澆灌花魂 → 花魂成長 → 等級提升 → 解鎖新記憶 → 
發現記憶（第 5 回的記憶）→ 答題解鎖 → 答對 → 獲得絳珠 → 
繼續澆灌花魂 → 
【節氣 3】
發現記憶（第 9 回的記憶）→ 答題解鎖 → 答對 → 獲得靈石 → 
用靈石解鎖建築（蘅蕪苑）→ 種植花魂（寶釵花魂）→ 
繼續循環 → 
每個節氣：答題解鎖記憶 → 獲得資源 → 使用資源進行行動 → 
花魂升級 → 解鎖新記憶 → 繼續循環 → 
完成大觀園重建 → 完成記憶尋回 → 刻石終局
```

**長期目標（單局遊玩）**：
1. **閱讀推進**（核心教育目標）：
   - 讀完紅樓夢前八十回，通過驗證，解鎖所有對應記憶
   - 通過寶黛相關記憶，可以覆蓋前八十回的大部分回目
   - 沒有寶黛出場的回目，如果是關於大觀園中的住戶的，也融入遊戲中
   - stone 類記憶（寶玉相關）可能比 pearl 類記憶（黛玉相關）更多
2. **收集資源**：通過記憶收集獲得足夠的絳珠和靈石
   - pearl 類記憶（黛玉相關）→ 獲得絳珠（用於澆灌花魂）
   - stone 類記憶（寶玉相關）→ 獲得靈石（用於解鎖建築）
3. **解鎖建築**：使用靈石解鎖所有重要院子（瀟湘館、蘅蕪苑、海棠社、秋爽齋等）
4. **種植花魂**：在解鎖的建築中種植對應的花魂（黛玉、寶釵、湘雲、探春…）
5. **策略性分配**：合理分配絳珠，培養花魂成長
6. **培養花魂**：復活並培養所有花魂，達到最高等級
7. **收集記憶**：收集並解鎖所有「大觀園美好生活」相關記憶碎片與故事線
8. **達成終局**：達成「幾乎全收集」或「全收集」後進入刻石終局，由系統總結本局《石頭記》

---

## 五、系統設計詳解

> **閱讀提示**：每個系統包含「功能說明」和「實作優先級」  
> **MVP 重點**：資源系統、園林建築、花魂養成、絳珠、記憶劇情、節氣循環

### 5.1 資源系統 ⭐⭐⭐

> **核心原則**：只有林黛玉的絳珠可澆灌所有花魂；靈石僅用於解鎖院子  
> **世界觀補充**：絳珠來自石頭對黛玉的既有記憶，一開始就可以少量存在，並不依賴瀟湘館建成或黛玉花魂完全復活

#### 💧 絳珠（核心資源）

**定位**：唯一的花魂澆灌資源，統一資源不分類型。**遊戲的核心挑戰是獲得絳珠，核心策略是分配絳珠。**

| 項目 | 說明 |
|------|------|
| **來源** | 重新尋回黛玉哭泣場景的記憶時獲得 |
| **用途** | ① 澆灌所有花魂（消耗絳珠增加成長值）<br>② 推動花魂等級提升，解鎖新內容 |
| **獲取方式** | 完成記憶收集 → 獲得絳珠獎勵 |
| **稀缺性** | 絳珠有限，需要策略性分配使用 |

**核心機制**：
- **獲得挑戰**：玩家在遊戲中發現並解鎖與黛玉哭泣相關的記憶片段（透過閱讀＋答題）
- **完成收集**：完成記憶解鎖後，根據記憶的重要性獲得不同數量的絳珠
- **統一資源**：絳珠是統一資源，沒有類型區分，所有花魂都使用相同的絳珠澆灌
- **策略分配**：絳珠有限，玩家需要決定優先澆灌哪個花魂，創造策略深度

**記憶與絳珠的對應**（參考 `LIN_DAIYU_TEARS.md` 的場景）：
- **重要場景記憶**（如「初入榮府」「葬花吟」）：獲得較多絳珠（10-15 顆）
- **一般場景記憶**（如「寶黛爭吵」「題帕定情」）：獲得中等絳珠（5-10 顆）
- **次要場景記憶**：獲得較少絳珠（1-5 顆）

**策略性設計**：
- **行動力成本**：記憶解鎖不消耗行動力，但「種植花魂／澆灌花魂」會消耗行動力，需要在行動點內平衡培養節奏
- **機會成本**：將行動力投入在「澆灌花魂」或「種植新花魂」，會影響後續能否善用已獲得的絳珠
- **成長效率**：不同花魂可能需要不同數量的絳珠才能升級，需要計算效率
- **解鎖連鎖**：優先培養某個花魂可能解鎖更多記憶收集機會，形成正向循環

#### 🪨 靈石（次要資源，獨立獲取）

**定位**：解鎖建築的代幣，獨立於絳珠獲取

| 項目 | 說明 |
|------|------|
| **來源** | stone 類記憶（獨立獲取，不附帶於絳珠）<br>任務/事件獎勵（可選） |
| **用途** | ① 解鎖院子（瀟湘館、蘅蕪苑等）<br>② 一次性園景升級/裝飾（可選） |
| **獲取方式** | 完成 stone 類記憶收集 → 獲得靈石獎勵 |
| **不用於** | 日常建築維修（避免「刷石頭」玩法）<br>花魂澆灌（只有絳珠可以澆灌） |

**核心機制**：
- **獨立獲取**：靈石通過 stone 類記憶獨立獲取，不附帶於絳珠
- **記憶對應**：stone 類記憶對應賈寶玉出場場景，完成後獲得靈石
- **數量優勢**：stone 類記憶（寶玉相關）可能比 pearl 類記憶（黛玉相關）更多
- **資源平衡**：玩家需要同時收集 pearl 類記憶（絳珠）和 stone 類記憶（靈石）
- **閱讀覆蓋**：通過寶黛相關記憶，可以引導學生閱讀前八十回的大部分回目

#### 📜 記憶碎片

**分類**：

| 類型 | 對應角色 | 功能 | 獲取資源 | 數量預估 | MVP 優先級 |
|------|---------|------|---------|---------|-----------|
| **pearl 類** | 林黛玉 | 完成收集後獲得絳珠獎勵 | 絳珠（5-15 顆） | 較少（黛玉哭泣場景） | ⭐⭐⭐ 高 |
| **stone 類** | 賈寶玉 | 完成收集後獲得靈石獎勵 | 靈石（數量待定） | 較多（寶玉出場場景） | ⭐⭐⭐ 高 |

**設計理念**：
- **覆蓋範圍**：紅樓夢前八十回中，大部分章回都有賈寶玉和林黛玉出場
- **記憶分布**：stone 類記憶（寶玉相關）可能比 pearl 類記憶（黛玉相關）更多
- **閱讀引導**：通過寶黛相關記憶，可以引導學生閱讀前八十回的大部分回目
- **部分回目處理**：
  - 沒有寶黛出場的回目，如果是關於大觀園中的住戶的（如寶釵、湘雲、探春等），也融入遊戲中
  - 這些回目可能對應其他角色的記憶（如寶釵相關記憶、湘雲相關記憶等）
  - 這些記憶可能提供額外的絳珠或靈石，或者解鎖對應角色的花魂

**屬性結構**：

**pearl 類記憶**（獲得絳珠，對應林黛玉）：
```javascript
{
  id: "memory_daiyu_001",
  storyLineId: "daiyu_main",
  orderIndex: 1,
  type: "pearl",
  relatedCharacter: "林黛玉",
  relatedScene: "葬花",
  relatedChapter: 27,  // 對應第 27 回（黛玉出場）
  readingRequired: true,
  readingVerified: false,
  unlocked: false,
  pearlReward: 15  // 完成此記憶後獲得的絳珠數量
}
```

**stone 類記憶**（獲得靈石，對應賈寶玉）：
```javascript
{
  id: "memory_baoyu_001",
  storyLineId: "baoyu_main",
  orderIndex: 1,
  type: "stone",
  relatedCharacter: "賈寶玉",
  relatedScene: "初入大觀園",
  relatedChapter: 23,  // 對應第 23 回（寶玉出場）
  readingRequired: true,
  readingVerified: false,
  unlocked: false,
  stoneReward: 20  // 完成此記憶後獲得的靈石數量
}
```

**設計說明**：
- **pearl 類記憶**：對應林黛玉的哭泣場景，數量相對較少（因為不是每回都有黛玉哭泣）
- **stone 類記憶**：對應賈寶玉的出場場景，數量可能更多（因為寶玉出場頻率更高）
- **兩者結合**：通過寶黛相關記憶，可以覆蓋前八十回的大部分回目

**核心機制**：
- **pearl 類記憶**：與林黛玉哭泣場景相關，完成收集後直接獲得絳珠
- **stone 類記憶**：與賈寶玉出場場景相關，完成收集後直接獲得靈石（獨立獲取）
- **數量差異**：stone 類記憶（寶玉相關）可能比 pearl 類記憶（黛玉相關）更多
- **兩者都需要**：玩家需要同時收集兩種記憶，才能獲得兩種資源
- **都需要閱讀解鎖**：兩種記憶都需要讀完對應回目並通過驗證才能解鎖
- **覆蓋範圍**：通過寶黛相關記憶，可以引導學生閱讀前八十回的大部分回目

**資源獲取平衡**：
- **絳珠獲取**：pearl 類記憶較少，但每個記憶提供的絳珠較多（5-15 顆）
- **靈石獲取**：stone 類記憶較多，但每個記憶提供的靈石可能較少（需要平衡）
- **平衡設計**：確保玩家有足夠的絳珠澆灌花魂，也有足夠的靈石解鎖建築

#### 📊 衍生指標（敘事層面）

| 指標 | 說明 | UI 呈現 |
|------|------|---------|
| **大觀園狀態** | 建築興衰、園林是否豐盛 | 文字描述（無獨立數值） |
| **記憶豐富程度** | 解鎖多少院落/人物/事件的記憶 | 終局文字總結，不需獨立數值欄位 |

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 絳珠總量系統（統一資源，不分類型）
- [ ] 靈石總量系統（獨立資源，用於解鎖建築）
- [ ] 記憶收集機制（閱讀＋答題解鎖 → 完成收集 → 獲得資源）
  - [ ] pearl 類記憶 → 獲得絳珠
  - [ ] stone 類記憶 → 獲得靈石（獨立獲取）
- [ ] 絳珠獎勵系統（根據記憶重要性給予不同數量的絳珠，5-15 顆）
- [ ] 靈石獎勵系統（根據記憶重要性給予不同數量的靈石，數量待定）
- [ ] 基本記憶碎片結構與收集機制（區分 pearl 和 stone 兩類）
- [ ] 靈石解鎖院子邏輯

**可延後**：
- 更豐富的終局文字總結邏輯
- 絳珠的特殊用途（觸發事件、buff 等）
- 靈石的其他用途（園景升級、裝飾等）

---

### 5.2 園林與建築系統 ⭐⭐⭐

> **核心定位**：建築是花魂解鎖門檻，不是重度維護系統

#### 🗺️ 地圖佈局

**格式**：5×5 格子地圖（可調整為其他尺寸）

| 特點 | 說明 |
|------|------|
| **視覺呈現** | 每格是精美插畫卡（非粗糙圖標） |
| **實作優勢** | 方便計算 buff 範圍、事件觸發 |
| **MVP 範圍** | 先做瀟湘館＋周邊 3-5 格 |

#### 🏛️ 建築功能

**三大作用**：

| 作用 | 說明 | 範例 |
|------|------|------|
| **解鎖花魂** | 必須先解鎖院子才能種植對應花魂 | 瀟湘館 → 黛玉花魂 |
| **氛圍營造** | 承載角色住所與性格 | 瀟湘館的竹影與水榭 |
| **輕量 buff** | 提供文字描述的小加成 | 「水邊芙蓉格外清秀」 |

**建築與花魂對應表**：

| 建築 | 花魂 | 解鎖成本 | MVP 優先級 |
|------|------|---------|-----------|
| 瀟湘館 | 黛玉（芙蓉） | 50 靈石 | ⭐⭐⭐ 高 |
| 蘅蕪苑 | 寶釵（牡丹） | 80 靈石 | ⭐ 低 |
| 海棠社 | 湘雲（海棠） | 80 靈石 | ⭐ 低 |
| 秋爽齋 | 探春（薔薇） | 80 靈石 | ⭐ 低 |

#### 🏗️ 建築屬性（簡化版）

```javascript
{
  id: "xiaoxiang_guan",
  name: "瀟湘館",
  unlocked: true,
  relatedFlower: "daiyu",
  hintBuff: "水邊芙蓉在此處似乎格外清秀",
  position: { x: 2, y: 3 }
}
```

**不包含**：
- ❌ `decayRate`（衰退率）
- ❌ 頻繁維修機制
- ❌ 複雜數值計算

#### 🌳 佈局 buff（進階玩法）

**設計理念**：第二層深度，新手可忽略

| 佈局組合 | 效果 | 優先級 |
|----------|------|--------|
| 瀟湘館＋水邊＋芙蓉 | 黛玉成長效果提升 | ⭐ 低 |
| 蘅蕪苑＋整齊佈局 | 寶釵狀態穩定 | ⭐ 低 |
| 海棠社＋酒桌＋詩社 | 湘雲澆灌時額外獎勵 | ⭐ 低 |

**UI 呈現**：簡短提示語（不暴露公式）

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 5×5 格子地圖基礎框架
- [ ] 瀟湘館位置與解鎖邏輯
- [ ] 「解鎖院子 → 可種植花魂」機制
- [ ] 基本建築屬性（unlocked, relatedFlower）

**可延後**：
- 其他院子（蘅蕪苑、海棠社等）
- 佈局 buff 計算與提示
- 建築視覺差異化
- 裝飾與園景升級

---

### 5.3 花魂系統 ⭐⭐⭐

> **核心概念**：用絳珠澆灌各角色的花魂，培養花魂成長與等級提升

#### 🌸 花魂與角色對應

| 角色 | 花魂 | MVP 優先級 |
|------|------|-----------|
| 林黛玉 | 芙蓉 | ⭐⭐⭐ 高 |
| 薛寶釵 | 牡丹 | ⭐ 低 |
| 史湘雲 | 海棠 | ⭐ 低 |
| 賈探春 | 薔薇 | ⭐ 低 |

#### 📊 花魂屬性

```javascript
{
  id: "daiyu_flower",
  name: "黛玉芙蓉魂",
  character: "林黛玉",
  level: 0,              // 0-5 覺醒等級
  growth: 0,             // 當前成長值
  growthToNext: 100,     // 升到下一級所需成長值
  seasonalGrowth: {      // 四季成長倍率（可選）
    spring: 1.2,
    summer: 1.0,
    autumn: 0.8,
    winter: 0.6
  },
  statePath: null,       // 成長路線（MVP 可選）
  quality: "normal"      // 品質（MVP 可簡化）
}
```

#### 🛤️ 多路線培育（進階玩法，MVP 階段可簡化）

**設計理念**：通過不同的記憶收集順序和花魂培養方式，影響終局敘事

**路線差異**（未來擴展）：
- 不同外觀與特效
- 不同終局敘事描述
- 不同 buff 傾向

**MVP 階段**：簡化為單一成長路線，專注於核心玩法循環

#### 🌟 花魂品質系統（可選）

| 品質 | 說明 | 獲得方式 | 優先級 |
|------|------|----------|--------|
| 普通 | 基礎花魂 | 種植後自動獲得 | ⭐⭐⭐ 高 |
| 稀有 | 特殊培育 | 完成特定記憶故事線 | ⭐ 低 |
| 絕俗 | 完美培育 | 完成特定故事線 | ⭐ 低 |

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 黛玉花魂一名
- [ ] 等級系統（0-5 級）
- [ ] 成長值系統
- [ ] **澆灌機制**（消耗絳珠→增加成長值）：核心策略機制
- [ ] **絳珠消耗差異化**：不同等級需要不同數量的絳珠（創造分配策略）
  - 例如：Lv0→Lv1 需要 10 絳珠，Lv1→Lv2 需要 20 絳珠，依此類推
- [ ] **解鎖機制**：花魂達到特定等級後解鎖新內容（強化分配價值）
  - 例如：Lv3 解鎖新記憶搜尋區域，Lv5 解鎖終局條件
- [ ] 四季倍率簡化版（可選）

**可延後**：
- 多角色花魂（寶釵、湘雲、探春）
- 完整多路線培育系統
- 品質系統與視覺差異化
- 路線分支與外觀變化
- 花魂成長效率差異化（不同花魂需要不同數量的絳珠）

---

### 5.4 記憶與連鎖劇情系統 ⭐⭐⭐

> **核心機制**：收集記憶碎片，完成故事線，豐富大觀園的「美好生活」記憶

#### 📖 記憶故事線

**結構設計**：

| 元素 | 說明 | 範例 |
|------|------|------|
| **storyLineId** | 故事線標識 | `daiyu_main`（黛玉主線） |
| **orderIndex** | 記憶順序 | 1, 2, 3... |
| **記憶段落** | 3-5 段為一條線 | 初入榮府 → 被拒門外 → 葬花 |

**MVP 故事線範例**（黛玉主線）：

| 順序 | 記憶名稱 | 場景 | 解鎖條件 | 獎勵 |
|------|----------|------|----------|------|
| 1 | 初入榮府 | 第 3 回 | **讀完第 3 回** | 絳珠 × 10 |
| 2 | 被拒門外 | 第 5 回 | 完成記憶 1 + **讀完第 5 回** | 絳珠 × 8 |
| 3 | 葬花吟 | 第 27 回 | 完成記憶 2 + **讀完第 27 回** | 絳珠 × 15 |

**核心設計**：每個記憶都對應特定回目，必須讀完該回目才能解鎖記憶，形成「閱讀→解鎖→遊戲」的循環。

#### 💎 記憶碎片系統

**屬性結構**：

```javascript
{
  id: "memory_daiyu_001",
  storyLineId: "daiyu_main",
  orderIndex: 1,
  name: "初入榮府",
  type: "pearl",
  relatedCharacter: "林黛玉",
  relatedScene: "榮國府",
  relatedChapter: 3,  // 對應第 3 回
  readingRequired: true,  // 需要讀完對應回目才能解鎖
  readingCompleted: false,  // 是否已完成閱讀
  unlocked: false,
  text: "原文摘錄...",
  pearlReward: 10  // 完成此記憶後獲得的絳珠數量
}
```

#### 🌫️ 記憶呈現層次（敘事概念，非獨立系統）

- 在文案與美術上，可以用「特別清晰」「略帶模糊」「只剩意象」等語言或畫面，表現不同程度的記憶印象。
- 不需要實作獨立的「清晰度數值」與衰退機制，實際終局評價只依據：  
  - 解鎖了多少段記憶  
  - 完成了哪些故事線  
  - 園林與花魂的重建完整度

#### 🎁 記憶完成獎勵

**完成單個記憶片段**：
- 獲得絳珠（根據記憶重要性，數量 5-15 顆）
- 解鎖下一段記憶（如果是故事線中的記憶）

**完成整條故事線**：
- 獲得額外絳珠獎勵（如完成整條線額外 +20 絳珠）
- 大量靈石（可選）
- 彈出小演出（插畫 + 短文本）

**UI 呈現**：
- 線索條顯示進度
- 章節點標記已解鎖/未解鎖

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 1 條黛玉記憶故事線（3-5 段）
- [ ] 記憶碎片基礎結構（包含 `pearlReward`、`relatedChapter`、`readingRequired` 屬性）
- [ ] **閱讀解鎖機制**：記憶需要讀完對應回目並通過答題才能解鎖（核心教育目標）
- [ ] **記憶發現機制**：在 UI 中顯示未解鎖記憶列表（不再消耗行動力「搜尋」）
- [ ] **記憶解鎖條件**：某些記憶需要完成前置記憶 + 讀完對應回目才能解鎖
- [ ] 完成記憶獲得絳珠獎勵（統一資源）
- [ ] **絳珠獎勵差異化**：根據記憶重要性給予不同數量的絳珠（5-15 顆）
- [ ] 簡單的記憶顯示 UI（包含閱讀狀態提示）

**可延後**：
- 多條記憶線（寶釵線、湘雲線等）
- 複雜 bonus 設計（連鎖獎勵）
- 記憶演出動畫
- 更豐富的記憶呈現方式（如更多插畫、過場）
- 記憶搜尋的失敗風險（搜尋可能一無所獲）

---

### 5.5 閱讀與遊戲同步系統 ⭐⭐⭐

> **核心教育目標**：促進學生閱讀紅樓夢前八十回，閱讀與遊戲同步進行

#### 📚 閱讀解鎖機制

**核心設計理念**：
- **閱讀驅動遊戲**：讀完對應回目才能解鎖相關記憶
- **同步進行**：不是先讀完再玩，而是邊讀邊玩，讀完某回後立即解鎖對應記憶
- **自然引導**：遊戲中提示需要閱讀哪些回目，引導學生按順序閱讀

**解鎖流程**（閱讀驗證與記憶解鎖結合，不消耗行動力）：
```
1. 遊戲中發現記憶（顯示「第 X 回的記憶」）
2. 點擊記憶，系統提出關鍵情節選擇題（對應第 X 回）
3. 玩家答題（不消耗行動力）：
   - 答對 → 記憶解鎖 + 直接獲得資源（絳珠或靈石）
   - 答錯 → 可以重試（無次數限制，但有資源懲罰）
4. 記憶解鎖後，可以查看記憶內容
5. 使用獲得的資源進行行動（消耗行動力）：
   - 使用靈石解鎖建築（不消耗行動力）
   - 種植花魂（消耗 2 點行動力）
   - 澆灌花魂（消耗 1 點行動力，消耗絳珠）
```

**設計理念**：
- **閱讀系統隱性化**：不在遊戲中明確告訴玩家「去閱讀」，而是通過題目自然引導
- **題目提示回目**：題目會顯示「第 X 回的記憶」，玩家為了答對題目，自然會去閱讀
- **答對即解鎖**：答對選擇題後，記憶立即解鎖並獲得資源，不需要額外的「搜尋記憶」步驟
- **驗證失敗處理**：
  - 答錯可以重試（無次數限制，但有資源懲罰）
  - 答錯後提示「建議查看第 X 回原文」
  - 答錯次數越多，最終獲得的資源越少（見「綜合懲罰機制」）

#### 🔓 閱讀驗證機制

**設計原則**：必須驗證讀過，但避免「考試感」，保持遊戲趣味性

**核心問題**：如何確保玩家真的讀了某一回？

**驗證方案**（必須實施，不能只是「標記」）：

**方案 A：關鍵情節選擇題**（推薦 MVP）
- **機制**：讀完某回後，提出 1-2 個簡單選擇題
- **問題設計**：
  - 問題必須讀過才能回答（如「這回中黛玉做了什麼？」）
  - 提供 3-4 個選項，其中只有 1 個正確
  - 問題不難，只要讀過就能答對
  - 避免過於細節的問題（如「第幾頁第幾行」）
- **答題規則**：
  - 答對才能解鎖記憶
  - 答錯可以重試（無次數限制，但有資源懲罰）
  - 答錯後提示「建議重新閱讀該回」
  - 答錯次數越多，最終獲得的資源越少（見「綜合懲罰機制」）
- **題庫設計**：
  - 每回準備 3-5 個問題，每次隨機選 1-2 個
  - 避免玩家互相抄答案
  - 問題覆蓋該回的主要情節

**方案 B：關鍵詞填空**（可選）
- **機制**：提供該回的一段關鍵原文，挖空 1-2 個關鍵詞
- **設計**：關鍵詞必須是該回的重要情節（如人物名字、關鍵動作）
- **優點**：更直接驗證是否讀過原文
- **缺點**：可能增加「做題感」

**方案 C：情節排序**（可選，未來擴展）
- **機制**：提供該回的幾個情節片段，讓玩家按順序排列
- **設計**：只要讀過就能知道順序
- **優點**：驗證對情節的理解，而不只是記憶

**推薦實施方案**：

**MVP 階段**：使用「關鍵情節選擇題」
- 每回準備 3-5 個問題
- 每次隨機選 1-2 個問題
- 答對才能解鎖記憶
- 答錯可以重試（無次數限制，但有資源懲罰）
- 時間限制：每個題目 30 秒，超過時間限制無法獲得資源
- 答錯懲罰：答錯次數越多，資源獲得比例越低（見「綜合懲罰機制」）

**問題範例**（第 3 回「初入榮府」）：
- 「這回中，黛玉初入榮國府時，第一個見到的主要人物是誰？」
  - A. 賈寶玉  B. 王夫人  C. 賈母  D. 賈政
  - 正確答案：C（賈母）
- 「黛玉在榮國府的第一餐，因為什麼原因沒有吃飽？」
  - A. 飯菜不合口味  B. 不敢多吃  C. 身體不適  D. 被其他人打擾
  - 正確答案：B（不敢多吃，因為要觀察其他人的習慣）

**問題設計原則**：
- **覆蓋主要情節**：問題必須涉及該回的重要情節，不能是無關緊要的細節
- **讀過就能答對**：只要認真讀過該回，就能答對，不需要背誦
- **避免過於細節**：不問「第幾頁第幾行」「某句話的具體字詞」等
- **選項設計**：錯誤選項要合理（不能太明顯），但正確答案要明確

**實施細節**：
- **問題數據庫**：
  - 每回準備 3-5 個問題，存儲在 `data/reading-questions.json`
  - 問題結構：`{ chapter: 3, questions: [{ question: "...", options: [...], correct: 0 }] }`
  - MVP 階段：先為前 20 回準備問題（覆蓋主要記憶解鎖）
- **隨機抽取**：
  - 每次驗證時從該回的題庫中隨機選 1-2 題
  - 避免玩家互相抄答案（每次問題可能不同）
- **容錯機制**：
  - 允許答錯重試（無次數限制，但有資源懲罰）
  - 答錯後提示「建議重新閱讀該回」
  - 答錯次數越多，最終獲得的資源越少（見下方「綜合懲罰機制」）
- **UI 設計**（隱性化設計）：
  - 問題以對話框形式呈現，避免「考試感」
  - 使用遊戲內角色（如「警幻仙子」）提問，增加沉浸感
  - 題目標註「第 X 回的記憶」，不強調「閱讀」，只提示回目
  - 答對後有慶祝動畫，直接獲得資源（絳珠或靈石）
  - 答錯有鼓勵提示，建議「查看第 X 回原文」（不強制）
  - 顯示答題時間倒計時和答錯次數（讓玩家了解資源懲罰情況）

#### ⚖️ 綜合懲罰機制（答錯重試 + 時間限制）

**設計目標**：
- **防止盲目猜測**：答錯可以重試，但每次答錯都會降低資源獲得比例
- **防止上網找答案**：設置時間限制，超過時間限制無法獲得資源
- **鼓勵認真閱讀**：快速且正確地答題可以獲得更多資源

**核心機制**：

**1. 時間限制懲罰**（防止上網找答案）：
- **每個題目時間限制**：30 秒
- **超過時間限制**：該題目無法獲得資源（0%）
- **時間獎勵/懲罰**：
  - 快速答對（10 秒內）：時間獎勵 +10%
  - 正常答對（10-30 秒）：100% 資源
  - 接近時間限制（25-30 秒）：時間懲罰 -10%

**2. 答錯重試懲罰**（防止盲目猜測）：
- **答錯次數影響資源獲得比例**：
  - 第一次答對：100% 資源
  - 答錯 1 次後答對：80% 資源
  - 答錯 2 次後答對：60% 資源
  - 答錯 3 次後答對：40% 資源
  - 答錯 4 次及以上：20% 資源（最低）

**3. 組合效果**（時間 + 答錯次數疊加）：
- **時間獎勵/懲罰和答錯懲罰疊加計算**
- **計算公式**：最終資源 = 基礎資源 × 時間係數 × 答錯係數
- **時間係數**：
  - 10 秒內答對：1.1（+10%）
  - 10-25 秒答對：1.0（100%）
  - 25-30 秒答對：0.9（-10%）
  - 超過 30 秒：0（無法獲得資源）
- **答錯係數**：
  - 第一次答對：1.0（100%）
  - 答錯 1 次後答對：0.8（80%）
  - 答錯 2 次後答對：0.6（60%）
  - 答錯 3 次後答對：0.4（40%）
  - 答錯 4 次及以上：0.2（20%，最低）

**示例計算**：

**示例 1：快速且正確地答題**（理想情況）
- 回憶：「第 3 回的記憶 - 黛玉初入榮府」
- 基礎資源：絳珠 15 顆
- 答題時間：8 秒（快速）
- 答錯次數：0 次（第一次答對）
- **最終資源**：15 × 1.1（時間獎勵）× 1.0（無答錯）= **16.5 顆（四捨五入：17 顆）**

**示例 2：正常答題**
- 回憶：「第 3 回的記憶 - 黛玉初入榮府」
- 基礎資源：絳珠 15 顆
- 答題時間：18 秒（正常）
- 答錯次數：0 次（第一次答對）
- **最終資源**：15 × 1.0（正常時間）× 1.0（無答錯）= **15 顆**

**示例 3：答錯 1 次後答對**
- 回憶：「第 3 回的記憶 - 黛玉初入榮府」
- 基礎資源：絳珠 15 顆
- 答題時間：20 秒（正常）
- 答錯次數：1 次（答錯 1 次後答對）
- **最終資源**：15 × 1.0（正常時間）× 0.8（答錯 1 次）= **12 顆**

**示例 4：答錯多次 + 接近時間限制**
- 回憶：「第 3 回的記憶 - 黛玉初入榮府」
- 基礎資源：絳珠 15 顆
- 答題時間：28 秒（接近時間限制）
- 答錯次數：2 次（答錯 2 次後答對）
- **最終資源**：15 × 0.9（時間懲罰）× 0.6（答錯 2 次）= **8.1 顆（四捨五入：8 顆）**

**示例 5：答錯多次 + 超過時間限制**
- 回憶：「第 3 回的記憶 - 黛玉初入榮府」
- 基礎資源：絳珠 15 顆
- 答題時間：35 秒（超過時間限制）
- 答錯次數：3 次（答錯 3 次後答對）
- **最終資源**：15 × 0（超過時間限制）× 0.4（答錯 3 次）= **0 顆（無法獲得資源）**

**示例 6：答錯 4 次以上（最低資源）**
- 回憶：「第 3 回的記憶 - 黛玉初入榮府」
- 基礎資源：絳珠 15 顆
- 答題時間：30 秒（正常）
- 答錯次數：4 次（答錯 4 次後答對）
- **最終資源**：15 × 1.0（正常時間）× 0.2（答錯 4 次，最低）= **3 顆**

**多題目記憶的資源計算**：
- **每個記憶固定包含 3 個題目**（固定設計，見「回目、回憶、題目與節氣的對應關係」）
- **每個題目獨立計算資源**（時間和答錯次數獨立計算）
- **最終資源 = 所有題目的資源總和**
- **必須連續答對**：玩家需要連續答對所有 3 個題目才能解鎖回憶
- **示例**：
  - 記憶：「第 3 回的記憶 - 黛玉初入榮府」（3 個題目）
  - 題目 1：快速答對（8 秒，0 次答錯）→ 5.5 顆（基礎 5 顆 × 1.1 × 1.0）
  - 題目 2：正常答對（18 秒，0 次答錯）→ 5 顆（基礎 5 顆 × 1.0 × 1.0）
  - 題目 3：答錯 1 次後答對（20 秒，1 次答錯）→ 4 顆（基礎 5 顆 × 1.0 × 0.8）
  - **最終資源**：5.5 + 5 + 4 = **14.5 顆（四捨五入：15 顆）**

**UI 呈現**：
- **答題界面顯示**：
  - 時間倒計時：顯示剩餘時間（如「剩餘 25 秒」）
  - 答錯次數：顯示當前答錯次數（如「已答錯 1 次」）
  - 資源預覽：顯示當前答對可獲得的資源（根據時間和答錯次數計算）
- **答錯提示**：
  - 答錯時顯示：「答錯了，建議重新閱讀第 X 回原文」
  - 顯示當前資源獲得比例（如「當前可獲得 80% 資源」）
- **答對提示**：
  - 答對時顯示獲得的資源（根據時間和答錯次數計算）
  - 顯示資源獲得比例（如「快速答對，獲得 110% 資源！」）

**設計原則**：
- **防止盲目猜測**：答錯次數越多，資源越少，即使最終答對也無法獲得全額資源
- **防止上網找答案**：時間限制迫使玩家快速答題，無法從容查找答案
- **鼓勵認真閱讀**：快速且正確地答題可以獲得最多資源
- **保留最低資源**：即使答錯多次，也能獲得最低 20% 資源（不至於完全沒有）
- **時間和答錯疊加**：兩個懲罰機制疊加，更有效地防止作弊行為

**實際挑戰與解決方案**：

**挑戰 1：問題數據庫的建立**
- **解決方案**：
  - MVP 階段：先為前 20 回準備問題（覆蓋主要記憶）
  - 後續擴展：逐步為所有 80 回準備問題
  - 可以請教師或紅樓夢專家協助準備問題

**挑戰 2：玩家可能查答案或盲目猜測**
- **解決方案**：
  - **時間限制**：每個題目 30 秒時間限制，超過時間限制無法獲得資源，迫使玩家快速答題，無法從容查找答案
  - **答錯懲罰**：答錯次數越多，資源獲得比例越低（最低 20%），即使最終答對也無法獲得全額資源，有效防止盲目猜測
  - **組合懲罰**：時間限制和答錯懲罰疊加，更有效地防止作弊行為
  - **隨機選題**：每次驗證問題不同，降低查答案的可行性
  - **問題設計**：選擇該回的主要情節，而非細節，查答案也需要讀過才能理解

**挑戰 3：問題難度平衡**
- **解決方案**：
  - 測試階段：讓學生試答，調整問題難度
  - 問題分級：可以設計「簡單」「中等」兩級，隨機抽取
  - 教師反饋：根據實際使用情況調整問題

#### 📅 回目、回憶、題目與節氣的對應關係

**核心設計理念**：
- **多個節氣完成一回**：讀完一回後，可以推進多個節氣，讓玩家讀完一回後有足夠的遊戲進程可以推進
- **題目數量不等於回憶數量**：每個回憶包含固定數量的題目，但一個回目可能有多個回憶
- **回憶數量靈活調整**：根據實際章回內容，有的回目回憶多，有的回目回憶少甚至沒有
- **連續分佈設計**：一個回目的所有回憶要連續分佈在多個節氣中，玩家需要連續答對所有題目才能解鎖所有回憶

**對應關係設計**：

**1. 回憶與題目的對應**：
- **每個回憶包含 3 個題目**（固定數量）
- **題目數量 ≠ 回憶數量**：一個回目可能有多個回憶，每個回憶都有 3 個題目
- **示例**：
  - 第 3 回有 2 個回憶：
    - 回憶 1：「黛玉初入榮府」（3 個題目）
    - 回憶 2：「黛玉初見寶玉」（3 個題目）
  - 第 5 回有 1 個回憶：
    - 回憶 1：「寶黛初見」（3 個題目）

**2. 回目與回憶數量的對應**：
- **回憶數量根據實際章回內容而定**：
  - **寶黛出場頻繁的回目**：回憶數量較多（2-4 個回憶）
  - **寶黛出場較少的回目**：回憶數量較少（1-2 個回憶）
  - **沒有寶黛出場的回目**：
    - 如果是關於大觀園中其他住戶的（如寶釵、湘雲、探春等），也融入遊戲中
    - 這些回目可能對應其他角色的記憶（如寶釵相關記憶、湘雲相關記憶等）
    - 回憶數量根據實際內容而定（1-2 個回憶）
  - **完全無關的回目**：可能沒有回憶（但這種情況較少）

**3. 回目與節氣的對應**：
- **一個回目對應多個節氣**：讀完一回後，可以推進多個節氣
- **每個節氣解鎖一個回憶**：每個節氣回答 3 個題目，解鎖一個回憶
- **連續分佈**：一個回目的所有回憶要連續分佈在多個節氣中
- **示例**：
  - 第 3 回有 2 個回憶：
    - 節氣 1：回答回憶 1 的 3 個題目 → 解鎖回憶 1 → 獲得資源
    - 節氣 2：回答回憶 2 的 3 個題目 → 解鎖回憶 2 → 獲得資源
  - 第 5 回有 1 個回憶：
    - 節氣 3：回答回憶 1 的 3 個題目 → 解鎖回憶 1 → 獲得資源

**4. 題目與節氣的對應**：
- **每個節氣回答 3 個題目**（對應一個回憶）
- **題目必須連續答對**：玩家需要連續答對所有 3 個題目才能解鎖回憶
- **限時完成**：每個題目有 30 秒時間限制，超過時間限制無法獲得資源
- **答錯可以重試**：答錯可以重試，但每次答錯都會降低資源獲得比例（見「綜合懲罰機制」）

**5. 完整流程示例**：

**示例 1：第 3 回（2 個回憶，6 個題目）**

**節氣 1：解鎖回憶 1「黛玉初入榮府」**
- 玩家點擊記憶：「第 3 回的記憶 - 黛玉初入榮府」
- 系統顯示 3 個題目（對應第 3 回）：
  - 題目 1：「這回中，黛玉初入榮國府時，第一個見到的主要人物是誰？」（30 秒限制）
  - 題目 2：「黛玉在榮國府的第一餐，因為什麼原因沒有吃飽？」（30 秒限制）
  - 題目 3：「這回中，黛玉初見寶玉時，寶玉說了什麼話？」（30 秒限制）
- 玩家連續答對所有 3 個題目（每個題目獨立計算資源）
- **解鎖回憶 1** → 獲得資源（絳珠或靈石，根據記憶類型）
- 玩家使用資源進行行動（消耗行動力）

**節氣 2：解鎖回憶 2「黛玉初見寶玉」**
- 玩家點擊記憶：「第 3 回的記憶 - 黛玉初見寶玉」
- 系統顯示 3 個題目（對應第 3 回）：
  - 題目 1：「這回中，寶玉初見黛玉時，說了什麼話？」（30 秒限制）
  - 題目 2：「這回中，寶玉因為什麼原因要摔玉？」（30 秒限制）
  - 題目 3：「這回中，黛玉初見寶玉後，有什麼反應？」（30 秒限制）
- 玩家連續答對所有 3 個題目（每個題目獨立計算資源）
- **解鎖回憶 2** → 獲得資源（絳珠或靈石，根據記憶類型）
- 玩家使用資源進行行動（消耗行動力）

**結果**：讀完第 3 回後，玩家可以推進 2 個節氣，解鎖 2 個回憶，獲得 2 次資源獎勵。

**示例 2：第 5 回（1 個回憶，3 個題目）**

**節氣 3：解鎖回憶 1「寶黛初見」**
- 玩家點擊記憶：「第 5 回的記憶 - 寶黛初見」
- 系統顯示 3 個題目（對應第 5 回）：
  - 題目 1：「這回中，寶玉做了什麼夢？」（30 秒限制）
  - 題目 2：「這回中，黛玉在夢中看到了什麼？」（30 秒限制）
  - 題目 3：「這回中，寶黛初見時，有什麼特殊的情節？」（30 秒限制）
- 玩家連續答對所有 3 個題目（每個題目獨立計算資源）
- **解鎖回憶 1** → 獲得資源（絳珠或靈石，根據記憶類型）
- 玩家使用資源進行行動（消耗行動力）

**結果**：讀完第 5 回後，玩家可以推進 1 個節氣，解鎖 1 個回憶，獲得 1 次資源獎勵。

**6. 設計原則**：

**節奏平衡**：
- **讀完一回可以推進多個節氣**：讓玩家讀完一回後有足夠的遊戲進程可以推進
- **每個節氣都有進展**：每個節氣都包含「答題解鎖記憶」和「使用資源進行行動」兩個部分
- **避免節奏過慢**：如果讀完一回只能推進一個節氣，節奏太慢，玩家會失去興趣

**回憶數量靈活調整**：
- **根據實際內容**：有的回目回憶多（2-4 個），有的回目回憶少（1 個）
- **覆蓋範圍**：通過寶黛相關記憶，可以覆蓋前八十回的大部分回目
- **部分回目處理**：沒有寶黛出場的回目，如果是關於大觀園中其他住戶的，也融入遊戲中

**連續答題設計**：
- **必須連續答對**：玩家需要連續答對所有 3 個題目才能解鎖回憶
- **限時完成**：每個題目有 30 秒時間限制，超過時間限制無法獲得資源
- **防止亂猜**：答錯可以重試，但每次答錯都會降低資源獲得比例，防止玩家盲目猜測

**資源獲得平衡**：
- **每個題目獨立計算資源**：時間和答錯次數獨立計算
- **最終資源 = 所有題目的資源總和**：3 個題目的資源相加，得到最終資源
- **資源類型根據記憶類型**：pearl 類記憶獲得絳珠，stone 類記憶獲得靈石

**7. 數據結構設計**：

**回目數據結構**：
```javascript
{
  chapter: 3,
  title: "賈雨村夤緣復舊職 林黛玉拋父進京都",
  memories: [
    {
      id: "memory_daiyu_001",
      name: "黛玉初入榮府",
      type: "pearl",
      questions: [
        { question: "...", options: [...], correct: 0 },
        { question: "...", options: [...], correct: 1 },
        { question: "...", options: [...], correct: 2 }
      ],
      baseReward: 10  // 基礎資源（絳珠或靈石）
    },
    {
      id: "memory_daiyu_002",
      name: "黛玉初見寶玉",
      type: "pearl",
      questions: [
        { question: "...", options: [...], correct: 0 },
        { question: "...", options: [...], correct: 1 },
        { question: "...", options: [...], correct: 2 }
      ],
      baseReward: 12  // 基礎資源（絳珠或靈石）
    }
  ],
  seasonalCycles: 2  // 這個回目對應 2 個節氣
}
```

**節氣與回憶的對應**：
```javascript
{
  seasonalCycle: 1,
  chapter: 3,
  memoryId: "memory_daiyu_001",
  questions: [0, 1, 2],  // 對應回憶中的 3 個題目索引
  completed: false,
  unlocked: false
}
```

**8. 實作優先級**：

**MVP 必做**：
- [ ] 回目與回憶的對應關係數據結構
- [ ] 每個回憶包含 3 個題目的設計
- [ ] 每個節氣解鎖一個回憶的機制
- [ ] 一個回目的回憶連續分佈在多個節氣中的邏輯
- [ ] 連續答對 3 個題目才能解鎖回憶的驗證機制

**可延後**：
- 回憶數量的動態調整（根據實際內容）
- 更複雜的回憶分佈邏輯（如跨回目的回憶）
- 回憶解鎖的動畫和演出效果

#### 📖 閱讀進度系統

**閱讀進度追蹤**：
- 顯示已讀完的回目（1-80 回）
- 顯示當前可解鎖的記憶（需要讀完哪些回目）
- 顯示閱讀進度百分比（如「已讀完 15/80 回」）
- **覆蓋範圍說明**：由於大部分回目都有寶黛出場，通過寶黛相關記憶可以覆蓋前八十回的大部分回目
- **部分回目處理**：沒有寶黛出場的回目，如果是關於大觀園中的住戶的，也融入遊戲中，對應其他角色的記憶

**記憶引導**（隱性化設計）：
- **記憶顯示**：顯示記憶列表，每個記憶標註「第 X 回的記憶」
- **記憶狀態**：標記哪些記憶已解鎖（綠色）、哪些未解鎖（灰色）
- **題目提示**：點擊未解鎖記憶時，顯示選擇題，題目會標註「第 X 回的記憶」
- **自然引導**：玩家為了答對題目，自然會去閱讀對應回目

**UI 呈現**（隱性化設計）：
- 記憶列表：顯示所有記憶，標註「第 X 回的記憶」
- 記憶狀態：已解鎖（綠色）、未解鎖（灰色）
- 答題界面：點擊記憶後，顯示選擇題，標註「第 X 回的記憶」
- 閱讀進度：顯示已解鎖記憶對應的回目數（隱性顯示，不強調「閱讀」）

#### 🎁 閱讀獎勵機制

**閱讀完成獎勵**：
- **解鎖記憶**：讀完某回後，對應記憶解鎖（主要獎勵）
- **額外絳珠**：讀完某回後，可能獲得少量額外絳珠（如 +5 顆）
- **閱讀里程碑**：讀完每 10 回（如 10、20、30 回）獲得額外獎勵

**閱讀進度獎勵**：
- 讀完前 20 回：解鎖「初入大觀園」相關記憶
- 讀完前 40 回：解鎖「詩社活動」相關記憶
- 讀完前 60 回：解鎖「園中日常」相關記憶
- 讀完前 80 回：解鎖所有記憶，獲得「完整閱讀」成就

#### 🔄 閱讀與遊戲循環

**核心循環**（每個節氣都包含完整的行動循環）：
```
1. 遊戲中發現記憶（顯示「第 X 回的記憶 - 回憶名稱」）
2. 點擊記憶，回答 3 個選擇題（不消耗行動力，每個題目 30 秒限制）
   - 必須連續答對所有 3 個題目才能解鎖回憶
   - 如果答錯，可以重試（但有資源懲罰）
   - 如果答錯，玩家自然會去閱讀第 X 回（遊戲外完成）
3. 答對所有 3 個題目後，回憶解鎖 + 直接獲得資源（絳珠或靈石）
   - 每個題目獨立計算資源（時間和答錯次數影響資源獲得）
   - 最終資源 = 所有題目的資源總和
4. 使用資源進行行動（消耗行動力）：
   - 使用靈石解鎖建築（不消耗行動力）
   - 種植花魂（消耗 2 點行動力）
   - 澆灌花魂（消耗 1 點行動力，消耗絳珠）
5. 花魂升級 → 解鎖新記憶
6. 發現新記憶（第 X 回的其他回憶，或第 Y 回的記憶）→ 回到步驟 1
```

**多個節氣完成一回的設計**：
- **一個回目對應多個節氣**：讀完一回後，可以推進多個節氣（根據該回目的回憶數量）
- **每個節氣解鎖一個回憶**：每個節氣回答 3 個題目，解鎖一個回憶
- **連續分佈**：一個回目的所有回憶要連續分佈在多個節氣中
- **示例**：
  - 第 3 回有 2 個回憶：
    - 節氣 1：回答回憶 1 的 3 個題目 → 解鎖回憶 1 → 獲得資源 → 使用資源行動
    - 節氣 2：回答回憶 2 的 3 個題目 → 解鎖回憶 2 → 獲得資源 → 使用資源行動
  - 第 5 回有 1 個回憶：
    - 節氣 3：回答回憶 1 的 3 個題目 → 解鎖回憶 1 → 獲得資源 → 使用資源行動

**同步設計**：
- **不是一次性讀完**：不需要先讀完 80 回再玩遊戲
- **邊讀邊玩**：每個節氣都包含「答題解鎖記憶」和「使用資源進行行動」兩個部分
- **自然推進**：遊戲進度引導閱讀順序，閱讀進度推動遊戲進度
- **完整循環**：每個節氣都應該包含完整的行動循環，不只是答題解鎖記憶
- **節奏平衡**：讀完一回後可以推進多個節氣，讓玩家有足夠的遊戲進程可以推進

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] **記憶解鎖機制**：記憶通過答題解鎖，答對後直接獲得資源（不消耗行動力）
- [ ] **回目、回憶、題目與節氣的對應關係**（見「回目、回憶、題目與節氣的對應關係」）
  - [ ] 回目與回憶的對應關係數據結構
  - [ ] 每個回憶固定包含 3 個題目的設計
  - [ ] 每個節氣解鎖一個回憶的機制
  - [ ] 一個回目的回憶連續分佈在多個節氣中的邏輯
  - [ ] 回憶數量根據實際章回內容靈活調整（有的回目回憶多，有的回目回憶少）
- [ ] **答題驗證系統**：關鍵情節選擇題驗證（必須實施）
  - [ ] 問題數據庫：為每個回憶準備 3 個問題（固定數量）
  - [ ] 答題 UI：選擇題界面，標註「第 X 回的記憶」（隱性化設計）
  - [ ] 連續答題機制：必須連續答對所有 3 個題目才能解鎖回憶
  - [ ] 答對即解鎖：答對所有 3 個題目後，回憶解鎖 + 直接獲得資源（絳珠或靈石）
  - [ ] 容錯機制：允許答錯重試（無次數限制，但有資源懲罰）
  - [ ] 時間限制系統：每個題目 30 秒時間限制，超過時間限制無法獲得資源
  - [ ] 答錯懲罰系統：答錯次數越多，資源獲得比例越低（見「綜合懲罰機制」）
  - [ ] 資源計算系統：每個題目獨立計算資源，最終資源 = 所有題目的資源總和
  - [ ] 答題不消耗行動力：答題解鎖記憶不消耗行動力，可以隨時進行
- [ ] **記憶屬性擴展**：添加 `relatedChapter`、`unlocked`、`verified` 屬性
- [ ] **記憶列表 UI**：顯示所有記憶，標註「第 X 回的記憶」（隱性化設計）
- [ ] **資源獲得動畫**：答對後顯示獲得資源的動畫（絳珠或靈石）
- [ ] **行動力系統**：確保每個節氣都包含「答題解鎖記憶」和「使用資源進行行動」兩個部分
  - [ ] 答題解鎖記憶不消耗行動力
  - [ ] 使用資源進行行動消耗行動力（種植花魂 2 點，澆灌花魂 1 點）
  - [ ] 解鎖建築不消耗行動力（只消耗靈石）

**可延後**：
- 關鍵詞填空驗證
- 情節排序驗證
- 閱讀時間記錄
- 閱讀里程碑獎勵
- 閱讀進度獎勵系統
- 更複雜的閱讀引導系統

---

### 5.6 節氣行動力系統 ⭐⭐⭐

> **核心機制**：以節氣為行動單位，控制「重建大觀園」的節奏

**基本設定**：

| 參數 | 說明 |
|------|------|
| **行動點** | 每節氣固定 4 點（可調整） |
| **節氣週期** | 24 節氣 = 1 輪迴 |
| **用完規則** | 行動點耗盡 → 自動進入下一節氣 |

**行動消耗表**：

| 行動 | 消耗點數 | MVP 優先級 |
|------|---------|-----------|
| 澆灌花魂 | 1 點 | ⭐⭐⭐ 高 |
| 種植新花魂 | 2 點 | ⭐⭐⭐ 高 |
| 修復建築 | 2-3 點 | ⭐ 低（可省略） |
| 觸發事件 | 視情況 | ⭐⭐ 中 |

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 24 節氣序列系統
- [ ] 每節氣固定 4 點行動力
- [ ] 行動消耗機制（澆灌、種植、搜尋）
- [ ] 行動點耗盡自動進入下一節氣
- [ ] 節氣顯示 UI

**可延後**：
- 建築維修行動

---

### 5.6 鳥靈（丫鬟）系統 ⭐

> **定位**：園林輔助系統，營造「有花有鳥」的生動氛圍

#### 🐦 系統概念

**角色定位**：溫柔的園丁助手，不是玩家風格分析器

**功能**：
- 自動輔助養護花魂
- 提供被動加成
- 增加園林生動感

#### 🦜 鳥靈角色設計

| 鳥靈 | 對應丫鬟 | 解鎖條件 | 被動效果 | 優先級 |
|------|----------|----------|----------|--------|
| 喜鵲 | 襲人 | 黛玉花魂 Lv3 + 瀟湘館解鎖 | 每 3 節氣自動養護附近花魂 | ⭐⭐ 中 |
| 金翅雀 | 晴雯 | 完成晴雯記憶（撕扇/補裳） | 風雨節氣提高花魂抗損度 | ⭐ 低 |
| 畫眉 | 平兒 | 特定記憶完成 | 絳珠利用效率提升 | ⭐ 低 |

#### 🎨 UI 呈現

**視覺效果**：
- 小鳥圖示在園中飛行或停棲
- 花魂/院子詳情顯示守護鳥靈
- 簡短效果描述（不暴露數值）

**解鎖方式**：
- 特定花魂等級
- 相關記憶完成度
- 不依賴玩家操作風格統計

---

#### ✅ 實作優先級總結

**MVP 可省略**：
- 整個鳥靈系統可延後至第二版

**如需嘗試**：
- [ ] 實作襲人（喜鵲）一隻
- [ ] 提供固定小幅養護效果
- [ ] 簡單圖示與描述

**可延後**：
- 多隻鳥靈設計
- 複雜被動效果
- 鳥靈台詞與演出
- 鳥靈動畫效果

---

### 5.7 節氣事件與結局設計 ⭐⭐

> **核心目標**：每 1-2 節氣都有小進展，保持遊戲節奏

#### 🎪 節氣事件系統

**固定節氣事件**：

| 節氣 | 事件內容 | 效果 | 優先級 |
|------|----------|------|--------|
| 清明 | 葬花相關記憶 | 獲得額外絳珠、黛玉花魂成長加強 | ⭐⭐⭐ 高 |
| 端午 | 節日氛圍 | 特殊記憶觸發 | ⭐ 低 |
| 中秋 | 湘雲詩酒 | 湘雲相關事件易觸發 | ⭐ 低 |

**隨機小事件**（可選）：
- 某花魂心情突然變化
- 鳥靈出手幫忙
- 意外發現記憶碎片

#### 🎁 碎片獎勵節奏

**設計目標**：「再玩一個節氣」的吸引力

**節奏設計**：
- 每 1-2 節氣：小獎勵（絳珠、記憶碎片）
- 每 5-6 節氣：中獎勵（記憶解鎖、花魂升級）
- 每輪迴（24 節氣）：大獎勵（輪迴總結）

#### 🏆 結局系統

**刻石終局**（達成或接近「全收集」時觸發）：

| 元素 | 內容 | AI 參與 |
|------|------|---------|
| **大觀園記憶總結** | 概述哪些院落/季節/人物的記憶最豐富、最常被重溫 | 可選 |
| **命運小故事** | 本局的《石頭記》版本（以你重建的大觀園為藍本） | ✅ DeepSeek |
| **閱讀建議** | 推薦對應的原文回目 | ✅ DeepSeek |

**終局示例**（本地版本）：

```
你的《石頭記》已經鐫刻完成。

瀟湘館的竹影最為清晰，
葬花吟的每一字都深深印在石上。
黛玉芙蓉魂達到 5 級「絕俗」品質。

建議閱讀：
- 第 27 回《葬花吟》
- 第 34 回《題帕定情》
```

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 1-2 個固定節氣事件（如清明葬花）
- [ ] 簡單終局總結（本地文本，不依賴 AI）
- [ ] 基本獎勵節奏（每節氣小獎勵）

**可延後**：
- 隨機事件系統
- 複雜事件組合
- DeepSeek 生成的命運小故事
- 多樣化結局描述
- 閱讀建議系統

---

## 六、DeepSeek AI 應用 ⭐

> **設計原則**：成本可控、低頻調用、文學風味調味料（非核心）

### 🤖 AI 應用場景

| 應用 | 時機 | 輸入 | 輸出 | 頻率 | 優先級 |
|------|------|------|------|------|--------|
| **輪迴批語** | 每輪結束 | 花魂成長/絳珠使用/建築狀態 | 1-2 句警幻/脂硯齋批語 | 每輪 1 次 | ⭐ 低 |
| **記憶補光** | 首次獲得記憶 | 記憶場景與角色 | 1 句人物心聲/旁白 | 每記憶 1 次（快取） | ⭐ 低 |
| **角色對話** | 玩家主動觸發 | 玩家一句話 | 黛玉口吻回應 | 可選功能 | ⭐ 低 |
| **終局敘事** | 遊戲結束 | 整局摘要 | 120-200 字命運故事 | 終局 1 次 | ⭐ 低 |

### 💰 成本控制策略

- ✅ 結果快取（記憶補光只生成一次）
- ✅ 低頻調用（輪迴批語每 24 節氣一次）
- ✅ 字數限制（批語 1-2 句，敘事 200 字內）
- ✅ 預設關閉（角色對話作為可選功能）

### ⚙️ 實作策略

**MVP 階段**：
- 完全不接入 AI，先用本地文本模擬
- 確保遊戲核心玩法完整

**第二版**：
- 實作 1-2 個 AI 功能（如終局敘事）
- 測試成本與效果

---

## 七、UI／視覺風格與技術選型

### 🎨 視覺風格

**設計方向**：簡化中國風插畫 + 淡彩水墨 + 扁平色塊

| 元素 | 風格說明 |
|------|----------|
| **背景** | 米色紙張質感、保留留白 |
| **色彩** | 柔和淡彩、不過度飽和 |
| **地圖** | 格子佈局，每格是精美插畫卡 |
| **圖標** | 自製 SVG，簡化剪影風格 |

### 🖼️ 資源設計

| 資源 | 視覺呈現 | 格式 |
|------|----------|------|
| 靈石 | 小玉石/寶玉圖標 | SVG |
| 絳珠 | 發光淚滴 | SVG |
| 記憶碎片 | 書卷/刻石片 | SVG |
| 花魂 | 簡化花朵剪影 | PNG/WebP |
| 建築 | 精美插畫卡片 | PNG/WebP |
| 鳥靈 | 小鳥剪影 | SVG |

### 💻 技術選型

**第一版（MVP）**：

```
技術棧：
- HTML5
- CSS3（可配合 Tailwind）
- 原生 JavaScript（ES 模組）

模組結構：
├── js/
│   ├── state.js        # 遊戲狀態管理
│   ├── garden.js       # 園林地圖
│   ├── flowers.js      # 花魂系統
│   ├── tears.js        # 絳珠系統
│   ├── memories.js     # 記憶系統
│   ├── events.js       # 事件系統
│   ├── ui.js           # UI 組件
│   └── ai.js           # AI 整合（可選）
```

**未來擴展**：

| 平台 | 打包方案 |
|------|----------|
| iOS App | Capacitor / Cordova |
| Android App | Capacitor / Cordova |
| 桌面 / Steam | Electron / Tauri |

**框架策略**：
- ❌ 暫不引入 Vue/React
- ✅ 先確保遊戲設計清晰
- ✅ 代碼結構模組化
- ✅ 未來可按需重構

---

## 八、分階段開發路線

### 📅 階段一：核心骨架（1-2 週）

**目標**：建立可運行的基礎框架

**任務清單**：
- [ ] 專案結構搭建
- [ ] 基礎 UI（狀態列、地圖、面板）
- [ ] 節氣循環系統
- [ ] 行動力消耗機制
- [ ] 基本資源顯示（靈石、絳珠總量）
- [ ] 建築解鎖框架

### 📅 階段二：黛玉線單局 MVP（2-3 週）

**目標**：完成一個「以解鎖瀟湘館與黛玉花魂為終局目標」的單局小型完整版本

**任務清單**：
- [ ] 瀟湘館解鎖（靈石消耗）
- [ ] 黛玉花魂種植與顯示
- [ ] 絳珠總量系統實作
- [ ] 澆灌機制（消耗絳珠 → 增加成長值）
- [ ] 1 條黛玉記憶故事線（3-5 段）
- [ ] 記憶收集與獎勵
- [ ] 花魂升級系統
- [ ] 簡單終局總結

**里程碑**：不使用 AI，核心遊戲循環可玩

### 📅 階段三：系統擴充（3-4 週）

**目標**：豐富遊戲內容與深度

**任務清單**：
- [ ] 園林佈局 buff
- [ ] 鳥靈系統（可選）
- [ ] 節氣事件（清明葬花等）
- [ ] 碎片獎勵節奏優化
- [ ] DeepSeek AI 整合（輪迴批語、終局敘事）
- [ ] 音效與動畫

### 📅 階段四：角色擴展（4-6 週）

**目標**：多角色與多結局

**任務清單**：
- [ ] 寶釵花魂與蘅蕪苑
- [ ] 湘雲花魂與海棠社
- [ ] 探春花魂與秋爽齋
- [ ] 更多記憶故事線
- [ ] 多樣化結局
- [ ] UI 打磨與優化
- [ ] 音效與配樂
- [ ] 教學引導

---

## 九、待解決的設計問題

### ❓ 需要明確的設計決策

1. **黛玉故事線內容**  
   優先定稿哪一條作為第一條完整實作？
   - 建議：初入榮府 → 葬花吟 → 題帕定情

2. **絳珠類型數量**  
   具體類型與數量要多少才不會太複雜？
   - 建議：MVP 2-3 類，完整版 6-8 類

3. **地圖尺寸**  
   格子地圖定在幾乘幾？是否要分「東園／西園」？
   - 建議：MVP 5×5，完整版可擴展到 7×7

4. **AI 整合時機**  
   第一版是否完全不接入 DeepSeek？
   - 建議：MVP 完全不接入，先做純本地 demo

5. **教學模式**  
   需要哪些教師專用開關？
   - 快速跳過劇情
   - 顯示回目索引
   - 查看原文對照

---

## 📋 附錄：快速開發檢查表

### ✅ MVP 核心功能（必做）

```
系統層面：
□ 節氣循環（24 節氣）
□ 行動力系統（每節氣 4 點）
□ 資源系統（絳珠、靈石）

地圖與建築：
□ 5×5 格子地圖
□ 瀟湘館解鎖與顯示

花魂系統：
□ 黛玉花魂種植
□ 等級系統（0-5 級）
□ 成長值與升級

絳珠系統：
□ 絳珠總量系統（統一資源）
□ 澆灌消耗絳珠
□ 通過記憶收集獲得絳珠

記憶系統：
□ 1 條故事線（3-5 段）
□ 記憶解鎖
□ 完成獎勵

UI 界面：
□ 狀態列（資源顯示）
□ 地圖視圖
□ 花魂詳情面板
□ 記憶列表

結局系統：
□ 簡單終局總結（本地文本）
```

### 🔄 進階功能（可延後）

```
□ 多角色花魂（寶釵、湘雲、探春）
□ 鳥靈系統
□ DeepSeek AI 整合
□ 複雜佈局 buff
□ 隨機事件系統
□ 音效與動畫
□ 教學引導
```

---

**文檔版本**：v1.0  
**最後更新**：2025-11-15  
**維護者**：太虛幻境開發團隊  
