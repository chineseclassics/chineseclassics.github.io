# 紅樓夢境 - 文字敘事遊戲

一個以《紅樓夢》為背景的互動式文字冒險遊戲，採用模組化架構設計。

## 📁 專案結構

```
honglou/
├── stonestory.html           # 原始整合版本
├── stonestory_refactored.html # 重構版本（推薦使用）
├── styles.css               # 樣式文件
├── game.js                  # 遊戲邏輯
├── scenes.json              # 場景數據
└── README.md               # 說明文件
```

## 🚀 如何執行

### 方法一：使用重構版本（推薦）
直接在瀏覽器中打開 `stonestory_refactored.html`

### 方法二：使用原始版本
直接在瀏覽器中打開 `stonestory.html`

### 方法三：本地服務器運行（推薦用於開發）
```bash
# 使用 Python 3
python -m http.server 8000

# 使用 Node.js (需要安裝 http-server)
npx http-server

# 使用 PHP
php -S localhost:8000
```

然後在瀏覽器中訪問 `http://localhost:8000/stonestory_refactored.html`

## 🎮 遊戲特色

### 核心系統
- **角色屬性系統**：情感、洞察、禮儀、詩文四個維度
- **人物關係系統**：與林黛玉、薛寶釵、王熙鳳的動態關係
- **意象系統**：思想內閣，記錄玩家的心路歷程
- **物品系統**：通靈寶玉等道具的互動

### 多重結局系統
遊戲提供5種不同的結局路線，根據你的選擇和屬性值決定：

#### 🧘 **超脫紅塵結局**
- **觸發條件**：洞察 ≥ 15，情感 ≤ 3
- **結局描述**：看破紅塵，選擇出家修行，追求心靈解脫
- **特點**：放棄世俗情感，獲得內心平靜

#### 💕 **情深緣淺結局**
- **觸發條件**：與黛玉關係 ≥ 150，情感 ≥ 15
- **結局描述**：與林黛玉私奔，追求真愛
- **特點**：勇敢追求愛情，雖失去富貴但獲得真愛

#### 💍 **金玉良緣結局**
- **觸發條件**：與寶釵關係 ≥ 120，禮儀 ≥ 12
- **結局描述**：遵循家族安排與薛寶釵成婚，承擔家族責任
- **特點**：理性選擇，穩定的婚姻生活

#### 😢 **悲劇結局**
- **觸發條件**：與黛玉關係 ≤ 30，與寶釵關係 ≤ 30，禮儀 ≤ 2
- **結局描述**：因錯誤選擇而眾叛親離，最終流落街頭
- **特點**：警示錯誤選擇的後果

#### 🌟 **圓滿結局（默認）**
- **觸發條件**：未達到其他結局的特殊條件
- **結局描述**：平衡各種關係，獲得內心平和
- **特點**：中庸之道，既不完全脫離世俗也不完全沉溺其中

### 結局判定機制
- **優先級系統**：特殊結局按優先級判定（超脫紅塵 > 情深緣淺 > 金玉良緣 > 悲劇 > 圓滿）
- **觸發時機**：遊戲進行15步以上，或達到特定劇情節點，或隨機觸發
- **動態調整**：你的每個選擇都會影響屬性和關係，進而影響最終結局

## 🎯 遊戲目標

### 主要目標
- 在大觀園中的選擇將影響你與眾人的關係
- 通過收集「意象」來理解人生真諦
- 最終決定你的人生道路和結局

### 遊戲機制
- **屬性影響**：每個選擇都會改變你的情感、洞察、禮儀、詩文屬性
- **關係動態**：與主要角色的關係會根據你的行為發生變化
- **思想記錄**：重要的感悟會被記錄在思想內閣中
- **結局分支**：不同的屬性和關係組合會導向不同的人生結局

## 💡 遊戲技巧

### 追求不同結局的策略
1. **超脫紅塵結局**：多選擇靜思、讀書、哲學思考的選項
2. **情深緣淺結局**：專注與黛玉的互動，選擇浪漫和情感的選項
3. **金玉良緣結局**：注重禮儀，與寶釵建立良好關係
4. **避免悲劇結局**：平衡各方關係，避免極端選擇

### 屬性建議
- **情感**：影響愛情結局，高情感有利於與黛玉的關係
- **洞察**：影響哲學思考，高洞察可能導向出家結局
- **禮儀**：影響社會地位，高禮儀有利於與寶釵的關係
- **詩文**：影響文學交流，提升與文人的互動品質

## 🔧 技術特點

### 模組化設計
- **場景分離**：`scenes.json` 包含所有遊戲場景和劇情
- **樣式分離**：`styles.css` 包含所有視覺樣式
- **邏輯分離**：`game.js` 包含遊戲核心邏輯

### 用戶體驗
- **響應式設計**：支持手機、平板、電腦多端
- **深色模式**：自動檢測系統主題偏好
- **打字機效果**：增強文字呈現的沉浸感
- **中文字體優化**：楷體、宋體等傳統字體
- **平滑動畫**：場景切換和UI元素的動畫效果

### 錯誤處理
- **場景映射**：缺失場景自動映射到相似場景
- **優雅降級**：資源載入失敗時的備用方案
- **狀態保護**：防止在文字動畫播放時的誤操作

## 🎨 視覺設計

- **主色調**：紅樓夢特色的紅色和玉色
- **排版**：傳統中文排版，楷體標題，宋體正文
- **卡片式布局**：清晰的信息層次
- **漸變背景**：柔和的視覺效果

## 📚 文學價值

這個遊戲不僅是娛樂作品，也是對《紅樓夢》文學作品的數字化重新詮釋：

- **原著精神**：保持了原著中對人性、情感、社會的深刻思考
- **人物塑造**：忠實還原了黛玉的才情、寶釵的賢德、熙鳳的精明
- **文學語言**：使用符合古典文學風格的語言描述
- **哲學思辨**：通過通靈寶玉的設定探討虛幻與真實的關係

## 🔄 版本更新

### v2.0 (當前版本)
- ✅ 完整的多重結局系統
- ✅ 動態屬性和關係系統
- ✅ 思想內閣意象收集
- ✅ 模組化代碼結構
- ✅ 改進的用戶界面
- ✅ 場景映射錯誤處理

### v1.0 (原始版本)
- ✅ 基本遊戲流程
- ✅ 場景文本顯示
- ✅ 選擇分支系統

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request 來改進這個遊戲：

- 添加新的場景和劇情分支
- 優化用戶體驗和視覺設計
- 修復 Bug 和性能問題
- 翻譯成其他語言

## 📜 許可證

本專案採用 MIT 許可證 - 詳見 LICENSE 文件

---

*願你在這紅樓夢境中，體會到人生的種種可能，感受古典文學的不朽魅力。* 