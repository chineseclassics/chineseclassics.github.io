# Implementation Tasks

## Phase 1: 核心骨架（1-2 週）✅ 已完成

### 1. 專案結構搭建 ✅
- [x] 建立模組化 JS 結構（state.js, memories.js, seasons.js, garden.js, flowers.js, ui.js）
- [x] 建立 CSS 模組結構（main.css, components.css）
- [x] 建立數據文件結構（data/memories.json, data/buildings.json, data/flowers.json）
- [x] 驗證：所有文件路徑正確，模組可以正常導入

### 2. 遊戲狀態管理（state.js）✅
- [x] 實現遊戲狀態結構（節氣、行動力、資源、記憶、花魂）
- [x] 實現狀態更新函數
- [x] 實現狀態持久化（localStorage）
- [x] 驗證：狀態可以正確保存和恢復

### 3. 節氣循環系統（seasons.js）✅
- [x] 實現 24 節氣序列
- [x] 實現行動力系統（每節氣 4 點）
- [x] 實現節氣推進機制
- [x] 實現行動力消耗驗證
- [x] 驗證：節氣可以正確推進，行動力正確重置和消耗

### 4. 基礎 UI（ui.js）✅
- [x] 實現狀態列 UI（節氣、行動力、資源顯示）
- [x] 實現記憶列表 UI（顯示未解鎖/已解鎖記憶）
- [x] 實現基本行動按鈕
- [x] 驗證：UI 正確顯示遊戲狀態，按鈕狀態正確更新

## Phase 2: 記憶與資源系統（2-3 週）✅ 已完成

### 5. 記憶數據結構（memories.js）✅
- [x] 實現記憶數據結構（id, name, chapter, type, questions, baseReward）
- [x] 實現記憶列表管理
- [x] 實現記憶解鎖狀態管理
- [x] 驗證：記憶數據結構正確，可以正確查詢和更新

### 6. 答題系統（memories.js）✅
- [x] 實現答題界面 UI（選擇題、計時器、答錯次數顯示）
- [x] 實現 30 秒時間限制機制
- [x] 實現答錯重試機制（保持答錯次數）
- [x] 實現資源獎勵計算（時間係數 × 答錯係數）
- [x] 驗證：答題流程完整，時間限制和懲罰機制正確

### 7. 資源系統（state.js）✅
- [x] 實現絳珠系統（獲取、消耗、顯示）
- [x] 實現靈石系統（獲取、消耗、顯示）
- [x] 實現資源獲取邏輯（答題完成後獲得資源）
- [x] 驗證：資源正確獲取和消耗，UI 正確更新

### 8. 問題數據庫準備 ✅
- [x] 為前 20 回準備問題數據庫（每回 3-5 個問題）
- [x] 實現問題數據結構（question, options, correct）
- [x] 實現問題隨機抽取機制（每個回憶固定 3 題）
- [x] 驗證：問題數據正確，可以正確抽取和顯示

## Phase 3: 園林與花魂系統（2-3 週）

### 9. 園林建築系統（garden.js）
- [ ] 實現 5×5 格子地圖結構
- [ ] 實現建築數據結構（id, name, unlocked, position）
- [ ] 實現建築解鎖邏輯（消耗靈石）
- [ ] 實現瀟湘館解鎖邏輯（需要 20 靈石）
- [ ] 驗證：建築可以正確解鎖，地圖正確顯示

### 10. 花魂系統（flowers.js）
- [ ] 實現花魂數據結構（id, name, level, growth, growthToNext）
- [ ] 實現花魂種植機制（消耗 2 點行動力）
- [ ] 實現花魂等級系統（0-5 級）
- [ ] 實現成長值系統
- [ ] 實現澆灌機制（消耗 1 點行動力，消耗絳珠）
- [ ] 驗證：花魂可以正確種植、澆灌、升級

### 11. 花魂 UI（ui.js）
- [ ] 實現花魂詳情面板
- [ ] 實現花魂等級和成長值顯示
- [ ] 實現澆灌按鈕和資源消耗顯示
- [ ] 驗證：花魂 UI 正確顯示狀態，操作正確執行

## Phase 4: 整合與優化（1-2 週）

### 12. 遊戲循環整合
- [ ] 整合所有系統（記憶、資源、建築、花魂）
- [ ] 實現完整的遊戲循環（答題解鎖 → 獲得資源 → 使用資源行動）
- [ ] 實現節氣推進條件檢查（所有記憶解鎖 + 行動力耗盡）
- [ ] 驗證：完整遊戲循環可以正常運行

### 13. UI 優化
- [ ] 優化答題界面（顯示時間倒計時、答錯次數、資源預覽）
- [ ] 優化記憶列表（顯示記憶狀態、回目標註）
- [ ] 優化行動面板（按鈕狀態、資源需求顯示）
- [ ] 實現遊戲日誌系統
- [ ] 驗證：UI 清晰易用，所有狀態正確顯示

### 14. 數據驗證與平衡
- [ ] 驗證資源獲取和消耗的平衡
- [ ] 驗證行動力消耗的合理性
- [ ] 驗證答題難度和時間限制的合理性
- [ ] 根據測試結果調整數值
- [ ] 驗證：遊戲平衡性合理，玩家體驗良好

### 15. 文檔與測試
- [ ] 更新 README.md（遊戲說明、開發指南）
- [ ] 創建開發文檔（模組說明、API 文檔）
- [ ] 進行完整遊戲流程測試（2-3 個節氣）
- [ ] 修復發現的問題
- [ ] 驗證：文檔完整，遊戲可以完整運行

## Validation Checklist
- [x] 所有模組可以正常導入和運行 ✅ Phase 1
- [x] 遊戲狀態可以正確保存和恢復 ✅ Phase 1
- [x] 節氣循環正常工作 ✅ Phase 1
- [x] 答題系統完整且正確 ✅ Phase 2
- [x] 資源系統正確獲取和消耗 ✅ Phase 2
- [ ] 建築系統正確解鎖 ⏳ Phase 3
- [ ] 花魂系統正確種植、澆灌、升級 ⏳ Phase 3
- [x] UI 正確顯示所有狀態 ✅ Phase 1-2（基礎UI + 答題UI）
- [ ] 完整遊戲循環可以運行 ⏳ Phase 4
- [x] 代碼符合項目規範（繁體中文註釋、命名規範） ✅ Phase 1-2

