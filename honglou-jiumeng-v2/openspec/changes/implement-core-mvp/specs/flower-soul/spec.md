## ADDED Requirements

### Requirement: 花魂數據結構
系統 SHALL 實現以下功能：
花魂包含等級、成長值等基本屬性。

#### Scenario: 花魂屬性
- id: 花魂唯一標識（如 "daiyu_flower"）
- name: 花魂名稱（如 "黛玉芙蓉魂"）
- character: 對應角色（如 "林黛玉"）
- level: 等級（0-5）
- growth: 當前成長值
- growthToNext: 升到下一級所需成長值
- buildingId: 所在建築 ID（如 "xiaoxiang_guan"）

#### Scenario: 花魂狀態管理
- 花魂狀態持久化保存
- 花魂狀態可以正確查詢和更新
- 花魂狀態與建築解鎖狀態關聯

### Requirement: 花魂種植機制
系統 SHALL 實現以下功能：
在解鎖的建築中種植對應的花魂。

#### Scenario: 種植條件
- 建築必須已解鎖（如瀟湘館已解鎖）
- 需要消耗 2 點行動力
- 行動力不足時，種植按鈕禁用
- 每個建築只能種植一個花魂

#### Scenario: 種植流程
- 玩家點擊「種植花魂」按鈕
- 檢查建築是否解鎖
- 檢查行動力是否足夠
- 消耗 2 點行動力
- 創建花魂實例（level: 0, growth: 0）
- 花魂狀態更新

#### Scenario: 種植成功提示
- 顯示「種植成功」提示
- 顯示花魂名稱和等級
- UI 更新顯示新種植的花魂

### Requirement: 花魂等級系統（0-5 級）
系統 SHALL 實現以下功能：
花魂有 0-5 共 6 個等級，等級提升需要達到成長值要求。

#### Scenario: 等級定義
- 等級 0：初始等級（種植後）
- 等級 1-5：通過澆灌提升
- 每個等級有對應的成長值要求
- 等級提升後，成長值重置為 0

#### Scenario: 等級顯示
- UI 顯示花魂當前等級（如 "Lv3"）
- 等級顯示清晰易讀
- 等級變化時，UI 立即更新

### Requirement: 成長值系統
系統 SHALL 實現以下功能：
花魂通過澆灌獲得成長值，成長值達到要求後等級提升。

#### Scenario: 成長值計算
- 每次澆灌增加固定成長值（如 +20）
- 成長值累積到 `growthToNext` 時，等級提升
- 等級提升後，成長值重置為 0
- `growthToNext` 可以根據等級調整（如 Lv0→Lv1 需要 100，Lv1→Lv2 需要 150）

#### Scenario: 成長值顯示
- UI 顯示當前成長值和所需成長值（如 "80 / 100"）
- 成長值以進度條或數字形式顯示
- 成長值變化時，UI 立即更新

### Requirement: 澆灌機制（消耗絳珠）
系統 SHALL 實現以下功能：
使用絳珠澆灌花魂，增加成長值，推動等級提升。

#### Scenario: 澆灌條件
- 花魂必須已種植
- 需要消耗 1 點行動力
- 需要消耗絳珠（如 5 顆）
- 行動力或絳珠不足時，澆灌按鈕禁用

#### Scenario: 澆灌流程
- 玩家點擊「澆灌花魂」按鈕
- 檢查行動力是否足夠
- 檢查絳珠是否足夠
- 消耗 1 點行動力
- 消耗絳珠（如 5 顆）
- 增加成長值（如 +20）
- 檢查是否達到升級條件
- 如果達到，等級提升

#### Scenario: 澆灌成功提示
- 顯示「澆灌成功」提示
- 顯示增加的成長值
- 如果等級提升，顯示「等級提升！」提示
- UI 更新顯示新的成長值和等級

### Requirement: 等級提升效果
系統 SHALL 實現以下功能：
花魂等級提升後，解鎖新內容或獲得新能力。

#### Scenario: 等級提升觸發
- 成長值達到 `growthToNext` 時，等級自動提升
- 等級提升後，成長值重置為 0
- `growthToNext` 可以根據新等級調整

#### Scenario: 等級提升效果（MVP 階段簡化）
- 等級提升後，可以解鎖新記憶（可選）
- 等級提升後，可以解鎖新建築（可選）
- 等級提升後，顯示等級提升動畫或提示
- UI 更新顯示新等級

### Requirement: 花魂 UI 顯示
系統 SHALL 實現以下功能：
花魂狀態清晰顯示在 UI 中。

#### Scenario: 花魂列表顯示
- 顯示所有已種植的花魂
- 顯示花魂名稱、等級、成長值
- 顯示花魂所在建築

#### Scenario: 花魂詳情面板
- 點擊花魂可以查看詳情（可選）
- 顯示花魂所有屬性
- 顯示澆灌按鈕和資源需求
- 顯示等級和成長值進度

#### Scenario: 花魂操作按鈕
- 種植按鈕：顯示在建築詳情中
- 澆灌按鈕：顯示在花魂詳情中
- 按鈕狀態根據條件啟用/禁用
- 按鈕顯示所需資源和行動力

