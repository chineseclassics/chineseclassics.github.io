## ADDED Requirements

### Requirement: 記憶發現機制
系統 SHALL 實現以下功能：
遊戲中顯示未解鎖的記憶列表，玩家可以隨時點擊記憶進行答題解鎖。

#### Scenario: 記憶列表顯示
- UI 顯示所有記憶，包括已解鎖和未解鎖的記憶
- 每個記憶標註「第 X 回的記憶 - 回憶名稱」
- 未解鎖記憶顯示為灰色，已解鎖記憶顯示為綠色
- 記憶列表始終可見，不消耗行動力即可查看

#### Scenario: 記憶狀態管理
- 記憶有 `unlocked` 屬性標記是否已解鎖
- 未解鎖記憶可以點擊，進入答題界面
- 已解鎖記憶顯示「已解鎖」標籤，不可再次答題
- 記憶解鎖狀態持久化保存

### Requirement: 答題解鎖機制（不消耗行動力）
系統 SHALL 實現以下功能：
記憶通過答題解鎖，答題過程不消耗行動力，這是核心設計原則。

#### Scenario: 答題觸發
- 玩家點擊未解鎖記憶，直接進入答題界面
- 不檢查行動力，不消耗行動力
- 答題界面以模態框形式顯示
- 答題可以隨時進行，不受行動力限制

#### Scenario: 答題流程
- 每個記憶包含固定 3 個題目
- 玩家需要連續答對所有 3 個題目才能解鎖記憶
- 每個題目獨立計算資源獎勵
- 答對所有題目後，記憶解鎖並獲得資源

### Requirement: 答題界面 UI
系統 SHALL 實現以下功能：
答題界面清晰顯示題目、選項、時間限制和答錯次數。

#### Scenario: 題目顯示
- 顯示當前題目序號（如「題目 1 / 3」）
- 顯示題目文字（繁體中文）
- 顯示 4 個選項（A、B、C、D）
- 題目標註「第 X 回的記憶」，不強調「閱讀」

#### Scenario: 時間限制顯示
- 顯示剩餘時間倒計時（如「剩餘 25 秒」）
- 時間倒計時實時更新（每秒更新）
- 時間為 0 時，該題目無法獲得資源
- 時間顯示清晰易讀

#### Scenario: 答錯次數顯示
- 顯示當前題目的答錯次數（如「已答錯 1 次」）
- 答錯次數實時更新
- 每個題目的答錯次數獨立計算
- 答錯次數影響資源獲得比例

#### Scenario: 資源預覽顯示
- 顯示當前答對可獲得的資源（根據時間和答錯次數計算）
- 資源預覽實時更新
- 顯示資源獲得比例（如「當前可獲得 80% 資源」）

### Requirement: 時間限制機制（30 秒）
系統 SHALL 實現以下功能：
每個題目有 30 秒時間限制，超過時間限制無法獲得資源。

#### Scenario: 時間限制執行
- 每個題目開始時，計時器從 30 秒開始倒計時
- 計時器每秒更新一次
- 時間為 0 時，自動判定為超時
- 超時後，該題目無法獲得資源（0%）

#### Scenario: 時間獎勵/懲罰
- 10 秒內答對：時間係數 1.1（+10% 獎勵）
- 10-25 秒答對：時間係數 1.0（100% 資源）
- 25-30 秒答對：時間係數 0.9（-10% 懲罰）
- 超過 30 秒：時間係數 0（無法獲得資源）

#### Scenario: 時間記錄
- 記錄每個題目的答題時間
- 答題時間用於計算資源獎勵
- 時間記錄精確到秒

### Requirement: 答錯重試機制
系統 SHALL 實現以下功能：
答錯可以重試，但每次答錯都會降低資源獲得比例。

#### Scenario: 答錯處理
- 答錯時顯示錯誤提示：「答錯了，建議重新閱讀第 X 回原文」
- 顯示當前資源獲得比例（如「當前可獲得 80% 資源」）
- 答錯次數 +1
- 可以立即重試（不等待）

#### Scenario: 答錯次數累積
- 每個題目的答錯次數獨立計算
- 答錯次數影響該題目的資源獲得比例
- 答錯係數：
  - 0 次答錯：1.0（100%）
  - 1 次答錯：0.8（80%）
  - 2 次答錯：0.6（60%）
  - 3 次答錯：0.4（40%）
  - 4+ 次答錯：0.2（20%，最低）

#### Scenario: 重試機制
- 答錯後可以立即重試
- 重新顯示題目和選項
- 計時器重置為 30 秒
- 答錯次數保持累積

### Requirement: 資源獎勵計算
系統 SHALL 實現以下功能：
每個題目的資源獎勵根據時間和答錯次數獨立計算。

#### Scenario: 資源計算公式
- 每個題目的基礎資源 = 記憶基礎資源 / 3
- 時間係數根據答題時間計算（見時間限制機制）
- 答錯係數根據答錯次數計算（見答錯重試機制）
- 最終資源 = 基礎資源 × 時間係數 × 答錯係數

#### Scenario: 多題目資源總和
- 每個記憶包含 3 個題目
- 每個題目獨立計算資源
- 最終資源 = 所有題目的資源總和
- 資源四捨五入到整數

#### Scenario: 資源類型分配
- pearl 類記憶 → 獲得絳珠
- stone 類記憶 → 獲得靈石
- 資源類型根據記憶類型確定

### Requirement: 記憶解鎖完成
系統 SHALL 實現以下功能：
完成所有題目後，記憶解鎖並獲得資源。

#### Scenario: 記憶解鎖
- 連續答對所有 3 個題目後，記憶解鎖
- 記憶狀態更新為 `unlocked = true`
- 記憶列表更新顯示（已解鎖記憶變為綠色）

#### Scenario: 資源獲得
- 計算所有題目的資源總和
- 根據記憶類型添加對應資源（絳珠或靈石）
- 顯示資源獲得動畫或提示
- UI 更新顯示新資源數量

#### Scenario: 答題完成提示
- 顯示「記憶解鎖成功！」提示
- 顯示獲得的資源數量和類型
- 顯示資源獲得比例（如「快速答對，獲得 110% 資源！」）
- 提示清晰易懂

### Requirement: 問題數據庫
系統 SHALL 實現以下功能：
為每個回憶準備 3 個問題，問題必須讀過原文才能答對。

#### Scenario: 問題數據結構
- 每個問題包含：question（問題文字）、options（4 個選項）、correct（正確答案索引）
- 問題存儲在 `data/questions.json` 或記憶數據結構中
- 問題使用繁體中文
- 問題覆蓋該回的主要情節

#### Scenario: 問題設計原則
- 問題必須讀過才能回答（不能靠常識猜測）
- 問題不難，只要讀過就能答對
- 避免過於細節的問題（如「第幾頁第幾行」）
- 錯誤選項要合理（不能太明顯）

#### Scenario: 問題數據準備
- MVP 階段：為前 20 回準備問題（覆蓋主要記憶解鎖）
- 每個回憶固定 3 個問題
- 問題可以從該回的題庫中選取（未來擴展）

