# 《紅樓舊夢》遊戲設計文檔（v1.0）

> **文檔目的**：完整設計說明，供實作與迭代使用（含 AI 協助開發）  
> **來源依據**：整合 `DESIGN.md`、`GAMEPLAY_AI_PLAN.md`、`LIN_DAIYU_TEARS.md`、`STORY_THEME_DESIGN.md`

---

## 📖 快速索引

| 章節 | 內容 | 實作優先級 |
|------|------|-----------|
| [一、核心概念](#一核心概念30-秒速覽) | 遊戲核心設計理念 | ⭐⭐⭐ 必讀 |
| [二、MVP 實作範圍](#二mvp-實作範圍第一版要做什麼) | 第一版開發清單 | ⭐⭐⭐ 必讀 |
| [三、世界觀與主題](#三世界觀與主題) | 故事背景與敘事框架 | ⭐⭐ 重要 |
| [四、核心玩法](#四核心玩法與遊戲循環) | 遊戲循環設計 | ⭐⭐⭐ 必讀 |
| [五、系統設計](#五系統設計詳解) | 各系統詳細規格 | ⭐⭐⭐ 必讀 |
| [六、AI 應用](#六deepseek-ai-應用) | DeepSeek 整合方案 | ⭐ 可延後 |
| [七、視覺與技術](#七ui視覺風格與技術選型) | UI 與技術選型 | ⭐⭐ 重要 |
| [八、開發路線](#八分階段開發路線) | 分階段實作計劃 | ⭐⭐⭐ 必讀 |

---

## 一、核心概念（30 秒速覽）

### 🎮 遊戲本質

**一句話描述**：  
玩家作為石頭（寶玉），用林黛玉的絳珠淚灌溉大觀園花魂，重建園中景致與眾人的美好記憶。

### 🎯 六大設計支柱

| 支柱 | 說明 |
|------|------|
| **世界觀** | 正文結束後，石頭在太虛幻境版大觀園中整理記憶 |
| **主題** | 記憶 vs 時間（不是改命，不是比較人物高下） |
| **範圍** | 只取前八十回，以大觀園內情節為主 |
| **核心資源** | 只有林黛玉的絳珠淚可澆灌所有花魂 |
| **核心玩法** | 節氣行動力＋花魂養成（建築與鳥靈為輔） |
| **教學理念** | 不出現做題 UI，知識藏在遊戲機制中 |

### 📦 九大系統

1. **資源系統** - 絳珠淚（核心）、靈石（次要）、記憶碎片
2. **園林建築** - 5×5 格子地圖，院子解鎖花魂
3. **花魂養成** - 等級、成長路線、品質系統
4. **絳珠淚** - 多類淚水，對應黛玉不同場景
5. **記憶劇情** - 故事線、記憶碎片
6. **節氣循環** - 24 節氣行動力系統
7. **鳥靈輔助** - 丫鬟化身，被動加成
8. **事件結局** - 固定/隨機事件、刻石終局
9. **AI 調味** - 批語、補光、命運總結（可選）

---

## 二、MVP 實作範圍（第一版要做什麼）

### ✅ 必做系統（核心可玩）

| 系統 | 具體內容 | 預估工作量 |
|------|----------|-----------|
| **節氣循環** | 24 節氣序列 + 每節氣 4 點行動力 | 小 |
| **基礎資源** | 絳珠淚總量 + 2-3 種淚水類型 | 小 |
| **園林地圖** | 5×5 格子 + 瀟湘館解鎖邏輯 | 中 |
| **黛玉花魂** | 等級 0-5 + 成長值 + 澆灌機制 | 中 |
| **記憶系統** | 1 條黛玉故事線（3-5 段記憶） | 中 |
| **行動消耗** | 澆灌/種植/搜尋記憶消耗行動力 | 小 |
| **簡單終局** | 本地文本總結（不依賴 AI） | 小 |

### 🔄 可延後系統（第二版再做）

- 鳥靈系統（丫鬟輔助）
- 複雜佈局 buff（園林策略）
- 多角色花魂（寶釵、湘雲、探春）
- DeepSeek AI 整合
- 隨機事件系統

### 📋 MVP 開發檢查清單

```
□ 建立專案結構（HTML + CSS + JS 模組）
□ 實作節氣循環與行動力消耗
□ 實作絳珠淚獲取與消耗
□ 實作瀟湘館解鎖（靈石消耗）
□ 實作黛玉花魂種植與澆灌
□ 實作花魂等級與成長值顯示
□ 實作 1 條黛玉記憶故事線
□ 實作記憶碎片收集獎勵
□ 實作基本 UI（狀態列、地圖、面板）
□ 實作簡單終局總結
```

---

## 三、世界觀與主題

### 🌏 遊戲定位

**題材**：紅樓夢題材單機網頁遊戲  
**風格**：文學向、節奏溫和、寓教於樂  
**目標玩家**：
- 主要：國中/高中學生（配合教學）
- 次要：紅樓夢愛好者、園林/RPG 玩家

**教學目標**：
- 在遊戲中自然接觸原文情節與語言
- 體會「記憶 vs 時間」的主題與無常感
- 不是背情節，不是做題

**核心賣點**：
- 紅樓夢 × 大觀園建造 × 記憶養成（不是做題遊戲）
- 嚴謹對應原文的淚水/場景/詩詞
- DeepSeek 提供文學風味（批語/旁白/命運總結）

### 📍 故事框架

**時間設定**：  
正文結束後（白茫茫一片），石頭在回想大觀園記憶

**素材範圍**：  
只取前八十回，特別是**大觀園內**的情節與氛圍

**玩家身份**：  
神瑛侍者 = 賈寶玉 = 青埂峰頑石（三位一體）

**遊戲空間**：  
石頭內部的記憶空間版大觀園（所有建築/花魂/季節都是記憶投影）

### 🎭 核心主題：記憶 vs 時間

**不是**：改命、救人、比較人物高下  
**而是**：在時間抹平一切前，保留大觀園最美好的記憶與細節

**重點場景**：
- ✅ 詩社、遊園、四季景致等園內日常
- ❌ 家族興衰、後期崩壞（只作餘韻暗示）

**核心院落**：
- 瀟湘館、怡紅院、蘅蕪苑、海棠社、秋爽齋
- 詩社聚會場所、園中亭台樓閣、湖石花徑

### 📜 三幕式敘事結構

| 幕次 | 名稱 | 內容 |
|------|------|------|
| **第一幕** | 記憶甦醒 | 白茫茫之上記憶破碎，警幻仙子指引開墾初始建築（警幻仙閣、部分院落雛形） |
| **第二幕** | 記憶展開 | 園林漸成，四季流轉，詩社/遊園記憶一段段找回，花魂陸續甦醒 |
| **第三幕** | 刻石定稿 | 盡可能重建並解鎖所有院落、花魂與美好記憶，由系統依據你的收集成果刻出本局的《石頭記》版本 |

---

## 四、核心玩法與遊戲循環

### 🔄 兩層循環結構

#### 1️⃣ 節氣循環（最小單位，類似《星露谷》的一天）

```
開始節氣 → 獲得 4 點行動力 → 選擇行動 → 行動力耗盡 → 進入下一節氣
```

**可選行動**（每項消耗 1-3 點）：
- 澆灌花魂（1 點）
- 種植新花魂（2 點）
- 在園中搜尋記憶（1-2 點）
- 修復建築（2-3 點，可選）
- 觸發特殊事件（視情況）

#### 2️⃣ 全局進程（從白地到全收集）

```
白地開園 → 重建院落 → 復活花魂 → 收集大觀園記憶 → 全收集 → 刻石終局
```

**長期目標（單局遊玩）**：
1. 收集絳珠淚與靈石
2. 解鎖並重建所有重要院子（瀟湘館、蘅蕪苑、海棠社、秋爽齋等）
3. 復活並培養所有花魂（黛玉、寶釵、湘雲、探春…）
4. 收集並解鎖所有「大觀園美好生活」相關記憶碎片與故事線
5. 盡量在地圖上鋪滿充滿生氣的建築與花木
6. 達成「幾乎全收集」或「全收集」後進入刻石終局，由系統總結本局《石頭記》

---

## 五、系統設計詳解

> **閱讀提示**：每個系統包含「功能說明」和「實作優先級」  
> **MVP 重點**：資源系統、園林建築、花魂養成、絳珠淚、記憶劇情、節氣循環

### 5.1 資源系統 ⭐⭐⭐

> **核心原則**：只有林黛玉的絳珠淚可澆灌所有花魂；靈石僅用於解鎖院子  
> **世界觀補充**：絳珠淚來自石頭對黛玉的既有記憶，一開始就可以少量存在，並不依賴瀟湘館建成或黛玉花魂完全復活

#### 💧 絳珠淚（核心資源）

**定位**：唯一的花魂澆灌資源

| 項目 | 說明 |
|------|------|
| **來源** | 黛玉哭泣場景記憶、重溫記憶時的淚痕 |
| **用途** | ① 澆灌所有花魂<br>② 觸發/強化記憶事件<br>③ 特殊 buff（與季節/位置共鳴） |
| **類型數量** | 8-12 類（MVP 先做 2-3 類） |

**淚水類型一覽**（依 `LIN_DAIYU_TEARS.md`）：

| 類型 | 場景 | MVP 優先級 |
|------|------|-----------|
| 初到賈府的孤弱淚 | 初入榮府、寄人籬下 | ⭐⭐⭐ 高 |
| 葬花身世之淚 | 葬花吟、春殘花落 | ⭐⭐⭐ 高 |
| 醋意與誤會之淚 | 寶黛爭吵、小性兒 | ⭐⭐ 中 |
| 題帕定情之淚 | 收題詩舊帕、心意相通 | ⭐⭐ 中 |
| 秋夜病中孤寂之淚 | 秋窗風雨、病榻獨吟 | ⭐ 低 |
| 愛中驚懼試探之淚 | 試探寶玉、患得患失 | ⭐ 低 |
| 焚稿淚盡之境 | 焚稿、臨終（第 80 回前後） | ⭐ 低 |

**每種淚需定義**：
- 名稱與場景描述（1-2 句）
- 原文摘錄（1-2 句）
- 遊戲效果（對不同花魂/季節的差異）

#### 🪨 靈石（次要資源）

**定位**：解鎖代幣，不用於日常維護

| 項目 | 說明 |
|------|------|
| **來源** | 石類記憶、任務/事件獎勵 |
| **用途** | ① 解鎖院子（瀟湘館、蘅蕪苑等）<br>② 一次性園景升級/裝飾（可選） |
| **不用於** | 日常建築維修（避免「刷石頭」玩法） |

#### 📜 記憶碎片

**分類**：

| 類型 | 功能 | MVP 優先級 |
|------|------|-----------|
| **tear 類** | 解鎖/升級絳珠類型 | ⭐⭐⭐ 高 |
| **stone 類** | 轉為靈石或觸發敘事 | ⭐ 低 |

**屬性**：
```javascript
{
  id: "memory_001",
  storyLineId: "daiyu_main",
  orderIndex: 1,
  type: "tear",
  relatedCharacter: "林黛玉",
  relatedScene: "葬花"
}
```

#### 📊 衍生指標（敘事層面）

| 指標 | 說明 | UI 呈現 |
|------|------|---------|
| **大觀園狀態** | 建築興衰、園林是否豐盛 | 文字描述（無獨立數值） |
| **記憶豐富程度** | 解鎖多少院落/人物/事件的記憶 | 終局文字總結，不需獨立數值欄位 |

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 絳珠淚總量系統
- [ ] 2-3 種代表性淚水類型（如：孤弱淚、葬花淚）
- [ ] 基本記憶碎片結構與收集機制
- [ ] 靈石解鎖院子邏輯

**可延後**：
- 完整 8-12 種淚水類型
- 複雜的記憶分類與石類記憶
- 更豐富的終局文字總結邏輯

---

### 5.2 園林與建築系統 ⭐⭐⭐

> **核心定位**：建築是花魂解鎖門檻，不是重度維護系統

#### 🗺️ 地圖佈局

**格式**：5×5 格子地圖（可調整為其他尺寸）

| 特點 | 說明 |
|------|------|
| **視覺呈現** | 每格是精美插畫卡（非粗糙圖標） |
| **實作優勢** | 方便計算 buff 範圍、事件觸發 |
| **MVP 範圍** | 先做瀟湘館＋周邊 3-5 格 |

#### 🏛️ 建築功能

**三大作用**：

| 作用 | 說明 | 範例 |
|------|------|------|
| **解鎖花魂** | 必須先解鎖院子才能種植對應花魂 | 瀟湘館 → 黛玉花魂 |
| **氛圍營造** | 承載角色住所與性格 | 瀟湘館的竹影與水榭 |
| **輕量 buff** | 提供文字描述的小加成 | 「水邊芙蓉格外清秀」 |

**建築與花魂對應表**：

| 建築 | 花魂 | 解鎖成本 | MVP 優先級 |
|------|------|---------|-----------|
| 瀟湘館 | 黛玉（芙蓉） | 50 靈石 | ⭐⭐⭐ 高 |
| 蘅蕪苑 | 寶釵（牡丹） | 80 靈石 | ⭐ 低 |
| 海棠社 | 湘雲（海棠） | 80 靈石 | ⭐ 低 |
| 秋爽齋 | 探春（薔薇） | 80 靈石 | ⭐ 低 |

#### 🏗️ 建築屬性（簡化版）

```javascript
{
  id: "xiaoxiang_guan",
  name: "瀟湘館",
  unlocked: true,
  relatedFlower: "daiyu",
  hintBuff: "水邊芙蓉在此處似乎格外清秀",
  position: { x: 2, y: 3 }
}
```

**不包含**：
- ❌ `decayRate`（衰退率）
- ❌ 頻繁維修機制
- ❌ 複雜數值計算

#### 🌳 佈局 buff（進階玩法）

**設計理念**：第二層深度，新手可忽略

| 佈局組合 | 效果 | 優先級 |
|----------|------|--------|
| 瀟湘館＋水邊＋芙蓉 | 黛玉成長＋葬花淚效果↑ | ⭐ 低 |
| 蘅蕪苑＋整齊佈局 | 寶釵狀態穩定 | ⭐ 低 |
| 海棠社＋酒桌＋詩社 | 湘雲澆灌時額外獎勵 | ⭐ 低 |

**UI 呈現**：簡短提示語（不暴露公式）

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 5×5 格子地圖基礎框架
- [ ] 瀟湘館位置與解鎖邏輯
- [ ] 「解鎖院子 → 可種植花魂」機制
- [ ] 基本建築屬性（unlocked, relatedFlower）

**可延後**：
- 其他院子（蘅蕪苑、海棠社等）
- 佈局 buff 計算與提示
- 建築視覺差異化
- 裝飾與園景升級

---

### 5.3 花魂系統 ⭐⭐⭐

> **核心概念**：用黛玉之淚澆灌各角色的花魂，培養出不同路線與品質

#### 🌸 花魂與角色對應

| 角色 | 花魂 | MVP 優先級 |
|------|------|-----------|
| 林黛玉 | 芙蓉 | ⭐⭐⭐ 高 |
| 薛寶釵 | 牡丹 | ⭐ 低 |
| 史湘雲 | 海棠 | ⭐ 低 |
| 賈探春 | 薔薇 | ⭐ 低 |

#### 📊 花魂屬性

```javascript
{
  id: "daiyu_flower",
  name: "黛玉芙蓉魂",
  character: "林黛玉",
  level: 0,              // 0-5 覺醒等級
  growth: 0,             // 當前成長值
  growthToNext: 100,     // 升到下一級所需成長值
  seasonalGrowth: {      // 四季成長倍率
    spring: 1.2,
    summer: 1.0,
    autumn: 0.8,
    winter: 0.6
  },
  tearPreference: [      // 偏好淚水（加成）
    "葬花身世之淚",
    "孤弱之淚"
  ],
  statePath: null,       // 成長路線（MVP 可選）
  quality: "normal"      // 品質（MVP 可簡化）
}
```

#### 🛤️ 多路線培育（進階玩法）

**以黛玉花魂為範例**：

| 路線 | 培養方式 | 特點 | 終局影響 | 優先級 |
|------|----------|------|----------|--------|
| **極致悲情** | 常用葬花淚/焚稿淚 | 成長爆發 | 悲劇性敘事 | ⭐ 低 |
| **柔中帶剛** | 多用姐妹情誼/詩社記憶 | 穩定共鳴 | 溫和敘事 | ⭐ 低 |

**路線差異**：
- 不同外觀與特效
- 不同終局敘事描述
- 不同 buff 傾向

#### 🌟 花魂品質系統（可選）

| 品質 | 說明 | 獲得方式 | 優先級 |
|------|------|----------|--------|
| 普通 | 基礎花魂 | 種植後自動獲得 | ⭐⭐⭐ 高 |
| 稀有 | 特殊培育 | 特定淚水組合 | ⭐ 低 |
| 絕俗 | 完美培育 | 完成特定故事線 | ⭐ 低 |

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 黛玉花魂一名
- [ ] 等級系統（0-5 級）
- [ ] 成長值系統
- [ ] 澆灌機制（消耗淚水→增加成長值）
- [ ] 四季倍率簡化版（可選）

**可延後**：
- 多角色花魂（寶釵、湘雲、探春）
- 完整多路線培育系統
- 品質系統與視覺差異化
- 淚水偏好加成計算
- 路線分支與外觀變化

---

### 5.4 記憶與連鎖劇情系統 ⭐⭐⭐

> **核心機制**：收集記憶碎片，完成故事線，豐富大觀園的「美好生活」記憶

#### 📖 記憶故事線

**結構設計**：

| 元素 | 說明 | 範例 |
|------|------|------|
| **storyLineId** | 故事線標識 | `daiyu_main`（黛玉主線） |
| **orderIndex** | 記憶順序 | 1, 2, 3... |
| **記憶段落** | 3-5 段為一條線 | 初入榮府 → 被拒門外 → 葬花 |

**MVP 故事線範例**（黛玉主線）：

| 順序 | 記憶名稱 | 場景 | 解鎖條件 | 獎勵 |
|------|----------|------|----------|------|
| 1 | 初入榮府 | 第 3 回 | 自動解鎖 | 孤弱之淚 × 5 |
| 2 | 被拒門外 | 第 5 回 | 完成記憶 1 | 孤弱之淚 × 10 |
| 3 | 葬花吟 | 第 27 回 | 完成記憶 2 | 葬花之淚 × 15 |

#### 💎 記憶碎片系統

**屬性結構**：

```javascript
{
  id: "memory_daiyu_001",
  storyLineId: "daiyu_main",
  orderIndex: 1,
  name: "初入榮府",
  type: "tear",
  relatedCharacter: "林黛玉",
  relatedScene: "榮國府",
  unlocked: false,
  text: "原文摘錄...",
  reward: {
    tearType: "孤弱之淚",
    tearAmount: 5
  }
}
```

#### 🌫️ 記憶呈現層次（敘事概念，非獨立系統）

- 在文案與美術上，可以用「特別清晰」「略帶模糊」「只剩意象」等語言或畫面，表現不同程度的記憶印象。
- 不需要實作獨立的「清晰度數值」與衰退機制，實際終局評價只依據：  
  - 解鎖了多少段記憶  
  - 完成了哪些故事線  
  - 園林與花魂的重建完整度

#### 🎁 記憶完成獎勵

**完成單條故事線**：
- 獲得高品質絳珠淚
- 大量靈石
- 花魂成長大幅提升
- 彈出小演出（插畫 + 短文本）

**UI 呈現**：
- 線索條顯示進度
- 章節點標記已解鎖/未解鎖

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 1 條黛玉記憶故事線（3-5 段）
- [ ] 記憶碎片基礎結構
- [ ] 記憶解鎖與收集機制
- [ ] 完成記憶獲得獎勵（淚水）
- [ ] 簡單的記憶顯示 UI

**可延後**：
- 多條記憶線（寶釵線、湘雲線等）
- 複雜 bonus 設計（連鎖獎勵）
- 記憶演出動畫
- 更豐富的記憶呈現方式（如更多插畫、過場）

---

### 5.5 節氣行動力系統 ⭐⭐⭐

> **核心機制**：以節氣為行動單位，控制「重建大觀園」的節奏

**基本設定**：

| 參數 | 說明 |
|------|------|
| **行動點** | 每節氣固定 4 點（可調整） |
| **節氣週期** | 24 節氣 = 1 輪迴 |
| **用完規則** | 行動點耗盡 → 自動進入下一節氣 |

**行動消耗表**：

| 行動 | 消耗點數 | MVP 優先級 |
|------|---------|-----------|
| 澆灌花魂 | 1 點 | ⭐⭐⭐ 高 |
| 種植新花魂 | 2 點 | ⭐⭐⭐ 高 |
| 搜尋記憶 | 1-2 點 | ⭐⭐⭐ 高 |
| 修復建築 | 2-3 點 | ⭐ 低（可省略） |
| 觸發事件 | 視情況 | ⭐⭐ 中 |

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 24 節氣序列系統
- [ ] 每節氣固定 4 點行動力
- [ ] 行動消耗機制（澆灌、種植、搜尋）
- [ ] 行動點耗盡自動進入下一節氣
- [ ] 節氣顯示 UI

**可延後**：
- 建築維修行動

---

### 5.6 鳥靈（丫鬟）系統 ⭐

> **定位**：園林輔助系統，營造「有花有鳥」的生動氛圍

#### 🐦 系統概念

**角色定位**：溫柔的園丁助手，不是玩家風格分析器

**功能**：
- 自動輔助養護花魂
- 提供被動加成
- 增加園林生動感

#### 🦜 鳥靈角色設計

| 鳥靈 | 對應丫鬟 | 解鎖條件 | 被動效果 | 優先級 |
|------|----------|----------|----------|--------|
| 喜鵲 | 襲人 | 黛玉花魂 Lv3 + 瀟湘館解鎖 | 每 3 節氣自動養護附近花魂 | ⭐⭐ 中 |
| 金翅雀 | 晴雯 | 完成晴雯記憶（撕扇/補裳） | 風雨節氣提高花魂抗損度 | ⭐ 低 |
| 畫眉 | 平兒 | 特定記憶完成 | 淚水利用更均衡 | ⭐ 低 |

#### 🎨 UI 呈現

**視覺效果**：
- 小鳥圖示在園中飛行或停棲
- 花魂/院子詳情顯示守護鳥靈
- 簡短效果描述（不暴露數值）

**解鎖方式**：
- 特定花魂等級
- 相關記憶完成度
- 不依賴玩家操作風格統計

---

#### ✅ 實作優先級總結

**MVP 可省略**：
- 整個鳥靈系統可延後至第二版

**如需嘗試**：
- [ ] 實作襲人（喜鵲）一隻
- [ ] 提供固定小幅養護效果
- [ ] 簡單圖示與描述

**可延後**：
- 多隻鳥靈設計
- 複雜被動效果
- 鳥靈台詞與演出
- 鳥靈動畫效果

---

### 5.7 節氣事件與結局設計 ⭐⭐

> **核心目標**：每 1-2 節氣都有小進展，保持遊戲節奏

#### 🎪 節氣事件系統

**固定節氣事件**：

| 節氣 | 事件內容 | 效果 | 優先級 |
|------|----------|------|--------|
| 清明 | 葬花相關記憶 | 葬花淚效果↑、黛玉反應加強 | ⭐⭐⭐ 高 |
| 端午 | 節日氛圍 | 特殊記憶觸發 | ⭐ 低 |
| 中秋 | 湘雲詩酒 | 湘雲相關事件易觸發 | ⭐ 低 |

**隨機小事件**（可選）：
- 某花魂心情突然變化
- 鳥靈出手幫忙
- 意外發現記憶碎片

#### 🎁 碎片獎勵節奏

**設計目標**：「再玩一個節氣」的吸引力

**節奏設計**：
- 每 1-2 節氣：小獎勵（淚水、記憶碎片）
- 每 5-6 節氣：中獎勵（記憶解鎖、花魂升級）
- 每輪迴（24 節氣）：大獎勵（輪迴總結）

#### 🏆 結局系統

**刻石終局**（達成或接近「全收集」時觸發）：

| 元素 | 內容 | AI 參與 |
|------|------|---------|
| **大觀園記憶總結** | 概述哪些院落/季節/人物的記憶最豐富、最常被重溫 | 可選 |
| **命運小故事** | 本局的《石頭記》版本（以你重建的大觀園為藍本） | ✅ DeepSeek |
| **閱讀建議** | 推薦對應的原文回目 | ✅ DeepSeek |

**終局示例**（本地版本）：

```
你的《石頭記》已經鐫刻完成。

瀟湘館的竹影最為清晰，
葬花吟的每一字都深深印在石上。
黛玉芙蓉魂達到 5 級「絕俗」品質。

建議閱讀：
- 第 27 回《葬花吟》
- 第 34 回《題帕定情》
```

---

#### ✅ 實作優先級總結

**MVP 必做**：
- [ ] 1-2 個固定節氣事件（如清明葬花）
- [ ] 簡單終局總結（本地文本，不依賴 AI）
- [ ] 基本獎勵節奏（每節氣小獎勵）

**可延後**：
- 隨機事件系統
- 複雜事件組合
- DeepSeek 生成的命運小故事
- 多樣化結局描述
- 閱讀建議系統

---

## 六、DeepSeek AI 應用 ⭐

> **設計原則**：成本可控、低頻調用、文學風味調味料（非核心）

### 🤖 AI 應用場景

| 應用 | 時機 | 輸入 | 輸出 | 頻率 | 優先級 |
|------|------|------|------|------|--------|
| **輪迴批語** | 每輪結束 | 花魂成長/淚水使用/建築狀態 | 1-2 句警幻/脂硯齋批語 | 每輪 1 次 | ⭐ 低 |
| **記憶補光** | 首次獲得記憶 | 記憶場景與角色 | 1 句人物心聲/旁白 | 每記憶 1 次（快取） | ⭐ 低 |
| **角色對話** | 玩家主動觸發 | 玩家一句話 | 黛玉口吻回應 | 可選功能 | ⭐ 低 |
| **終局敘事** | 遊戲結束 | 整局摘要 | 120-200 字命運故事 | 終局 1 次 | ⭐ 低 |

### 💰 成本控制策略

- ✅ 結果快取（記憶補光只生成一次）
- ✅ 低頻調用（輪迴批語每 24 節氣一次）
- ✅ 字數限制（批語 1-2 句，敘事 200 字內）
- ✅ 預設關閉（角色對話作為可選功能）

### ⚙️ 實作策略

**MVP 階段**：
- 完全不接入 AI，先用本地文本模擬
- 確保遊戲核心玩法完整

**第二版**：
- 實作 1-2 個 AI 功能（如終局敘事）
- 測試成本與效果

---

## 七、UI／視覺風格與技術選型

### 🎨 視覺風格

**設計方向**：簡化中國風插畫 + 淡彩水墨 + 扁平色塊

| 元素 | 風格說明 |
|------|----------|
| **背景** | 米色紙張質感、保留留白 |
| **色彩** | 柔和淡彩、不過度飽和 |
| **地圖** | 格子佈局，每格是精美插畫卡 |
| **圖標** | 自製 SVG，簡化剪影風格 |

### 🖼️ 資源設計

| 資源 | 視覺呈現 | 格式 |
|------|----------|------|
| 靈石 | 小玉石/寶玉圖標 | SVG |
| 絳珠淚 | 發光淚滴 | SVG |
| 記憶碎片 | 書卷/刻石片 | SVG |
| 花魂 | 簡化花朵剪影 | PNG/WebP |
| 建築 | 精美插畫卡片 | PNG/WebP |
| 鳥靈 | 小鳥剪影 | SVG |

### 💻 技術選型

**第一版（MVP）**：

```
技術棧：
- HTML5
- CSS3（可配合 Tailwind）
- 原生 JavaScript（ES 模組）

模組結構：
├── js/
│   ├── state.js        # 遊戲狀態管理
│   ├── garden.js       # 園林地圖
│   ├── flowers.js      # 花魂系統
│   ├── tears.js        # 絳珠淚系統
│   ├── memories.js     # 記憶系統
│   ├── events.js       # 事件系統
│   ├── ui.js           # UI 組件
│   └── ai.js           # AI 整合（可選）
```

**未來擴展**：

| 平台 | 打包方案 |
|------|----------|
| iOS App | Capacitor / Cordova |
| Android App | Capacitor / Cordova |
| 桌面 / Steam | Electron / Tauri |

**框架策略**：
- ❌ 暫不引入 Vue/React
- ✅ 先確保遊戲設計清晰
- ✅ 代碼結構模組化
- ✅ 未來可按需重構

---

## 八、分階段開發路線

### 📅 階段一：核心骨架（1-2 週）

**目標**：建立可運行的基礎框架

**任務清單**：
- [ ] 專案結構搭建
- [ ] 基礎 UI（狀態列、地圖、面板）
- [ ] 節氣循環系統
- [ ] 行動力消耗機制
- [ ] 基本資源顯示（靈石、絳珠淚總量）
- [ ] 建築解鎖框架

### 📅 階段二：黛玉線單局 MVP（2-3 週）

**目標**：完成一個「以解鎖瀟湘館與黛玉花魂為終局目標」的單局小型完整版本

**任務清單**：
- [ ] 瀟湘館解鎖（靈石消耗）
- [ ] 黛玉花魂種植與顯示
- [ ] 2-3 種絳珠淚實作
- [ ] 澆灌機制（淚水 → 成長值）
- [ ] 1 條黛玉記憶故事線（3-5 段）
- [ ] 記憶收集與獎勵
- [ ] 花魂升級系統
- [ ] 簡單終局總結

**里程碑**：不使用 AI，核心遊戲循環可玩

### 📅 階段三：系統擴充（3-4 週）

**目標**：豐富遊戲內容與深度

**任務清單**：
- [ ] 園林佈局 buff
- [ ] 鳥靈系統（可選）
- [ ] 節氣事件（清明葬花等）
- [ ] 碎片獎勵節奏優化
- [ ] DeepSeek AI 整合（輪迴批語、終局敘事）
- [ ] 音效與動畫

### 📅 階段四：角色擴展（4-6 週）

**目標**：多角色與多結局

**任務清單**：
- [ ] 寶釵花魂與蘅蕪苑
- [ ] 湘雲花魂與海棠社
- [ ] 探春花魂與秋爽齋
- [ ] 更多記憶故事線
- [ ] 多樣化結局
- [ ] UI 打磨與優化
- [ ] 音效與配樂
- [ ] 教學引導

---

## 九、待解決的設計問題

### ❓ 需要明確的設計決策

1. **黛玉故事線內容**  
   優先定稿哪一條作為第一條完整實作？
   - 建議：初入榮府 → 葬花吟 → 題帕定情

2. **絳珠淚數量**  
   具體類型與數量要多少才不會太複雜？
   - 建議：MVP 2-3 類，完整版 6-8 類

3. **地圖尺寸**  
   格子地圖定在幾乘幾？是否要分「東園／西園」？
   - 建議：MVP 5×5，完整版可擴展到 7×7

4. **AI 整合時機**  
   第一版是否完全不接入 DeepSeek？
   - 建議：MVP 完全不接入，先做純本地 demo

5. **教學模式**  
   需要哪些教師專用開關？
   - 快速跳過劇情
   - 顯示回目索引
   - 查看原文對照

---

## 📋 附錄：快速開發檢查表

### ✅ MVP 核心功能（必做）

```
系統層面：
□ 節氣循環（24 節氣）
□ 行動力系統（每節氣 4 點）
□ 資源系統（絳珠淚、靈石）

地圖與建築：
□ 5×5 格子地圖
□ 瀟湘館解鎖與顯示

花魂系統：
□ 黛玉花魂種植
□ 等級系統（0-5 級）
□ 成長值與升級

淚水系統：
□ 2-3 種絳珠淚
□ 澆灌消耗淚水
□ 淚水獲取機制

記憶系統：
□ 1 條故事線（3-5 段）
□ 記憶解鎖
□ 完成獎勵

UI 界面：
□ 狀態列（資源顯示）
□ 地圖視圖
□ 花魂詳情面板
□ 記憶列表

結局系統：
□ 簡單終局總結（本地文本）
```

### 🔄 進階功能（可延後）

```
□ 多角色花魂（寶釵、湘雲、探春）
□ 鳥靈系統
□ DeepSeek AI 整合
□ 複雜佈局 buff
□ 隨機事件系統
□ 音效與動畫
□ 教學引導
```

---

**文檔版本**：v1.0  
**最後更新**：2025-11-15  
**維護者**：太虛幻境開發團隊  
