<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>意moji - 古詩詞意象配對遊戲</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;600;700&display=swap');
        @import url('https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css');
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap');
        
        :root {
            /* 主要配色 - 更優雅的漸變色系 */
            --primary-color: #6a5acd; /* 優雅紫色 */
            --primary-light: #9d91e3;
            --primary-dark: #483d8b;
            --accent-color: #e6a23c; /* 溫暖金色 */
            --accent-light: #f8d48a;
            --accent-dark: #b8860b;
            
            /* 次要色彩 */
            --success-color: #68b787;
            --error-color: #e17055;
            --warning-color: #f6b93b;
            --info-color: #4b7bec;
            
            /* 中性色調 */
            --neutral-light: #f8f9fc;
            --neutral-medium: #e6e8f0;
            --neutral-dark: #4a5568;
            
            /* 文字色彩 */
            --text-light: #f7fafc;
            --text-dark: #2d3748;
            --text-muted: #718096;
            
            /* 陰影 */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.05);
            --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
            
            /* 圓角 */
            --radius-sm: 0.25rem;
            --radius: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-full: 9999px;
            
            /* 徽章色彩 */
            --badge-bronze: #cd7f32;
            --badge-silver: #c0c0c0;
            --badge-gold: #ffd700;
            --badge-platinum: #e5e4e2;
            --badge-jade: #00a86b;
            --badge-ruby: #e0115f;
            --badge-sapphire: #0f52ba;
            --badge-diamond: #b9f2ff;
            
            /* 動畫持續時間 */
            --transition-fast: 150ms;
            --transition-normal: 300ms;
            --transition-slow: 500ms;
        }
        
        /* 全域樣式 */
        body {
            font-family: 'Noto Serif TC', serif;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(106, 90, 205, 0.15) 0%, transparent 30%),
                radial-gradient(circle at 80% 70%, rgba(230, 162, 60, 0.1) 0%, transparent 30%);
            background-attachment: fixed;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
            /* 移動端滾動優化 */
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }
        
        /* iframe環境優化 */
        @supports (-webkit-touch-callout: none) {
            /* iOS Safari 在 iframe 中的特殊處理 */
            html, body {
                width: 100% !important;
                height: auto !important;
                margin: 0 !important;
                padding: 0 !important;
                -webkit-overflow-scrolling: touch;
                position: relative !important;
                overflow-x: hidden !important;
                overflow-y: auto !important;
            }
        }
        
        /* 移動端優化 */
        @media (max-width: 768px) {
            body {
                /* 使用100dvh作為主要高度，100vh作為後備 */
                min-height: 100vh;
                min-height: 100dvh;
                /* 確保移動端可以滾動 */
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                /* 防止橫向滾動 */
                overflow-x: hidden;
                /* 移動端防止雙擊縮放 */
                touch-action: manipulation;
            }
            
            /* 移動端容器優化 */
            .container {
                min-height: 100vh;
                min-height: 100dvh;
                display: flex;
                flex-direction: column;
                padding: 0.75rem !important; /* 減少padding以提供更多空間 */
            }
            
            /* 遊戲容器移動端優化 */
            .game-container {
                min-height: auto !important;
                height: auto !important;
                flex: 1;
                display: flex;
                flex-direction: column;
                padding: 1rem !important; /* 減少內部padding */
            }
            
            /* 詩詞容器移動端優化 */
            .poem-container {
                height: 7rem !important; /* 減少高度以節省空間 */
                min-height: 7rem !important;
            }
            
            /* 按鈕區域優化 */
            .grid {
                gap: 0.75rem !important; /* 減少間距 */
            }
            
            /* 確保emoji按鈕適當大小 */
            .emoji-button {
                min-height: 3rem !important;
                padding: 0.5rem !important;
            }
        }
        
        /* 觸摸滾動優化 */
        * {
            /* 確保所有元素都支持觸摸操作 */
            touch-action: manipulation;
            /* 防止意外選中文字 */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* 允許文字內容選中（如詩詞文本） */
        .poem-text, .poem-title, .poem-author, p, span:not(.emoji-button span) {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        /* 增強滾動性能 */
        .scrollable {
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            transform: translateZ(0); /* 啟用硬件加速 */
        }
        
        /* 移動端模態框滾動優化 */
        @media (max-width: 768px) {
            .modal-content {
                max-height: 85vh !important;
                max-height: 85dvh !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            
            /* 確保統計模態框可滾動 */
            .stats-content {
                max-height: 75vh !important;
                max-height: 75dvh !important;
                overflow-y: auto !important;
            }
            
            /* 確保底部版權不會覆蓋內容 */
            .container {
                padding-bottom: 3rem !important; /* 為底部版權留出空間 */
            }
            
            /* 卡片模態窗口移動端優化 */
            .card-modal {
                padding: 0.5rem !important;
                /* 確保移動端滾動流暢 */
                -webkit-overflow-scrolling: touch !important;
                overscroll-behavior: contain !important;
            }
            
            .card-modal-content {
                margin: 0.25rem auto !important;
                width: calc(100% - 0.5rem) !important;
                /* 確保在小屏幕上內容不會超出 */
                max-width: none !important;
            }
        }
        
        /* 背景裝飾元素 */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%236a5acd' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
            z-index: -1;
            opacity: 0.5;
        }
        
        /* 中文文字裝飾 */
        .bg-characters {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 120px;
            opacity: 0.03;
            letter-spacing: 40px;
            line-height: 2;
            pointer-events: none;
            z-index: -1;
            color: var(--primary-color);
            font-weight: 200;
        }
        
        /* 暗色模式背景 */
        .dark {
            background: linear-gradient(135deg, #1c1c3d 0%, #252547 50%, #1e1e2f 100%);
            color: var(--text-light);
        }
        
        /* 遊戲容器 */
        .game-container {
            position: relative;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dark .game-container {
            background-color: rgba(30, 30, 46, 0.85);
            border-color: rgba(255, 255, 255, 0.05);
        }
        
        /* 標題設計 */
        .title-container {
            position: relative;
            overflow: visible;
        }
        
        .game-title {
            display: inline-block;
            position: relative;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            font-size: 3.5rem; /* 移動設備默認大小 */
            letter-spacing: 1px;
            padding: 0.25rem 0;
            font-family: 'Ma Shan Zheng', cursive;
            text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
            white-space: nowrap;
        }
        
        /* 針對不同屏幕大小調整標題尺寸 */
        @media (min-width: 480px) {
            .game-title {
                font-size: 4.2rem;
                letter-spacing: 1.5px;
            }
        }
        
        @media (min-width: 640px) {
            .game-title {
                font-size: 5.5rem;
                letter-spacing: 2px;
            }
        }
        
        .dark .game-title {
            text-shadow: 0px 0px 6px rgba(255, 255, 255, 0.4), 0px 2px 4px rgba(0, 0, 0, 0.4);
        }
        
        .title-accent {
            position: relative;
            font-weight: 900;
            font-style: italic;
            font-family: 'Ma Shan Zheng', cursive;
        }
        
        .dark .title-accent {
            text-shadow: 0px 0px 8px rgba(255, 255, 255, 0.5), 0px 1px 3px rgba(255, 255, 255, 0.3);
        }
        
        .title-badge {
            position: absolute;
            top: -15px;
            right: -25px;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            border-radius: 50%;
            color: white;
            font-size: 20px;
            font-weight: bold;
            box-shadow: var(--shadow);
            animation: float 3s ease-in-out infinite;
            z-index: 10;
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        /* 詩句容器 */
        .poem-container {
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 0; /* 改為直角 */
            padding: 1.25rem;
            box-shadow: var(--shadow-inner);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        .dark .poem-container {
            background-color: rgba(40, 42, 66, 0.5);
        }
        
        /* 古風線條邊框 */
        .ancient-border {
            border: 3px solid rgba(106, 90, 205, 0.5); /* 加粗邊框從1px增加到3px，並增加不透明度 */
            position: relative;
        }
        
        .ancient-border::before,
        .ancient-border::after {
            content: '';
            position: absolute;
            width: 25px; /* 增加角落裝飾的尺寸 */
            height: 25px;
            border-color: var(--primary-color);
            border-style: solid;
            border-width: 0;
            pointer-events: none;
            opacity: 0.8; /* 增加不透明度 */
        }
        
        .ancient-border::before {
            top: 5px;
            left: 5px;
            border-top-width: 3px; /* 加粗裝飾邊框 */
            border-left-width: 3px;
        }
        
        .ancient-border::after {
            bottom: 5px;
            right: 5px;
            border-bottom-width: 3px; /* 加粗裝飾邊框 */
            border-right-width: 3px;
        }
        
        .dark .ancient-border {
            border-color: rgba(157, 145, 227, 0.3);
        }
        
        .dark .ancient-border::before,
        .dark .ancient-border::after {
            border-color: var(--primary-light);
        }
        
        .poem-text {
            font-size: 0.95rem;
            line-height: 1.5;
            color: #333;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 700;
            letter-spacing: 0.3px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center; /* 確保詩句居中排列 */
            white-space: nowrap;
            font-family: 'LXGW WenKai', 'Noto Serif TC', serif;
            padding: 0 0.75rem; /* 添加左右內邊距，確保與邊框有距離 */
        }
        
        /* 長詩句縮小字體 */
        .poem-text.text-small {
            font-size: 0.92rem; /* 提高到0.92rem，更接近原始0.95rem */
        }
        
        /* 確保在響應式設計下，長詩句字體比例一致 */
        @media (min-width: 640px) {
            .poem-text.text-small {
                font-size: 1.35rem; /* 提高到原始1.5rem的90% */
            }
        }
        
        .dark .poem-text {
            color: #e5e7eb;
        }
        
        .poem-author {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 0.3rem;
            font-style: normal;
            padding: 0 0.75rem; /* 添加左右內邊距 */
        }
        
        .dark .poem-author {
            color: #9ca3af;
        }
        
        /* 詩句出現動畫 */
        .poem-appear {
            animation: poemAppear 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        @keyframes poemAppear {
            0% { 
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Combo系統 */
        
        .combo-text {
            font-size: 0.75rem;
            font-weight: bold;
            color: var(--primary-color);
            display: none;
        }
        
        .dark .combo-text {
            color: var(--primary-light);
        }
        
        .combo-count {
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--primary-color);
            transition: all 0.3s ease;
            display: none;
        }
        
        .dark .combo-count {
            color: var(--primary-light);
        }
        
        .combo-bonus {
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--accent-color);
            display: none;
        }
        
        .combo-info.level1 .combo-text,
        .combo-info.level1 .combo-count,
        .combo-info.level1 .combo-bonus {
            display: inline-block;
        }
        
        .combo-info.level2 .combo-text,
        .combo-info.level2 .combo-count,
        .combo-info.level2 .combo-bonus {
            display: inline-block;
        }
        
        .combo-info.level3 .combo-text,
        .combo-info.level3 .combo-count,
        .combo-info.level3 .combo-bonus {
            display: inline-block;
            color: var(--accent-color);
        }
        
        .combo-info.level4 .combo-text,
        .combo-info.level4 .combo-count,
        .combo-info.level4 .combo-bonus {
            display: inline-block;
            color: var(--accent-color);
        }
        
        .combo-info.level5 .combo-text,
        .combo-info.level5 .combo-count,
        .combo-info.level5 .combo-bonus {
            display: inline-block;
            color: gold;
            text-shadow: 0 0 3px rgba(255, 215, 0, 0.5);
        }
        
        .combo-pulse {
            animation: comboPulse 0.5s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        @keyframes comboPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .combo-reset {
            animation: comboReset 0.5s ease-in-out;
        }
        
        @keyframes comboReset {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(0.8); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* 計時器 */
        .timer-container {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 5;
        }
        
        .timer-circle {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 0%, transparent 0%);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow-sm);
            position: relative;
            transition: background 0.1s linear;
        }
        
        .timer-circle::before {
            content: '';
            position: absolute;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: white;
            z-index: -1;
            transition: background-color 0.3s ease;
        }
        
        .dark .timer-circle::before {
            background-color: #374151;
        }
        
        .timer-text {
            font-size: 1rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .dark .timer-text {
            color: var(--primary-light);
        }
        
        .timer-urgent .timer-text {
            color: var(--error-color);
        }
        
        .timer-urgent .timer-circle {
            background: conic-gradient(var(--error-color) 0%, transparent 0%);
            animation: pulse-red 1s infinite;
        }
        
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(225, 112, 85, 0.4); }
            70% { box-shadow: 0 0 0 8px rgba(225, 112, 85, 0); }
            100% { box-shadow: 0 0 0 0 rgba(225, 112, 85, 0); }
        }
        
        /* Emoji 計數器 */
        .emoji-counter {
            position: absolute;
            bottom: 6px;
            right: 6px;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: bold;
            color: var(--primary-color);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            z-index: 5;
        }
        
        .dark .emoji-counter {
            background-color: rgba(40, 42, 66, 0.7);
            color: var(--primary-light);
        }
        
        .emoji-counter-icon {
            font-size: 0.85rem;
            margin-right: 2px;
            animation: pulse 2s infinite;
        }
        
        /* Emoji 按鈕 */
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            width: 100%;
            margin: 0 auto;
        }
        
        .emoji-button {
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            user-select: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
            background-color: rgba(255, 255, 255, 0.7);
            aspect-ratio: 1/1;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: none;
        }
        
        @media (min-width: 640px) {
            .emoji-grid {
                gap: 0.75rem;
            }
            
            .emoji-button {
                font-size: 28px;
            }
        }
        
        .dark .emoji-button {
            background-color: rgba(40, 42, 66, 0.7);
        }
        
        .emoji-button::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: var(--primary-light);
            opacity: 0;
            z-index: -1;
            transform: scale(0.5);
            transition: all 0.3s ease;
            border-radius: var(--radius-lg);
        }
        
        .emoji-button:hover::before {
            opacity: 0.1;
            transform: scale(1);
        }
        
        .emoji-button:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-lg);
        }
        
        .emoji-button:active {
            transform: translateY(2px);
            box-shadow: var(--shadow-sm);
        }
        
        .emoji-button.correct {
            animation: correctMatch 0.5s ease-out forwards;
        }
        
        @keyframes correctMatch {
            0% { 
                transform: scale(1);
                background-color: var(--success-color);
            }
            50% { 
                transform: scale(1.2);
                background-color: var(--success-color);
                box-shadow: 0 0 20px rgba(104, 183, 135, 0.7);
            }
            100% { 
                transform: scale(1.1);
                background-color: var(--success-color);
                color: white;
                box-shadow: 0 0 10px rgba(104, 183, 135, 0.5);
            }
        }
        
        .emoji-button.incorrect {
            animation: incorrectMatch 0.5s ease-out forwards;
        }
        
        @keyframes incorrectMatch {
            0% { 
                transform: scale(1);
                background-color: var(--error-color);
            }
            25% { 
                transform: scale(1.1) rotate(5deg);
                background-color: var(--error-color);
            }
            50% { 
                transform: scale(1.1) rotate(-5deg);
                background-color: var(--error-color);
            }
            100% { 
                transform: scale(1);
                background-color: var(--error-color);
                color: white;
                opacity: 0.7;
            }
        }
        
        /* 統計顯示 */
        .stats-display {
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: var(--radius-lg);
            padding: 0.75rem 1rem;
            margin-top: 0.75rem;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .dark .stats-display {
            background-color: rgba(40, 42, 66, 0.7);
        }
        
        .stats-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.875rem;
        }
        
        .stats-value {
            font-weight: bold;
            font-size: 1.125rem;
            color: var(--primary-color);
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .dark .stats-value {
            color: var(--primary-light);
        }
        
        /* 徽章系統 */
        .badge-container {
            position: relative;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .badge {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            transition: all 0.3s ease;
        }
        
        .badge::after {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            top: -25%;
            left: -25%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .badge:hover::after {
            opacity: 1;
        }
        
        .badge.locked {
            filter: grayscale(100%);
            opacity: 0.5;
        }
        
        .badge.bronze {
            background: linear-gradient(135deg, var(--badge-bronze) 0%, #FFC18F 100%);
        }
        
        .badge.silver {
            background: linear-gradient(135deg, var(--badge-silver) 0%, #E8E8E8 100%);
        }
        
        .badge.gold {
            background: linear-gradient(135deg, var(--badge-gold) 0%, #FFF7CC 100%);
        }
        
        .badge.platinum {
            background: linear-gradient(135deg, var(--badge-platinum) 0%, #FFFFFF 100%);
        }
        
        .badge.jade {
            background: linear-gradient(135deg, var(--badge-jade) 0%, #CCFFE5 100%);
        }
        
        .badge.ruby {
            background: linear-gradient(135deg, var(--badge-ruby) 0%, #FFCCE5 100%);
        }
        
        .badge.sapphire {
            background: linear-gradient(135deg, var(--badge-sapphire) 0%, #CCE5FF 100%);
        }
        
        .badge.diamond {
            background: linear-gradient(135deg, var(--badge-diamond) 0%, #FFFFFF 100%);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0%, 100% { box-shadow: 0 0 5px 2px rgba(255, 255, 255, 0.5); }
            50% { box-shadow: 0 0 20px 5px rgba(255, 255, 255, 0.8); }
        }
        
        .badge-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius);
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .badge-container:hover .badge-tooltip {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 8px);
        }
        
        /* 成就通知 */
        .achievement-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 1000;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        .achievement-notification.show {
            animation: 
                slideDown 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards,
                fadeOut 0.5s ease-in 4.5s forwards;
        }
        
        .achievement-icon {
            font-size: 1.5rem;
        }
        
        .achievement-text {
            display: flex;
            flex-direction: column;
        }
        
        .achievement-title {
            font-weight: bold;
            font-size: 0.875rem;
        }
        
        .achievement-description {
            font-size: 0.75rem;
            opacity: 0.9;
        }
        
        @keyframes slideDown {
            from { transform: translate(-50%, -50px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translate(-50%, 0); }
            to { opacity: 0; transform: translate(-50%, -10px); visibility: hidden; }
        }
        
        /* 進度條 */
        .progress-container {
            position: relative;
            height: 10px;
            width: 100%;
            background-color: rgba(203, 213, 224, 0.5);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-top: 0.75rem;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            border-radius: var(--radius-full);
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.2) 50%,
                transparent 100%
            );
            animation: progressShine 2s infinite linear;
        }
        
        @keyframes progressShine {
            from { transform: translateX(-100%); }
            to { transform: translateX(100%); }
        }
        
        .progress-milestone {
            position: absolute;
            top: 0;
            width: 4px;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .progress-milestone.achieved {
            background-color: white;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }
        
        /* 動畫效果 */
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .pulse-animation {
            animation: scorePulse 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        @keyframes scorePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); color: var(--accent-color); }
            100% { transform: scale(1); }
        }
        
        /* 按鈕 */
        .action-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            font-weight: bold;
            border-radius: var(--radius-lg);
            padding: 0.75rem 2rem;
            box-shadow: var(--shadow);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            position: relative;
            overflow: hidden;
            letter-spacing: 1px;
        }
        
        .action-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .action-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 15px -3px rgba(106, 90, 205, 0.4);
        }
        
        .action-button:hover::after {
            opacity: 1;
        }
        
        .action-button:active {
            transform: translateY(2px);
        }
        
        /* 反饋和指示器 */
        .chances-indicator {
            display: flex;
            gap: 6px;
        }
        
        .chances-indicator span {
            transition: all 0.3s ease;
            border-radius: var(--radius-full);
            height: 6px;
        }
        
        .chances-indicator span.active {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
        }
        
        /* 分數顯示 */
        .score-display {
            padding: 0.5rem 1.25rem;
            border-radius: var(--radius-full);
            font-weight: bold;
            background-color: rgba(106, 90, 205, 0.1);
            color: var(--primary-color);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .score-icon {
            font-size: 1.25rem;
            color: var(--accent-color);
        }
        
        .score-value {
            font-size: 1.25rem;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .dark .score-display {
            background-color: rgba(106, 90, 205, 0.2);
        }
        
        .dark .score-value {
            color: var(--primary-light);
        }
        
        /* 解釋 */
        .explanation {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #555;
            margin-top: 1rem;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-inner);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border-left: 4px solid var(--primary-color);
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        .explanation.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .dark .explanation {
            color: #ddd;
            background-color: rgba(40, 42, 66, 0.7);
        }
        
        /* 模態框 */
        .modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .modal-container.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 1.5rem;
            transform: translateY(-30px) scale(0.95);
            transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) var(--neutral-medium);
        }
        
        .modal-container.active .modal-content {
            transform: translateY(0) scale(1);
        }
        
        .dark .modal-content {
            background-color: #1F2937;
            color: white;
        }
        
        .modal-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .modal-content::-webkit-scrollbar-track {
            background: var(--neutral-medium);
            border-radius: var(--radius-full);
        }
        
        .modal-content::-webkit-scrollbar-thumb {
            background-color: var(--primary-light);
            border-radius: var(--radius-full);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.25rem;
            border-bottom: 2px solid var(--neutral-medium);
            padding-bottom: 0.75rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .modal-title-icon {
            font-size: 1.75rem;
            color: var(--accent-color);
        }
        
        .dark .modal-title {
            color: var(--primary-light);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            color: var(--text-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            background-color: rgba(203, 213, 224, 0.5);
        }
        
        .dark .modal-close {
            color: var(--text-light);
        }
        
        .dark .modal-close:hover {
            background-color: rgba(55, 65, 81, 0.5);
        }
        
        .badge-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.25rem;
            margin-top: 1.25rem;
        }
        
        .badge-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .badge-item:hover {
            transform: translateY(-5px);
        }
        
        .badge-name {
            font-weight: bold;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            color: var(--primary-color);
        }
        
        .dark .badge-name {
            color: var(--primary-light);
        }
        
        .badge-description {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(203, 213, 224, 0.5);
            margin-bottom: 1.25rem;
        }
        
        .tab {
            padding: 0.75rem 1.25rem;
            font-size: 0.95rem;
            font-weight: bold;
            cursor: pointer;
            color: var(--text-muted);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            transition: width 0.3s ease;
        }
        
        .tab:hover::after {
            width: 100%;
        }
        
        .tab.active::after {
            width: 100%;
        }
        
        .dark .tab.active {
            color: var(--primary-light);
            border-bottom-color: var(--primary-light);
        }
        
        .tab-content {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        .tab-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-top: 1.25rem;
        }
        
        .stats-grid-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem;
            background-color: rgba(237, 242, 247, 0.5);
            border-radius: var(--radius);
            transition: all 0.3s ease;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .stats-grid-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background-color: rgba(237, 242, 247, 0.8);
        }
        
        .dark .stats-grid-item {
            background-color: rgba(55, 65, 81, 0.5);
        }
        
        .dark .stats-grid-item:hover {
            background-color: rgba(55, 65, 81, 0.8);
        }
        
        .stats-grid-item .label {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }
        
        .stats-grid-item .value {
            font-weight: bold;
            font-size: 0.95rem;
            color: var(--primary-color);
        }
        
        .dark .stats-grid-item .value {
            color: var(--primary-light);
        }
        
        /* 歷史記錄列表 */
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) var(--neutral-medium);
            padding-right: 0.5rem;
        }
        
        .history-list::-webkit-scrollbar {
            width: 6px;
        }
        
        .history-list::-webkit-scrollbar-track {
            background: var(--neutral-medium);
            border-radius: var(--radius-full);
        }
        
        .history-list::-webkit-scrollbar-thumb {
            background-color: var(--primary-light);
            border-radius: var(--radius-full);
        }
        
        .history-item {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(203, 213, 224, 0.5);
            transition: all 0.3s ease;
            border-radius: var(--radius);
        }
        
        .history-item:hover {
            background-color: rgba(237, 242, 247, 0.5);
            transform: translateX(5px);
        }
        
        .dark .history-item:hover {
            background-color: rgba(55, 65, 81, 0.5);
        }
        
        .history-verse {
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }
        
        .dark .history-verse {
            color: var(--text-light);
        }
        
        .history-info {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-style: italic;
        }
        
        /* 粒子效果 */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 1000;
        }
        
        .particle {
            position: absolute;
            pointer-events: none;
            opacity: 0;
        }
        
        .particle-circle {
            border-radius: 50%;
            background-color: var(--primary-color);
            box-shadow: 0 0 6px 2px rgba(106, 90, 205, 0.3);
        }
        
        .particle-star {
            background-color: transparent;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 17px solid var(--accent-color);
            transform: rotate(0deg);
        }
        
        .particle-star:after {
            content: '';
            position: absolute;
            top: 12px;
            left: -10px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 17px solid var(--accent-color);
        }
        
        /* 響應式調整 */
        @media (min-width: 640px) {
            .emoji-button {
                font-size: 32px;
            }
            
            .emoji-grid {
                gap: 1rem;
            }
            
            .stats-display {
                padding: 0.75rem 1.5rem;
            }
            
            .poem-text {
                font-size: 1.5rem;
            }
        }
        
        /* 自定義動畫 */
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Dark mode support */
        .dark .chances-indicator span {
            background-color: #4B5563;
        }
        
        /* 詩詞卡片相關樣式 */
        .card-modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 50;
            overflow-y: auto;
            padding: 1rem;
            /* 確保外層容器處理滾動 */
            -webkit-overflow-scrolling: touch;
        }

        .card-modal-content {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            padding: 1rem;
            max-width: 36rem;
            width: 100%;
            margin: 0.5rem auto;
            animation: modalAppear 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* 移除內部滾動，讓外層容器處理滾動 */
            max-height: none;
            overflow: visible;
            display: flex;
            flex-direction: column;
        }
        
        @media (min-width: 640px) {
            .card-modal-content {
                padding: 1.25rem;
                margin: 1rem auto;
                /* 移除max-height限制，讓外層容器處理滾動 */
                max-height: none;
            }
        }
        
        /* 引入落霞孤鶩字體 */
        @font-face {
            font-family: 'LuoXiaGuWen';
            src: url('https://cdn.jsdelivr.net/gh/chawyehsu/lxgw-wenkai-webfont@latest/dist/LXGWWenKaiLite-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        /* 新增卡片風格 */
        /* 風格4: 紅色系古風（「落霞飛雁」） */
        .style-option[data-style="luoxiafeiyan"] {
            background: linear-gradient(135deg, #f5e6e6 0%, #f8d5d5 100%);
        }
        
        /* 風格5: 綠色系古風（「青竹如茵」） */
        .style-option[data-style="qingzhuruyin"] {
            background: linear-gradient(135deg, #e6f5e6 0%, #d5f8d5 100%);
        }
        
        /* 風格6: 黑色系古風（「墨韻流芳」） */
        .style-option[data-style="moyunliufang"] {
            background-color: #2a2a2a;
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* 暗色模式下墨韻流芳按鈕特殊處理 */
        .dark .style-option[data-style="moyunliufang"] {
            background-color: #222222;
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
        }
        
        /* 暗色模式下選中狀態加強 */
        .dark .style-option[data-style="moyunliufang"].active {
            border-color: #5D5CDE;
            background-color: #1a1a1a;
            box-shadow: 0 0 12px rgba(93, 92, 222, 0.4);
        }

        @keyframes modalAppear {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .card-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .card-modal-title {
            font-size: 1.25rem;
            font-weight: bold;
            color: #333;
        }

        .dark .card-modal-title {
            color: #e0e0e0;
        }

        .card-modal-body {
            flex: 1;
            /* 移除內部滾動，讓外層模態框處理所有滾動 */
            overflow: visible;
            padding-right: 0.25rem;
        }

        .preview-container {
            background-color: white;
            border-radius: 0.5rem;
            overflow: hidden;
            margin-bottom: 1rem;
            display: flex;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            max-height: 50vh;
        }

        .preview-container canvas {
            max-width: 100%;
            max-height: 50vh;
            width: auto;
            height: auto;
            object-fit: contain;
        }

        .style-option {
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .style-option.active {
            border-color: #5D5CDE;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(93, 92, 222, 0.2);
        }

        .style-option:hover:not(.active) {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(93, 92, 222, 0.15);
        }

        .card-modal-footer {
            display: flex;
            justify-content: space-between;
            gap: 0.75rem;
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px solid #e5e7eb;
        }

        .card-modal-btn {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background-color: #5D5CDE;
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: #4b4ab3;
        }

        .btn-secondary {
            background-color: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }

        .btn-secondary:hover {
            background-color: #e5e7eb;
        }
        
        /* 黑暗模式支持 */
        .dark .card-modal-content {
            background-color: #2a2a2a;
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dark .preview-container {
            background-color: #222;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .dark .card-modal-header,
        .dark .card-modal-footer {
            border-color: #3f3f46;
        }

        .dark .btn-secondary {
            background-color: #374151;
            color: #e5e7eb;
            border-color: #4b5563;
        }

        .dark .btn-secondary:hover {
            background-color: #4b5563;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen transition-colors duration-300">
    <!-- 背景裝飾元素 -->
    <div class="bg-pattern"></div>
    <div class="bg-characters">詩 詞 意 境 韻 律</div>
    
    <div class="container mx-auto px-4 py-4 sm:py-6 max-w-lg">
        <div class="game-container bg-white rounded-2xl shadow-xl p-5 sm:p-6 transition-colors duration-300">
            <div class="flex justify-between items-center mb-6">
                <div class="title-container">
                    <h1 class="game-title">意<span class="title-accent">moji</span></h1>
                </div>
                <div class="score-display">
                    <span class="score-icon">🖌️</span>
                    <div class="flex flex-col items-center">
                        <span class="text-lg sm:text-xl font-semibold">分數: <span id="score" class="score-value">0</span></span>
                        <div class="combo-info flex items-center gap-1 text-sm" id="combo-info">
                            <span class="combo-text hidden">連擊:</span>
                            <span id="combo-count" class="combo-count hidden">0</span>
                            <span id="combo-bonus" class="combo-bonus hidden">+0</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-between items-center mb-4 sm:mb-6">
                <div id="current-badge" class="badge-container" style="opacity: 0; visibility: hidden;">
                    <div class="badge">
                        <span></span>
                    </div>
                    <div class="badge-tooltip"></div>
                </div>
            </div>
            
            <!-- 計時器和剩餘機會放在同一行，居中顯示 -->
            <div class="flex justify-center items-center mb-3 space-x-6">
                <div class="chances-container">
                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2 text-center">剩餘機會</p>
                    <div class="chances-indicator flex">
                        <span class="w-7 sm:w-8 h-4 mr-1 rounded-sm bg-gray-200 active bg-primary-500 transition-colors duration-300"></span>
                        <span class="w-7 sm:w-8 h-4 mr-1 rounded-sm bg-gray-200 active bg-primary-500 transition-colors duration-300"></span>
                        <span class="w-7 sm:w-8 h-4 rounded-sm bg-gray-200 active bg-primary-500 transition-colors duration-300"></span>
                    </div>
                </div>
                
                <div class="timer-circle" id="timer-circle">
                    <span class="timer-text" id="timer-text">15</span>
                </div>
            </div>
            

            
            <div class="poem-container mb-4 transition-colors duration-300 h-32 sm:h-36 md:h-40 ancient-border" id="poem-container">
                <div class="flex flex-col justify-center h-full">
                    <div class="poem-text poem-appear leading-relaxed" id="poem-text"></div>
                    <div class="poem-author mt-3" id="poem-author"></div>
                </div>
            </div>
            
            <div class="emoji-grid mb-6" id="emoji-grid">
                <!-- Emojis will be dynamically inserted here -->
            </div>
            
            <div class="feedback-message text-center mb-4 min-h-[4rem] mt-6">
                <p id="feedback" class="text-lg sm:text-xl font-medium"></p>
                <div id="explanation" class="explanation"></div>
                
                <!-- 添加生成卡片和下一首按鈕容器 -->

            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                <!-- Milestones will be added here dynamically -->
            </div>
            
            <div class="stats-display">
                <div class="stats-item">
                    <span class="stats-label">最高連擊</span>
                    <span class="stats-value" id="max-streak">0</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">平均時間</span>
                    <span class="stats-value" id="avg-time">0s</span>
                </div>
                <div class="flex">
                    <button id="stats-btn" class="text-primary-600 dark:text-primary-400 font-semibold text-sm px-4 py-2 rounded-full hover:bg-primary-50 dark:hover:bg-primary-900 transition-colors duration-200">
                        詳情
                    </button>
                </div>
            </div>
            
            <!-- 移除原來的下一首按鈕 -->

            <!-- 移除原有的提示文本 -->
        </div>
    </div>
    
    <!-- 統計模態框 -->
    <div class="modal-container" id="stats-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-title-icon">📊</span>
                    玩家統計
                </h3>
                <button class="modal-close" id="stats-modal-close">&times;</button>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="stats">統計數據</div>
                <div class="tab" data-tab="badges">成就徽章</div>
                <div class="tab" data-tab="history">解鎖歷史</div>
            </div>
            
            <div class="tab-content active" data-tab-content="stats">
                <div class="stats-grid">
                    <div class="stats-grid-item">
                        <span class="label">總分數</span>
                        <span class="value" id="total-score">0</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">解鎖詩句</span>
                        <span class="value" id="total-poems">0/100</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">當前段位</span>
                        <span class="value" id="current-rank">初級詩人</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">下一段位</span>
                        <span class="value" id="next-rank">中級詩人</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">最高連擊</span>
                        <span class="value" id="stats-max-streak">0</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">當前連擊</span>
                        <span class="value" id="current-streak">0</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">平均用時</span>
                        <span class="value" id="stats-avg-time">0s</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">最快用時</span>
                        <span class="value" id="fastest-time">0s</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">完美回答</span>
                        <span class="value" id="perfect-answers">0</span>
                    </div>
                    <div class="stats-grid-item">
                        <span class="label">已玩次數</span>
                        <span class="value" id="total-plays">0</span>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" data-tab-content="badges">
                <div class="badge-grid" id="badge-grid">
                    <!-- Badges will be dynamically inserted here -->
                </div>
            </div>
            
            <div class="tab-content" data-tab-content="history">
                <div class="mt-2 text-sm">
                    <p class="text-center text-gray-600 dark:text-gray-400 mb-4">已解鎖的詩句:</p>
                    <div id="history-list" class="history-list">
                        <!-- Unlocked poems will be listed here -->
                        <p class="text-center text-gray-500 dark:text-gray-500 italic">尚未解鎖任何詩句</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 成就通知容器 -->
    <div id="achievement-container"></div>
    
    <!-- 粒子效果容器 -->
    <div class="particles-container" id="particles-container"></div>
    
    <!-- 版權信息 - 顯示在游戲窗口的底部（防止換行） -->
    <div class="py-2 text-center text-xs sm:text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 border-t border-gray-200 dark:border-gray-800 shadow-sm mt-2 whitespace-nowrap overflow-hidden text-ellipsis px-2 relative">
        ©意moji - 古詩詞意象配對遊戲 | 設計製作：書院中文經典
    </div>
    
    <!-- 詩詞卡片生成模態視窗 -->
    <div id="card-modal" class="card-modal">
        <div class="card-modal-content">
            <div class="flex justify-end mb-2">
                <button id="close-card-modal" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="card-modal-body">
                <div class="preview-container bg-white dark:bg-gray-900 rounded-lg overflow-hidden mb-4 flex justify-center">
                    <canvas id="poemCanvas" width="800" height="1200" class="max-w-full h-auto"></canvas>
                </div>
                
                <div class="styles-container mb-3">
                    <div class="grid grid-cols-3 gap-2" id="styleOptions">
                        <div class="style-option active" data-style="classic">
                            <div class="h-14 bg-amber-50 dark:bg-amber-100 p-1 flex items-center justify-center">
                                <span class="text-xs font-medium text-gray-700 dark:text-gray-800">典雅古風</span>
                            </div>
                        </div>
                        <div class="style-option" data-style="inkwash">
                            <div class="h-14 bg-white dark:bg-gray-100 p-1 flex items-center justify-center">
                                <span class="text-xs font-medium text-gray-700 dark:text-gray-800">水墨風韻</span>
                            </div>
                        </div>
                        <div class="style-option" data-style="elegant">
                            <div class="h-14 p-1 flex items-center justify-center">
                                <span class="text-xs font-medium text-gray-700 dark:text-gray-800">清雅絕塵</span>
                            </div>
                        </div>
                        <div class="style-option" data-style="luoxiafeiyan">
                            <div class="h-14 p-1 flex items-center justify-center">
                                <span class="text-xs font-medium text-gray-700 dark:text-gray-800">落霞飛雁</span>
                            </div>
                        </div>
                        <div class="style-option" data-style="qingzhuruyin">
                            <div class="h-14 p-1 flex items-center justify-center">
                                <span class="text-xs font-medium text-gray-700 dark:text-gray-800">青竹如茵</span>
                            </div>
                        </div>
                        <div class="style-option" data-style="moyunliufang">
                            <div class="h-14 p-1 flex items-center justify-center">
                                <span class="text-xs font-medium text-gray-200 dark:text-gray-300">墨韻流芳</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card-modal-footer">
                <button id="download-card-btn" class="card-modal-btn btn-primary">
                    下載詩詞卡片
                </button>
                <button id="return-game-btn" class="card-modal-btn btn-secondary">
                    返回遊戲
                </button>
            </div>
        </div>
    </div>
    
    <!-- 歡迎提示模態框 -->
    <div id="welcome-modal" class="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-60 backdrop-blur-sm">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md mx-4 animate-fade-scale">
            <div class="text-center mb-4">
                <h2 class="text-2xl font-bold text-primary-600 dark:text-primary-400">歡迎使用「意moji」！</h2>
            </div>
            <p class="text-gray-700 dark:text-gray-300 text-center mb-6">
                請尋找三個與詩詞意象最相關的emoji進行配對。
            </p>
            <div class="flex justify-center">
                <button id="welcome-start-btn" class="action-button bg-gradient-to-r from-primary-500 to-primary-700 hover:from-primary-600 hover:to-primary-800 px-8 py-3 transform hover:scale-105 transition duration-300">
                    開始遊戲
                </button>
            </div>
        </div>
    </div>

    <script>
        // 檢測暗色模式
        function checkDarkMode() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                document.body.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
                document.body.classList.remove('dark');
            }
        }
        
        // 首次檢查暗色模式
        checkDarkMode();
        
        // 監聽暗色模式變化
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', checkDarkMode);
        
        // 歡迎模態框處理
        document.addEventListener('DOMContentLoaded', function() {
            const welcomeModal = document.getElementById('welcome-modal');
            const welcomeStartBtn = document.getElementById('welcome-start-btn');
            
            // 如果找到開始遊戲按鈕，添加點擊事件
            if (welcomeStartBtn) {
                welcomeStartBtn.addEventListener('click', function() {
                    // 播放點擊音效
                    if (typeof playSoundClick === 'function') {
                        playSoundClick();
                    }
                    
                    // 隱藏歡迎模態框
                    if (welcomeModal) {
                        welcomeModal.style.opacity = '0';
                        setTimeout(() => {
                            welcomeModal.style.display = 'none';
                        }, 300);
                    }
                });
            }
        });
        
        // 詩詞卡片相關功能
        const cardModal = document.getElementById('card-modal');
        const closeCardModal = document.getElementById('close-card-modal');
        const poemCanvas = document.getElementById('poemCanvas');
        const downloadCardBtn = document.getElementById('download-card-btn');
        const styleOptions = document.querySelectorAll('.style-option');
        
        // 卡片樣式設定
        const cardStyles = {
            classic: {
                background: "#f8f5e6",
                verticalTextColor: "#222222",
                authorColor: "#8c7853",
                borderColor: "#8c7853",
                sealColor: "#832f2a",
                font: "LXGW WenKai"
            },
            inkwash: {
                background: "#ffffff",
                verticalTextColor: "#000000",
                authorColor: "#555555",
                borderColor: "#333333",
                sealColor: "#8e2b1c",
                font: "LXGW WenKai"
            },
            elegant: {
                background: "linear-gradient(135deg, #f5f7ff 0%, #e6f0ff 100%)",
                verticalTextColor: "#2c3e50",
                authorColor: "#5D5CDE",
                borderColor: "#5D5CDE",
                sealColor: "#9b2130",
                font: "LXGW WenKai"
            },
            // 紅色系古風（「落霞飛雁」）
            luoxiafeiyan: {
                background: "linear-gradient(135deg, #f5e6e6 0%, #f8d5d5 100%)",
                verticalTextColor: "#8B4513",
                authorColor: "#A85751",
                borderColor: "#B85C56",
                sealColor: "#A02C2A",
                font: "LuoXiaGuWen"
            },
            // 綠色系古風（「青竹如茵」）
            qingzhuruyin: {
                background: "linear-gradient(135deg, #e6f5e6 0%, #d5f8d5 100%)",
                verticalTextColor: "#2C513B",
                authorColor: "#2E8B57",
                borderColor: "#3C7D52",
                sealColor: "#0E6655",
                font: "LuoXiaGuWen"
            },
            // 黑色系古風（「墨韻流芳」）
            moyunliufang: {
                background: "#2a2a2a",
                verticalTextColor: "#E0E0E0",
                authorColor: "#CDCDCD",
                borderColor: "#888888",
                sealColor: "#D5D5D5",
                font: "Noto Serif TC"
            }
        };
        
        let currentStyle = 'classic';
        let currentPoemForCard = null;
        
        // 初始化卡片模態視窗
        function initCardModal() {
            // 關閉按鈕事件
            closeCardModal.addEventListener('click', () => {
                cardModal.style.display = 'none';
            });
            
            // 點擊背景關閉模態視窗
            cardModal.addEventListener('click', (e) => {
                if (e.target === cardModal) {
                    cardModal.style.display = 'none';
                }
            });
            
            // 風格選項切換
            styleOptions.forEach(option => {
                option.addEventListener('click', () => {
                    // 移除所有active類
                    styleOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // 添加active類到當前選項
                    option.classList.add('active');
                    
                    // 更新當前風格
                    currentStyle = option.dataset.style;
                    
                    // 重新渲染卡片
                    renderPoemCard();
                });
            });
            
            // 下載按鈕事件
            downloadCardBtn.addEventListener('click', () => {
                // 創建一個臨時連結
                const link = document.createElement('a');
                link.download = `${currentPoemForCard.poem}_${currentPoemForCard.author}.jpg`;
                
                // 將canvas轉換為JPEG圖片URL，質量設為0.92以保持清晰度
                link.href = poemCanvas.toDataURL('image/jpeg', 0.92);
                
                // 模擬點擊下載
                link.click();
            });
            
            // 返回遊戲按鈕事件
            const returnGameBtn = document.getElementById('return-game-btn');
            if (returnGameBtn) {
                returnGameBtn.addEventListener('click', () => {
                    playSoundClick();
                    cardModal.style.display = 'none';
                });
            }
            
            // 生成卡片按鈕
            const createCardBtn = document.getElementById('create-card-btn');
            if (createCardBtn) {
                createCardBtn.addEventListener('click', () => {
                    playSoundClick();
                    openCardModal();
                });
            }
        }
        
        // 開啟詩詞卡片模態視窗
        function openCardModal(poemIndex) {
            if (poemIndex === undefined || poemIndex === null) {
                // 如果沒有指定詩句，使用當前正在顯示的詩句
                // 確保當前詩句索引有效
                if (currentPoemIndex === undefined || !poemData[currentPoemIndex]) {
                    console.error("無法生成卡片：無效的詩句索引");
                    alert("請先開始遊戲後再生成卡片");
                    return;
                }
                currentPoemForCard = poemData[currentPoemIndex];
            } else {
                // 確保指定的詩句索引有效
                if (!poemData[poemIndex]) {
                    console.error("無法生成卡片：無效的詩句索引");
                    alert("無法生成卡片，請嘗試重新開始遊戲");
                    return;
                }
                currentPoemForCard = poemData[poemIndex];
            }
            
            // 確保currentPoemForCard已正確設置
            if (!currentPoemForCard) {
                console.error("無法生成卡片：詩句數據不完整");
                alert("無法生成卡片，請嘗試重新開始遊戲");
                return;
            }
            
            // 渲染詩詞卡片
            renderPoemCard();
            
            // 顯示模態視窗
            cardModal.style.display = 'flex';
        }
        
        // 詩詞卡片生成核心函數
        function renderPoemCard() {
            if (!currentPoemForCard) {
                console.error("無法渲染詩詞卡片：currentPoemForCard未定義");
                return;
            }
            
            // 確保先檢查字體是否已經載入
            document.fonts.ready.then(() => {
                try {
                    // 創建一個2D繪圖上下文
                    const ctx = poemCanvas.getContext('2d');
                    const width = poemCanvas.width;
                    const height = poemCanvas.height;
                    const styleConfig = cardStyles[currentStyle];
                    
                    // 首先清除整個畫布
                    ctx.clearRect(0, 0, width, height);
                    
                    // 1. 繪製背景
                    if (styleConfig.background.includes('gradient')) {
                        const gradient = ctx.createLinearGradient(0, 0, poemCanvas.width, poemCanvas.height);
                        gradient.addColorStop(0, styleConfig.background.match(/#[a-f0-9]{6}/gi)[0]);
                        gradient.addColorStop(1, styleConfig.background.match(/#[a-f0-9]{6}/gi)[1]);
                        ctx.fillStyle = gradient;
                    } else {
                        ctx.fillStyle = styleConfig.background;
                    }
                    ctx.fillRect(0, 0, width, height);
                    
                    // 2. 添加紙質紋理
                    addPaperTexture(ctx, width, height);
                    
                    // 3. 繪製邊框
                    drawClassicBorder(ctx, 60, 60, width - 120, height - 120, styleConfig.borderColor);
                    
                    // 4. 繪製豎排詩句
                    if (currentPoemForCard.verse) {
                        drawVerticalPoemByComma(ctx, currentPoemForCard.verse, styleConfig.verticalTextColor, width, height);
                    } else {
                        console.error("詩句內容缺失");
                    }
                    
                    // 5. 繪製作者和標題
                    if (currentPoemForCard.author && currentPoemForCard.poem) {
                        drawVerticalAuthorAndTitle(ctx, currentPoemForCard, styleConfig, height);
                    } else {
                        console.error("作者或標題缺失");
                    }
                    
                    // 6. 繪製印章
                    drawArtisticSeal(ctx, styleConfig.sealColor, width, height);
                } catch (error) {
                    console.error("渲染詩詞卡片時發生錯誤:", error);
                }
            }).catch(err => {
                console.error("字體載入時發生錯誤:", err);
                // 字體載入出錯時也嘗試繪製，使用可用字體
                renderPoemCardWithFallbackFonts();
            });
        }
        
        // 使用備用字體的渲染函數
        function renderPoemCardWithFallbackFonts() {
            try {
                const ctx = poemCanvas.getContext('2d');
                const width = poemCanvas.width;
                const height = poemCanvas.height;
                const styleConfig = cardStyles[currentStyle];
                
                // 使用與主要渲染相同的繪製邏輯，但使用備用字體
                ctx.clearRect(0, 0, width, height);
                
                if (styleConfig.background.includes('gradient')) {
                    const gradient = ctx.createLinearGradient(0, 0, width, height);
                    gradient.addColorStop(0, styleConfig.background.match(/#[a-f0-9]{6}/gi)[0]);
                    gradient.addColorStop(1, styleConfig.background.match(/#[a-f0-9]{6}/gi)[1]);
                    ctx.fillStyle = gradient;
                } else {
                    ctx.fillStyle = styleConfig.background;
                }
                ctx.fillRect(0, 0, width, height);
                
                addPaperTexture(ctx, width, height);
                drawClassicBorder(ctx, 60, 60, width - 120, height - 120, styleConfig.borderColor);
                
                // 使用備用字體
                const fallbackFont = "'Noto Serif TC', serif";
                
                if (currentPoemForCard.verse) {
                    drawVerticalPoemByCommaWithFont(ctx, currentPoemForCard.verse, styleConfig.verticalTextColor, width, height, fallbackFont);
                }
                
                if (currentPoemForCard.author && currentPoemForCard.poem) {
                    drawVerticalAuthorAndTitleWithFont(ctx, currentPoemForCard, styleConfig, height, fallbackFont);
                }
                
                drawArtisticSeal(ctx, styleConfig.sealColor, width, height);
            } catch (error) {
                console.error("使用備用字體渲染詩詞卡片時發生錯誤:", error);
            }
        }
        
        // 內部輔助函數定義
        function addPaperTexture(ctx, width, height) {
            ctx.save();
            
            // 創建微妙的紙面紋理
            ctx.globalAlpha = 0.03;
            
            // 產生隨機的細小紋理點
            for (let i = 0; i < 5000; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const size = Math.random() * 0.8 + 0.2;
                
                ctx.beginPath();
                ctx.fillStyle = Math.random() > 0.5 ? '#000000' : '#ffffff';
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        function drawClassicBorder(ctx, x, y, width, height, color) {
            ctx.save();
            
            // 設置邊框樣式
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            
            // 繪製單線簡約邊框 - 無圓角，更古典
            ctx.beginPath();
            ctx.rect(x, y, width, height);
            ctx.stroke();
            
            // 添加極簡裝飾 - 四角小方塊
            const cornerSize = 12;
            const cornerOffset = 4;
            
            // 左上角
            ctx.beginPath();
            ctx.rect(x - cornerOffset, y - cornerOffset, cornerSize, cornerSize);
            ctx.stroke();
            
            // 右上角
            ctx.beginPath();
            ctx.rect(x + width - cornerSize + cornerOffset, y - cornerOffset, cornerSize, cornerSize);
            ctx.stroke();
            
            // 左下角
            ctx.beginPath();
            ctx.rect(x - cornerOffset, y + height - cornerSize + cornerOffset, cornerSize, cornerSize);
            ctx.stroke();
            
            // 右下角
            ctx.beginPath();
            ctx.rect(x + width - cornerSize + cornerOffset, y + height - cornerSize + cornerOffset, cornerSize, cornerSize);
            ctx.stroke();
            
            ctx.restore();
        }
        
        function drawVerticalPoemByComma(ctx, verse, color, canvasWidth, canvasHeight) {
            try {
                // 強化檢查verse是否為有效字符串
                if (!verse || typeof verse !== 'string') {
                    console.error("詩句無效:", verse);
                    // 提供一個預設值，以便函數能夠繼續執行
                    verse = "無法顯示詩句";
                }
                
                // 設置字體 - 固定使用霞鶩文楷
                const fontSize = 54;
                ctx.font = `bold ${fontSize}px "LXGW WenKai", "Noto Serif TC", serif`;
                ctx.fillStyle = color;
                
                // 根據逗號分割詩句
                const parts = verse.split('，');
                
                // 移除所有標點符號和空格
                const cleanParts = parts.map(part => 
                    part.replace(/[，。、；：""《》〈〉『』「」【】（）［］\s]/g, '')
                );
                
                // 檢查cleanParts是否有內容，如無則使用預設值
                if (!cleanParts.length || !cleanParts[0] || !cleanParts[0].length) {
                    console.error("沒有可顯示的詩句內容，使用預設值");
                    cleanParts[0] = "無法顯示";
                }
                
                // 計算豎排位置
                const startX = canvasWidth - 165; // 右側留白
                const startY = 170; // 頂部留白
                const columnSpacing = 140; // 列間距
                
                // 繪製第一部分（右側）
                let colX = startX;
                let currentY = startY;
                
                // 安全檢查並繪製第一行詩句
                if (cleanParts[0] && typeof cleanParts[0] === 'string') {
                    for (let i = 0; i < cleanParts[0].length; i++) {
                        ctx.fillText(cleanParts[0][i], colX, currentY);
                        currentY += fontSize * 1.5;
                    }
                }
                
                // 如果有第二部分，繪製第二部分（左側），並下移兩個字的位置
                if (cleanParts.length > 1 && cleanParts[1] && typeof cleanParts[1] === 'string') {
                    colX = startX - columnSpacing;
                    // 下移兩個字的位置
                    currentY = startY + (fontSize * 1.5 * 2);
                    
                    for (let i = 0; i < cleanParts[1].length; i++) {
                        ctx.fillText(cleanParts[1][i], colX, currentY);
                        currentY += fontSize * 1.5;
                    }
                }
            } catch (error) {
                console.error("繪製豎排詩句時發生錯誤:", error);
                // 在畫布上顯示錯誤信息
                ctx.font = "16px sans-serif";
                ctx.fillStyle = "red";
                ctx.fillText("詩句渲染失敗，請重試", 100, 100);
            }
        }
        
        function drawVerticalAuthorAndTitle(ctx, poem, style, canvasHeight) {
            try {
                // 設置字體 - 固定使用霞鶩文楷
                const fontSize = 32;
                ctx.font = `bold ${fontSize}px "LXGW WenKai", "Noto Serif TC", serif`;
                ctx.fillStyle = style.authorColor;
                ctx.textAlign = 'center';
                
                // 安全獲取標題 - 如果title不存在，使用poem屬性
                const title = poem.title || poem.poem || "";
                const author = poem.author || "";
                
                console.log("繪製標題和作者:", { title, author });
                
                // 計算位置（左下角）- 確保不超出邊框
                const infoX = 100;
                const border_bottom = canvasHeight - 120; // 邊框底部位置
                const safeMargin = 40; // 安全邊距
                
                // 計算總文字長度 (作者 + 圓點 + 作品名)
                const totalTextLength = author.length + 1 + title.length;
                const totalTextHeight = totalTextLength * fontSize * 1.2;
                
                // 從底部開始，確保不超出
                let startY = border_bottom - safeMargin - totalTextHeight;
                
                // 標題在上，作者在下
                // 繪製標題
                let currentY = startY;
                
                // 安全檢查確保title字符串存在且有長度
                if (title && typeof title === 'string') {
                    for (let i = 0; i < title.length; i++) {
                        ctx.fillText(title[i], infoX, currentY);
                        currentY += fontSize * 1.2;
                    }
                } else {
                    console.warn("標題無效或缺失");
                }
                
                // 小圓點
                ctx.fillText('·', infoX, currentY);
                currentY += fontSize * 1.2;
                
                // 繪製作者
                if (author && typeof author === 'string') {
                    for (let i = 0; i < author.length; i++) {
                        ctx.fillText(author[i], infoX, currentY);
                        currentY += fontSize * 1.2;
                    }
                } else {
                    console.warn("作者無效或缺失");
                }
            } catch (error) {
                console.error("繪製標題和作者時發生錯誤:", error);
                // 在畫布上繪製錯誤提示
                ctx.fillStyle = "red";
                ctx.font = "16px sans-serif";
                ctx.textAlign = "center";
                ctx.fillText("無法繪製標題和作者", 100, canvasHeight - 80);
            }
        }
        
        function drawArtisticSeal(ctx, color, canvasWidth, canvasHeight) {
            // 檢查當前風格是否需要繪製印章
            if (currentStyle === 'moyunliufang' || currentStyle === 'elegant') {
                // 對於「墨韻流芳」和「清雅絕塵」風格，不繪製印章
                return;
            }
            
            ctx.save();
            
            // 設置印章位置 - 右下角
            const sealX = canvasWidth - 140;
            const sealY = canvasHeight - 140;
            const sealSize = 81; // 縮小後的尺寸
            
            // 基本印章形狀
            ctx.fillStyle = color;
            ctx.globalAlpha = 0.9;
            
            // 調整為正方形但略帶不規則感
            ctx.beginPath();
            ctx.rect(sealX - sealSize/2, sealY - sealSize/2, sealSize, sealSize);
            ctx.fill();
            
            // 添加內框 - 更有古典印章感
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 2;
            const innerMargin = 5.4;
            ctx.strokeRect(sealX - sealSize/2 + innerMargin, sealY - sealSize/2 + innerMargin, sealSize - innerMargin*2, sealSize - innerMargin*2);
            
            // 繪製印章文字
            ctx.globalAlpha = 1;
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // 使用思源宋體
            const fontSize = 22;
            ctx.font = `bold ${fontSize}px "Noto Serif TC", serif`;
            ctx.fillText('意', sealX, sealY - 9);
            ctx.fillText('moji', sealX, sealY + 18);
            
            ctx.restore();
        }
        
        // 繪製轉角裝飾
        function drawCornerDecoration(ctx, x, y, size, orientation, color) {
            ctx.save();
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            
            // 根據方向旋轉
            ctx.translate(x, y);
            ctx.rotate(orientation * Math.PI / 2);
            
            // 繪製裝飾
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(size, 0);
            ctx.moveTo(0, 0);
            ctx.lineTo(0, size);
            ctx.stroke();
            
            // 添加小圓點裝飾
            ctx.beginPath();
            ctx.arc(size/2, size/2, 3, 0, Math.PI * 2);
            ctx.fillStyle = color;
            ctx.fill();
            
            ctx.restore();
        }
        
        // 處理文本換行
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            let testLine = '';
            let lineCount = 0;
            
            // 中文文本換行處理
            if (/[\u4e00-\u9fa5]/.test(text)) {
                // 簡單地每20個字換行
                const chars = text.split('');
                let currentLine = '';
                let lineCount = 0;
                
                for (let i = 0; i < chars.length; i++) {
                    currentLine += chars[i];
                    
                    if ((i + 1) % 20 === 0 || i === chars.length - 1) {
                        ctx.fillText(currentLine, x, y + lineCount * lineHeight);
                        currentLine = '';
                        lineCount++;
                    }
                }
                
                return;
            }
            
            // 英文文本換行處理
            for(let n = 0; n < words.length; n++) {
                testLine = line + words[n] + ' ';
                let metrics = ctx.measureText(testLine);
                let testWidth = metrics.width;
                
                if (testWidth > maxWidth && n > 0) {
                    ctx.fillText(line, x, y);
                    line = words[n] + ' ';
                    y += lineHeight;
                    lineCount++;
                } else {
                    line = testLine;
                }
            }
            
            ctx.fillText(line, x, y + lineCount * lineHeight);
        }
        
        // 繪製Emoji圖示欄
        function drawEmojiBar(ctx, emojis, x, y, size) {
            const totalWidth = emojis.length * (size + 20);
            let startX = x - totalWidth / 2 + size / 2;
            
            emojis.forEach(emoji => {
                ctx.font = `${size}px sans-serif`;
                ctx.fillText(emoji, startX, y);
                startX += size + 20;
            });
        }
        
        // 初始化卡片模態視窗功能
        initCardModal();;
        
        // 音效系統
        let audioContext;
        
        // 初始化音頻上下文
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }
        
        // 生成音調
        function playTone(frequency, duration, type = 'sine', volume = 0.5, delay = 0) {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.type = type;
            oscillator.frequency.value = frequency;
            gainNode.gain.value = volume;
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            const now = audioContext.currentTime;
            oscillator.start(now + delay);
            
            gainNode.gain.exponentialRampToValueAtTime(0.001, now + duration + delay);
            oscillator.stop(now + duration + delay + 0.1);
        }
        
        // 音效定義
        function playSoundCorrect() {
            if (!audioContext) return;
            playTone(523.25, 0.1, 'sine', 0.25);
            playTone(659.25, 0.15, 'sine', 0.25, 0.1);
            playTone(783.99, 0.2, 'sine', 0.25, 0.2);
        }
        
        function playSoundIncorrect() {
            if (!audioContext) return;
            playTone(369.99, 0.15, 'sawtooth', 0.15);
            playTone(349.23, 0.25, 'sawtooth', 0.15, 0.15);
        }
        
        function playSoundClick() {
            if (!audioContext) return;
            playTone(587.33, 0.08, 'sine', 0.1);
        }
        
        function playSoundNewGame() {
            if (!audioContext) return;
            playTone(261.63, 0.1, 'sine', 0.25);
            playTone(329.63, 0.1, 'sine', 0.25, 0.1);
            playTone(392.00, 0.1, 'sine', 0.25, 0.2);
            playTone(523.25, 0.2, 'sine', 0.25, 0.3);
        }
        
        function playSoundTick() {
            if (!audioContext) return;
            playTone(440, 0.05, 'sine', 0.05);
        }
        
        function playSoundTimeWarning() {
            if (!audioContext) return;
            playTone(740, 0.1, 'square', 0.15);
            playTone(587.33, 0.1, 'square', 0.15, 0.1);
        }
        
        function playSoundTimeUp() {
            if (!audioContext) return;
            playTone(196.00, 0.2, 'sawtooth', 0.15);
            playTone(185.00, 0.3, 'sawtooth', 0.15, 0.2);
        }
        
        function playSoundAllCorrect() {
            if (!audioContext) return;
            playTone(523.25, 0.1, 'sine', 0.25);
            playTone(659.25, 0.1, 'sine', 0.25, 0.1);
            playTone(783.99, 0.1, 'sine', 0.25, 0.2);
            playTone(1046.50, 0.3, 'sine', 0.25, 0.3);
        }
        
        function playSoundAchievement() {
            if (!audioContext) return;
            playTone(659.25, 0.1, 'sine', 0.25);
            playTone(783.99, 0.1, 'sine', 0.25, 0.1);
            playTone(1046.50, 0.1, 'sine', 0.25, 0.2);
            playTone(1318.51, 0.3, 'sine', 0.25, 0.3);
        }
        
        // 古詩詞數據
        const poemData = [
            {
                verse: "關關雎鳩，在河之洲。",
                poem: "關雎",
                author: "詩經",
                correctEmojis: ["🐦", "🌊", "🏝️"],
                explanation: "這首詩描述了雎鳩鳥在河中的沙洲上鳴叫的情景。意象包括雎鳩鳥(🐦)、河水(🌊)和沙洲(🏝️)。"
            },
            {
                verse: "窈窕淑女，君子好逑。",
                poem: "關雎",
                author: "詩經",
                correctEmojis: ["👸", "🧠", "❤️"],
                explanation: "這首詩表達了對窈窕淑女的欣賞和愛慕之情。意象包括淑女(👸)、君子的思慕(🧠)和愛情(❤️)。"
            },
            {
                verse: "參差荇菜，左右流之。",
                poem: "關雎",
                author: "詩經",
                correctEmojis: ["🌿", "💧", "👐"],
                explanation: "這首詩描述了採摘參差不齊的荇菜，左右擺弄洗滌的情景。意象包括荇菜(🌿)、流水(💧)和左右手(👐)。"
            },
            {
                verse: "燕燕于飛，差池其羽。",
                poem: "燕燕",
                author: "詩經",
                correctEmojis: ["🐦", "✈️", "🪶"],
                explanation: "這首詩描述了燕子成對飛翔，翅膀交錯的優美畫面。意象包括燕子(🐦)、飛行(✈️)和羽毛(🪶)。"
            },
            {
                verse: "之子于歸，遠送于野。",
                poem: "燕燕",
                author: "詩經",
                correctEmojis: ["👰", "🛣️", "🏞️"],
                explanation: "這首詩描述了新娘出嫁，送行至郊野的場景。意象包括新娘(👰)、送行的道路(🛣️)和郊野(🏞️)。"
            },
            {
                verse: "瞻望弗及，泣涕如雨。",
                poem: "燕燕",
                author: "詩經",
                correctEmojis: ["👁️", "😢", "🌧️"],
                explanation: "這首詩表達了望眼欲穿卻看不到所思之人，淚如雨下的悲傷情緒。意象包括遠望(👁️)、淚水(😢)和如雨(🌧️)。"
            },
            {
                verse: "桃之夭夭，灼灼其華。",
                poem: "桃夭",
                author: "詩經",
                correctEmojis: ["🌸", "🌳", "✨"],
                explanation: "這首詩描述了桃樹茂盛，花朵鮮豔燦爛的美麗景象。意象包括桃花(🌸)、桃樹(🌳)和燦爛光彩(✨)。"
            },
            {
                verse: "之子于歸，宜其室家。",
                poem: "桃夭",
                author: "詩經",
                correctEmojis: ["👰", "🏠", "👨‍👩‍👧‍👦"],
                explanation: "這首詩祝福女子出嫁，適宜她的新家庭。意象包括新娘(👰)、房屋(🏠)和家庭(👨‍👩‍👧‍👦)。"
            },
            {
                verse: "綢繆束薪，三星在天。",
                poem: "綢繆",
                author: "詩經",
                correctEmojis: ["🪢", "🪵", "⭐"],
                explanation: "這首詩描述了用繩索綑綁柴草，同時仰望天空中的三顆星星。意象包括綢繆綑綁(🪢)、柴草(🪵)和星星(⭐)。"
            },
            {
                verse: "今夕何夕，見此良人。",
                poem: "綢繆",
                author: "詩經",
                correctEmojis: ["🌙", "❓", "👨"],
                explanation: "這首詩表達了今晚是什麼特別的夜晚，得以見到心愛的人的喜悅。意象包括今夕(🌙)、疑問(❓)和良人(👨)。"
            },
            {
                verse: "碩鼠碩鼠，無食我黍。",
                poem: "碩鼠",
                author: "詩經",
                correctEmojis: ["🐭", "🚫", "🌾"],
                explanation: "這首詩斥責大老鼠不要吃我的黍米。意象包括大老鼠(🐭)、禁止(🚫)和黍米(🌾)。"
            },
            {
                verse: "三歲貫女，莫我肯顧。",
                poem: "碩鼠",
                author: "詩經",
                correctEmojis: ["📅", "👩", "👀"],
                explanation: "這首詩感嘆三年來供養你，你卻不肯看顧我。意象包括時間(📅)、女子(👩)和關注(👀)。"
            },
            {
                verse: "蒹葭蒼蒼，白露為霜。",
                poem: "秦風．蒹葭",
                author: "詩經",
                correctEmojis: ["🌿", "💧", "❄️"],
                explanation: "這首詩描述了蘆葦蒼蒼，白露凝結成霜的秋日景象。意象包括蘆葦(🌿)、白露(💧)和霜(❄️)。"
            },
            {
                verse: "所謂伊人，在水一方。",
                poem: "秦風．蒹葭",
                author: "詩經",
                correctEmojis: ["👤", "🌊", "🏞️"],
                explanation: "這首詩表達了所思念的人，在水的那一邊的思慕之情。意象包括思念的人(👤)、水(🌊)和彼岸(🏞️)。"
            },
            {
                verse: "青青子衿，悠悠我心。",
                poem: "鄭風．子衿",
                author: "詩經",
                correctEmojis: ["💙", "👔", "💭"],
                explanation: "這首詩描述了青領之人(學子)，引起詩人悠長思念的情感。意象包括青色(💙)、衣領(👔)和思念之心(💭)。"
            },
            {
                verse: "枯魚過河泣，何時悔復及。",
                poem: "枯魚過河泣",
                author: "古詩",
                correctEmojis: ["🐟", "🏞️", "😢"],
                explanation: "這首詩通過枯魚過河眼淚流的比喻，表達了後悔莫及的感慨。意象包括枯魚(🐟)、河流(🏞️)和眼淚(😢)。"
            },
            {
                verse: "作書與魴鱮，相教慎出入。",
                poem: "枯魚過河泣",
                author: "古詩",
                correctEmojis: ["✉️", "🐠", "🚪"],
                explanation: "這首詩描述寫信給魴鱮魚，教導它們謹慎出入的警示。意象包括書信(✉️)、魚(🐠)和出入(🚪)。"
            },
            {
                verse: "山無陵，江水為竭，冬雷震震，夏雨雪。",
                poem: "上邪",
                author: "漢樂府",
                correctEmojis: ["⛰️", "🌊", "⚡"],
                explanation: "這首詩描述了山崩為平地，江水枯竭，冬天打雷，夏天下雪等反常現象。意象包括山(⛰️)、江水(🌊)和雷(⚡)。"
            },
            {
                verse: "天地合，乃敢與君絕。",
                poem: "上邪",
                author: "漢樂府",
                correctEmojis: ["🌍", "🌌", "💔"],
                explanation: "這首詩表達了除非天地合為一體，才敢與你分離的堅貞愛情。意象包括天地(🌍)、宇宙(🌌)和分離(💔)。"
            },
            {
                verse: "敕勒川，陰山下。",
                poem: "敕勒歌",
                author: "北朝民歌",
                correctEmojis: ["🏞️", "⛰️", "🌿"],
                explanation: "這首詩描述了敕勒川位於陰山下的地理位置。意象包括河川(🏞️)、山脈(⛰️)和草原(🌿)。"
            },
            {
                verse: "天似穹廬，籠蓋四野。",
                poem: "敕勒歌",
                author: "北朝民歌",
                correctEmojis: ["🌌", "🏕️", "🌄"],
                explanation: "這首詩描述了北方草原上天空如同蒙古包一樣籠罩著四面八方的景象。意象包括天空(🌌)、穹廬(🏕️)和廣闊視野(🌄)。"
            },
            {
                verse: "天蒼蒼，野茫茫，風吹草低見牛羊。",
                poem: "敕勒歌",
                author: "北朝民歌",
                correctEmojis: ["☁️", "🌾", "🐄"],
                explanation: "這首詩描述了蒼茫的天空下一望無際的原野，大風吹過草原，可以看到低頭吃草的牛羊。意象包括蒼天(☁️)、草原(🌾)和牛羊(🐄)。"
            },
            {
                verse: "江南可採蓮，蓮葉何田田。",
                poem: "江南",
                author: "漢樂府",
                correctEmojis: ["🏞️", "🌸", "🍃"],
                explanation: "這首詩描述了江南可以採摘蓮花，蓮葉多麼茂盛的景象。意象包括江南水鄉(🏞️)、蓮花(🌸)和蓮葉(🍃)。"
            },
            {
                verse: "魚戲蓮葉間，魚戲蓮葉東。",
                poem: "江南",
                author: "漢樂府",
                correctEmojis: ["🐟", "🌿", "↗️"],
                explanation: "這首詩描述了魚兒在蓮葉之間、蓮葉東邊嬉戲的生動景象。意象包括魚兒(🐟)、蓮葉(🌿)和方向(↗️)。"
            },
            {
                verse: "十五從軍征，八十始得歸。",
                poem: "十五從軍征",
                author: "漢樂府",
                correctEmojis: ["⚔️", "👴", "🏠"],
                explanation: "這首詩敘述了十五歲從軍，直到八十歲才得以返鄉的悲慘命運。意象包括征戰(⚔️)、老人(👴)和家園(🏠)。"
            },
            {
                verse: "胡馬依北風，越鳥巢南枝。",
                poem: "古詩十九首·行行重行行",
                author: "漢代",
                correctEmojis: ["🐎", "🐦", "🧭"],
                explanation: "這首詩描繪了北方的胡馬依著北風而立，南方的越鳥在南方的樹枝上築巢的景象，表達了各自歸屬不同的含義。意象包括胡馬(🐎)、越鳥(🐦)和方向(🧭)。"
            },
            {
                verse: "浮雲蔽白日，游子不顧返。",
                poem: "古詩十九首·行行重行行",
                author: "漢代",
                correctEmojis: ["☁️", "☀️", "🧳"],
                explanation: "這首詩描述了浮雲遮蔽了太陽，離家的遊子不肯回顧故鄉的景象。意象包括浮雲(☁️)、白日(☀️)和遊子(🧳)。"
            },
            {
                verse: "孟冬寒氣至，北風何慘慄。",
                poem: "古詩十九首．孟冬寒氣至",
                author: "漢代",
                correctEmojis: ["❄️", "🌬️", "🥶"],
                explanation: "這首詩描述了冬季開始時寒氣到來，北風吹來帶來的刺骨寒冷。意象包括嚴冬(❄️)、北風(🌬️)和寒冷(🥶)。"
            },
            {
                verse: "涉江採芙蓉，蘭澤多芳草。",
                poem: "古詩十九首·涉江採芙蓉",
                author: "漢代",
                correctEmojis: ["🌊", "🌺", "🌿"],
                explanation: "這首詩描述了涉水過江採摘芙蓉花，蘭草生長的水澤中長著許多芳香的草。意象包括江水(🌊)、芙蓉花(🌺)和芳草(🌿)。"
            },
            {
                verse: "西北有高樓，上與浮雲齊。",
                poem: "古詩十九首·西北有高樓",
                author: "漢代",
                correctEmojis: ["🏙️", "☁️", "↖️"],
                explanation: "這首詩描述了西北方向有座高樓，高聳入雲與浮雲齊平的壯觀景象。意象包括高樓(🏙️)、浮雲(☁️)和方位(↖️)。"
            },
            {
                verse: "交疏結綺窗，阿閣三重階。",
                poem: "古詩十九首·西北有高樓",
                author: "漢代",
                correctEmojis: ["🪟", "🏯", "🪜"],
                explanation: "這首詩描繪了交錯相連的精美窗戶，樓閣上有三層台階的建築景象。意象包括窗戶(🪟)、樓閣(🏯)和階梯(🪜)。"
            },
            {
                verse: "白雲在天，丘陵自出。",
                poem: "白雲謠",
                author: "漢代",
                correctEmojis: ["☁️", "⛰️", "🌤️"],
                explanation: "這首詩描繪了白雲漂浮在天空，丘陵在雲下若隱若現的景象。意象包括白雲(☁️)、丘陵(⛰️)和天空(🌤️)。"
            },
            {
                verse: "道里悠遠，山川間之。",
                poem: "白雲謠",
                author: "漢代",
                correctEmojis: ["🛣️", "⛰️", "🌊"],
                explanation: "這首詩描述了道路悠長遙遠，中間隔著山川的遼闊景象。意象包括道路(🛣️)、山脈(⛰️)和江河(🌊)。"
            },
            {
                verse: "城郭如故人民非，何不學仙冢纍纍？",
                poem: "丁令威歌",
                author: "漢魏",
                correctEmojis: ["🏙️", "👥", "⚰️"],
                explanation: "這首詩感慨城市建築依舊但人已非昔日之人，不如學仙以避免成為冢中枯骨的蒼涼。意象包括城市(🏙️)、人民(👥)和墳冢(⚰️)。"
            },
            {
                verse: "東臨碣石，以觀滄海。",
                poem: "觀滄海",
                author: "曹操",
                correctEmojis: ["↗️", "🪨", "🌊"],
                explanation: "這首詩描述了詩人向東登上碣石山，眺望浩瀚滄海的壯闊場景。意象包括方向(↗️)、碣石(🪨)和滄海(🌊)。"
            },
            {
                verse: "水何澹澹，山島竦峙。",
                poem: "觀滄海",
                author: "曹操",
                correctEmojis: ["🌊", "🏝️", "⛰️"],
                explanation: "這首詩描繪了水波蕩漾，山島高聳的壯麗海景。意象包括海水(🌊)、島嶼(🏝️)和山峰(⛰️)。"
            },
            {
                verse: "秋風蕭瑟，洪波湧起。",
                poem: "觀滄海",
                author: "曹操",
                correctEmojis: ["🍂", "🌬️", "🌊"],
                explanation: "這首詩描述了秋風颯颯，巨浪翻騰的秋日海景。意象包括秋天(🍂)、風(🌬️)和巨浪(🌊)。"
            },
            {
                verse: "日月之行，若出其中。",
                poem: "觀滄海",
                author: "曹操",
                correctEmojis: ["☀️", "🌙", "🌌"],
                explanation: "這首詩描繪了日月運行，好像從海中升起的壯觀景象。意象包括太陽(☀️)、月亮(🌙)和星空(🌌)。"
            },
            {
                verse: "星漢燦爛，若出其裏。",
                poem: "觀滄海",
                author: "曹操",
                correctEmojis: ["✨", "🌌", "🌊"],
                explanation: "這首詩描繪了星漢燦爛如同從海中湧現的瑰麗景象。意象包括星星(✨)、銀河(🌌)和海洋(🌊)。"
            },
            {
                verse: "不見籬間雀，見鷂自投羅。",
                poem: "野田黃雀行",
                author: "曹植",
                correctEmojis: ["🐦", "🦅", "🕸️"],
                explanation: "這首詩描述了看不見籬笆間的麻雀，卻看見鷂鷹自投羅網的諷刺景象。意象包括麻雀(🐦)、鷂鷹(🦅)和羅網(🕸️)。"
            },
            {
                verse: "明月照高樓，流光正徘徊。",
                poem: "七哀詩",
                author: "曹植",
                correctEmojis: ["🌕", "🏙️", "✨"],
                explanation: "這首詩描繪了明月照耀著高樓，月光流轉徘徊的美麗夜景。意象包括明月(🌕)、高樓(🏙️)和流光(✨)。"
            },
            {
                verse: "西北有浮雲，亭亭如車蓋。",
                poem: "西北有浮雲",
                author: "曹丕",
                correctEmojis: ["☁️", "↖️", "☂️"],
                explanation: "這首詩描繪了西北方向有浮雲，高聳像車蓋一樣的景象。意象包括浮雲(☁️)、方向(↖️)和傘狀(☂️)。"
            },
            {
                verse: "目送歸鴻，手揮五絃。",
                poem: "贈秀才入軍 其十四",
                author: "嵇康",
                correctEmojis: ["👁️", "🦢", "🎸"],
                explanation: "這首詩描述了目送歸去的大雁，手撥弄著五弦琴的送別場景。意象包括目光(👁️)、歸雁(🦢)和琴弦(🎸)。"
            },
            {
                verse: "夜中不能寐，起坐彈鳴琴。",
                poem: "詠懷 其一",
                author: "阮籍",
                correctEmojis: ["🌙", "😳", "🎻"],
                explanation: "這首詩描述了夜晚無法入睡，起身坐著彈奏鳴琴的孤寂場景。意象包括夜晚(🌙)、失眠(😳)和琴音(🎻)。"
            },
            {
                verse: "靄靄停雲，濛濛時雨。",
                poem: "停雲 其一",
                author: "陶淵明",
                correctEmojis: ["☁️", "🌫️", "🌧️"],
                explanation: "這首詩描繪了密布的雲層停滯不動，濛濛細雨時而飄落的景象。意象包括雲層(☁️)、霧氣(🌫️)和細雨(🌧️)。"
            },
            {
                verse: "翩翩飛鳥，息我庭柯。",
                poem: "停雲 其四",
                author: "陶淵明",
                correctEmojis: ["🐦", "✈️", "🌳"],
                explanation: "這首詩描繪了鳥兒輕盈飛翔，停落在我庭院樹枝上的恬靜景象。意象包括飛鳥(🐦)、飛翔(✈️)和樹枝(🌳)。"
            },
            {
                verse: "山氣日夕佳，飛鳥相與還。",
                poem: "飲酒詩",
                author: "陶淵明",
                correctEmojis: ["⛰️", "🌆", "🐦"],
                explanation: "這首詩描繪了黃昏時分山中空氣格外美好，飛鳥成群結隊歸巢的恬靜景象。意象包括山氣(⛰️)、黃昏(🌆)和飛鳥(🐦)。"
            },
            {
                verse: "羈鳥戀舊林，池魚思故淵。",
                poem: "歸園田居 其一",
                author: "陶淵明",
                correctEmojis: ["🐦", "🐟", "🌳"],
                explanation: "這首詩以籠中鳥眷戀舊時森林，池中魚懷念故時深潭為喻，表達思鄉之情。意象包括籠鳥(🐦)、池魚(🐟)和森林(🌳)。"
            },
            {
                verse: "榆柳蔭後簷，桃李羅堂前。",
                poem: "歸園田居 其一",
                author: "陶淵明",
                correctEmojis: ["🌳", "🏠", "🌸"],
                explanation: "這首詩描繪了榆樹柳樹在屋後簷下成蔭，桃樹李樹環繞著庭堂前的田園景象。意象包括樹木(🌳)、房屋(🏠)和花朵(🌸)。"
            },
            {
                verse: "種豆南山下，草盛豆苗稀。",
                poem: "歸園田居 其三",
                author: "陶淵明",
                correctEmojis: ["🌱", "⛰️", "🌿"],
                explanation: "這首詩描述了在南山下種植豆子，但野草茂盛而豆苗稀疏的田園景象。意象包括豆苗(🌱)、南山(⛰️)和野草(🌿)。"
            },
            {
                verse: "晨興理荒穢，帶月荷鋤歸。",
                poem: "歸園田居 其三",
                author: "陶淵明",
                correctEmojis: ["🌄", "🌙", "🧹"],
                explanation: "這首詩描繪了清晨起來整理荒蕪的田地，月光下扛著鋤頭回家的田園生活。意象包括清晨(🌄)、月亮(🌙)和整理(🧹)。"
            },
            {
                verse: "孟夏草木長，繞屋樹扶疏。",
                poem: "讀《山海經》 其一",
                author: "陶淵明",
                correctEmojis: ["🌿", "🏡", "🌳"],
                explanation: "這首詩描繪了初夏時節草木茂盛生長，環繞房屋的樹木枝葉茂密的舒適景象。意象包括草木(🌿)、房屋(🏡)和樹木(🌳)。"
            },
            {
                verse: "眾鳥欣有托，吾亦愛吾廬。",
                poem: "讀《山海經》 其一",
                author: "陶淵明",
                correctEmojis: ["🐦", "🏠", "❤️"],
                explanation: "這首詩表達了眾鳥欣喜有了棲息之處，我也深愛自己的茅廬的恬淡心境。意象包括鳥兒(🐦)、茅廬(🏠)和愛慕(❤️)。"
            },
            {
                verse: "念天地之悠悠，獨愴然而涕下。",
                poem: "登幽州臺歌",
                author: "陳子昂",
                correctEmojis: ["🌏", "⏳", "😢"],
                explanation: "這首詩表達了思念天地之悠久，獨自傷感而落淚的孤寂心境。意象包括天地(🌏)、時間(⏳)和淚水(😢)。"
            },
            {
                verse: "野曠天低樹，江清月近人。",
                poem: "宿建德江",
                author: "孟浩然",
                correctEmojis: ["🏞️", "🌳", "🌙"],
                explanation: "這首詩描繪了曠野遼闊天空低垂至樹梢，清澈的江水上明月仿佛觸手可及的靜謐夜景。意象包括曠野(🏞️)、樹木(🌳)和明月(🌙)。"
            },
            {
                verse: "荷風送香氣，竹露滴清響。",
                poem: "夏日南亭懷辛大",
                author: "孟浩然",
                correctEmojis: ["🌸", "🎋", "💧"],
                explanation: "這首詩描繪了荷花的香氣隨風飄送，竹葉上的露珠滴落發出清脆響聲的夏日意境。意象包括荷花(🌸)、竹子(🎋)和露珠(💧)。"
            },
            {
                verse: "八月湖水平，涵虛混太清。",
                poem: "望洞庭湖贈張丞相",
                author: "孟浩然",
                correctEmojis: ["🏞️", "🌊", "🌌"],
                explanation: "這首詩描繪了八月湖水平靜如鏡，湖面與天空渾然一體的壯麗景象。意象包括湖泊(🏞️)、湖水(🌊)和天空(🌌)。"
            },
            {
                verse: "嶺外音書斷，經冬復歷春。",
                poem: "渡漢江",
                author: "宋之問",
                correctEmojis: ["⛰️", "✉️", "🌱"],
                explanation: "這首詩表達了山嶺之外音信全無，度過冬天又經歷春天的思鄉之情。意象包括山嶺(⛰️)、書信(✉️)和春天(🌱)。"
            },
            {
                verse: "君家何處住？妾住在橫塘。",
                poem: "長干行",
                author: "崔顥",
                correctEmojis: ["🏠", "❓", "🏞️"],
                explanation: "這首詩描述了問答：你家住在哪裡？我住在橫塘的簡單對話。意象包括家園(🏠)、疑問(❓)和橫塘(🏞️)。"
            },
            {
                verse: "返景入深林，復照青苔上。",
                poem: "鹿柴",
                author: "王維",
                correctEmojis: ["☀️", "🌳", "🍃"],
                explanation: "這首詩描繪了斜陽的光芒穿入深林，再次照射在青苔上的靜謐景象。意象包括陽光(☀️)、深林(🌳)和青苔(🍃)。"
            },
            {
                verse: "木末芙蓉花，山中發紅萼。",
                poem: "辛夷塢",
                author: "王維",
                correctEmojis: ["🌳", "🌺", "⛰️"],
                explanation: "這首詩描繪了樹梢上的芙蓉花，山中開放著紅色花蕾的美麗景象。意象包括樹木(🌳)、芙蓉花(🌺)和山中(⛰️)。"
            },
            {
                verse: "澗戶寂無人，紛紛開且落。",
                poem: "辛夷塢",
                author: "王維",
                correctEmojis: ["🏞️", "👤", "🍃"],
                explanation: "這首詩描繪了山澗邊的小屋寂靜無人，花朵紛紛開放又凋落的孤寂景象。意象包括山澗(🏞️)、人煙稀少(👤)和飄落(🍃)。"
            },
            {
                verse: "深林人不知，明月來相照。",
                poem: "竹里館",
                author: "王維",
                correctEmojis: ["🌳", "👤", "🌕"],
                explanation: "這首詩描繪了深林中人跡罕至，只有明月前來照耀的幽靜景象。意象包括深林(🌳)、隱居(👤)和明月(🌕)。"
            },
            {
                verse: "白雲回望合，青靄入看無。",
                poem: "終南山",
                author: "王維",
                correctEmojis: ["☁️", "🌫️", "👁️"],
                explanation: "這首詩描繪了回望白雲合攏，入眼的青色霧氣不見了的空靈景象。意象包括白雲(☁️)、青靄(🌫️)和觀看(👁️)。"
            },
            {
                verse: "行到水窮處，坐看雲起時。",
                poem: "終南别業",
                author: "王維",
                correctEmojis: ["🚶", "🌊", "☁️"],
                explanation: "這首詩描繪了行至溪水盡頭，靜坐觀賞雲層升起的閒適景象。意象包括前行(🚶)、溪水(🌊)和雲層(☁️)。"
            },
            {
                verse: "荊溪白石出，天寒紅葉稀。",
                poem: "山中",
                author: "王維",
                correctEmojis: ["🪨", "❄️", "🍁"],
                explanation: "這首詩描繪了荊溪中露出白石，天氣寒冷紅葉稀落的秋冬交替景象。意象包括白石(🪨)、寒天(❄️)和紅葉(🍁)。"
            },
            {
                verse: "山路元無雨，空翠溼人衣。",
                poem: "山中",
                author: "王維",
                correctEmojis: ["🛣️", "🌧️", "👚"],
                explanation: "這首詩描繪了山間小路本無雨水，但翠綠的霧氣卻濕透了人的衣衫的奇妙景象。意象包括山路(🛣️)、雨水(🌧️)和衣服(👚)。"
            },
            {
                verse: "泉聲咽危石，日色冷青松。",
                poem: "過香積寺",
                author: "王維",
                correctEmojis: ["⛲", "🪨", "🌲"],
                explanation: "這首詩描繪了泉水流過險峻巖石發出咽咽聲，陽光冷照著青翠松樹的幽靜景象。意象包括泉水(⛲)、巖石(🪨)和松樹(🌲)。"
            },
            {
                verse: "平林漠漠煙如織，寒山一帶傷心碧。",
                poem: "菩薩蠻",
                author: "李白",
                correctEmojis: ["🌫️", "⛰️", "💚"],
                explanation: "這首詩描繪了平坦樹林中煙霧彌漫如織，寒冷山脈一片令人傷感的青碧色的蒼涼景象。意象包括煙霧(🌫️)、寒山(⛰️)和碧色(💚)。"
            },
            {
                verse: "犬吠水聲中，桃花帶露濃。",
                poem: "訪戴天山道士不遇",
                author: "李白",
                correctEmojis: ["🐕", "🌊", "🌸"],
                explanation: "這首詩描繪了狗吠聲融入水聲之中，帶著露水的桃花顯得格外濃豔的山居景象。意象包括狗吠(🐕)、水聲(🌊)和桃花(🌸)。"
            },
            {
                verse: "樹深時見鹿，溪午不聞鍾。",
                poem: "訪戴天山道士不遇",
                author: "李白",
                correctEmojis: ["🌳", "🦌", "🔔"],
                explanation: "這首詩描繪了深林中偶爾見到鹿，正午時分溪邊聽不到鍾聲的幽靜景象。意象包括樹木(🌳)、鹿(🦌)和鍾聲(🔔)。"
            },
            {
                verse: "野竹分青靄，飛泉掛碧峯。",
                poem: "訪戴天山道士不遇",
                author: "李白",
                correctEmojis: ["🎋", "🌫️", "⛰️"],
                explanation: "這首詩描繪了野竹穿過青色霧氣，飛泉懸掛在碧綠山峰的清幽景象。意象包括野竹(🎋)、青靄(🌫️)和山峰(⛰️)。"
            },
            {
                verse: "山隨平野盡，江入大荒流。",
                poem: "渡荊門送別",
                author: "李白",
                correctEmojis: ["⛰️", "🏞️", "🌊"],
                explanation: "這首詩描繪了山脈隨著平原延伸至盡頭，江水流入遼闊荒原的壯闊景象。意象包括山脈(⛰️)、平原(🏞️)和江水(🌊)。"
            },
            {
                verse: "樹深時見鹿，溪午不聞鍾。",
                poem: "訪戴天山道士不遇",
                author: "李白",
                correctEmojis: ["🌳", "🦌", "🔔"],
                explanation: "這首詩描繪了深林中偶爾見到鹿，正午時分溪邊聽不到鍾聲的幽靜景象。意象包括樹木(🌳)、鹿(🦌)和鍾聲(🔔)。"
            },
            {
                verse: "野竹分青靄，飛泉掛碧峯。",
                poem: "訪戴天山道士不遇",
                author: "李白",
                correctEmojis: ["🎋", "🌫️", "💦"],
                explanation: "這首詩描繪了野竹穿過青色霧氣，飛瀑懸掛在碧綠山峰的清幽景象。意象包括野竹(🎋)、青靄(🌫️)和飛泉(💦)。"
            },
            {
                verse: "山隨平野盡，江入大荒流。",
                poem: "渡荊門送別",
                author: "李白",
                correctEmojis: ["⛰️", "🏞️", "🌊"],
                explanation: "這首詩描繪了山脈隨著平原延伸至盡頭，江水流入遼闊荒原的壯闊景象。意象包括山脈(⛰️)、平原(🏞️)和江水(🌊)。"
            },
            {
                verse: "月下飛天鏡，雲生結海樓。",
                poem: "渡荊門送別",
                author: "李白",
                correctEmojis: ["🌕", "🪞", "☁️"],
                explanation: "這首詩描繪了月色照耀江面如鏡，雲氣凝聚如海上樓閣的奇景。意象包括明月(🌕)、鏡子(🪞)和雲彩(☁️)。"
            },
            {
                verse: "雲想衣裳花想容，春風拂檻露華濃。",
                poem: "清平調 其一",
                author: "李白",
                correctEmojis: ["☁️", "🌸", "🌬️"],
                explanation: "這首詩描繪了雲彩如衣裳，花朵如美人容顏，春風拂過欄杆露出濃豔光彩的美麗意境。意象包括雲彩(☁️)、花朵(🌸)和春風(🌬️)。"
            },
            {
                verse: "若非群玉山頭見，會向瑤臺月下逢。",
                poem: "清平調 其一",
                author: "李白",
                correctEmojis: ["🏔️", "🏛️", "🌕"],
                explanation: "這首詩描繪了如果不是在群玉山頭相見，就會在瑤台月光下相逢的仙境想象。意象包括仙山(🏔️)、瑤台(🏛️)和明月(🌕)。"
            },
            {
                verse: "玉階生白露，夜久侵羅襪。",
                poem: "玉階怨",
                author: "李白",
                correctEmojis: ["🪨", "💧", "👣"],
                explanation: "這首詩描繪了夜深露水沾濕玉階，久久等待所愛之人的女子羅襪被露水侵濕的孤寂景象。意象包括玉階(🪨)、露水(💧)和羅襪(👣)。"
            },
            {
                verse: "卻下水晶簾，玲瓏望秋月。",
                poem: "玉階怨",
                author: "李白",
                correctEmojis: ["🪟", "✨", "🌕"],
                explanation: "這首詩描繪了放下透明如水晶的簾子，透過簾子清晰望見秋月的情境。意象包括水晶簾(🪟)、晶瑩剔透(✨)和秋月(🌕)。"
            },
            {
                verse: "花間一壺酒，獨酌無相親。",
                poem: "月下獨酌 其一",
                author: "李白",
                correctEmojis: ["🌸", "🍶", "🧍"],
                explanation: "這首詩描繪了詩人在花叢中獨自一人飲酒，無人陪伴的孤獨景象。意象包括花叢(🌸)、酒壺(🍶)和孤身(🧍)。"
            },
            {
                verse: "舉杯邀明月，對影成三人。",
                poem: "月下獨酌 其一",
                author: "李白",
                correctEmojis: ["🥂", "🌕", "👥"],
                explanation: "這首詩描繪了詩人舉杯邀明月作伴，連同自己的影子一共三人對飲的豪邁景象。意象包括酒杯(🥂)、明月(🌕)和影子(👥)。"
            },
            {
                verse: "兩岸猿聲啼不住，輕舟已過萬重山。",
                poem: "早發白帝城",
                author: "李白",
                correctEmojis: ["🐒", "🚣", "⛰️"],
                explanation: "這首詩描繪了兩岸猿猴叫聲不斷，輕快的小船已經穿過萬重山的行旅速度之快。意象包括猿猴(🐒)、小舟(🚣)和群山(⛰️)。"
            },

            {
                verse: "秋風吹不盡，總是玉關情。",
                poem: "子夜吳歌",
                author: "李白",
                correctEmojis: ["🍂", "🏔️", "💭"],
                explanation: "這首詩感嘆秋風怎麼吹也吹不盡的離愁別緒，都是因為邊關的相思之情。意象包括秋風(🍂)、玉關(🏔️)和思念(💭)。"
            },
            {
                verse: "長安一片月，萬戶搗衣聲。",
                poem: "子夜吳歌",
                author: "李白",
                correctEmojis: ["🌕", "🏙️", "👚"],
                explanation: "這首詩描繪了長安城的夜晚，一輪明月照耀下，萬家戶紛紛傳來搗衣的聲音的城市夜景。意象包括明月(🌕)、長安城(🏙️)和搗衣(👚)。"
            },
            {
                verse: "青山橫北郭，白水繞東城。",
                poem: "送友人",
                author: "李白",
                correctEmojis: ["⛰️", "🌊", "🏙️"],
                explanation: "這首詩描繪了青山橫亙在城北，清澈的河水環繞東城的自然景觀。意象包括青山(⛰️)、河水(🌊)和城郭(🏙️)。"
            },
            {
                verse: "浮雲遊子意，落日故人情。",
                poem: "送友人",
                author: "李白",
                correctEmojis: ["☁️", "🌇", "👋"],
                explanation: "這首詩通過浮雲比喻遊子漂泊不定的心情，落日比喻對故人深厚的情誼。意象包括浮雲(☁️)、落日(🌇)和離別(👋)。"
            },
            {
                verse: "小山重疊金明滅，鬢雲欲度香腮雪。",
                poem: "菩薩蛮",
                author: "溫庭筠",
                correctEmojis: ["⛰️", "💇", "❄️"],
                explanation: "這首詩描繪了遠山重疊金光閃爍，黑髮如雲將要飄過白皙如雪的香腮的美人形象。意象包括山嶺(⛰️)、鬢髮(💇)和白皙肌膚(❄️)。"
            },
            {
                verse: "歸時休放燭花紅，待踏馬蹄清夜月。",
                poem: "玉樓春",
                author: "李煜",
                correctEmojis: ["🕯️", "🐎", "🌕"],
                explanation: "這首詩描繪了歸家時不要點燃紅色的燭火，等待踏著馬蹄在清亮的月夜中歸來的浪漫景象。意象包括燭火(🕯️)、馬蹄(🐎)和月夜(🌕)。"
            },
            {
                verse: "砌下落梅如雪亂，拂了一身還滿。",
                poem: "清平樂",
                author: "李煜",
                correctEmojis: ["🪨", "🌸", "❄️"],
                explanation: "這首詩描繪了台階下落梅如雪花般紛亂，拂去身上梅花卻仍然滿身的美麗景象。意象包括台階(🪨)、梅花(🌸)和雪花(❄️)。"
            },
            {
                verse: "無言獨上西樓，月如鉤。",
                poem: "相見歡",
                author: "李煜",
                correctEmojis: ["🏯", "🤐", "🌙"],
                explanation: "這首詩描繪了詩人無言獨自登上西樓，見到鉤形新月的孤寂景象。意象包括樓閣(🏯)、沉默(🤐)和新月(🌙)。"
            },
            {
                verse: "寂寞梧桐深院、鎖清秋。",
                poem: "相見歡",
                author: "李煜",
                correctEmojis: ["🌳", "🏡", "🍂"],
                explanation: "這首詩描繪了寂寞的梧桐樹立在幽深的庭院中，深鎖著清冷的秋意的淒涼景象。意象包括梧桐(🌳)、庭院(🏡)和秋天(🍂)。"
            },
            {
                verse: "林花謝了春紅，太匆匆。",
                poem: "烏夜啼",
                author: "李煜",
                correctEmojis: ["🌳", "🌸", "⏳"],
                explanation: "這首詩感嘆樹林中的花朵已經凋謝了春天的紅艷，時光流逝得太匆忙。意象包括樹林(🌳)、花朵(🌸)和流逝(⏳)。"
            },
            {
                verse: "無奈朝來寒雨、晚來風。",
                poem: "烏夜啼",
                author: "李煜",
                correctEmojis: ["🌧️", "🌬️", "😔"],
                explanation: "這首詩描繪了早晨時分降下寒雨，傍晚時分又刮起大風的淒涼天氣，表達了無奈之情。意象包括寒雨(🌧️)、晚風(🌬️)和無奈(😔)。"
            },
            {
                verse: "簾外雨潺潺，春意闌珊。",
                poem: "浪淘沙",
                author: "李煜",
                correctEmojis: ["🪟", "🌧️", "🌱"],
                explanation: "這首詩描繪了窗簾外雨水潺潺流淌，春天的意趣已經衰退的景象。意象包括窗簾(🪟)、細雨(🌧️)和春意(🌱)。"
            },
            {
                verse: "夢裡不知身是客，一晌貪歡。",
                poem: "浪淘沙",
                author: "李煜",
                correctEmojis: ["💤", "🧳", "😊"],
                explanation: "這首詩表達了在夢中不知自己是客居他鄉，短暫地貪圖歡樂的感慨。意象包括夢境(💤)、異鄉(🧳)和歡樂(😊)。"
            },
            {
                verse: "春花秋月何時了，往事知多少。",
                poem: "虞美人",
                author: "李煜",
                correctEmojis: ["🌸", "🌕", "🧠"],
                explanation: "這首詩感嘆春天的花朵、秋天的月亮何時才能了結，往事知道多少的傷感。意象包括春花(🌸)、秋月(🌕)和記憶(🧠)。"
            },
            {
                verse: "雕闌玉砌應猶在，只是朱顏改。",
                poem: "虞美人",
                author: "李煜",
                correctEmojis: ["🏛️", "💎", "👧"],
                explanation: "這首詩感嘆雕花欄杆和玉石台階應該還在，只是曾經的紅顏已經改變的物是人非。意象包括欄杆(🏛️)、玉石(💎)和容顏(👧)。"
            },
            {
                verse: "一曲新詞酒一杯，去年天氣舊池臺。",
                poem: "浣溪沙",
                author: "晏殊",
                correctEmojis: ["🎵", "🍷", "🏞️"],
                explanation: "這首詩描繪了一曲新作的詞配一杯美酒，憶起去年此時的天氣和昔日的池台的往事追憶。意象包括歌詞(🎵)、酒杯(🍷)和池台(🏞️)。"
            },
            {
                verse: "無可奈何花落去，似曾相識燕歸來。",
                poem: "浣溪沙",
                author: "晏殊",
                correctEmojis: ["🌸", "🐦", "🔄"],
                explanation: "這首詩感嘆花朵無可奈何地凋落，而似曾相識的燕子卻又歸來的生命循環。意象包括落花(🌸)、燕子(🐦)和歸來(🔄)。"
            },
            {
                verse: "滿目山河空念遠，落花風雨更傷春。",
                poem: "浣溪沙",
                author: "晏殊",
                correctEmojis: ["🏞️", "💭", "🌧️"],
                explanation: "這首詩表達了滿眼望去都是山河卻只能空自懷念遠方，落花隨風雨飄零更令人傷感春天將逝的情懷。意象包括山河(🏞️)、思念(💭)和風雨(🌧️)。"
            },
            {
                verse: "庭院深深深幾許？楊柳堆煙，簾幕無重數。",
                poem: "蝶戀花",
                author: "歐陽修",
                correctEmojis: ["🏡", "🌳", "🪟"],
                explanation: "這首詩描繪了庭院深邃無盡，楊柳如煙霧般茂密，簾幕層層疊疊數不清的幽深景象。意象包括庭院(🏡)、楊柳(🌳)和簾幕(🪟)。"
            },
            {
                verse: "白日依山盡，黃河入海流。",
                poem: "登鸛雀樓",
                author: "王之渙",
                correctEmojis: ["🌄", "⛰️", "🌊"],
                explanation: "這首詩描述了登上鸛雀樓看到的壯觀景象：夕陽依傍著西山慢慢地沉沒，滔滔黃河朝著東海奔流。意象包括山(⛰️)、日落(🌄)和河流(🌊)。"
            },
            {
                verse: "淚眼問花花不語，亂紅飛過鞦韆去。",
                poem: "蝶戀花",
                author: "歐陽修",
                correctEmojis: ["😢", "🌸", "🪩"],
                explanation: "這首詩描繪了詩人含淚詢問花朵卻無回應，只見花瓣紛亂飛過鞦韆的凄美景象。意象包括淚眼(😢)、落花(🌸)和鞦韆(🪩)。"
            },
            {
                verse: "今宵酒醒何處？楊柳岸、曉風殘月。",
                poem: "雨霖鈴",
                author: "柳永",
                correctEmojis: ["🍶", "🌳", "🌙"],
                explanation: "這首詩描繪了詩人從酒醒後迷茫不知身在何處，只見楊柳岸邊曉風中殘月的孤寂景象。意象包括酒醒(🍶)、楊柳(🌳)和殘月(🌙)。"
            },
            {
                verse: "夢後樓臺高鎖，酒醒簾幕低垂。",
                poem: "臨江仙",
                author: "晏幾道",
                correctEmojis: ["💭", "🏯", "🪟"],
                explanation: "這首詩描繪了夢醒後高樓依舊上鎖，酒醒後簾幕低垂的孤獨場景。意象包括夢境(💭)、樓臺(🏯)和簾幕(🪟)。"
            },
            {
                verse: "落花人獨立，微雨燕雙飛。",
                poem: "臨江仙",
                author: "晏幾道",
                correctEmojis: ["🌸", "🧍", "🐦"],
                explanation: "這首詩描繪了落花中人獨自佇立，微雨中燕子成雙飛過的淒美意境，暗示人與燕子的境遇對比。意象包括落花(🌸)、獨立之人(🧍)和雙飛燕(🐦)。"
            },
            {
                verse: "記得小蘋初見，兩重心字羅衣。",
                poem: "臨江仙",
                author: "晏幾道",
                correctEmojis: ["🧠", "❤️", "👗"],
                explanation: "這首詩回憶起初見愛人時，她穿著繡有心字紋的兩層羅衣的美好回憶。意象包括記憶(🧠)、心紋(❤️)和羅衣(👗)。"
            },
            {
                verse: "當時明月在，曾照彩雲歸。",
                poem: "臨江仙",
                author: "晏幾道",
                correctEmojis: ["🌕", "☁️", "🏠"],
                explanation: "這首詩敘述過去的明月依然在天，曾經照耀著彩雲和歸家的人的懷念情景。意象包括明月(🌕)、彩雲(☁️)和回歸(🏠)。"
            },
            {
                verse: "舞低楊柳樓心月，歌盡桃花扇底風。",
                poem: "鷓鴣天",
                author: "晏幾道",
                correctEmojis: ["💃", "🌳", "🌸"],
                explanation: "這首詩描繪了舞姿低垂如楊柳，樓心明月照耀下，歌聲婉轉吹動扇下桃花般的風的優美場景。意象包括舞蹈(💃)、楊柳(🌳)和桃花扇(🌸)。"
            },
            {
                verse: "會挽雕弓如滿月，西北望，射天狼。",
                poem: "江城子‧密州出獵",
                author: "蘇軾",
                correctEmojis: ["🏹", "🌕", "🐺"],
                explanation: "這首詩表達了詩人挽起似滿月的雕弓，向西北方向射向天狼星的豪情壯志。意象包括弓箭(🏹)、滿月(🌕)和天狼星(🐺)。"
            },
            {
                verse: "縱使相逢應不識，塵滿面，鬢如霜。",
                poem: "江城子‧乙卯正月二十日夜記夢",
                author: "蘇軾",
                correctEmojis: ["👥", "🌫️", "❄️"],
                explanation: "這首詩表達了即使相逢也認不出彼此，因為臉上滿是塵埃，鬢角如霜雪一般的滄桑感。意象包括相遇(👥)、滿面塵埃(🌫️)和霜鬢(❄️)。"
            },
            {
                verse: "夜來幽夢忽還鄉，小軒窗，正梳妝。",
                poem: "江城子‧乙卯正月二十日夜記夢",
                author: "蘇軾",
                correctEmojis: ["💭", "🏡", "💄"],
                explanation: "這首詩描繪了夜間幽夢忽然回到家鄉，見到小窗前正在梳妝的亡妻的感人場景。意象包括夢境(💭)、家鄉(🏡)和梳妝(💄)。"
            },
            {
                verse: "料得年年腸斷處，明月夜，短松岡。",
                poem: "江城子‧乙卯正月二十日夜記夢",
                author: "蘇軾",
                correctEmojis: ["💔", "🌕", "🌲"],
                explanation: "這首詩表達了詩人每年心碎之處，就是明月之夜，在那矮松岡上的妻子墓地。意象包括斷腸(💔)、明月(🌕)和松岡墓地(🌲)。"
            },
            {
                verse: "大江東去，浪淘盡、千古風流人物。",
                poem: "念奴嬌‧赤壁懷古",
                author: "蘇軾",
                correctEmojis: ["🌊", "⏳", "👑"],
                explanation: "這首詩描繪了長江東流，浪濤沖刷淘盡了無數歷史上的風流人物的滄桑歷史感。意象包括江流(🌊)、歲月(⏳)和歷史人物(👑)。"
            },
            {
                verse: "亂石穿空，驚濤拍岸，卷起千堆雪。",
                poem: "念奴嬌‧赤壁懷古",
                author: "蘇軾",
                correctEmojis: ["🪨", "🌊", "❄️"],
                explanation: "這首詩描繪了亂石聳立於空中，驚濤拍打著岸邊，捲起如雪般的千層浪花的壯觀赤壁景象。意象包括亂石(🪨)、驚濤(🌊)和雪浪(❄️)。"
            },
            {
                verse: "缺月掛疏桐，漏斷人初靜。",
                poem: "卜算子．黃州定慧院寓居作",
                author: "蘇軾",
                correctEmojis: ["🌙", "🌳", "🤫"],
                explanation: "這首詩描繪了缺月高掛在稀疏的梧桐樹間，夜漏停止滴答，人們開始安靜的寧靜夜景。意象包括缺月(🌙)、梧桐(🌳)和靜謐(🤫)。"
            },
            {
                verse: "誰見幽人獨往來，飄緲孤鴻影。",
                poem: "卜算子．黃州定慧院寓居作",
                author: "蘇軾",
                correctEmojis: ["👁️", "🚶", "🦢"],
                explanation: "這首詩詢問誰能見到那隱居之人獨自來往，如同天空中飄緲的孤鴻身影的孤寂場景。意象包括觀望(👁️)、獨行者(🚶)和孤鴻(🦢)。"
            },
            {
                verse: "揀盡寒枝不肯棲，寂寞沙洲冷。",
                poem: "卜算子．黃州定慧院寓居作",
                author: "蘇軾",
                correctEmojis: ["🌿", "🦅", "🏝️"],
                explanation: "這首詩描繪了鳥兒挑遍了寒冷的樹枝都不願停留，只見寂寞冷清的沙洲的淒涼景象。意象包括寒枝(🌿)、不棲鳥(🦅)和沙洲(🏝️)。"
            },
            {
                verse: "莫聽穿林打葉聲，何妨吟嘯且徐行。",
                poem: "定風波",
                author: "蘇軾",
                correctEmojis: ["🌳", "🍂", "🚶"],
                explanation: "這首詩勸人不要在意林中風吹打葉的聲音，何不吟詩嘯歌慢慢前行的積極人生態度。意象包括樹林(🌳)、落葉聲(🍂)和漫步(🚶)。"
            },
            {
                verse: "竹杖芒鞋輕勝馬，誰怕？一蓑煙雨任平生。",
                poem: "定風波",
                author: "蘇軾",
                correctEmojis: ["🎋", "👟", "🧥"],
                explanation: "這首詩表達了拄著竹杖穿著草鞋比騎馬還輕快，誰怕風雨，穿著蓑衣走過一生的豁達心態。意象包括竹杖(🎋)、草鞋(👟)和蓑衣(🧥)。"
            },
            {
                verse: "料峭春風吹酒醒，微冷，山頭斜照卻相迎。",
                poem: "定風波",
                author: "蘇軾",
                correctEmojis: ["🌬️", "🍶", "🌄"],
                explanation: "這首詩描繪了料峭春風吹醒酒意，感到微冷，但山頭的斜陽卻相迎而來的情景。意象包括春風(🌬️)、酒醒(🍶)和夕陽(🌄)。"
            },
            {
                verse: "回首向來蕭瑟處，歸去，也無風雨也無晴。",
                poem: "定風波",
                author: "蘇軾",
                correctEmojis: ["👀", "🌧️", "☀️"],
                explanation: "這首詩表達了回首過去那些蕭瑟之處，歸去後發現既無風雨也無晴朗的曠達心境。意象包括回首(👀)、風雨(🌧️)和晴朗(☀️)。"
            },
            {
                verse: "花褪殘紅青杏小，燕子飛時，綠水人家繞。",
                poem: "蝶戀花",
                author: "蘇軾",
                correctEmojis: ["🌸", "🐦", "🏞️"],
                explanation: "這首詩描繪了花瓣褪去紅色青杏尚小，燕子飛舞時節，綠水環繞著人家的春日景象。意象包括花瓣(🌸)、燕子(🐦)和綠水人家(🏞️)。"
            },
            {
                verse: "牆裡鞦韆牆外道，牆外行人，牆裡佳人笑。",
                poem: "蝶戀花",
                author: "蘇軾",
                correctEmojis: ["🧱", "🪩", "👧"],
                explanation: "這首詩描繪了圍牆內有鞦韆外有道路，牆外有行人走過，牆內有佳人在笑的畫面對比。意象包括圍牆(🧱)、鞦韆(🪩)和佳人(👧)。"
            },
            {
                verse: "人生到處知何似，應似飛鴻踏雪泥。",
                poem: "和子由澠池懷舊",
                author: "蘇軾",
                correctEmojis: ["🧬", "🦢", "❄️"],
                explanation: "這首詩感嘆人生處處經歷像什麼，應該像飛鴻踏過雪泥留下痕跡的哲理思考。意象包括人生(🧬)、飛鴻(🦢)和雪泥(❄️)。"
            },
            {
                verse: "自在飛花輕似夢，無邊絲雨細如愁。",
                poem: "浣溪沙",
                author: "秦觀",
                correctEmojis: ["🌸", "💭", "🌧️"],
                explanation: "這首詩描繪了自在飛舞的花朵輕如夢境，無邊無際的絲絲細雨細如愁思的優美畫面。意象包括飛花(🌸)、夢境(💭)和絲雨(🌧️)。"
            },
            {
                verse: "纖雲弄巧，飛星傳恨，銀漢迢迢暗度。",
                poem: "鵲橋仙",
                author: "秦觀",
                correctEmojis: ["☁️", "🌠", "🌌"],
                explanation: "這首詩描繪了細絲般的雲巧妙飄動，流星傳遞相思，銀河遙遠暗自流淌的七夕美景。意象包括纖雲(☁️)、流星(🌠)和銀河(🌌)。"
            },
            {
                verse: "疏影橫斜水清淺，暗香浮動月黃昏。",
                poem: "山園小梅",
                author: "林逋",
                correctEmojis: ["🌸", "💧", "🌙"],
                explanation: "這首詩描繪了水邊疏疏落落的梅影橫斜，梅花的暗香在月光黃昏時分飄散的優美景象。意象包括梅花(🌸)、清水(💧)和月色(🌙)。"
            },
            {
                verse: "金風玉露一相逢，便勝卻、人間無數。",
                poem: "鵲橋仙",
                author: "秦觀",
                correctEmojis: ["🍂", "💧", "👥"],
                explanation: "這首詩描繪了在秋風和白露時節的一次相逢，就勝過世間無數次平常見面的珍貴情感。意象包括秋風(🍂)、白露(💧)和相逢(👥)。"
            },
            {
                verse: "兩情若是久長時，又豈在、朝朝暮暮。",
                poem: "鵲橋仙",
                author: "秦觀",
                correctEmojis: ["❤️", "⏳", "🌓"],
                explanation: "這首詩表達了如果兩情真能長久，又何必在乎是不是能每天朝夕相見的情感哲理。意象包括愛情(❤️)、久長(⏳)和朝暮(🌓)。"
            },
            {
                verse: "霧失樓臺，月迷津渡。",
                poem: "踏莎行·郴州旅舍",
                author: "秦觀",
                correctEmojis: ["🌫️", "🏯", "🌕"],
                explanation: "這首詩描繪了霧氣中消失的樓臺，月色中迷亂的渡口的朦朧景象。意象包括霧氣(🌫️)、樓臺(🏯)和迷月(🌕)。"
            },
            {
                verse: "并刀如水，吳鹽勝雪，纖手破新橙。",
                poem: "少年遊",
                author: "周邦彥",
                correctEmojis: ["🔪", "🧂", "🍊"],
                explanation: "這首詩描繪了刀鋒如水般鋒利，吳地的鹽白如雪，纖細的手指剝開新鮮橙子的精緻情景。意象包括利刀(🔪)、白鹽(🧂)和鮮橙(🍊)。"
            },
            {
                verse: "葉上初陽乾宿雨，水面清圓，一一風荷舉。",
                poem: "蘇幕遮",
                author: "周邦彥",
                correctEmojis: ["☀️", "💧", "🍃"],
                explanation: "這首詩描繪了葉子上的陽光晾乾了昨夜的雨水，水面清澈圓潤，荷葉隨風一一舉起的優美景象。意象包括初陽(☀️)、宿雨(💧)和風荷(🍃)。"
            },
            {
                verse: "常記溪亭日暮，沉醉不知歸路。",
                poem: "如夢令",
                author: "李清照",
                correctEmojis: ["🏞️", "🌆", "🍶"],
                explanation: "這首詩回憶在溪邊亭子裡日落時分，因醉酒而不知歸路的情景。意象包括溪亭(🏞️)、日暮(🌆)和沉醉(🍶)。"
            },
            {
                verse: "興盡晚回舟，誤入藕花深處。",
                poem: "如夢令",
                author: "李清照",
                correctEmojis: ["🚣", "🌆", "🌸"],
                explanation: "這首詩描繪了興致盡時傍晚划船返回，卻誤入荷花深處的迷人情景。意象包括晚舟(🚣)、夕陽(🌆)和荷花(🌸)。"
            },
            {
                verse: "爭渡，爭渡，惊起一灘鷗鷺。",
                poem: "如夢令",
                author: "李清照",
                correctEmojis: ["⛵", "🏞️", "🦢"],
                explanation: "這首詩描繪了爭相渡河的喧鬧，驚起了一片棲息在沙灘上的鷗鷺的生動場景。意象包括渡河(⛵)、沙灘(🏞️)和水鳥(🦢)。"
            },
            {
                verse: "昨夜雨疏風驟，濃睡不消殘酒。",
                poem: "如夢令",
                author: "李清照",
                correctEmojis: ["🌧️", "🌬️", "😴"],
                explanation: "這首詩描繪了昨夜雨疏風急，沉睡未能消除殘留的酒意的意境。意象包括疏雨(🌧️)、驟風(🌬️)和酣睡(😴)。"
            },
            {
                verse: "知否？知否？應是綠肥紅瘦。",
                poem: "如夢令",
                author: "李清照",
                correctEmojis: ["❓", "🌿", "🌹"],
                explanation: "這首詩反問道是否知道，此時應是綠葉茂盛而紅花凋零的季節感嘆。意象包括疑問(❓)、綠葉(🌿)和紅花(🌹)。"
            },
            {
                verse: "紅藕香殘玉簟秋，輕解羅裳，獨上蘭舟。",
                poem: "一剪梅",
                author: "李清照",
                correctEmojis: ["🌸", "🎐", "🚣"],
                explanation: "這首詩描繪了紅蓮香氣漸淡涼席透出秋意，輕輕解開羅裙，獨自登上小船的閒適場景。意象包括紅藕(🌸)、玉簟(🎐)和蘭舟(🚣)。"
            },
            {
                verse: "雲中誰寄錦書來？雁字回時，月滿西樓。",
                poem: "一剪梅",
                author: "李清照",
                correctEmojis: ["✉️", "🦢", "🌕"],
                explanation: "這首詩詢問雲中有誰會寄來書信，大雁歸來之時，明月照滿西樓的思念場景。意象包括錦書(✉️)、歸雁(🦢)和明月(🌕)。"
            },
            {
                verse: "花自飄零水自流，一種相思，兩處閒愁。",
                poem: "一剪梅",
                author: "李清照",
                correctEmojis: ["🌸", "🌊", "💭"],
                explanation: "這首詩描繪了花朵自然飄零水自然流淌，同樣的相思卻在兩地造成閒愁的情感對比。意象包括落花(🌸)、流水(🌊)和相思(💭)。"
            },

            {
                verse: "天接雲濤連曉霧，星河欲轉千帆舞。",
                poem: "漁家傲",
                author: "李清照",
                correctEmojis: ["☁️", "🌌", "⛵"],
                explanation: "這首詩描繪了天空接連著雲浪直到曉霧，星河旋轉如同千帆起舞的壯觀宇宙景象。意象包括雲濤(☁️)、星河(🌌)和千帆(⛵)。"
            },
            {
                verse: "尋尋覓覓，冷冷清清，淒淒慘慘戚戚。",
                poem: "聲聲慢",
                author: "李清照",
                correctEmojis: ["🔍", "🥶", "😢"],
                explanation: "這首詩表達了作者孤獨寂寞的心情，四處尋覓卻感到周圍一片冷清，內心充滿悲傷憂戚。意象包括尋覓(🔍)、冷清(🥶)和悲傷(😢)。"
            },
            {
                verse: "落日熔金，暮雲合璧，人在何處？",
                poem: "永遇樂",
                author: "李清照",
                correctEmojis: ["🌇", "☁️", "❓"],
                explanation: "這首詩描繪了落日如熔金般燦爛，暮雲如璧玉般相合，卻不見心中思念之人的凄美景象。意象包括落日(🌇)、暮雲(☁️)和思念疑問(❓)。"
            },
            {
                verse: "染柳煙濃，吹梅笛怨，春意知幾許？",
                poem: "永遇樂",
                author: "李清照",
                correctEmojis: ["🌿", "🎵", "🌱"],
                explanation: "這首詩描繪了煙霧瀰漫的柳樹，悠揚哀怨的梅笛聲，讓人感知春天氣息的景象。意象包括柳樹(🌿)、笛聲(🎵)和春意(🌱)。"
            },
            {
                verse: "元宵佳節，融和天氣，次第豈無風雨？",
                poem: "永遇樂",
                author: "李清照",
                correctEmojis: ["🏮", "☀️", "🌧️"],
                explanation: "這首詩描繪了元宵佳節的和煦天氣，卻也預感到可能到來的風雨變化，暗喻人生起伏。意象包括節日(🏮)、晴好天氣(☀️)和風雨變化(🌧️)。"
            },
            {
                verse: "東風夜放花千樹，更吹落、星如雨。",
                poem: "青玉案．元夕",
                author: "辛棄疾",
                correctEmojis: ["🌬️", "🌸", "✨"],
                explanation: "這首詩描繪了元宵節夜晚，東風吹動千樹燈花，又吹落如雨的星光的熱鬧景象。意象包括東風(🌬️)、花樹(🌸)和星光(✨)。"
            },
            {
                verse: "鳳簫聲動，玉壺光轉，一夜魚龍舞。",
                poem: "青玉案．元夕",
                author: "辛棄疾",
                correctEmojis: ["🎵", "🏮", "🐉"],
                explanation: "這首詩描繪了元宵夜簫聲悠揚，燈光轉動，猶如魚龍起舞般熱鬧的節日景象。意象包括簫聲(🎵)、燈光(🏮)和魚龍舞動(🐉)。"
            },
            {
                verse: "蛾兒雪柳黃金縷，笑語盈盈暗香去。",
                poem: "青玉案．元夕",
                author: "辛棄疾",
                correctEmojis: ["🌿", "😊", "🌸"],
                explanation: "這首詩描繪了元宵節女子身上的金線裝飾，盈盈笑語中隱約飄散著香氣的美好景象。意象包括雪柳飾物(🌿)、笑語(😊)和香氣(🌸)。"
            },
            {
                verse: "驀然回首，那人卻在，燈火闌珊處。",
                poem: "青玉案．元夕",
                author: "辛棄疾",
                correctEmojis: ["👀", "👤", "🏮"],
                explanation: "這首詩描繪了突然回頭一望，卻發現尋找的人就在稀疏燈火處的意外相遇。意象包括回首(👀)、人影(👤)和闌珊燈火(🏮)。"
            },
            {
                verse: "少年不識愁滋味，愛上層樓。",
                poem: "醜奴兒．書博山道中壁",
                author: "辛棄疾",
                correctEmojis: ["👦", "😔", "🏙️"],
                explanation: "這首詩表達了少年時不懂愁苦滋味，喜歡登高望遠的無憂心境。意象包括少年(👦)、愁緒(😔)和高樓(🏙️)。"
            },
            {
                verse: "明月別枝驚鵲，清風半夜鳴蟬。",
                poem: "西江月．夜行黃沙道中",
                author: "辛棄疾",
                correctEmojis: ["🌕", "🐦", "🦗"],
                explanation: "這首詩描繪了明月照耀樹枝驚動喜鵲，清風中傳來半夜蟬鳴的靜謐夜景。意象包括明月(🌕)、喜鵲(🐦)和蟬鳴(🦗)。"
            },
            {
                verse: "七八個星天外，兩三點雨山前。",
                poem: "西江月．夜行黃沙道中",
                author: "辛棄疾",
                correctEmojis: ["⭐", "💧", "⛰️"],
                explanation: "這首詩描繪了天外僅有七八顆星星，山前飄著兩三點雨的寧靜山路景象。意象包括星星(⭐)、雨點(💧)和山景(⛰️)。"
            },
            {
                verse: "淮南皓月冷千山，冥冥歸去無人管。",
                poem: "踏莎行",
                author: "姜夔",
                correctEmojis: ["🌕", "⛰️", "🚶"],
                explanation: "這首詩描繪了淮南明月照耀千座寒山，詩人在暗夜中歸去無人關心的孤寂景象。意象包括明月(🌕)、千山(⛰️)和孤獨歸途(🚶)。"
            },
            {
                verse: "春未綠，鬢先絲，人間別久不成悲。",
                poem: "鷓鴣天",
                author: "姜夔",
                correctEmojis: ["🌱", "👨‍🦳", "😢"],
                explanation: "這首詩感嘆春天還未顯現綠意，鬢髮已先變白，人世間別離太久也不再感到悲傷的蒼涼感。意象包括春天(🌱)、白髮(👨‍🦳)和悲傷(😢)。"
            },
            {
                verse: "誰教歲歲紅蓮夜，兩處沈吟各自知。",
                poem: "鷓鴣天",
                author: "姜夔",
                correctEmojis: ["🌸", "🌃", "💭"],
                explanation: "這首詩表達了每年七夕紅蓮花開之夜，兩地相思之人各自沈吟思念的情景。意象包括紅蓮(🌸)、夜色(🌃)和沈思(💭)。"
            },
            {
                verse: "二十四橋仍在，波心蕩、冷月無聲。",
                poem: "揚州慢",
                author: "姜夔",
                correctEmojis: ["🌉", "🌊", "🌙"],
                explanation: "這首詩描繪了揚州二十四橋依舊存在，水波中蕩漾著寒冷明月無聲倒影的淒美景象。意象包括古橋(🌉)、水波(🌊)和冷月(🌙)。"
            },
            {
                verse: "念橋邊、紅藥年年，知為誰生？",
                poem: "揚州慢",
                author: "姜夔",
                correctEmojis: ["🌉", "🌺", "❓"],
                explanation: "這首詩表達了思念橋邊年年盛開的紅藥花，不知是為誰而開的哲理思考。意象包括橋邊(🌉)、紅藥花(🌺)和思考(❓)。"
            },
            {
                verse: "莫開簾，怕見飛花，怕聽啼鵑。",
                poem: "高陽臺．西湖春感",
                author: "張炎",
                correctEmojis: ["🪟", "🌸", "🐦"],
                explanation: "這首詩表達了不敢掀開窗簾，害怕看見飛舞的落花，害怕聽到杜鵑啼叫的心境。意象包括窗簾(🪟)、飛花(🌸)和杜鵑鳥(🐦)。"
            },
            {
                verse: "黃蜂頻撲鞦韆索，有當時、纖手香凝。",
                poem: "風入松",
                author: "吳文英",
                correctEmojis: ["🐝", "🪩", "👐"],
                explanation: "這首詩描繪了黃蜂不斷撲向鞦韆繩索，還存有昔日纖細手指留下的香氣的美好回憶。意象包括黃蜂(🐝)、鞦韆(🪩)和纖手(👐)。"
            },
            {
                verse: "青春半面妝如畫，細雨三更花又飛。",
                poem: "思佳客．賦半面女髑髏",
                author: "吳文英",
                correctEmojis: ["🧑", "🌧️", "🌸"],
                explanation: "這首詩描繪了青春時半面妝容如畫般美麗，深夜細雨中花瓣又飛落的淒美意境。意象包括青春(🧑)、細雨(🌧️)和飛花(🌸)。"
            },
            {
                verse: "被酒莫驚春睡重，賭書消得潑茶香。",
                poem: "浣溪沙",
                author: "納蘭性德",
                correctEmojis: ["🍶", "😴", "📚"],
                explanation: "這首詩描繪了飲酒後不必驚訝春日睡意沉重，以書作賭注消磨時光的悠閒生活。意象包括酒(🍶)、春睡(😴)和書籍(📚)。"
            },
            {
                verse: "人生若只如初見，何事秋風悲畫扇？",
                poem: "木蘭花．擬古決絕詞柬友",
                author: "納蘭性德",
                correctEmojis: ["👁️", "🍂", "🪭"],
                explanation: "這首詩感嘆如果人生關係能保持初見時的美好，何必因秋風而對著畫扇悲傷的情感哲理。意象包括初見(👁️)、秋風(🍂)和畫扇(🪭)。"
            },
            {
                verse: "日暮蒼山遠，天寒白屋貧。",
                poem: "逢雪宿芙蓉山主人",
                author: "劉長卿",
                correctEmojis: ["🌆", "⛰️", "🏠"],
                explanation: "這首詩描繪了日落時遠處的蒼山，天寒地凍中貧困的白色茅屋的淒涼景象。意象包括日暮(🌆)、蒼山(⛰️)和貧屋(🏠)。"
            },
            {
                verse: "柴門聞犬吠，風雪夜歸人。",
                poem: "逢雪宿芙蓉山主人",
                author: "劉長卿",
                correctEmojis: ["🐕", "❄️", "🚶"],
                explanation: "這首詩描繪了簡陋的柴門外傳來狗吠聲，在風雪之夜有人歸來的溫馨畫面。意象包括犬吠(🐕)、風雪(❄️)和歸人(🚶)。"
            },
            {
                verse: "香霧雲鬟濕，清輝玉臂寒。",
                poem: "月夜",
                author: "杜甫",
                correctEmojis: ["🌫️", "💇", "💪"],
                explanation: "這首詩描繪了香霧中妻子的雲髻被沾濕，月光清輝照在她如玉般的手臂顯得寒冷的思念場景。意象包括香霧(🌫️)、雲髻(💇)和玉臂(💪)。"
            },
            {
                verse: "星垂平野闊，月湧大江流。",
                poem: "旅夜書懷",
                author: "杜甫",
                correctEmojis: ["⭐", "🏞️", "🌊"],
                explanation: "這首詩描繪了夜空中星星低垂在廣闊的平原上，明月從大江流水中湧出的壯麗景象。意象包括星空(⭐)、平野(🏞️)和江流(🌊)。"
            },
            {
                verse: "露從今夜白，月是故鄉明。",
                poem: "月夜憶舍弟",
                author: "杜甫",
                correctEmojis: ["💧", "🌕", "🏡"],
                explanation: "這首詩表達了露水從今夜開始變白，明月是故鄉的月亮更明亮的思鄉之情。意象包括白露(💧)、明月(🌕)和故鄉(🏡)。"
            },
            {
                verse: "玉露凋傷楓樹林，巫山巫峽氣蕭森。",
                poem: "秋興八首 其一",
                author: "杜甫",
                correctEmojis: ["💧", "🍁", "⛰️"],
                explanation: "這首詩描繪了秋露凋零侵襲楓樹林，巫山巫峽間氣氛蕭瑟陰森的秋日景象。意象包括玉露(💧)、楓林(🍁)和巫山(⛰️)。"
            },
            {
                verse: "江間波浪兼天湧，塞上風雲接地陰。",
                poem: "秋興八首 其一",
                author: "杜甫",
                correctEmojis: ["🌊", "☁️", "🌫️"],
                explanation: "這首詩描繪了江面上波浪滔天，邊塞上風雲低垂接近地面一片陰暗的壯闊景象。意象包括波浪(🌊)、風雲(☁️)和陰暗(🌫️)。"
            },
            {
                verse: "舊時王謝堂前燕，飛入尋常百姓家。",
                poem: "烏衣巷",
                author: "劉禹錫",
                correctEmojis: ["🏯", "🐦", "🏠"],
                explanation: "這首詩描繪了昔日王謝貴族府邸前的燕子，如今飛入普通百姓家的世事變遷。意象包括貴族府邸(🏯)、燕子(🐦)和普通人家(🏠)。"
            },
            {
                verse: "獨憐幽草澗邊生，上有黃鸝深樹鳴。",
                poem: "滁州西澗",
                author: "韋應物",
                correctEmojis: ["🌿", "🏞️", "🐦"],
                explanation: "這首詩描繪了詩人獨自憐愛溪澗邊生長的幽草，樹上有黃鸝鳥在深處鳴叫的恬靜景象。意象包括幽草(🌿)、溪澗(🏞️)和黃鸝鳥(🐦)。"
            },
            {
                verse: "春潮帶雨晚來急，野渡無人舟自橫。",
                poem: "滁州西澗",
                author: "韋應物",
                correctEmojis: ["🌊", "🌧️", "🚣"],
                explanation: "這首詩描繪了春天漲潮夾帶雨水到晚上急促澎湃，荒野渡口無人小船自然橫在水中的寧靜景象。意象包括春潮(🌊)、雨水(🌧️)和孤舟(🚣)。"
            },
            {
                verse: "秋陰不散霜飛晚，留得枯荷聽雨聲。",
                poem: "宿駱氏亭寄懷崔雍崔袞",
                author: "李商隱",
                correctEmojis: ["🍂", "❄️", "🌧️"],
                explanation: "這首詩描繪了秋天陰雲不散霜降遲來，只留下枯萎的荷葉聆聽雨聲的淒美景象。意象包括秋陰(🍂)、飛霜(❄️)和雨聲(🌧️)。"
            },
            {
                verse: "昨夜星辰昨夜風，畫樓西畔桂堂東。",
                poem: "無題",
                author: "李商隱",
                correctEmojis: ["⭐", "🌬️", "🏯"],
                explanation: "這首詩回憶昨夜的星星和風，以及畫樓西側桂堂東邊的情景，暗含相思之情。意象包括星辰(⭐)、夜風(🌬️)和畫樓(🏯)。"
            },
            {
                verse: "身無彩鳳雙飛翼，心有靈犀一點通。",
                poem: "無題",
                author: "李商隱",
                correctEmojis: ["🦢", "💞", "❤️"],
                explanation: "這首詩表達了雖然沒有彩鳳的雙飛之翼可相會，但心靈有如靈犀般相通的深刻情感。意象包括彩鳳(🦢)、飛翔(💞)和心靈相通(❤️)。"
            },
            {
                verse: "星沉海底當窗見，雨過河源隔座看。",
                poem: "碧城三首 其一",
                author: "李商隱",
                correctEmojis: ["⭐", "🪟", "🌧️"],
                explanation: "這首詩描繪了星星沉入海底可從窗前看見，雨過河源可隔座觀望的奇異景象。意象包括星辰(⭐)、窗景(🪟)和驟雨(🌧️)。"
            },
            {
                verse: "嫦娥應悔偷靈藥，碧海青天夜夜心。",
                poem: "嫦娥",
                author: "李商隱",
                correctEmojis: ["🌙", "🧪", "🌌"],
                explanation: "這首詩想像嫦娥後悔偷取長生不老藥，在碧海青天中夜夜思念的孤寂。意象包括嫦娥(🌙)、靈藥(🧪)和夜空(🌌)。"
            },
            {
                verse: "曾逐東風拂舞筵，樂遊春苑斷腸天。",
                poem: "柳",
                author: "李商隱",
                correctEmojis: ["🌬️", "💃", "🏞️"],
                explanation: "這首詩擬人化描繪柳樹曾隨東風拂過舞宴，在樂遊苑中度過春天的情景。意象包括東風(🌬️)、舞宴(💃)和春苑(🏞️)。"
            },
            {
                verse: "如何肯到清秋日，已帶斜陽又帶蟬。",
                poem: "柳",
                author: "李商隱",
                correctEmojis: ["🍂", "🌇", "🦗"],
                explanation: "這首詩感嘆柳樹如何願意等到清秋時節，既要承受斜陽照射又要負擔知了的哀鳴。意象包括清秋(🍂)、斜陽(🌇)和蟬鳴(🦗)。"
            },
            {
                verse: "蠟燭有心還惜別，替人垂淚到天明。",
                poem: "贈別",
                author: "杜牧",
                correctEmojis: ["🕯️", "😢", "🌅"],
                explanation: "這首詩擬人化描繪蠟燭有情感懂得惜別，代替人垂淚直到天亮的感人場景。意象包括蠟燭(🕯️)、淚水(😢)和天明(🌅)。"
            },
            {
                verse: "煙籠寒水月籠沙，夜泊秦淮近酒家。",
                poem: "泊秦淮",
                author: "杜牧",
                correctEmojis: ["🌫️", "🌕", "🚣"],
                explanation: "這首詩描繪了煙霧籠罩寒冷的水面，月光籠罩沙洲，夜晚停泊在秦淮河畔酒家附近的靜謐景象。意象包括煙霧(🌫️)、明月(🌕)和夜泊(🚣)。"
            },
            {
                verse: "商女不知亡國恨，隔江猶唱後庭花。",
                poem: "泊秦淮",
                author: "杜牧",
                correctEmojis: ["👩", "🎵", "🌸"],
                explanation: "這首詩描繪了歌女不知亡國之恨，隔著江水仍在唱著亡國之音《後庭花》的諷刺場景。意象包括歌女(👩)、歌聲(🎵)和花(🌸)。"
            },
            {
                verse: "漆灰骨末丹水沙，淒淒古血生銅花。",
                poem: "長平箭頭歌",
                author: "李賀",
                correctEmojis: ["🧪", "🩸", "🥀"],
                explanation: "這首詩描述了戰場上殘留的漆灰、骨灰與丹沙混合，古舊的血跡在銅器上形成花紋的陰森場景。意象包括煉丹物(🧪)、血跡(🩸)和銅鏽花紋(🥀)。"
            },
            {
                verse: "黑雲壓城城欲摧，甲光向日金鱗開。",
                poem: "雁門太守行",
                author: "李賀",
                correctEmojis: ["☁️", "🏙️", "⚔️"],
                explanation: "這首詩描繪了黑雲壓城城池幾欲崩塌，陽光下士兵鎧甲閃耀如金鱗的肅殺戰場。意象包括黑雲(☁️)、城池(🏙️)和鎧甲(⚔️)。"
            },
            {
                verse: "角聲滿天秋色裏，塞上燕脂凝夜紫。",
                poem: "雁門太守行",
                author: "李賀",
                correctEmojis: ["📯", "🍂", "🌆"],
                explanation: "這首詩描繪了秋天裡號角聲響徹天空，邊塞上暮色如燕脂般凝結成紫色的壯麗景象。意象包括號角(📯)、秋色(🍂)和暮色(🌆)。"
            },
            {
                verse: "幽蘭露，如啼眼。",
                poem: "蘇小小墓",
                author: "李賀",
                correctEmojis: ["🌿", "💧", "😢"],
                explanation: "這首詩描繪了幽蘭上的露水，如同啼哭的眼淚一般的凄美意象。意象包括幽蘭(🌿)、露珠(💧)和淚眼(😢)。"
            },
            {
                verse: "霜落熊升樹，林空鹿飲溪。",
                poem: "魯山山行",
                author: "梅堯臣",
                correctEmojis: ["❄️", "🐻", "🦌"],
                explanation: "這首詩描繪了霜雪飄落時熊爬上樹木，林中空曠處鹿在溪邊飲水的自然生態景象。意象包括霜雪(❄️)、熊(🐻)和鹿(🦌)。"
            },
            {
                verse: "別院深深夏簟清，石榴開遍透簾明。",
                poem: "夏意",
                author: "蘇舜欽",
                correctEmojis: ["🏡", "🧩", "🌺"],
                explanation: "這首詩描繪了深深的別院中夏日竹席清涼，石榴花開遍透過簾子明亮可見的夏日景象。意象包括別院(🏡)、竹席(🧩)和石榴花(🌺)。"
            },
            {
                verse: "樹陰滿地日當午，夢覺流鶯時一聲。",
                poem: "夏意",
                author: "蘇舜欽",
                correctEmojis: ["🌳", "☀️", "🐦"],
                explanation: "這首詩描繪了正午時分滿地樹陰，從夢中醒來聽到黃鸝偶爾鳴叫一聲的夏日午後。意象包括樹陰(🌳)、正午(☀️)和黃鸝(🐦)。"
            },
            {
                verse: "東風裊裊泛崇光，香霧空濛月轉廊。",
                poem: "海棠",
                author: "蘇軾",
                correctEmojis: ["🌬️", "🌫️", "🌕"],
                explanation: "這首詩描繪了東風輕輕吹拂花光搖曳，香霧彌漫中明月照耀遊廊的優美景象。意象包括東風(🌬️)、香霧(🌫️)和明月(🌕)。"
            },
            {
                verse: "只恐夜深花睡去，故燒高燭照紅妝。",
                poem: "海棠",
                author: "蘇軾",
                correctEmojis: ["🌙", "🌸", "🕯️"],
                explanation: "這首詩表達了擔心夜深花朵入睡，特意點燃高燭照亮花朵紅艷妝容的雅趣。意象包括夜深(🌙)、花朵(🌸)和蠟燭(🕯️)。"
            },
            {
                verse: "我居北海君南海，寄雁傳書謝不能。",
                poem: "寄黃幾復",
                author: "黃庭堅",
                correctEmojis: ["🧭", "🦢", "✉️"],
                explanation: "這首詩表達了我住在北方你住在南方，想託大雁傳書卻也無法實現的遙遠相隔。意象包括方位(🧭)、大雁(🦢)和書信(✉️)。"
            },
            {
                verse: "桃李春風一杯酒，江湖夜雨十年燈。",
                poem: "寄黃幾復",
                author: "黃庭堅",
                correctEmojis: ["🌸", "🍷", "💡"],
                explanation: "這首詩以桃李春風一杯酒比喻短暫相聚，江湖夜雨十年燈形容長久分離的情誼。意象包括桃李(🌸)、美酒(🍷)和燈火(💡)。"
            },
            {
                verse: "落木千山天遠大，澄江一道月分明。",
                poem: "登快閣",
                author: "黃庭堅",
                correctEmojis: ["🍂", "⛰️", "🌕"],
                explanation: "這首詩描繪了落葉遍布千山之上天空遠闊，一道清澈的江水中月影分外明亮的壯麗景象。意象包括落葉(🍂)、群山(⛰️)和明月(🌕)。"
            },
            {
                verse: "風捲江湖雨暗村，四山聲作海濤翻。",
                poem: "十一月四日風雨大作 其一",
                author: "陸游",
                correctEmojis: ["🌪️", "🌧️", "🌊"],
                explanation: "這首詩描述了狂風捲起江湖暴雨籠罩村莊，四周群山的聲響如同海浪翻騰的氣勢磅礴。意象包括大風(🌪️)、暴雨(🌧️)和海浪(🌊)。"
            },
            {
                verse: "溪柴火軟蠻氈暖，我與狸奴不出門。",
                poem: "十一月四日風雨大作 其一",
                author: "陸游",
                correctEmojis: ["🔥", "🧶", "🐱"],
                explanation: "這首詩描繪了溪邊柴火柔和毛氈溫暖，自己與貓咪一同在家不出門的溫馨場景。意象包括柴火(🔥)、毛氈(🧶)和貓(🐱)。"
            },
            {
                verse: "夜闌臥聽風吹雨，鐵馬冰河入夢來。",
                poem: "十一月四日風雨大作 其二",
                author: "陸游",
                correctEmojis: ["🌃", "🌧️", "🐎"],
                explanation: "這首詩描述了夜深臥聽風吹雨聲，夢中出現鐵馬冰河的軍旅生涯的愛國情懷。意象包括夜晚(🌃)、風雨(🌧️)和鐵馬(🐎)。"
            },
            {
                verse: "山河破碎風飄絮，身世浮沉雨打萍。",
                poem: "過零丁洋",
                author: "文天祥",
                correctEmojis: ["🏞️", "🌬️", "☔"],
                explanation: "這首詩以風中飄絮和雨打浮萍比喻國破家亡時個人命運的飄零無依。意象包括山河(🏞️)、飄絮(🌬️)和雨打(☔)。"
            },
            {
                verse: "應憐屐齒印蒼苔，小扣柴扉久不開。",
                poem: "遊園不值",
                author: "葉紹翁",
                correctEmojis: ["👟", "🌿", "🚪"],
                explanation: "這首詩描繪了木屐在青苔上留下痕跡，輕輕敲打柴門卻久久無人開門的寂寞場景。意象包括木屐(👟)、苔蘚(🌿)和柴門(🚪)。"
            },
            {
                verse: "有約不來過夜半，閒敲棋子落燈花。",
                poem: "有約",
                author: "趙師秀",
                correctEmojis: ["🌙", "♟️", "💡"],
                explanation: "這首詩描述了有約之人過了半夜還不來，獨自敲打棋子同時燈花凋落的寂寞等待。意象包括夜半(🌙)、棋子(♟️)和燈花(💡)。"
            },
            {
                verse: "梅子金黃杏子肥，麥花雪白菜花稀。",
                poem: "田園四時雜興 其二",
                author: "范成大",
                correctEmojis: ["🍏", "🍑", "🌾"],
                explanation: "這首詩描繪了初夏時節梅子金黃杏子豐滿，麥花雪白菜花稀落的田園景象。意象包括梅子(🍏)、杏子(🍑)和麥花(🌾)。"
            },
            {
                verse: "日長籬落無人過，惟有蜻蜓蛺蝶飛。",
                poem: "田園四時雜興 其二",
                author: "范成大",
                correctEmojis: ["☀️", "🥅", "🦋"],
                explanation: "這首詩描繪了夏日漫長籬笆附近無人經過，只有蜻蜓和蝴蝶在飛舞的寧靜景象。意象包括長日(☀️)、籬笆(🥅)和蝴蝶(🦋)。"
            },
            {
                verse: "春江潮水連海平，海上明月共潮生。",
                poem: "春江花月夜",
                author: "張若虛",
                correctEmojis: ["🌊", "🌕", "🌊"],
                explanation: "這首詩描繪了春天的江潮與大海連成一片，明月從海上升起與潮水一同湧現的壯闊景象。意象包括潮水(🌊)、明月(🌕)和海面(🌊)。"
            },
            {
                verse: "不知江月待何人，但見長江送流水。",
                poem: "春江花月夜",
                author: "張若虛",
                correctEmojis: ["🌕", "🏞️", "💦"],
                explanation: "這首詩表達了不知江上明月等待何人，只見長江不斷送走流水的哲理感慨。意象包括江月(🌕)、長江(🏞️)和流水(💦)。"
            },
            {
                verse: "北風捲地白草折，胡天八月即飛雪。",
                poem: "白雪歌送武判官歸京",
                author: "岑參",
                correctEmojis: ["🌬️", "🌾", "❄️"],
                explanation: "這首詩描繪了北風捲地白草折斷，塞北八月就已經飛雪紛揚的蒼涼邊塞景象。意象包括北風(🌬️)、白草(🌾)和飛雪(❄️)。"
            },
            {
                verse: "忽如一夜春風來，千樹萬樹梨花開。",
                poem: "白雪歌送武判官歸京",
                author: "岑參",
                correctEmojis: ["🌬️", "🌸", "❄️"],
                explanation: "這首詩將雪景比作春風吹過千樹萬樹梨花盛開的美麗景象。意象包括春風(🌬️)、梨花(🌸)和雪景(❄️)。"
            },
            {
                verse: "山迴路轉不見君，雪上空留馬行處。",
                poem: "白雪歌送武判官歸京",
                author: "岑參",
                correctEmojis: ["🛣️", "👤", "🐎"],
                explanation: "這首詩描繪了山路彎曲已看不見友人身影，雪地上只留下馬蹄印的離別場景。意象包括山路(🛣️)、離去的友人(👤)和馬蹄印(🐎)。"
            },
            {
                verse: "半壁見海日，空中聞天雞。",
                poem: "夢游天姥吟留別",
                author: "李白",
                correctEmojis: ["🏔️", "🌅", "🐓"],
                explanation: "這首詩描繪了從山壁一側見到海上升起的太陽，空中傳來天雞鳴叫的奇幻景象。意象包括峭壁(🏔️)、朝陽(🌅)和雞鳴(🐓)。"
            },
            {
                verse: "熊咆龍吟殷巖泉，慄深林兮驚層巔。",
                poem: "夢游天姥吟留別",
                author: "李白",
                correctEmojis: ["🐻", "🐉", "🌲"],
                explanation: "這首詩描繪了熊咆哮龍長吟聲震岩間泉水，使深林震顫山巔驚動的壯麗意象。意象包括熊(🐻)、龍(🐉)和深林(🌲)。"
            },
            {
                verse: "霓為衣兮風為馬，雲之君兮紛紛而來下。",
                poem: "夢游天姥吟留別",
                author: "李白",
                correctEmojis: ["🌈", "🌬️", "☁️"],
                explanation: "這首詩描繪了神仙以彩虹為衣服風為坐騎，雲中之君紛紛下凡的仙境幻象。意象包括彩虹(🌈)、風馬(🌬️)和雲神(☁️)。"
            },
            {
                verse: "青冥浩蕩不見底，日月照耀金銀臺。",
                poem: "夢游天姥吟留別",
                author: "李白",
                correctEmojis: ["🌌", "☀️", "🏛️"],
                explanation: "這首詩描繪了深邃浩瀚的青天望不見底，太陽和月亮照耀金銀寶台的壯麗仙境。意象包括青天(🌌)、日月(☀️)和寶台(🏛️)。"
            },
            {
                verse: "黃鶴之飛尚不得過，猿猱欲度愁攀援。",
                poem: "蜀道難",
                author: "李白",
                correctEmojis: ["🐦", "🐒", "🏔️"],
                explanation: "這首詩描述了即使黃鶴飛行也不能飛過的高山，猿猴想要攀爬也感到愁苦的艱險蜀道。意象包括黃鶴(🐦)、猿猴(🐒)和陡坡(🏔️)。"
            },
            {
                verse: "連峰去天不盈尺，枯松倒掛倚絕壁。",
                poem: "蜀道難",
                author: "李白",
                correctEmojis: ["⛰️", "🌲", "🧗"],
                explanation: "這首詩描繪了連綿的山峰幾乎要刺入天空，枯松倒掛在絕壁上的險峻景象。意象包括山峰(⛰️)、枯松(🌲)和絕壁(🧗)。"
            },
            {
                verse: "飛湍瀑流爭喧豗，砯崖轉石萬壑雷。",
                poem: "蜀道難",
                author: "李白",
                correctEmojis: ["💦", "🌊", "⚡"],
                explanation: "這首詩描繪了飛速湍急的水流和瀑布爭相喧嘩，巨石滾落山崖發出如萬壑雷鳴的聲響。意象包括急流(💦)、瀑布(🌊)和雷鳴(⚡)。"
            },
            {
                verse: "玉容寂寞淚闌干，梨花一枝春帶雨。",
                poem: "長恨歌",
                author: "白居易",
                correctEmojis: ["👸", "😢", "🌸"],
                explanation: "這首詩描繪了美人玉容寂寞淚流滿面，如同春雨中的一枝梨花的凄美形象。意象包括美人(👸)、淚水(😢)和梨花(🌸)。"
            },
            {
                verse: "行宮見月傷心色，夜雨聞鈴腸斷聲。",
                poem: "長恨歌",
                author: "白居易",
                correctEmojis: ["🏯", "🌕", "🔔"],
                explanation: "這首詩描繪了在行宮中見到明月傷心落淚，夜雨中聽到鈴聲腸斷的悲涼景象。意象包括行宮(🏯)、明月(🌕)和鈴聲(🔔)。"
            },
            {
                verse: "春風桃李花開日，秋雨梧桐葉落時。",
                poem: "長恨歌",
                author: "白居易",
                correctEmojis: ["🌬️", "🌸", "🍂"],
                explanation: "這首詩對比了春風吹拂桃李花開的美好時光和秋雨中梧桐葉落的凄涼景象。意象包括春風(🌬️)、桃李(🌸)和落葉(🍂)。"
            },
            {
                verse: "床前明月光，疑是地上霜。",
                poem: "靜夜思",
                author: "李白",
                correctEmojis: ["🌕", "❄️", "🛏️"],
                explanation: "這首詩描述了詩人在床前看到月光如霜的情景。意象包括明月(🌕)、白霜(❄️)和床榻(🛏️)。"
            },
            {
                verse: "孤帆遠影碧空盡，唯見長江天際流。",
                poem: "黃鶴樓送孟浩然之廣陵",
                author: "李白",
                correctEmojis: ["⛵", "🌊", "🌌"],
                explanation: "這首詩描述了送別友人時看到的場景：小船的帆影消失在碧空的盡頭，只看見長江在天際流淌。意象包括孤帆(⛵)、江水(🌊)和廣闊的天空(🌌)。"
            },
            {
                verse: "飛流直下三千尺，疑是銀河落九天。",
                poem: "望廬山瀑布",
                author: "李白",
                correctEmojis: ["💦", "🌊", "✨"],
                explanation: "這首詩描繪了廬山瀑布飛瀉而下的壯觀景象，如同銀河從天而降。意象包括瀑布(💦)、流水(🌊)和星空銀河(✨)。"
            },
            {
                verse: "君問歸期未有期，巴山夜雨漲秋池。",
                poem: "夜雨寄北",
                author: "李商隱",
                correctEmojis: ["🌧️", "🏞️", "🍂"],
                explanation: "這首詩表達了詩人在他鄉的思鄉之情，秋天的雨夜讓他更加思念家鄉。意象包括夜雨(🌧️)、山水風景(🏞️)和秋天(🍂)。"
            },
            {
                verse: "停車坐愛楓林晚，霜葉紅於二月花。",
                poem: "山行",
                author: "杜牧",
                correctEmojis: ["🍁", "❄️", "🌸"],
                explanation: "這首詩描述了秋天的楓林美景，紅葉比春天的花朵還要紅艷。意象包括楓葉(🍁)、霜(❄️)和花朵(🌸)。"
            },
            {
                verse: "空山不見人，但聞人語響。",
                poem: "鹿柴",
                author: "王維",
                correctEmojis: ["🏞️", "👤", "🔊"],
                explanation: "這首詩描述了空寂的山林中雖然看不見人，但能聽到人的聲音，表現了自然環境的空靈和神秘。意象包括山林(🏞️)、人(👤)和聲音(🔊)。"
            },
            {
                verse: "野火燒不盡，春風吹又生。",
                poem: "贈得古原草送別",
                author: "白居易",
                correctEmojis: ["🔥", "🌿", "🌬️"],
                explanation: "這首詩借野草生命力頑強的特點，表達了不畏艱難、自強不息的精神。意象包括野火(🔥)、青草(🌿)和春風(🌬️)。"
            },
            {
                verse: "人閒桂花落，夜靜春山空。",
                poem: "鳥鳴澗",
                author: "王維",
                correctEmojis: ["🌸", "🏞️", "🌙"],
                explanation: "這首詩描繪了一個寧靜的夜晚，人閒適時桂花飄落，春山在夜晚顯得空寂。意象包括花朵(🌸)、山林(🏞️)和夜晚(🌙)。"
            },
            {
                verse: "國破山河在，城春草木深。",
                poem: "春望",
                author: "杜甫",
                correctEmojis: ["🏞️", "🌿", "🏯"],
                explanation: "這首詩表達了詩人對國家破敗的悲傷，雖然山河依舊，但城池已被草木深深覆蓋。意象包括山河(🏞️)、草木(🌿)和城池(🏯)。"
            },
            {
                verse: "桃花潭水深千尺，不及汪倫送我情。",
                poem: "贈汪倫",
                author: "李白",
                correctEmojis: ["🌸", "🌊", "❤️"],
                explanation: "這首詩表達了詩人對朋友真摯情誼的感激，即使是深千尺的桃花潭水也比不上朋友的情誼深厚。意象包括桃花(🌸)、潭水(🌊)和友情(❤️)。"
            },
            {
                verse: "隨風潛入夜，潤物細無聲。",
                poem: "春夜喜雨",
                author: "杜甫",
                correctEmojis: ["🌧️", "🌱", "🌙"],
                explanation: "這首詩描述了春夜細雨隨風悄然而至，滋潤萬物卻沒有聲響的景象。意象包括細雨(🌧️)、植物(🌱)和夜晚(🌙)。"
            },
            {
                verse: "春眠不覺曉，處處聞啼鳥。",
                poem: "春曉",
                author: "孟浩然",
                correctEmojis: ["😴", "🐦", "🌄"],
                explanation: "這首詩描述了春天的早晨，詩人沉睡不知天亮，四處都能聽到鳥兒的鳴叫聲。意象包括熟睡(😴)、鳥鳴(🐦)和黎明(🌄)。"
            },
            {
                verse: "山重水複疑無路，柳暗花明又一村。",
                poem: "遊山西村",
                author: "陸游",
                correctEmojis: ["⛰️", "🌊", "🏡"],
                explanation: "這首詩描述了在山水重重、道路不明之時，突然發現柳樹掩映、繁花盛開之處又有一個村莊。意象包括重山(⛰️)、溪水(🌊)和村落(🏡)。"
            },
            {
                verse: "洛陽親友如相問，一片冰心在玉壺。",
                poem: "芙蓉樓送辛漸",
                author: "王昌齡",
                correctEmojis: ["❄️", "❤️", "🏺"],
                explanation: "這首詩表達了詩人的高潔品格和堅定節操。意象包括冰心(❄️)、純潔之心(❤️)和玉壺(🏺)。"
            },
            {
                verse: "舉頭望明月，低頭思故鄉。",
                poem: "靜夜思",
                author: "李白",
                correctEmojis: ["🌕", "🤔", "🏡"],
                explanation: "這首詩表達了詩人強烈的思鄉之情。意象包括明月(🌕)、思考(🤔)和故鄉(🏡)。"
            },
            {
                verse: "兩個黃鸝鳴翠柳，一行白鷺上青天。",
                poem: "絕句",
                author: "杜甫",
                correctEmojis: ["🐦", "🌳", "🐥"],
                explanation: "這首詩描述了春天美麗的自然景象。意象包括黃鸝(🐦)、柳樹(🌳)和白鷺(🐥)。"
            },
            {
                verse: "欲窮千里目，更上一層樓。",
                poem: "登鸛雀樓",
                author: "王之渙",
                correctEmojis: ["👁️", "🏢", "🔭"],
                explanation: "這首詩表達了要看得更遠，就要站得更高的哲理。意象包括視野(👁️)、高樓(🏢)和眺望(🔭)。"
            },
            {
                verse: "日暮鄉關何處是，煙波江上使人愁。",
                poem: "黃鶴樓",
                author: "崔顥",
                correctEmojis: ["🌆", "🌊", "😢"],
                explanation: "這首詩表達了詩人在異鄉的愁思。意象包括黃昏(🌆)、江水(🌊)和愁緒(😢)。"
            },
            {
                verse: "獨坐幽篁裡，彈琴復長嘯。",
                poem: "竹里館",
                author: "王維",
                correctEmojis: ["🎸", "🎵", "🎋"],
                explanation: "這首詩描述了詩人在竹林中獨坐彈琴長嘯的閒適生活。意象包括琴弦(🎸)、歌聲(🎵)和竹林(🎋)。"
            },
            {
                verse: "夕陽無限好，只是近黃昏。",
                poem: "登樂遊原",
                author: "李商隱",
                correctEmojis: ["🌇", "⏱️", "🌆"],
                explanation: "這首詩感嘆美好事物即將消逝的無奈。意象包括夕陽(🌇)、時間(⏱️)和黃昏(🌆)。"
            },
            {
                verse: "李白乘舟將欲行，忽聞岸上踏歌聲。",
                poem: "贈汪倫",
                author: "李白",
                correctEmojis: ["🚣", "🎵", "👣"],
                explanation: "這首詩描述了詩人乘船將要離開，忽然聽到岸上朋友送別的歌聲。意象包括小船(🚣)、歌聲(🎵)和腳步聲(👣)。"
            },
            {
                verse: "小荷才露尖尖角，早有蜻蜓立上頭。",
                poem: "小池",
                author: "楊萬里",
                correctEmojis: ["🌱", "🌿", "🦋"],
                explanation: "這首詩描繪了小荷葉剛露出水面，蜻蜓已經站在上面的生動畫面。意象包括荷葉(🌱)、新芽(🌿)和蜻蜓(🦋)。"
            },
            {
                verse: "東邊日出西邊雨，道是無晴卻有晴。",
                poem: "竹枝詞",
                author: "劉禹錫",
                correctEmojis: ["☀️", "🌧️", "🌈"],
                explanation: "這首詩描述了東邊升起太陽而西邊卻下雨的奇特天氣現象。意象包括陽光(☀️)、雨水(🌧️)和晴朗(🌈)。"
            },
            {
                verse: "萬里悲秋常作客，百年多病獨登台。",
                poem: "登高",
                author: "杜甫",
                correctEmojis: ["🍂", "🤒", "🏔️"],
                explanation: "這首詩表達了詩人漂泊異鄉、體弱多病的悲涼心境。意象包括秋天(🍂)、疾病(🤒)和高台(🏔️)。"
            },
            {
                verse: "春色滿園關不住，一枝紅杏出牆來。",
                poem: "遊園不值",
                author: "葉紹翁",
                correctEmojis: ["🌸", "🧱", "🌺"],
                explanation: "這首詩描述了春天的生機無法被圍牆阻擋，一枝紅杏從牆內伸展出來。意象包括春色(🌸)、圍牆(🧱)和杏花(🌺)。"
            },
            {
                verse: "借問酒家何處有，牧童遙指杏花村。",
                poem: "清明",
                author: "杜牧",
                correctEmojis: ["🍶", "👦", "🌸"],
                explanation: "這首詩描述了詩人在清明時節詢問酒家的位置，牧童遠遠指向杏花盛開的村莊。意象包括酒(🍶)、牧童(👦)和杏花(🌸)。"
            },
            {
                verse: "葡萄美酒夜光杯，欲飲琵琶馬上催。",
                poem: "涼州詞",
                author: "王翰",
                correctEmojis: ["🍷", "🎸", "🐎"],
                explanation: "這首詩描述了邊塞將士豪邁的飲酒作樂場景。意象包括美酒(🍷)、琵琶(🎸)和戰馬(🐎)。"
            },
            {
                verse: "慈母手中線，遊子身上衣。",
                poem: "遊子吟",
                author: "孟郊",
                correctEmojis: ["🧵", "👕", "❤️"],
                explanation: "這首詩表達了母親對遠行子女深沉的愛。意象包括針線(🧵)、衣服(👕)和母愛(❤️)。"
            },
            {
                verse: "千山鳥飛絕，萬徑人蹤滅。",
                poem: "江雪",
                author: "柳宗元",
                correctEmojis: ["🏔️", "🐦", "❄️"],
                explanation: "這首詩描繪了千山萬徑被大雪覆蓋，看不到鳥飛人走的寂寥景象。意象包括山(🏔️)、飛鳥(🐦)和雪(❄️)。"
            },
            {
                verse: "月下飛天鏡，雲生結海樓。",
                poem: "渡荊門送別",
                author: "李白",
                correctEmojis: ["🌕", "🌪️", "🏰"],
                explanation: "這首詩描繪了月色照耀江面如鏡，雲氣凝聚如高樓的奇景。意象包括明月(🌕)、雲氣(🌪️)和樓閣(🏰)。"
            },
            {
                verse: "江流天地外，山色有無中。",
                poem: "漢江臨泛",
                author: "王維",
                correctEmojis: ["🌊", "🏞️", "🌫️"],
                explanation: "這首詩描繪了江水流向遠方，山色時隱時現於雲霧中的景象。意象包括江流(🌊)、山色(🏞️)和雲霧(🌫️)。"
            },
            {
                verse: "窗含西嶺千秋雪，門泊東吳萬里船。",
                poem: "絕句",
                author: "杜甫",
                correctEmojis: ["❄️", "⛵", "🏞️"],
                explanation: "這首詩描繪了窗外可見西嶺千年不化的積雪，門前停泊著從萬里之外東吳駛來的船隻。意象包括積雪(❄️)、船隻(⛵)和風景(🏞️)。"
            },
            {
                verse: "月落烏啼霜滿天，江楓漁火對愁眠。",
                poem: "楓橋夜泊",
                author: "張繼",
                correctEmojis: ["🌕", "🌿", "🔥"],
                explanation: "這首詩描繪了夜晚月亮西沉、烏鴉啼叫，江邊楓樹映照著漁火，詩人愁苦難眠的情景。意象包括月亮(🌕)、楓葉(🌿)和漁火(🔥)。"
            },
            {
                verse: "寒雨連江夜入吳，平明送客楚山孤。",
                poem: "芙蓉樓送辛漸",
                author: "王昌齡",
                correctEmojis: ["🌧️", "🌊", "⛰️"],
                explanation: "這首詩描繪了寒冷的雨夜進入吳地，天亮時送別朋友，只見楚山孤峰的情景。意象包括寒雨(🌧️)、江水(🌊)和孤山(⛰️)。"
            },
            {
                verse: "人生自古誰無死，留取丹心照汗青。",
                poem: "過零丁洋",
                author: "文天祥",
                correctEmojis: ["❤️", "☀️", "📚"],
                explanation: "這首詩表達了詩人視死如歸的愛國情懷。意象包括赤誠之心(❤️)、永恆光芒(☀️)和青史留名(📚)。"
            },
            {
                verse: "鳥宿池邊樹，僧敲月下門。",
                poem: "宿建德江",
                author: "孟浩然",
                correctEmojis: ["🐦", "🌳", "🌕"],
                explanation: "這首詩描繪了鳥兒棲息在池邊的樹上，和尚在月光下敲門的寧靜畫面。意象包括鳥(🐦)、樹(🌳)和月亮(🌕)。"
            },
            {
                verse: "雲母屏風燭影深，長河漸落曉星沉。",
                poem: "嫦娥",
                author: "李商隱",
                correctEmojis: ["🕯️", "🌠", "🌌"],
                explanation: "這首詩描繪了夜深人靜，燭光映照在雲母屏風上，長河西落晨星沉沒的景象。意象包括燭影(🕯️)、星辰(🌠)和夜空(🌌)。"
            },
            {
                verse: "無邊落木蕭蕭下，不盡長江滾滾來。",
                poem: "登高",
                author: "杜甫",
                correctEmojis: ["🍂", "🌊", "🏔️"],
                explanation: "這首詩描繪了無邊的落葉蕭蕭而下，不盡的長江滾滾而來的壯闊景象。意象包括落葉(🍂)、江水(🌊)和高處俯瞰(🏔️)。"
            },
            {
                verse: "月出驚山鳥，時鳴春澗中。",
                poem: "鳥鳴澗",
                author: "王維",
                correctEmojis: ["🌕", "🐦", "🏞️"],
                explanation: "這首詩描繪了月亮升起驚動了山中的鳥兒，鳥兒不時在春天的山澗中鳴叫的情景。意象包括月亮(🌕)、鳥兒(🐦)和山澗(🏞️)。"
            },
            {
                verse: "遲日江山麗，春風花草香。",
                poem: "絕句",
                author: "杜甫",
                correctEmojis: ["☀️", "🏞️", "🌸"],
                explanation: "這首詩描繪了陽光照耀下的美麗江山，春風吹拂著芬芳的花草。意象包括陽光(☀️)、江山(🏞️)和花草(🌸)。"
            },

            {
                verse: "朱雀橋邊野草花，烏衣巷口夕陽斜。",
                poem: "烏衣巷",
                author: "劉禹錫",
                correctEmojis: ["🌱", "🏙️", "🌇"],
                explanation: "這首詩描繪了朱雀橋旁野草開花，烏衣巷口夕陽西斜的景象。意象包括野草花(🌱)、城鎮(🏙️)和夕陽(🌇)。"
            },
            {
                verse: "獨憐幽草澗邊生，上有黃鸝深樹鳴。",
                poem: "滁州西澗",
                author: "韋應物",
                correctEmojis: ["🌿", "🐦", "🌳"],
                explanation: "這首詩描繪了澗邊孤獨生長的幽草，樹上黃鸝在深處鳴叫的景象。意象包括幽草(🌿)、黃鸝(🐦)和深樹(🌳)。"
            },
            {
                verse: "水光瀲豔晴方好，山色空蒙雨亦奇。",
                poem: "飲湖上初晴後雨",
                author: "蘇軾",
                correctEmojis: ["💧", "☀️", "🌧️"],
                explanation: "這首詩描繪了晴天水面波光粼粼的美好景色，雨天山色朦朧的奇妙景象。意象包括水光(💧)、晴天(☀️)和雨天(🌧️)。"
            },
            {
                verse: "接天蓮葉無窮碧，映日荷花別樣紅。",
                poem: "曉出淨慈寺送林子方",
                author: "楊萬里",
                correctEmojis: ["🌿", "☀️", "🌸"],
                explanation: "這首詩描繪了接天連地的碧綠荷葉，陽光映照下格外紅艷的荷花。意象包括荷葉(🌿)、陽光(☀️)和荷花(🌸)。"
            },
            {
                verse: "黃河遠上白雲間，一片孤城萬仞山。",
                poem: "涼州詞",
                author: "王之渙",
                correctEmojis: ["🌊", "☁️", "🏔️"],
                explanation: "這首詩描繪了黃河流向遠方直入白雲深處，一座孤城屹立在萬仞高山之間的壯闊景象。意象包括黃河(🌊)、白雲(☁️)和高山(🏔️)。"
            },
            {
                verse: "一道殘陽鋪水中，半江瑟瑟半江紅。",
                poem: "暮江吟",
                author: "白居易",
                correctEmojis: ["🌇", "🌊", "🔴"],
                explanation: "這首詩描繪了夕陽映照在江面上，一半江水波光粼粼，一半江水被染成紅色的景象。意象包括夕陽(🌇)、江水(🌊)和紅色(🔴)。"
            },
            {
                verse: "可憐九月初三夜，露似珍珠月似弓。",
                poem: "暮江吟",
                author: "白居易",
                correctEmojis: ["🌙", "💧", "✨"],
                explanation: "這首詩描繪了九月初三的夜晚，露水晶瑩如珍珠，月亮彎曲如弓的美麗景象。意象包括月亮(🌙)、露水(💧)和珍珠(✨)。"
            },
            {
                verse: "泉眼無聲惜細流，樹蔭照水愛晴柔。",
                poem: "小池",
                author: "楊萬里",
                correctEmojis: ["⛲", "🌳", "☀️"],
                explanation: "這首詩描繪了泉水無聲地細細流淌，樹蔭倒映在水中，陽光溫柔地照耀的寧靜景象。意象包括泉水(⛲)、樹蔭(🌳)和晴天(☀️)。"
            },
            {
                verse: "半畝方塘一鑑開，天光雲影共徘徊。",
                poem: "觀書有感",
                author: "朱熹",
                correctEmojis: ["🏞️", "☁️", "💧"],
                explanation: "這首詩以半畝大小的方塘比喻人的心胸，天空和雲彩的倒影在水中徘徊。意象包括池塘(🏞️)、雲彩(☁️)和水面(💧)。"
            },
            {
                verse: "竹外桃花三兩枝，春江水暖鴨先知。",
                poem: "惠崇春江晚景",
                author: "蘇軾",
                correctEmojis: ["🎋", "🌸", "🦆"],
                explanation: "這首詩描繪了竹林外盛開的幾枝桃花，春天江水變暖鴨子最先感知的美好景象。意象包括竹子(🎋)、桃花(🌸)和鴨子(🦆)。"
            },
            {
                verse: "移舟泊煙渚，日暮客愁新。",
                poem: "宿建德江",
                author: "孟浩然",
                correctEmojis: ["🚣", "🌫️", "🌆"],
                explanation: "這首詩描繪了詩人移動小船停靠在煙霧籠罩的小洲，日落時分客居他鄉的愁緒又起的景象。意象包括小船(🚣)、煙霧(🌫️)和黃昏(🌆)。"
            },
            {
                verse: "草枯鷹眼急，雪盡馬蹄輕。",
                poem: "觀獵",
                author: "王維",
                correctEmojis: ["🦅", "❄️", "🐎"],
                explanation: "這首詩描繪了秋草枯萎鷹眼銳利，冬雪融化馬蹄輕盈的狩獵場景。意象包括鷹(🦅)、雪(❄️)和馬(🐎)。"
            },
            {
                verse: "渭城朝雨浥輕塵，客舍青青柳色新。",
                poem: "送元二使安西",
                author: "王維",
                correctEmojis: ["🌧️", "🏠", "🌳"],
                explanation: "這首詩描繪了渭城清晨下雨洗去塵土，客舍旁青翠的柳樹顯出新顏的送別場景。意象包括朝雨(🌧️)、客舍(🏠)和柳樹(🌳)。"
            },
            {
                verse: "空山新雨後，天氣晚來秋。",
                poem: "山居秋暝",
                author: "王維",
                correctEmojis: ["⛰️", "🌧️", "🍂"],
                explanation: "這首詩描繪了空寂的山林在新雨過後，傍晚時分秋天氣息漸濃的景象。意象包括空山(⛰️)、新雨(🌧️)和秋天(🍂)。"
            },
            {
                verse: "明月松間照，清泉石上流。",
                poem: "山居秋暝",
                author: "王維",
                correctEmojis: ["🌕", "🌲", "⛲"],
                explanation: "這首詩描繪了明月透過松林洒下清輝，清泉在石頭上潺潺流淌的寧靜景象。意象包括明月(🌕)、松樹(🌲)和清泉(⛲)。"
            },
            {
                verse: "眾鳥高飛盡，孤雲獨去閒。",
                poem: "獨坐敬亭山",
                author: "李白",
                correctEmojis: ["🐦", "☁️", "⛰️"],
                explanation: "這首詩描繪了群鳥高飛離去，只有一朵孤雲悠閒飄去的寂靜景象。意象包括飛鳥(🐦)、孤雲(☁️)和山(⛰️)。"
            },
            {
                verse: "柴門聞犬吠，風雪夜歸人。",
                poem: "逢雪宿芙蓉山主人",
                author: "劉長卿",
                correctEmojis: ["🐕", "❄️", "🏠"],
                explanation: "這首詩描繪了人歸來時，柴門處傳來狗叫聲，風雪中有人夜歸的溫馨場景。意象包括犬吠(🐕)、風雪(❄️)和家門(🏠)。"
            },
            {
                verse: "孤舟蓑笠翁，獨釣寒江雪。",
                poem: "江雪",
                author: "柳宗元",
                correctEmojis: ["🚣", "🎣", "❄️"],
                explanation: "這首詩描繪了一位身著蓑衣戴著斗笠的老翁，獨自在寒冷的江上垂釣，周圍是漫天的雪的孤寂景象。意象包括小舟(🚣)、釣魚(🎣)和雪(❄️)。"
            },
            {
                verse: "秋風蕭瑟天氣涼，草木搖落露為霜。",
                poem: "長歌行",
                author: "漢樂府",
                correctEmojis: ["🍂", "🌿", "❄️"],
                explanation: "這首詩描繪了秋風蕭瑟天氣轉涼，草木凋零晨露變成霜的秋季景象。意象包括秋風(🍂)、草木(🌿)和霜(❄️)。"
            },
            {
                verse: "出師未捷身先死，長使英雄淚滿襟。",
                poem: "蜀相",
                author: "杜甫",
                correctEmojis: ["⚔️", "💀", "😢"],
                explanation: "這首詩表達了詩人對諸葛亮報國無成就去世的惋惜和悲痛。意象包括戰爭(⚔️)、死亡(💀)和悲傷(😢)。"
            },
            {
                verse: "會挽雕弓如滿月，西北望，射天狼。",
                poem: "江城子·密州出獵",
                author: "蘇軾",
                correctEmojis: ["🏹", "🌕", "🐺"],
                explanation: "這首詩描繪了作者拉滿如月彎的雕弓，向西北方向射向天狼星的豪情壯志。意象包括弓箭(🏹)、滿月(🌕)和天狼星(🐺)。"
            },
            {
                verse: "大漠孤煙直，長河落日圓。",
                poem: "使至塞上",
                author: "王維",
                correctEmojis: ["🏜️", "🌇", "🌊"],
                explanation: "這首詩描繪了沙漠上孤獨的炊煙直上，長河盡頭落日圓滿的邊塞壯麗景象。意象包括大漠(🏜️)、落日(🌇)和長河(🌊)。"
            },
            {
                verse: "荒城臨古渡，落日滿秋山。",
                poem: "歸嵩山作",
                author: "王維",
                correctEmojis: ["🏚️", "🌇", "🍂"],
                explanation: "這首詩描繪了荒涼的城池臨近古老的渡口，夕陽落照映滿秋天的山林的淒美景象。意象包括荒城(🏚️)、落日(🌇)和秋山(🍂)。"
            },
            {
                verse: "感時花濺淚，恨別鳥驚心。",
                poem: "春望",
                author: "杜甫",
                correctEmojis: ["🌸", "💦", "🐦"],
                explanation: "這首詩表達了詩人對國家遭受戰亂的悲痛之情，看到春花因感傷時勢而淚濺，聽到鳥鳴因思念親人而驚心。意象包括花朵(🌸)、淚水(💦)和鳥兒(🐦)。"
            },
            {
                verse: "烽火連三月，家書抵萬金。",
                poem: "春望",
                author: "杜甫",
                correctEmojis: ["🔥", "📝", "💰"],
                explanation: "這首詩描述了戰火連綿三個月，家書珍貴如萬金的戰亂場景。意象包括烽火(🔥)、家書(📝)和金錢(💰)。"
            },

            {
                verse: "流水落花春去也，天上人間。",
                poem: "浪淘沙",
                author: "李煜",
                correctEmojis: ["🌊", "🌸", "🌱"],
                explanation: "這首詩感傷流水沖走落花，春天逝去，人世間和天上的光陰都難以挽留。意象包括流水(🌊)、落花(🌸)和春天(🌱)。"
            },
            {
                verse: "天門中斷楚江開，碧水東流至此回。",
                poem: "望天門山",
                author: "李白",
                correctEmojis: ["⛰️", "🌊", "🏞️"],
                explanation: "這首詩描繪了天門山中間斷裂處楚江流過，碧水東流到此回旋的壯觀景象。意象包括山峰(⛰️)、江水(🌊)和江岸風景(🏞️)。"
            },

            {
                verse: "亂花漸欲迷人眼，淺草才能沒馬蹄。",
                poem: "錢塘湖春行",
                author: "白居易",
                correctEmojis: ["🌸", "🌿", "🐎"],
                explanation: "這首詩描繪了紛繁的花朵幾乎要迷人眼目，淺淺的青草剛剛沒過馬蹄的春天美景。意象包括繁花(🌸)、青草(🌿)和馬(🐎)。"
            },
            {
                verse: "蕭蕭梧葉送寒聲，江上秋風動客情。",
                poem: "長沙送李十一",
                author: "王昌齡",
                correctEmojis: ["🍃", "🌬️", "🌊"],
                explanation: "這首詩描繪了梧桐葉發出蕭瑟的寒聲，江上的秋風觸動遊子離別之情的送別場景。意象包括落葉(🍃)、秋風(🌬️)和江水(🌊)。"
            },
            {
                verse: "洞庭湖水色如天，遊人不是思歸客。",
                poem: "洞庭秋望",
                author: "劉長卿",
                correctEmojis: ["🏞️", "☁️", "👤"],
                explanation: "這首詩描繪了洞庭湖水藍得像天空一般，遊覽的人應是那些不思鄉的遊客的景象。意象包括湖水(🏞️)、天空(☁️)和遊人(👤)。"
            },
            {
                verse: "天蒼蒼，野茫茫，風吹草低見牛羊。",
                poem: "敕勒歌",
                author: "北朝民歌",
                correctEmojis: ["☁️", "🌿", "🐂"],
                explanation: "這首詩描繪了天空蒼茫，草原遼闊，風吹草低可見牛羊的北方草原景象。意象包括天空(☁️)、草原(🌿)和牛羊(🐂)。"
            },
            {
                verse: "不知細葉誰裁出，二月春風似剪刀。",
                poem: "詠柳",
                author: "賀知章",
                correctEmojis: ["🌿", "✂️", "🌬️"],
                explanation: "這首詩感嘆不知誰裁出柳樹的細葉，二月的春風就像剪刀一樣剪出新葉的奇妙景象。意象包括柳葉(🌿)、剪刀(✂️)和春風(🌬️)。"
            },
            {
                verse: "黃鶴一去不復返，白雲千載空悠悠。",
                poem: "黃鶴樓",
                author: "崔顥",
                correctEmojis: ["🐦", "☁️", "⏳"],
                explanation: "這首詩借黃鶴一去不復返，只見白雲千年來空自飄蕩的景象，表達對歷史變遷的感慨。意象包括黃鶴(🐦)、白雲(☁️)和時間流逝(⏳)。"
            },
            {
                verse: "晴川歷歷漢陽樹，芳草萋萋鸚鵡洲。",
                poem: "黃鶴樓",
                author: "崔顥",
                correctEmojis: ["🌳", "🌿", "🏝️"],
                explanation: "這首詩描繪了晴朗天氣下清晰可見的漢陽樹木，鸚鵡洲上茂盛的芳草的景象。意象包括樹木(🌳)、芳草(🌿)和小洲(🏝️)。"
            },
            {
                verse: "商女不知亡國恨，隔江猶唱後庭花。",
                poem: "台城",
                author: "劉禹錫",
                correctEmojis: ["👩", "🎵", "🌸"],
                explanation: "這首詩描繪了歌女不知亡國之恨，隔著江水仍在唱著亡國之音《後庭花》的諷刺場景。意象包括歌女(👩)、歌聲(🎵)和花(🌸)。"
            },
            {
                verse: "欲把西湖比西子，淡妝濃抹總相宜。",
                poem: "飲湖上初晴後雨",
                author: "蘇軾",
                correctEmojis: ["🏞️", "👸", "💄"],
                explanation: "這首詩將西湖比作西施，無論是淡妝還是濃妝都很美麗。意象包括西湖(🏞️)、美人(👸)和妝容(💄)。"
            },
            {
                verse: "東風不與周郎便，銅雀春深鎖二喬。",
                poem: "赤壁",
                author: "杜牧",
                correctEmojis: ["🌬️", "🏰", "👸"],
                explanation: "這首詩感嘆如果東風不幫助周瑜，那麼二喬就會被曹操鎖在銅雀台中的歷史假設。意象包括東風(🌬️)、銅雀台(🏰)和二喬(👸)。"
            },

            {
                verse: "常記溪亭日暮，沉醉不知歸路。",
                poem: "如夢令",
                author: "李清照",
                correctEmojis: ["🏞️", "🌆", "🍷"],
                explanation: "這首詩回憶在溪亭日落時分，因沉醉而不知歸路的往事。意象包括溪亭(🏞️)、日暮(🌆)和醉酒(🍷)。"
            },
            {
                verse: "東風夜放花千樹，更吹落、星如雨。",
                poem: "青玉案·元夕",
                author: "辛棄疾",
                correctEmojis: ["🌬️", "🌸", "✨"],
                explanation: "這首詩描繪了元宵節夜晚，春風吹開千樹花燈，又吹落如雨般的星光的熱鬧景象。意象包括春風(🌬️)、花燈(🌸)和星光(✨)。"
            },
            {
                verse: "驛外斷橋邊，寂寞開無主。",
                poem: "一剪梅",
                author: "李清照",
                correctEmojis: ["🌉", "🌸", "🏚️"],
                explanation: "這首詩描繪了驛站外斷橋旁，孤寂地開放著無人照料的梅花的淒涼景象。意象包括斷橋(🌉)、梅花(🌸)和荒涼(🏚️)。"
            },
            {
                verse: "千里黃雲白日曛，北風吹雁雪紛紛。",
                poem: "別董大",
                author: "高適",
                correctEmojis: ["☁️", "🦢", "❄️"],
                explanation: "這首詩描繪了千里黃雲遮蔽夕陽，北風吹送大雁南飛雪花紛飛的送別場景。意象包括黃雲(☁️)、大雁(🦢)和雪花(❄️)。"
            },
            {
                verse: "姑蘇城外寒山寺，夜半鐘聲到客船。",
                poem: "楓橋夜泊",
                author: "張繼",
                correctEmojis: ["🏯", "🔔", "🚣"],
                explanation: "這首詩描繪了夜半時分，姑蘇城外寒山寺的鐘聲飄到停泊在江上的客船的寧靜景象。意象包括寺廟(🏯)、鐘聲(🔔)和客船(🚣)。"
            },
            {
                verse: "山回路轉不見君，雪上空留馬行處。",
                poem: "白雪歌送武判官歸京",
                author: "岑參",
                correctEmojis: ["⛰️", "❄️", "🐎"],
                explanation: "這首詩描繪了山路轉彎處已看不見友人的身影，雪地上只留下馬蹄的痕跡的送別場景。意象包括山路(⛰️)、雪地(❄️)和馬蹄(🐎)。"
            },
            {
                verse: "日照香爐生紫煙，遙看瀑布掛前川。",
                poem: "望廬山瀑布",
                author: "李白",
                correctEmojis: ["☀️", "🏔️", "💦"],
                explanation: "這首詩描繪了陽光照射在香爐峰上升起紫色雲煙，遠遠望去瀑布如掛在山前的景象。意象包括陽光(☀️)、山峰(🏔️)和瀑布(💦)。"
            },
            {
                verse: "錦江春色來天地，玉壘浮雲變古今。",
                poem: "登樓",
                author: "杜甫",
                correctEmojis: ["🌊", "☁️", "⏳"],
                explanation: "這首詩描繪了錦江的春色給天地帶來生機，玉壘山上的浮雲變幻見證古今變遷的景象。意象包括江水(🌊)、浮雲(☁️)和時間(⏳)。"
            },
            {
                verse: "無邊光景一時新，等閒識得東風面。",
                poem: "春日",
                author: "朱熹",
                correctEmojis: ["🌱", "🌬️", "☀️"],
                explanation: "這首詩描繪了無邊的春光景色一時更新，輕易就能識別東風的面目的春天景象。意象包括春景(🌱)、東風(🌬️)和陽光(☀️)。"
            },
            {
                verse: "不知近水花先發，疑是經冬雪未銷。",
                poem: "初春小雨",
                author: "韓愈",
                correctEmojis: ["💧", "🌸", "❄️"],
                explanation: "這首詩描繪了不知是靠近水邊的花先開放，還是懷疑是冬天的積雪尚未融化的初春景象。意象包括流水(💧)、花朵(🌸)和積雪(❄️)。"
            },
            {
                verse: "綠樹村邊合，青山郭外斜。",
                poem: "滁州西澗",
                author: "韋應物",
                correctEmojis: ["🌳", "🏡", "⛰️"],
                explanation: "這首詩描繪了綠樹在村莊邊合攏，青山在城郭外傾斜的恬靜景象。意象包括綠樹(🌳)、村莊(🏡)和青山(⛰️)。"
            },
            {
                verse: "爆竹聲中一歲除，春風送暖入屠蘇。",
                poem: "元日",
                author: "王安石",
                correctEmojis: ["🧨", "🌬️", "🍷"],
                explanation: "這首詩描繪了爆竹聲中舊歲除去，春風送來溫暖人們飲屠蘇酒的新年景象。意象包括爆竹(🧨)、春風(🌬️)和屠蘇酒(🍷)。"
            },
            {
                verse: "牆角數枝梅，凌寒獨自開。",
                poem: "梅花",
                author: "王安石",
                correctEmojis: ["🧱", "🌸", "❄️"],
                explanation: "這首詩描繪了牆角幾枝梅花，在寒冷中獨自綻放的堅強景象。意象包括牆角(🧱)、梅花(🌸)和寒冷(❄️)。"
            },
            {
                verse: "春風又綠江南岸，明月何時照我還。",
                poem: "泊船瓜洲",
                author: "王安石",
                correctEmojis: ["🌬️", "🌱", "🌕"],
                explanation: "這首詩描繪了春風又使江南岸綠意盎然，不知何時明月才能照著我歸還家鄉的思鄉情景。意象包括春風(🌬️)、青草(🌱)和明月(🌕)。"
            },
            {
                verse: "京口瓜洲一水間，鍾山只隔數重山。",
                poem: "泊船瓜洲",
                author: "王安石",
                correctEmojis: ["🌊", "⛰️", "🏞️"],
                explanation: "這首詩描繪了京口和瓜洲之間一水相隔，鍾山只隔著幾重山的地理景觀。意象包括江水(🌊)、山(⛰️)和風景(🏞️)。"
            },
            {
                verse: "兒童散學歸來早，忙趁東風放紙鳶。",
                poem: "村居",
                author: "高鼎",
                correctEmojis: ["👦", "🌬️", "🪁"],
                explanation: "這首詩描繪了兒童放學回家後，趕緊趁著東風放風箏的活潑景象。意象包括兒童(👦)、東風(🌬️)和風箏(🪁)。"
            },
            {
                verse: "碧玉妝成一樹高，萬條垂下綠絲絛。",
                poem: "詠柳",
                author: "賀知章",
                correctEmojis: ["💚", "🌳", "🧵"],
                explanation: "這首詩描繪了如碧玉般裝飾成的高樹，垂下萬條如綠絲帶的柳條的美麗景象。意象包括碧玉(💚)、高樹(🌳)和綠絲(🧵)。"
            },
            {
                verse: "枯藤老樹昏鴉，小橋流水人家。",
                poem: "天淨沙·秋思",
                author: "馬致遠",
                correctEmojis: ["🌿", "🌉", "🏠"],
                explanation: "這首詩描繪了枯藤纏繞著老樹棲息著昏鴉，小橋流水旁是人家的淒涼秋景。意象包括枯藤老樹(🌿)、小橋(🌉)和人家(🏠)。"
            },
            {
                verse: "月落烏啼霜滿天，江楓漁火對愁眠。",
                poem: "楓橋夜泊",
                author: "張繼",
                correctEmojis: ["🌙", "🐦", "❄️"],
                explanation: "這首詩描繪了月亮落下烏鴉啼叫霜滿天，江邊楓樹映照著漁火詩人愁緒難眠的秋夜景象。意象包括月落(🌙)、烏啼(🐦)和霜(❄️)。"
            },
            {
                verse: "紅豆生南國，春來發幾枝？",
                poem: "相思",
                author: "王維",
                correctEmojis: ["❤️", "🌱", "🌿"],
                explanation: "這首詩以紅豆象徵相思，描繪了紅豆生長在南方，春天來臨時發出幾枝的景象。意象包括紅豆(❤️)、生長(🌱)和枝條(🌿)。"
            },
            {
                verse: "鳴笙起秋風，置酒飛冬雪。",
                poem: "元日",
                author: "庾信",
                correctEmojis: ["🎵", "🍷", "❄️"],
                explanation: "這首詩描繪了吹奏笙管起秋風，擺設酒宴飛舞冬雪的慶賀新年場景。意象包括音樂(🎵)、美酒(🍷)和冬雪(❄️)。"
            },
            {
                verse: "夜來風雨聲，花落知多少。",
                poem: "春曉",
                author: "孟浩然",
                correctEmojis: ["🌧️", "🌬️", "🌸"],
                explanation: "這首詩描繪了夜裡伴隨著風雨聲，不知道有多少花兒因此而落的春天景象。意象包括風雨(🌧️)、風(🌬️)和落花(🌸)。"
            },

            {
                verse: "孤帆遠影碧空盡，唯見長江天際流。",
                poem: "黃鶴樓送孟浩然之廣陵",
                author: "李白",
                correctEmojis: ["⛵", "🌌", "🌊"],
                explanation: "這首詩描繪了朋友的船帆遠去最後消失在碧空盡頭，只見長江流向天際的送別場景。意象包括孤帆(⛵)、碧空(🌌)和江水(🌊)。"
            },
            {
                verse: "千里鶯啼綠映紅，水村山郭酒旗風。",
                poem: "江南春",
                author: "杜牧",
                correctEmojis: ["🐦", "🏞️", "🏮"],
                explanation: "這首詩描繪了千里之內鶯鳥啼叫綠樹紅花相映，水邊村落山中城鎮都掛著酒旗迎風飄揚的江南春景。意象包括鶯啼(🐦)、山水(🏞️)和酒旗(🏮)。"
            },
            {
                verse: "黃梅時節家家雨，青草池塘處處蛙。",
                poem: "有約",
                author: "趙師秀",
                correctEmojis: ["🌧️", "🌿", "🐸"],
                explanation: "這首詩描繪了黃梅季節家家戶戶下雨，青草叢生的池塘處處可聞蛙鳴的夏日景象。意象包括雨水(🌧️)、青草(🌿)和青蛙(🐸)。"
            },
            {
                verse: "山外青山樓外樓，西湖歌舞幾時休？",
                poem: "題臨安邸",
                author: "林升",
                correctEmojis: ["⛰️", "🏙️", "💃"],
                explanation: "這首詩描繪了山外有山樓外有樓，西湖邊的歌舞什麼時候才能停息的繁華景象。意象包括青山(⛰️)、城樓(🏙️)和歌舞(💃)。"
            },
            {
                verse: "故人西辭黃鶴樓，煙花三月下揚州。",
                poem: "黃鶴樓送孟浩然之廣陵",
                author: "李白",
                correctEmojis: ["🏯", "🌸", "⛵"],
                explanation: "這首詩描繪了朋友從黃鶴樓向西辭行，在煙花三月去往揚州的送別場景。意象包括黃鶴樓(🏯)、煙花三月(🌸)和揚州船(⛵)。"
            },
            {
                verse: "羌笛何須怨楊柳，春風不度玉門關。",
                poem: "涼州詞",
                author: "王之渙",
                correctEmojis: ["🎵", "🌿", "🏔️"],
                explanation: "這首詩感嘆羌笛何必哀怨地吹奏楊柳曲，因為春風吹不到玉門關的邊塞生活。意象包括羌笛(🎵)、楊柳(🌿)和玉門關(🏔️)。"
            },
            {
                verse: "朝辭白帝彩雲間，千里江陵一日還。",
                poem: "早發白帝城",
                author: "李白",
                correctEmojis: ["☁️", "🏙️", "🚣"],
                explanation: "這首詩描繪了早晨從白帝城彩雲間出發，一天之內就可以回到千里之外的江陵的快意行程。意象包括彩雲(☁️)、城池(🏙️)和船行(🚣)。"
            },
            {
                verse: "蘭陵美酒鬱金香，玉碗盛來琥珀光。",
                poem: "客中行",
                author: "李白",
                correctEmojis: ["🍷", "🏺", "✨"],
                explanation: "這首詩描繪了蘭陵美酒散發著鬱金香的芳香，用玉碗盛來呈現琥珀般的光澤的飲酒場景。意象包括美酒(🍷)、玉碗(🏺)和琥珀光(✨)。"
            },
            {
                verse: "清江一曲抱村流，長夏江村事事幽。",
                poem: "清平樂·村居",
                author: "辛棄疾",
                correctEmojis: ["🌊", "🏡", "🍃"],
                explanation: "這首詩描繪了清澈的河水繞村而流，整個夏天江邊村子裡處處都是幽靜的景象。意象包括清江(🌊)、村居(🏡)和幽靜(🍃)。"
            },
            {
                verse: "老夫聊發少年狂，左牽黃，右擎蒼。",
                poem: "江城子·密州出獵",
                author: "蘇軾",
                correctEmojis: ["👴", "🐕", "🦅"],
                explanation: "這首詩描繪了年長的詩人偶然發揮少年的豪情，左邊牽著黃狗，右手舉著蒼鷹的出獵場景。意象包括老者(👴)、獵犬(🐕)和蒼鷹(🦅)。"
            },
            {
                verse: "稻花香裡說豐年，聽取蛙聲一片。",
                poem: "西江月·夜行黃沙道中",
                author: "辛棄疾",
                correctEmojis: ["🌾", "🐸", "🌅"],
                explanation: "這首詩描繪了稻花飄香預示著豐收的年景，聽到一片蛙鳴聲的鄉村景象。意象包括稻花(🌾)、蛙聲(🐸)和豐收(🌅)。"
            },
            {
                verse: "一曲新詞酒一杯，去年天氣舊亭台。",
                poem: "浣溪沙",
                author: "晏殊",
                correctEmojis: ["🎵", "🍷", "🏛️"],
                explanation: "這首詩描繪了一曲新詞配一杯美酒，感嘆去年的景色和老亭台的往事追憶。意象包括新詞(🎵)、美酒(🍷)和亭台(🏛️)。"
            },
            {
                verse: "卷地風來忽吹散，望湖樓下水如天。",
                poem: "六月二十七日望湖樓醉書",
                author: "蘇軾",
                correctEmojis: ["🌪️", "🏙️", "🌊"],
                explanation: "這首詩描繪了刮起旋風忽然吹散了雲彩，望湖樓下的湖水與天相連的壯觀景象。意象包括旋風(🌪️)、樓台(🏙️)和湖水(🌊)。"
            },
            {
                verse: "紙上得來終覺淺，絕知此事要躬行。",
                poem: "冬夜讀書示子聿",
                author: "陸游",
                correctEmojis: ["📚", "🧠", "👣"],
                explanation: "這首詩強調從書本上獲得的知識終歸淺薄，真正懂得某事必須親身實踐。意象包括書本(📚)、學習(🧠)和實踐(👣)。"
            },
            {
                verse: "莫愁前路無知己，天下誰人不識君。",
                poem: "別董大",
                author: "高適",
                correctEmojis: ["🛣️", "👥", "🌏"],
                explanation: "這首詩鼓勵朋友不必擔憂前路上沒有知己，天下誰人不認識你呢的送別場景。意象包括前路(🛣️)、知己(👥)和天下(🌏)。"
            },
            {
                verse: "最喜小兒亡賴，溪頭臥剝蓮蓬。",
                poem: "清平樂·村居",
                author: "辛棄疾",
                correctEmojis: ["👦", "🌊", "🌸"],
                explanation: "這首詩描繪了詩人最喜歡頑皮的小孩，躺在溪邊剝蓮蓬的悠閒農村生活。意象包括兒童(👦)、溪水(🌊)和蓮蓬(🌸)。"
            },
            {
                verse: "長風破浪會有時，直掛雲帆濟滄海。",
                poem: "行路難",
                author: "李白",
                correctEmojis: ["🌬️", "⛵", "🌊"],
                explanation: "這首詩表達了破浪前進的長風終會到來，揚起雲帆橫渡滄海的豪邁志向。意象包括長風(🌬️)、雲帆(⛵)和滄海(🌊)。"
            },
            {
                verse: "千里黃雲白日曛，北風吹雁雪紛紛。",
                poem: "別董大",
                author: "高適",
                correctEmojis: ["☁️", "🦢", "❄️"],
                explanation: "這首詩描繪了千里黃雲遮蔽夕陽，北風吹送大雁南飛雪花紛飛的送別場景。意象包括黃雲(☁️)、大雁(🦢)和雪花(❄️)。"
            },
            {
                verse: "相顧無言，惟有淚千行。",
                poem: "江城子·乙卯正月二十日夜記夢",
                author: "蘇軾",
                correctEmojis: ["👀", "😢", "💔"],
                explanation: "這首詩描繪了彼此相對無言，只有眼淚千行的悲傷場景。意象包括對視(👀)、淚流(😢)和心碎(💔)。"
            },
            {
                verse: "君問歸期未有期，巴山夜雨漲秋池。",
                poem: "夜雨寄北",
                author: "李商隱",
                correctEmojis: ["🏠", "🌧️", "🍂"],
                explanation: "這首詩表達了他人問歸期卻無法確定，巴山夜雨使秋池水位上漲的思鄉愁緒。意象包括歸期(🏠)、夜雨(🌧️)和秋池(🍂)。"
            },
            {
                verse: "樹樹皆秋色，山山唯落暉。",
                poem: "山居秋暝",
                author: "王維",
                correctEmojis: ["🍂", "⛰️", "🌇"],
                explanation: "這首詩描繪了樹樹都呈現秋色，山山只有落日餘暉的秋日傍晚景象。意象包括秋色(🍂)、山(⛰️)和落日(🌇)。"
            },
            {
                verse: "人閒桂花落，夜靜春山空。",
                poem: "鳥鳴澗",
                author: "王維",
                correctEmojis: ["👤", "🌸", "🏞️"],
                explanation: "這首詩描繪了人們悠閒時桂花飄落，夜晚寂靜時春山空曠的寧靜景象。意象包括閒人(👤)、桂花(🌸)和春山(🏞️)。"
            },
            {
                verse: "山氣日夕佳，飛鳥相與還。",
                poem: "飲酒",
                author: "陶淵明",
                correctEmojis: ["⛰️", "🌇", "🐦"],
                explanation: "這首詩描繪了傍晚山中的空氣格外美好，飛鳥也成群結隊歸巢的寧靜景象。意象包括山氣(⛰️)、夕陽(🌇)和飛鳥(🐦)。"
            },
            {
                verse: "月出驚山鳥，時鳴春澗中。",
                poem: "鳥鳴澗",
                author: "王維",
                correctEmojis: ["🌕", "🐦", "🏞️"],
                explanation: "這首詩描繪了月亮升起驚動了山鳥，鳥兒時而在春天的山澗中鳴叫的寧靜畫面。意象包括月亮(🌕)、山鳥(🐦)和山澗(🏞️)。"
            },
            {
                verse: "青山遮不住，畢竟東流去。",
                poem: "菩薩蠻·書江西造口壁",
                author: "辛棄疾",
                correctEmojis: ["⛰️", "🌊", "↗️"],
                explanation: "這首詩感嘆縱使青山阻擋，江水終究向東流去的意志堅定。意象包括青山(⛰️)、江水(🌊)和東流(↗️)。"
            },
            {
                verse: "誰言寸草心，報得三春暉。",
                poem: "遊子吟",
                author: "孟郊",
                correctEmojis: ["🌱", "☀️", "❤️"],
                explanation: "這首詩表達了子女的心意如小草一般微薄，怎能報答得了如春暉般的父母恩情。意象包括小草(🌱)、春暉(☀️)和孝心(❤️)。"
            },
            {
                verse: "爆竹聲中一歲除，春風送暖入屠蘇。",
                poem: "元日",
                author: "王安石",
                correctEmojis: ["🧨", "🌬️", "🍷"],
                explanation: "這首詩描繪了爆竹聲中送走舊年，春風把溫暖送入屠蘇酒中的新年氣象。意象包括爆竹(🧨)、春風(🌬️)和屠蘇酒(🍷)。"
            }
        ];
        
        // 成就系統
        const achievements = [
            {
                id: 'beginner',
                name: '初級詩人',
                description: '解鎖10首詩句',
                icon: '初',
                class: 'bronze',
                threshold: 10
            },
            {
                id: 'intermediate',
                name: '中級詩人',
                description: '解鎖25首詩句',
                icon: '中',
                class: 'silver',
                threshold: 25
            },
            {
                id: 'advanced',
                name: '高級詩人',
                description: '解鎖50首詩句',
                icon: '高',
                class: 'gold',
                threshold: 50
            },
            {
                id: 'master',
                name: '大師詩人',
                description: '解鎖75首詩句',
                icon: '大',
                class: 'platinum',
                threshold: 75
            },
            {
                id: 'grandmaster',
                name: '宗師詩人',
                description: '解鎖100首詩句',
                icon: '宗',
                class: 'diamond',
                threshold: 100
            },
            {
                id: 'perfectionist',
                name: '完美主義者',
                description: '累計10次全部找出正確答案',
                icon: '全',
                class: 'jade',
                threshold: 10,
                statKey: 'perfectAnswers'
            },
            {
                id: 'speedster',
                name: '詩詞閃電俠',
                description: '在3秒內找出所有正確答案',
                icon: '速',
                class: 'ruby',
                threshold: 1,
                statKey: 'fastAnswers'
            },
            {
                id: 'streak_master',
                name: '連擊大師',
                description: '達成10次連續答對',
                icon: '連',
                class: 'sapphire',
                threshold: 10,
                statKey: 'maxStreak'
            }
        ];
        
        // 遊戲相關變數
        let currentPoemIndex;
        let chancesRemaining;
        let score = 0;
        let availableIndices = [...Array(poemData.length).keys()]; // 所有詩句的索引
        let timerInterval; // 倒計時計時器
        let timeRemaining; // 剩餘時間
        let foundEmojis = []; // 已找到的正確emoji
        let gameEnded = false; // 當前回合是否已結束
        let startTime; // 開始時間
        let endTime; // 結束時間
        let comboCount = 0; // 連擊次數
        let comboScore = 0; // 連擊獎勵分數
        
        // 統計相關變數
        let stats = {
            totalScore: 0,
            poemsUnlocked: [],
            currentStreak: 0,
            maxStreak: 0,
            timesPlayed: 0,
            averageTime: 0,
            totalTime: 0,
            fastestTime: Infinity,
            perfectAnswers: 0,
            fastAnswers: 0,
            achievements: [],
            bestCombo: 0
        };
        
        // 在記憶體中保存遊戲數據（替代localStorage）
        let inMemoryStorage = {};
        
        // 從存儲加載統計數據
        function loadStats() {
            try {
                const savedStats = inMemoryStorage['yimoji_stats'] || null;
                if (savedStats) {
                    stats = JSON.parse(savedStats);
                    
                    // 確保所有字段都存在
                    stats.totalScore = stats.totalScore || 0;
                    stats.poemsUnlocked = stats.poemsUnlocked || [];
                    stats.currentStreak = stats.currentStreak || 0;
                    stats.maxStreak = stats.maxStreak || 0;
                    stats.timesPlayed = stats.timesPlayed || 0;
                    stats.averageTime = stats.averageTime || 0;
                    stats.totalTime = stats.totalTime || 0;
                    stats.fastestTime = stats.fastestTime || Infinity;
                    stats.perfectAnswers = stats.perfectAnswers || 0;
                    stats.fastAnswers = stats.fastAnswers || 0;
                    stats.achievements = stats.achievements || [];
                }
            } catch (e) {
                console.log("Error loading stats:", e);
                // 如果出錯，使用預設值
            }
            
            updateStatsDisplay();
            updateBadges();
        }
        
        // 保存統計數據到存儲
        function saveStats() {
            try {
                inMemoryStorage['yimoji_stats'] = JSON.stringify(stats);
            } catch (e) {
                console.log("Error saving stats:", e);
            }
            updateStatsDisplay();
        }
        
        // 更新統計顯示
        function updateStatsDisplay() {
            // 更新當前分數
            document.getElementById('score').textContent = score;
            
            // 更新最高連擊
            document.getElementById('max-streak').textContent = stats.maxStreak;
            
            // 確保平均時間顯示正確，避免NaN
            const avgTime = isNaN(stats.averageTime) ? 0 : Math.round(stats.averageTime);
            document.getElementById('avg-time').textContent = `${avgTime}s`;
            
            // 更新進度條
            const progressBar = document.getElementById('progress-bar');
            const progressPercentage = (stats.poemsUnlocked.length / 100) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            
            // 清除現有的里程碑標記
            const progressContainer = document.querySelector('.progress-container');
            const existingMilestones = progressContainer.querySelectorAll('.progress-milestone');
            existingMilestones.forEach(milestone => milestone.remove());
            
            // 添加里程碑標記
            achievements.forEach(achievement => {
                if (achievement.threshold <= 100 && !achievement.statKey) {
                    const milestone = document.createElement('div');
                    milestone.className = `progress-milestone ${stats.poemsUnlocked.length >= achievement.threshold ? 'achieved' : ''}`;
                    milestone.style.left = `${achievement.threshold}%`;
                    milestone.title = `${achievement.name}: ${achievement.threshold} 首詩句`;
                    progressContainer.appendChild(milestone);
                }
            });
            
            // 更新模態框中的統計數據
            const elements = {
                'total-score': stats.totalScore,
                'total-poems': `${stats.poemsUnlocked.length}/100`,
                'stats-max-streak': stats.maxStreak,
                'current-streak': stats.currentStreak,
                'stats-avg-time': `${isNaN(stats.averageTime) ? 0 : Math.round(stats.averageTime)}s`,
                'fastest-time': stats.fastestTime === Infinity ? "無記錄" : `${Math.round(stats.fastestTime)}s`,
                'perfect-answers': stats.perfectAnswers,
                'total-plays': stats.timesPlayed
            };
            
            // 遍歷所有元素，只在存在時更新它們
            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            });
            
            // 確定當前段位和下一段位
            let currentRank = "初級詩人";
            let nextRank = "中級詩人";
            
            if (stats.poemsUnlocked.length >= 75) {
                currentRank = "大師詩人";
                nextRank = "宗師詩人";
            } else if (stats.poemsUnlocked.length >= 50) {
                currentRank = "高級詩人";
                nextRank = "大師詩人";
            } else if (stats.poemsUnlocked.length >= 25) {
                currentRank = "中級詩人";
                nextRank = "高級詩人";
            }
            
            if (stats.poemsUnlocked.length >= 100) {
                currentRank = "宗師詩人";
                nextRank = "已達最高段位";
            }
            
            const currentRankEl = document.getElementById('current-rank');
            if (currentRankEl) {
                currentRankEl.textContent = currentRank;
            }
            
            const nextRankEl = document.getElementById('next-rank');
            if (nextRankEl) {
                nextRankEl.textContent = nextRank;
            }
            
            // 更新歷史記錄
            const historyList = document.getElementById('history-list');
            if (historyList) {
                historyList.innerHTML = '';
                
                if (stats.poemsUnlocked.length === 0) {
                    historyList.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-500 italic">尚未解鎖任何詩句</p>';
                } else {
                    const unlockedPoems = stats.poemsUnlocked.map(index => {
                        const poem = poemData[index];
                        return `<div class="history-item">
                            <p class="history-verse">${poem.verse}</p>
                            <p class="history-info">${poem.poem} · ${poem.author}</p>
                        </div>`;
                    });
                    
                    historyList.innerHTML = unlockedPoems.join('');
                }
            }
        }
        
        // 更新徽章顯示
        function updateBadges() {
            // 更新當前徽章
            const currentBadge = document.getElementById('current-badge');
            const badgeTooltip = currentBadge.querySelector('.badge-tooltip');
            const badgeElement = currentBadge.querySelector('.badge');
            
            // 確定最高段位成就
            let highestRankAchievement = null;
            
            if (stats.achievements && stats.achievements.length > 0) {
                if (stats.achievements.includes('grandmaster')) {
                    highestRankAchievement = 'grandmaster';
                } else if (stats.achievements.includes('master')) {
                    highestRankAchievement = 'master';
                } else if (stats.achievements.includes('advanced')) {
                    highestRankAchievement = 'advanced';
                } else if (stats.achievements.includes('intermediate')) {
                    highestRankAchievement = 'intermediate';
                } else if (stats.achievements.includes('beginner')) {
                    highestRankAchievement = 'beginner';
                }
            }
            
            // 只有當有成就解鎖時才顯示徽章
            if (highestRankAchievement) {
                const badgeInfo = achievements.find(a => a.id === highestRankAchievement);
                badgeElement.className = `badge ${badgeInfo.class}`;
                badgeElement.innerHTML = `<span>${badgeInfo.icon}</span>`;
                badgeTooltip.textContent = badgeInfo.name;
                
                // 顯示徽章，使用動畫效果
                if (currentBadge.style.visibility === 'hidden') {
                    currentBadge.style.visibility = 'visible';
                    currentBadge.style.opacity = '0';
                    setTimeout(() => {
                        currentBadge.style.opacity = '1';
                        currentBadge.style.transform = 'scale(1.2)';
                        setTimeout(() => {
                            currentBadge.style.transform = 'scale(1)';
                        }, 300);
                    }, 10);
                }
            }
            
            // 更新成就徽章列表
            const badgeGrid = document.getElementById('badge-grid');
            if (badgeGrid) {
                badgeGrid.innerHTML = '';
                
                achievements.forEach(achievement => {
                    const isUnlocked = stats.achievements && stats.achievements.includes(achievement.id);
                    
                    const badgeItem = document.createElement('div');
                    badgeItem.className = 'badge-item';
                    
                    const badgeContainer = document.createElement('div');
                    badgeContainer.className = 'badge-container';
                    
                    const badge = document.createElement('div');
                    badge.className = `badge ${achievement.class} ${isUnlocked ? '' : 'locked'}`;
                    badge.innerHTML = `<span>${achievement.icon}</span>`;
                    
                    const tooltip = document.createElement('div');
                    tooltip.className = 'badge-tooltip';
                    tooltip.textContent = achievement.name;
                    
                    badgeContainer.appendChild(badge);
                    badgeContainer.appendChild(tooltip);
                    
                    const badgeName = document.createElement('div');
                    badgeName.className = 'badge-name';
                    badgeName.textContent = achievement.name;
                    
                    const badgeDescription = document.createElement('div');
                    badgeDescription.className = 'badge-description';
                    badgeDescription.textContent = achievement.description;
                    
                    badgeItem.appendChild(badgeContainer);
                    badgeItem.appendChild(badgeName);
                    badgeItem.appendChild(badgeDescription);
                    
                    badgeGrid.appendChild(badgeItem);
                });
            }
        }
        
        // 檢查成就解鎖
        function checkAchievements() {
            let newAchievements = [];
            
            achievements.forEach(achievement => {
                if (!stats.achievements.includes(achievement.id)) {
                    let isUnlocked = false;
                    
                    if (achievement.statKey) {
                        isUnlocked = stats[achievement.statKey] >= achievement.threshold;
                    } else {
                        isUnlocked = stats.poemsUnlocked.length >= achievement.threshold;
                    }
                    
                    if (isUnlocked) {
                        stats.achievements.push(achievement.id);
                        newAchievements.push(achievement);
                    }
                }
            });
            
            if (newAchievements.length > 0) {
                saveStats();
                updateBadges();
                
                // 顯示成就通知
                newAchievements.forEach((achievement, index) => {
                    setTimeout(() => {
                        showAchievementNotification(achievement);
                    }, index * 2000);
                });
                
                // 播放成就解鎖音效
                playSoundAchievement();
            }
        }
        
        // 顯示成就通知
        function showAchievementNotification(achievement) {
            const container = document.getElementById('achievement-container');
            if (!container) return;
            
            const notification = document.createElement('div');
            notification.className = 'achievement-notification';
            
            notification.innerHTML = `
                <div class="achievement-icon">🏆</div>
                <div class="achievement-text">
                    <div class="achievement-title">解鎖成就：${achievement.name}</div>
                    <div class="achievement-description">${achievement.description}</div>
                </div>
            `;
            
            container.appendChild(notification);
            
            // 添加顯示動畫
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // 5秒後自動移除通知
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    // 確保元素仍然在DOM中且是container的子元素
                    if (notification.parentNode === container) {
                        try {
                            container.removeChild(notification);
                        } catch (e) {
                            console.log('清除成就通知時發生錯誤:', e);
                        }
                    }
                }, 500);
            }, 5000);
        }
        
        // 創建粒子效果
        function createParticles(count = 15, color1 = '#6a5acd', color2 = '#e6a23c') {
            const container = document.getElementById('particles-container');
            
            // 清空現有粒子
            container.innerHTML = '';
            
            // 點擊的元素位置 - 獲取當前聚焦的元素中心點
            let centerX = window.innerWidth / 2;
            let centerY = window.innerHeight / 2;
            
            // 嘗試獲取激活的emoji按鈕
            const activeButton = document.querySelector('.emoji-button.correct:last-child');
            if (activeButton) {
                const rect = activeButton.getBoundingClientRect();
                centerX = rect.left + rect.width / 2;
                centerY = rect.top + rect.height / 2;
            }
            
            for (let i = 0; i < count; i++) {
                // 隨機決定是星星還是圓形粒子
                const isCircle = Math.random() > 0.4;
                const particle = document.createElement('div');
                particle.className = isCircle ? 'particle particle-circle' : 'particle particle-star';
                
                // 隨機確定粒子的顏色
                const useColor1 = Math.random() > 0.5;
                const color = useColor1 ? color1 : color2;
                
                // 設置顏色
                if (isCircle) {
                    particle.style.backgroundColor = color;
                } else {
                    particle.style.borderBottomColor = color;
                    if (particle.classList.contains('particle-star') && particle.after) {
                        const afterStyle = document.createElement('style');
                        afterStyle.textContent = `.particle-star[data-id="${i}"]::after { border-top-color: ${color}; }`;
                        document.head.appendChild(afterStyle);
                        particle.setAttribute('data-id', i);
                    }
                }
                
                // 隨機大小，圓形範圍從5px到12px，星星稍大
                const size = isCircle ? 5 + Math.random() * 7 : 10 + Math.random() * 15;
                
                // 設置初始位置 - 從中心點向外擴散
                const distance = Math.random() * 20;
                const angle = Math.random() * Math.PI * 2;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                // 隨機方向和速度 - 從中心向外發散
                const speed = 3 + Math.random() * 6;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                
                // 旋轉效果 (只應用於星星)
                let rotation = Math.random() * 360;
                const rotationSpeed = (Math.random() - 0.5) * 15;
                
                // 設置樣式
                if (isCircle) {
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                } else {
                    particle.style.transform = `rotate(${rotation}deg) scale(${size/20})`;
                }
                
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                
                container.appendChild(particle);
                
                // 動畫
                let opacity = 0;
                let currentX = x;
                let currentY = y;
                let currentSize = size;
                let fadeInComplete = false;
                let growthFactor = 1.02;
                
                const animate = () => {
                    // 淡入淡出
                    if (opacity < 1 && !fadeInComplete) {
                        opacity += 0.15;
                        if (opacity >= 1) {
                            fadeInComplete = true;
                        }
                    } else {
                        opacity -= 0.03;
                    }
                    
                    // 移動
                    currentX += vx * 0.9;
                    currentY += vy * 0.9;
                    
                    // 稍微放大效果
                    if (!fadeInComplete) {
                        currentSize *= growthFactor;
                    }
                    
                    // 旋轉效果 (星星)
                    if (!isCircle) {
                        rotation += rotationSpeed;
                        particle.style.transform = `rotate(${rotation}deg) scale(${currentSize/20})`;
                    } else {
                        // 圓形粒子只縮放
                        particle.style.width = `${currentSize}px`;
                        particle.style.height = `${currentSize}px`;
                    }
                    
                    // 應用樣式
                    particle.style.opacity = opacity;
                    particle.style.left = `${currentX}px`;
                    particle.style.top = `${currentY}px`;
                    
                    // 持續動畫或移除
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        container.removeChild(particle);
                    }
                };
                
                requestAnimationFrame(animate);
            }
        }
        
        // DOM 元素
        const poemTextElement = document.getElementById('poem-text');
        const poemAuthorElement = document.getElementById('poem-author');
        const poemContainer = document.getElementById('poem-container');
        const emojiGrid = document.getElementById('emoji-grid');
        const scoreDisplay = document.getElementById('score');
        const feedbackElement = document.getElementById('feedback');
        const explanationElement = document.getElementById('explanation');
        // 不再使用固定的下一首按鈕
// const nextButton = document.getElementById('next-btn');
        const chancesIndicator = document.querySelectorAll('.chances-indicator span');
        const timerCircle = document.getElementById('timer-circle');
        const timerText = document.getElementById('timer-text');
        // 移除對已刪除元素的引用
        // const emojiCounterText = document.getElementById('emoji-counter-text');
        const statsButton = document.getElementById('stats-btn');
        const statsModal = document.getElementById('stats-modal');
        const statsModalClose = document.getElementById('stats-modal-close');
        const tabs = document.querySelectorAll('.tab');
        
        // 初始化遊戲
        // 檢測iframe環境並優化布局
        function optimizeForIframe() {
            // 檢測是否在iframe中
            const inIframe = window.parent !== window;
            
            if (inIframe) {
                console.log('檢測到iframe環境，進行滾動優化');
                
                // 確保body使用實際的iframe尺寸
                const updateBodySize = () => {
                    const body = document.body;
                    const html = document.documentElement;
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    
                    // 強制設置精確尺寸
                    html.style.width = '100%';
                    html.style.height = 'auto';
                    html.style.margin = '0';
                    html.style.padding = '0';
                    html.style.overflowX = 'hidden';
                    html.style.overflowY = 'auto';
                    
                    body.style.width = '100%';
                    body.style.height = 'auto';
                    body.style.minHeight = height + 'px';
                    body.style.margin = '0';
                    body.style.padding = '0';
                    body.style.overflowX = 'hidden';
                    body.style.overflowY = 'auto';
                    body.style.webkitOverflowScrolling = 'touch';
                    body.style.touchAction = 'manipulation';
                    
                    // 移動端特殊處理
                    if (window.innerWidth <= 768) {
                        body.style.position = 'relative';
                        body.style.transform = 'translateZ(0)'; // 啟用硬件加速
                    }
                };
                
                // 初始設置
                updateBodySize();
                
                // 監聽窗口大小變化
                window.addEventListener('resize', updateBodySize);
                window.addEventListener('orientationchange', () => {
                    setTimeout(updateBodySize, 100);
                });
                
                // 確保容器可以滾動
                const container = document.querySelector('.container');
                if (container) {
                    container.style.minHeight = 'auto';
                    container.style.height = 'auto';
                    container.classList.add('scrollable');
                }
                
                // 為所有模態框添加滾動類
                const modals = document.querySelectorAll('.modal-content, .stats-content');
                modals.forEach(modal => {
                    modal.classList.add('scrollable');
                });
                
                // 動態調整遊戲區域高度
                const adjustGameHeight = () => {
                    const gameContainer = document.querySelector('.game-container');
                    const viewportHeight = window.innerHeight;
                    
                    if (gameContainer && viewportHeight < 700) {
                        // 在小屏幕上進一步壓縮
                        gameContainer.style.padding = '0.75rem';
                        
                        const poemContainer = document.querySelector('.poem-container');
                        if (poemContainer) {
                            poemContainer.style.height = '6rem';
                            poemContainer.style.minHeight = '6rem';
                        }
                    }
                };
                
                adjustGameHeight();
                window.addEventListener('resize', adjustGameHeight);
            } else {
                // 非iframe環境，確保正常滾動
                document.body.style.overflowY = 'auto';
                document.documentElement.style.overflowY = 'auto';
            }
        }

        function initGame() {
            // 首先優化iframe布局
            optimizeForIframe();
            
            // 初始化音頻
            initAudio();
            
            // 載入統計數據
            loadStats();
            
            score = 0;
            scoreDisplay.textContent = score;
            
            // 如果已經解鎖了所有詩句，重置可用索引
            if (availableIndices.length === 0) {
                availableIndices = [...Array(poemData.length).keys()];
            }
            
            // 過濾掉已解鎖的詩句
            availableIndices = availableIndices.filter(index => !stats.poemsUnlocked.includes(index));
            
            // 如果所有詩句都已解鎖，則使用所有詩句
            if (availableIndices.length === 0) {
                availableIndices = [...Array(poemData.length).keys()];
            }
            
            nextPoem();
            
            // 播放新遊戲音效
            playSoundNewGame();
        }
        
        // 開始倒計時
        function startTimer() {
            // 清除任何現有的計時器
            clearInterval(timerInterval);
            
            // 設置倒計時時間 - 15秒
            timeRemaining = 15;
            updateTimerDisplay();
            
            // 記錄開始時間
            startTime = new Date();
            
            // 設置計時器，每秒更新一次
            timerInterval = setInterval(() => {
                timeRemaining--;
                
                // 播放滴答聲
                if (timeRemaining > 0) {
                    playSoundTick();
                }
                
                // 更新計時器顯示
                updateTimerDisplay();
                
                // 檢查是否倒計時結束
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    timeUp();
                }
            }, 1000);
        }
        
        // 更新計時器顯示
        function updateTimerDisplay() {
            // 更新數字
            timerText.textContent = timeRemaining;
            
            // 更新圓環進度條 - 15秒完整計時
            const percentage = (15 - timeRemaining) / 15 * 100;
            timerCircle.style.background = `conic-gradient(${timeRemaining <= 3 ? 'var(--error-color)' : 'var(--primary-color)'} ${percentage}%, transparent ${percentage}%)`;
            
            // 時間等於5秒時播放提示音
            if (timeRemaining === 5) {
                playSoundTimeWarning();
            }
            
            // 時間少於4秒時添加緊急樣式
            if (timeRemaining <= 3) {
                timerCircle.classList.add('timer-urgent');
            } else {
                timerCircle.classList.remove('timer-urgent');
            }
        }
        
        // 更新emoji計數器 (保留函數但不執行操作，以避免引用錯誤)
        function updateEmojiCounter() {
            // 我們移除了emoji計數器元素，但保留此函數以防其他代碼調用它
            return;
        }
        
        // 更新Combo顯示
        function updateComboDisplay() {
            const comboInfoElement = document.getElementById('combo-info');
            const comboTextElement = document.querySelector('.combo-text');
            const comboCountElement = document.getElementById('combo-count');
            const comboBonusElement = document.getElementById('combo-bonus');
            
            if (comboCount <= 1) {
                // 隱藏combo顯示
                comboTextElement.classList.add('hidden');
                comboCountElement.classList.add('hidden');
                comboBonusElement.classList.add('hidden');
                return;
            }
            
            // 顯示combo顯示
            comboTextElement.classList.remove('hidden');
            comboCountElement.classList.remove('hidden');
            comboBonusElement.classList.remove('hidden');
            comboCountElement.textContent = comboCount;
            
            // 計算combo獎勵
            let bonusValue = 0;
            if (comboCount >= 10) {
                bonusValue = 10;
                comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm level5';
            } else if (comboCount >= 7) {
                bonusValue = 5;
                comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm level4';
            } else if (comboCount >= 5) {
                bonusValue = 3;
                comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm level3';
            } else if (comboCount >= 3) {
                bonusValue = 2;
                comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm level2';
            } else if (comboCount >= 2) {
                bonusValue = 1;
                comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm level1';
            }
            
            comboBonusElement.textContent = `+${bonusValue}`;
            
            // 添加脈動動畫
            comboInfoElement.classList.add('combo-pulse');
            setTimeout(() => {
                comboInfoElement.classList.remove('combo-pulse');
            }, 500);
            
            // 更新comboScore
            comboScore = bonusValue;
        }
        
        // 增加combo計數
        function increaseCombo() {
            comboCount++;
            if (comboCount > stats.bestCombo) {
                stats.bestCombo = comboCount;
            }
            updateComboDisplay();
        }
        
        // 重置combo計數
        function resetCombo() {
            const comboInfoElement = document.getElementById('combo-info');
            const comboTextElement = document.querySelector('.combo-text');
            const comboCountElement = document.getElementById('combo-count');
            const comboBonusElement = document.getElementById('combo-bonus');
            
            if (comboCount > 1) {
                comboInfoElement.classList.add('combo-reset');
                setTimeout(() => {
                    comboInfoElement.classList.remove('combo-reset');
                    comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm';
                    comboTextElement.classList.add('hidden');
                    comboCountElement.classList.add('hidden');
                    comboBonusElement.classList.add('hidden');
                    comboCount = 0;
                    comboScore = 0;
                }, 500);
            } else {
                comboCount = 0;
                comboScore = 0;
                comboTextElement.classList.add('hidden');
                comboCountElement.classList.add('hidden');
                comboBonusElement.classList.add('hidden');
                comboInfoElement.className = 'combo-info flex items-center gap-1 text-sm';
            }
        }
        
        // 時間到處理函數
        function timeUp() {
            if (gameEnded) return;
            
            gameEnded = true;
            
            // 播放時間到的音效
            playSoundTimeUp();
            
            // 重置連擊計數
            resetCombo();
            
            // 顯示反饋
            showFeedback('時間到!', 'text-red-600 dark:text-red-400');
            
            // 顯示正確答案
            highlightCorrectEmojis();
            
            // 禁用所有emoji按鈕
            const emojiButtons = document.querySelectorAll('.emoji-button');
            emojiButtons.forEach(button => {
                button.disabled = true;
                button.classList.add('opacity-70');
            });
            
            // 記錄回答時間
            endTime = new Date();
            recordRoundStats(false);
            
            // 添加淡出動畫後替換為兩個按鈕（生成卡片和下一首）
            setTimeout(() => {
                // 淡出當前文字
                feedbackElement.style.transition = "opacity 0.5s ease";
                feedbackElement.style.opacity = "0";
                
                // 文字淡出後再顯示按鈕
                setTimeout(() => {
                    // 創建兩個按鈕（生成卡片和下一首）
                    feedbackElement.innerHTML = `
                        <div class="flex justify-between gap-4 w-full">
                            <button id="create-card-btn-dynamic" class="action-button bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 w-1/2">生成卡片</button>
                            <button id="next-btn-dynamic" class="action-button bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 w-1/2">下一首</button>
                        </div>
                    `;
                    
                    // 重置過渡屬性並設定初始狀態
                    feedbackElement.style.transition = "";
                    feedbackElement.style.opacity = "0";
                    feedbackElement.style.transform = "scale(0.95)";
                    
                    // 獲取按鈕並添加事件監聽
                    const createCardBtnDynamic = document.getElementById('create-card-btn-dynamic');
                    const nextBtnDynamic = document.getElementById('next-btn-dynamic');
                    
                    if (createCardBtnDynamic) {
                        createCardBtnDynamic.addEventListener('click', () => {
                            playSoundClick();
                            openCardModal();
                        });
                    }
                    
                    if (nextBtnDynamic) {
                        nextBtnDynamic.addEventListener('click', () => {
                            playSoundClick();
                            nextPoem();
                        });
                    }
                    
                    // 添加彈出動畫效果
                    requestAnimationFrame(() => {
                        feedbackElement.style.transition = "opacity 0.5s ease, transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
                        feedbackElement.style.opacity = "1";
                        feedbackElement.style.transform = "scale(1)";
                    });
                }, 500);
            }, 2500);
        }
        
        // 顯示下一首詩
        function nextPoem() {
            // 不需要隱藏按鈕，因為我們使用動態創建的下一首按鈕
            
            // 重置遊戲狀態
            gameEnded = false;
            foundEmojis = [];
            startTime = null;
            endTime = null;
            
            // 重置反饋信息
            feedbackElement.textContent = '';
            feedbackElement.className = 'text-base sm:text-lg font-medium';
            explanationElement.textContent = '';
            explanationElement.classList.remove('show');
            
            // 重置機會
            chancesRemaining = 3;
            updateChancesDisplay();
            
            // 檢查是否還有可用的詩句
            if (availableIndices.length === 0) {
                // 使用所有詩句
                availableIndices = [...Array(poemData.length).keys()];
                
                // 優先選擇未解鎖的詩句
                availableIndices = availableIndices.filter(index => !stats.poemsUnlocked.includes(index));
                
                // 如果所有詩句都已解鎖，則使用所有詩句
                if (availableIndices.length === 0) {
                    availableIndices = [...Array(poemData.length).keys()];
                }
            }
            
            // 隨機選擇一首詩
            const randomIndex = Math.floor(Math.random() * availableIndices.length);
            currentPoemIndex = availableIndices[randomIndex];
            
            // 移除已使用的索引
            availableIndices.splice(randomIndex, 1);
            
            // 顯示詩句
            const poem = poemData[currentPoemIndex];
            
            // 使用動畫效果展示新詩句
            poemTextElement.classList.remove('poem-appear');
            poemAuthorElement.classList.remove('poem-appear');
            
            // 移除可能存在的text-small類別
            poemTextElement.classList.remove('text-small');
            
            // 觸發重繪以便動畫能再次運行
            void poemTextElement.offsetWidth;
            void poemAuthorElement.offsetWidth;
            
            poemTextElement.textContent = poem.verse;
            poemAuthorElement.textContent = `${poem.poem} · ${poem.author}`;
            
            // 檢查詩句長度，如果超過16個字符則應用較小的字體
            if (poem.verse.length > 16) {
                poemTextElement.classList.add('text-small');
            }
            
            poemTextElement.classList.add('poem-appear');
            poemAuthorElement.classList.add('poem-appear');
            
            // 重置和更新emoji計數器
            updateEmojiCounter();
            
            // 生成emoji選項
            generateEmojis();
            
            // 開始計時
            startTimer();
            
            // 增加遊戲次數
            stats.timesPlayed++;
            saveStats();
        }
        
        // 生成emoji選項
        function generateEmojis() {
            // 清空現有emoji
            emojiGrid.innerHTML = '';
            
            // 獲取當前詩句的正確emoji
            const correctEmojis = poemData[currentPoemIndex].correctEmojis;
            
            // 所有可能的emoji (從所有詩句的correctEmojis中提取)
            const allEmojis = Array.from(new Set(poemData.flatMap(p => p.correctEmojis)));
            
            // 獲取額外的不正確emoji
            let incorrectEmojis = allEmojis.filter(emoji => !correctEmojis.includes(emoji));
            incorrectEmojis = shuffleArray(incorrectEmojis).slice(0, 9); // 獲取9個隨機不正確的emoji
            
            // 合併並打亂所有emoji
            let roundEmojis = [...correctEmojis, ...incorrectEmojis.slice(0, 9)];
            roundEmojis = shuffleArray(roundEmojis).slice(0, 12); // 總共顯示12個emoji
            
            // 確保至少包含一個正確emoji
            if (!roundEmojis.some(emoji => correctEmojis.includes(emoji))) {
                roundEmojis.pop(); // 移除一個不正確的emoji
                roundEmojis.push(correctEmojis[0]); // 添加一個正確的emoji
                roundEmojis = shuffleArray(roundEmojis); // 再次打亂
            }
            
            // 創建emoji按鈕，使用延遲添加以產生動畫效果
            roundEmojis.forEach((emoji, index) => {
                const emojiButton = document.createElement('button');
                emojiButton.className = 'emoji-button';
                emojiButton.textContent = emoji;
                emojiButton.setAttribute('aria-label', `Emoji ${emoji}`);
                
                // 添加延遲出現的動畫效果
                emojiButton.style.opacity = '0';
                emojiButton.style.transform = 'scale(0.8) translateY(10px)';
                emojiButton.style.transition = `all 0.3s cubic-bezier(0.4, 0, 0.2, 1) ${index * 0.05}s`;
                
                setTimeout(() => {
                    emojiButton.style.opacity = '1';
                    emojiButton.style.transform = 'scale(1) translateY(0)';
                }, 10);
                
                // 保存按钮的点击状态，防止重复点击
                emojiButton.setAttribute('data-clicked', 'false');
                
                emojiButton.addEventListener('click', () => {
                    // 僅在有剩餘機會且倒計時仍在進行時允許點擊，且按钮未被点击过
                    if (chancesRemaining <= 0 || timeRemaining <= 0 || gameEnded || emojiButton.getAttribute('data-clicked') === 'true') return;
                    
                    // 标记该按钮已被点击
                    emojiButton.setAttribute('data-clicked', 'true');
                    
                    // 播放點擊音效
                    playSoundClick();
                    
                    // 檢查選擇的emoji是否正確
                    if (poemData[currentPoemIndex].correctEmojis.includes(emoji) && !foundEmojis.includes(emoji)) {
                        // 正確匹配
                        emojiButton.classList.add('correct');
                        
                        // 添加到已找到的emoji列表
                        foundEmojis.push(emoji);
                        
                        // 更新emoji計數器
                        updateEmojiCounter();
                        
                        // 增加連擊計數
                        increaseCombo();
                        
                        // 計算總分數 (基礎分 + 連擊獎勵)
                        let pointsEarned = 1;
                        if (comboScore > 0) {
                            pointsEarned += comboScore;
                        }
                        score += pointsEarned;
                        scoreDisplay.textContent = score;
                        
                        // 更新反饋信息，顯示連擊獎勵
                        const feedbackMsg = comboScore > 0 ? 
                            `正確! +1 分 (連擊 +${comboScore})` : 
                            '正確! +1 分';
                        showFeedback(feedbackMsg, 'text-green-600 dark:text-green-400');
                        
                        // 播放正確音效
                        playSoundCorrect();
                        
                        // 添加分數動畫
                        scoreDisplay.classList.add('pulse-animation');
                        setTimeout(() => {
                            scoreDisplay.classList.remove('pulse-animation');
                        }, 600);
                        
                        // 移除了粒子效果
                        
                        // 檢查是否找到所有正確的emoji
                        if (foundEmojis.length === poemData[currentPoemIndex].correctEmojis.length) {
                            // 找到所有正確emoji - 遊戲結束
                            gameEnded = true;
                            
                            // 停止計時器
                            clearInterval(timerInterval);
                            
                            // 播放全部完成音效
                            playSoundAllCorrect();
                            
                            // 顯示祝賀信息
                            showFeedback('太棒了! 找到所有意象!', 'text-green-600 dark:text-green-400');
                            
                            // 顯示解釋
                            explanationElement.textContent = poemData[currentPoemIndex].explanation;
                            setTimeout(() => {
                                explanationElement.classList.add('show');
                            }, 300);
                            
                            // 記錄回答時間
                            endTime = new Date();
                            recordRoundStats(true);
                            
                            // 動態生成並顯示兩個按鈕（生成卡片和下一首）
                            setTimeout(() => {
                                // 淡出當前反饋信息
                                feedbackElement.style.transition = "opacity 0.5s ease";
                                feedbackElement.style.opacity = "0";
                                
                                // 反饋信息淡出後顯示按鈕
                                setTimeout(() => {
                                    // 創建按鈕容器，使用 flex 讓按鈕左右排列
                                    feedbackElement.innerHTML = `
                                        <div class="flex justify-between gap-4 w-full">
                                            <button id="create-card-btn-dynamic" class="action-button bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 w-1/2">生成卡片</button>
                                            <button id="next-btn-dynamic" class="action-button bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 w-1/2">下一首</button>
                                        </div>
                                    `;
                                    
                                    // 重置過渡屬性並設定初始狀態
                                    feedbackElement.style.transition = "";
                                    feedbackElement.style.opacity = "0";
                                    feedbackElement.style.transform = "scale(0.95)";
                                    
                                    // 獲取按鈕並添加事件監聽
                                    const createCardBtnDynamic = document.getElementById('create-card-btn-dynamic');
                                    const nextBtnDynamic = document.getElementById('next-btn-dynamic');
                                    
                                    if (createCardBtnDynamic) {
                                        createCardBtnDynamic.addEventListener('click', () => {
                                            playSoundClick();
                                            openCardModal();
                                        });
                                    }
                                    
                                    if (nextBtnDynamic) {
                                        nextBtnDynamic.addEventListener('click', () => {
                                            playSoundClick();
                                            nextPoem();
                                        });
                                    }
                                    
                                    // 添加彈出動畫效果
                                    requestAnimationFrame(() => {
                                        feedbackElement.style.transition = "opacity 0.5s ease, transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
                                        feedbackElement.style.opacity = "1";
                                        feedbackElement.style.transform = "scale(1)";
                                    });
                                }, 500);
                            }, 1000);
                        }
                        
                    } else {
                        // 不正確匹配
                        emojiButton.classList.add('incorrect');
                        chancesRemaining--;
                        updateChancesDisplay();
                        
                        // 重置combo連擊
                        resetCombo();
                        
                        // 播放不正確音效
                        playSoundIncorrect();
                        
                        if (chancesRemaining <= 0) {
                            // 沒有機會了 - 遊戲結束
                            gameEnded = true;
                            
                            // 停止計時器
                            clearInterval(timerInterval);
                            
                            showFeedback('沒有機會了!', 'text-red-600 dark:text-red-400');
                            
                            // 顯示正確答案
                            highlightCorrectEmojis();
                            
                            // 記錄回答時間
                            endTime = new Date();
                            recordRoundStats(false);
                            
                            // 添加淡出動畫後替換為兩個按鈕 (機會用完的情況)
                            setTimeout(() => {
                                // 淡出當前文字
                                feedbackElement.style.transition = "opacity 0.5s ease";
                                feedbackElement.style.opacity = "0";
                                
                                // 文字淡出後再顯示按鈕
                                setTimeout(() => {
                                    // 創建兩個按鈕（生成卡片和下一首）
                                    feedbackElement.innerHTML = `
                                        <div class="flex justify-between gap-4 w-full">
                                            <button id="create-card-btn-dynamic" class="action-button bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 w-1/2">生成卡片</button>
                                            <button id="next-btn-dynamic" class="action-button bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 w-1/2">下一首</button>
                                        </div>
                                    `;
                                    
                                    // 重置過渡屬性並設定初始狀態
                                    feedbackElement.style.transition = "";
                                    feedbackElement.style.opacity = "0";
                                    feedbackElement.style.transform = "scale(0.95)";
                                    
                                    // 獲取按鈕並添加事件監聽
                                    const createCardBtnDynamic = document.getElementById('create-card-btn-dynamic');
                                    const nextBtnDynamic = document.getElementById('next-btn-dynamic');
                                    
                                    if (createCardBtnDynamic) {
                                        createCardBtnDynamic.addEventListener('click', () => {
                                            playSoundClick();
                                            openCardModal();
                                        });
                                    }
                                    
                                    if (nextBtnDynamic) {
                                        nextBtnDynamic.addEventListener('click', () => {
                                            playSoundClick();
                                            nextPoem();
                                        });
                                    }
                                    
                                    // 添加彈出動畫效果
                                    requestAnimationFrame(() => {
                                        feedbackElement.style.transition = "opacity 0.5s ease, transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
                                        feedbackElement.style.opacity = "1";
                                        feedbackElement.style.transform = "scale(1)";
                                    });
                                }, 500);
                            }, 2500);
                        } else {
                            showFeedback(`不正確! 還有 ${chancesRemaining} 次機會`, 'text-red-600 dark:text-red-400');
                        }
                    }
                });
                
                emojiGrid.appendChild(emojiButton);
            });
        }
        
        // 當用完機會後高亮顯示正確的emoji
        function highlightCorrectEmojis() {
            const correctEmojis = poemData[currentPoemIndex].correctEmojis;
            const emojiButtons = document.querySelectorAll('.emoji-button');
            
            emojiButtons.forEach(button => {
                if (correctEmojis.includes(button.textContent) && !foundEmojis.includes(button.textContent)) {
                    // 應用正確樣式 (只高亮尚未找到的正確emoji)
                    button.classList.add('correct');
                }
                
                // 禁用所有按鈕
                button.disabled = true;
                button.classList.add('opacity-70');
            });
            
            // 顯示解釋
            explanationElement.textContent = poemData[currentPoemIndex].explanation;
            setTimeout(() => {
                explanationElement.classList.add('show');
            }, 300);
        }
        
        // 更新機會顯示
        function updateChancesDisplay() {
            chancesIndicator.forEach((indicator, index) => {
                if (index < chancesRemaining) {
                    indicator.classList.add('active');
                    indicator.classList.remove('bg-gray-200');
                } else {
                    indicator.classList.remove('active');
                    indicator.classList.add('bg-gray-200');
                }
            });
        }
        
        // 顯示反饋信息
        function showFeedback(message, className) {
            feedbackElement.textContent = message;
            feedbackElement.className = `text-base sm:text-lg font-medium ${className}`;
            
            // 添加簡單的動畫效果
            feedbackElement.animate([
                { opacity: 0, transform: 'translateY(-10px)' },
                { opacity: 1, transform: 'translateY(0)' }
            ], {
                duration: 300,
                easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
                fill: 'forwards'
            });
        }
        
        // 記錄回合統計
        function recordRoundStats(isSuccess) {
            // 計算回答時間
            const answerTime = (endTime - startTime) / 1000; // 轉換為秒
            
            // 更新統計數據
            stats.totalScore += score;
            
            // 記錄已解鎖的詩句 - 只有在成功回答時才解鎖
            if (isSuccess && !stats.poemsUnlocked.includes(currentPoemIndex)) {
                stats.poemsUnlocked.push(currentPoemIndex);
            }
            
            // 更新連擊
            if (isSuccess) {
                stats.currentStreak++;
                if (stats.currentStreak > stats.maxStreak) {
                    stats.maxStreak = stats.currentStreak;
                }
                
                // 如果找到了所有正確答案，增加perfectAnswers計數
                if (foundEmojis.length === poemData[currentPoemIndex].correctEmojis.length) {
                    stats.perfectAnswers++;
                }
                
                // 如果在3秒內找到所有正確答案，增加fastAnswers計數
                if (answerTime <= 3) {
                    stats.fastAnswers++;
                }
            } else {
                stats.currentStreak = 0;
            }
            
            // 更新平均時間
            stats.totalTime += answerTime;
            stats.averageTime = stats.totalTime / stats.timesPlayed;
            
            // 更新最快時間
            if (isSuccess && answerTime < stats.fastestTime) {
                stats.fastestTime = answerTime;
            }
            
            // 保存統計數據
            saveStats();
            
            // 檢查成就
            checkAchievements();
        }
        
        // 數組洗牌函數 (Fisher-Yates算法)
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // 頁面加載時開始遊戲
        window.addEventListener('DOMContentLoaded', initGame);
        
        // 移除了對原始下一首按鈕的事件監聽器，現在使用動態創建的按鈕
        
        // 統計按鈕事件監聽器
        statsButton.addEventListener('click', () => {
            playSoundClick();
            statsModal.classList.add('active');
        });
        
        // 關閉統計模態框
        statsModalClose.addEventListener('click', () => {
            playSoundClick();
            statsModal.classList.remove('active');
        });
        
        // 點擊模態框背景關閉
        statsModal.addEventListener('click', (e) => {
            if (e.target === statsModal) {
                statsModal.classList.remove('active');
            }
        });
        
        // 標籤切換
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                playSoundClick();
                
                // 移除所有標籤的活動狀態
                tabs.forEach(t => t.classList.remove('active'));
                
                // 給當前標籤添加活動狀態
                tab.classList.add('active');
                
                // 隱藏所有標籤內容
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // 顯示當前標籤內容
                const tabId = tab.getAttribute('data-tab');
                document.querySelector(`.tab-content[data-tab-content="${tabId}"]`).classList.add('active');
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.1/dist/umd/supabase.js"></script>
    <script src="assets/js/cc-auth.js"></script>
</body>
</html>
