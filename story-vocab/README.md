# æ™ºæ…§æ•…äº‹åŠ - æ•…äº‹æ¥é¾™è¯æ±‡å­¦ä¹ åº”ç”¨

## âš¡ è¶…å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èï¼‰

å¦‚æœæ‚¨çš„ Supabase å·²ç»é…ç½®å¥½ï¼ˆURL å’Œ Key å·²å¡«å…¥ `js/config.js`ï¼‰ï¼Œå¯ä»¥ç›´æ¥ï¼š

1. **å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨**
   ```bash
   cd story-vocab
   python3 -m http.server 8000
   ```

2. **è®¿é—®ç®¡ç†åå°**
   
   æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8000/admin/

3. **å¯¼å…¥ç¤ºä¾‹è¯æ±‡**
   
   ç‚¹å‡»ã€Œè¯æ±‡å¯¼å…¥ã€â†’ã€ŒåŠ è½½è¯æ±‡æ•°æ®ã€â†’ã€Œå¼€å§‹å¯¼å…¥ã€
   
   è¿™å°†å¯¼å…¥ 120 ä¸ªç²¾é€‰è¯æ±‡ï¼ˆL1-L6ï¼Œé€‚åˆ 7-18 å²å­¦ç”Ÿï¼‰

4. **æµè§ˆè¯æ±‡**
   
   ä½¿ç”¨ã€Œè¯æ±‡æµè§ˆå™¨ã€æŸ¥çœ‹ã€ç­›é€‰å’Œæœç´¢å·²å¯¼å…¥çš„è¯æ±‡

## ğŸš€ å®Œæ•´è®¾ç½®æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Supabase é¡¹ç›®

1. è®¿é—® [https://supabase.com](https://supabase.com)
2. æ³¨å†Œå¹¶åˆ›å»ºæ–°é¡¹ç›®
3. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Project URL: `https://xxxxx.supabase.co`
   - Project Anon Key: `eyJhbGci...`

### ç¬¬äºŒæ­¥ï¼šè¿è¡Œæ•°æ®åº“è¿ç§»

1. å®‰è£… Supabase CLIï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰:
   ```bash
   npm install -g supabase
   ```

2. ç™»å½• Supabase:
   ```bash
   supabase login
   ```

3. å…³è”é¡¹ç›®:
   ```bash
   cd story-vocab
   supabase link --project-ref your-project-ref
   ```

4. è¿è¡Œè¿ç§»:
   ```bash
   supabase db push
   ```
   
   æˆ–è€…ç›´æ¥åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰§è¡Œ `supabase/migrations/001_initial_schema.sql`

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®å‰ç«¯

1. ç¼–è¾‘ `js/config.js`ï¼Œå¡«å…¥ Supabase é…ç½®:
   ```javascript
   export const SUPABASE_CONFIG = {
     url: 'https://xxxxx.supabase.co', // æ›¿æ¢ä¸ºæ‚¨çš„ URL
     anonKey: 'eyJhbGci...' // æ›¿æ¢ä¸ºæ‚¨çš„ anon key
   };
   ```

2. é…ç½® DeepSeek APIï¼ˆåœ¨ Supabase Dashboard â†’ Edge Functions â†’ Settings â†’ Secretsï¼‰:
   ```
   DEEPSEEK_API_KEY=sk-xxxxx
   ```

### ç¬¬å››æ­¥ï¼šå‡†å¤‡è¯æ±‡æ•°æ®

1. å‡†å¤‡è¯æ±‡ CSV æ–‡ä»¶ï¼ˆæ ¼å¼å‚è€ƒ `data/vocabulary-template.csv`ï¼‰
2. å¯¼å…¥åˆ° Supabaseï¼ˆä½¿ç”¨ SQL æˆ– CSV å¯¼å…¥å·¥å…·ï¼‰

### ç¬¬äº”æ­¥ï¼šéƒ¨ç½² Edge Function

1. åˆ›å»º Edge Function:
   ```bash
   supabase functions deploy story-agent
   ```

2. æµ‹è¯• Function:
   ```bash
   supabase functions invoke story-agent --body '{"test": true}'
   ```

### ç¬¬å…­æ­¥ï¼šæœ¬åœ°æµ‹è¯•

1. ç”¨æµè§ˆå™¨æ‰“å¼€ `index.html`
2. æˆ–ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨:
   ```bash
   # Python
   python -m http.server 8000
   
   # Node.js
   npx serve
   ```

3. è®¿é—® `http://localhost:8000`

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
story-vocab/
â”œâ”€â”€ index.html                 # é¦–é¡µ
â”œâ”€â”€ story.html                 # æ•…äº‹åˆ›ä½œé¡µé¢ï¼ˆå¾…åˆ›å»ºï¼‰
â”œâ”€â”€ config.html                # è®¾ç½®é¡µé¢ï¼ˆå¾…åˆ›å»ºï¼‰
â”œâ”€â”€ result.html                # ç»“æœé¡µé¢ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ css/
â”‚   â””â”€â”€ main.css              # å…¨å±€æ ·å¼ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config.js             # âœ… é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ supabase-client.js    # âœ… Supabase å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth.js               # è®¤è¯æ¨¡å—ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ modules/
â”‚       â”œâ”€â”€ story-engine.js   # æ•…äº‹å¼•æ“ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚       â”œâ”€â”€ vocabulary.js     # è¯æ±‡æ¨èï¼ˆå¾…åˆ›å»ºï¼‰
â”‚       â”œâ”€â”€ creativity.js     # åˆ›æ„åº¦è¯„åˆ†ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚       â””â”€â”€ moedict.js        # èŒå…¸ APIï¼ˆå¾…åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ 001_initial_schema.sql  # âœ… æ•°æ®åº“æ¶æ„
â”‚   â”‚
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ story-agent/
â”‚           â””â”€â”€ index.ts      # AI Agentï¼ˆå¾…åˆ›å»ºï¼‰
â”‚
â””â”€â”€ data/
    â””â”€â”€ vocabulary-template.csv  # è¯æ±‡æ¨¡æ¿ï¼ˆå¾…åˆ›å»ºï¼‰
```

---

## ğŸ¯ MVP å¼€å‘ä»»åŠ¡æ¸…å•

### Week 1: åŸºç¡€è®¾æ–½ (Day 1-7)

- [x] æ•°æ®åº“æ¶æ„è®¾è®¡
- [x] Supabase é…ç½®
- [x] å‰ç«¯é…ç½®æ–‡ä»¶
- [x] Supabase å®¢æˆ·ç«¯å°è£…
- [ ] Supabase é¡¹ç›®åˆ›å»º
- [ ] æ•°æ®åº“è¿ç§»æ‰§è¡Œ
- [ ] è¯æ±‡æ•°æ®å‡†å¤‡ï¼ˆ1500ä¸ªï¼‰
- [ ] è¯æ±‡æ•°æ®å¯¼å…¥

### Week 2: æ ¸å¿ƒåŠŸèƒ½ (Day 8-14)

- [ ] Edge Function: story-agent
- [ ] DeepSeek API é›†æˆ
- [ ] æ•…äº‹å¼•æ“æ¨¡å—
- [ ] è¯æ±‡æ¨èç®—æ³•
- [ ] èŒå…¸ API é›†æˆ
- [ ] åˆ›æ„åº¦è¯„åˆ†ç®—æ³•
- [ ] å‰ç«¯é¡µé¢ï¼ˆHTML/CSSï¼‰
- [ ] é¡µé¢äº¤äº’é€»è¾‘

### Week 3: æµ‹è¯•ä¼˜åŒ– (Day 15-21)

- [ ] å®Œæ•´æµç¨‹æµ‹è¯•
- [ ] AI å›åº”è´¨é‡è°ƒä¼˜
- [ ] UI/UX ä¼˜åŒ–
- [ ] Bug ä¿®å¤
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] å†…æµ‹å‡†å¤‡

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ES6 æ¨¡å—ï¼ˆ`import/export`ï¼‰
- å‡½æ•°å‘½åï¼šé©¼å³°å¼ï¼ˆcamelCaseï¼‰
- å˜é‡å‘½åï¼šæœ‰æ„ä¹‰çš„è‹±æ–‡
- æ³¨é‡Šï¼šå…³é”®é€»è¾‘å¿…é¡»æ³¨é‡Š
- é”™è¯¯å¤„ç†ï¼šä½¿ç”¨ try-catch

### Git æäº¤è§„èŒƒ

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ Bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### åˆ†æ”¯ç­–ç•¥

- `main`: ç”Ÿäº§ç¯å¢ƒ
- `develop`: å¼€å‘ç¯å¢ƒ
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `hotfix/*`: ç´§æ€¥ä¿®å¤

---

## ğŸ“Š æ•°æ®åº“è¡¨è¯´æ˜

### users - ç”¨æˆ·è¡¨
- å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- å½“å‰ç­‰çº§ã€å®Œæˆæ•…äº‹æ•°

### vocabulary - è¯æ±‡è¡¨
- æ ¸å¿ƒè¯æ±‡åº“
- åŒ…å«æ‹¼éŸ³ã€éš¾åº¦ã€åˆ†ç±»ã€ä¸»é¢˜ç­‰

### story_sessions - æ•…äº‹ä¼šè¯
- æ¯ä¸ªæ•…äº‹çš„å®Œæ•´æ•°æ®
- å¯¹è¯å†å²ã€åˆ›æ„åº¦è¯„åˆ†

### user_vocabulary - ç”¨æˆ·è¯æ±‡è®°å½•
- ç”¨æˆ·å­¦ä¹ è¿‡çš„è¯æ±‡
- æŒæ¡ç¨‹åº¦ã€ä½¿ç”¨æ¬¡æ•°

### user_wordbook - ç”Ÿè¯æœ¬
- ç”¨æˆ·æ”¶è—çš„è¯æ±‡
- ä¾‹å¥ã€æ¥æºæ•…äº‹

---

## ğŸ” å®‰å…¨è¯´æ˜

### Row Level Security (RLS)

æ•°æ®åº“å·²å¯ç”¨ RLSï¼Œç¡®ä¿ï¼š
- ç”¨æˆ·åªèƒ½çœ‹åˆ°è‡ªå·±çš„æ•°æ®
- è¯æ±‡è¡¨å¯¹æ‰€æœ‰äººå¯è¯»
- API Key å­˜å‚¨åœ¨ Supabase Secrets

### API Key ç®¡ç†

- å‰ç«¯ä½¿ç”¨ `anon key`ï¼ˆå…¬å¼€å®‰å…¨ï¼‰
- DeepSeek API Key å­˜å‚¨åœ¨ Edge Function ç¯å¢ƒå˜é‡
- ä¸è¦å°† API Key æäº¤åˆ° Git

---

## ğŸ› æ•…éšœæ’æŸ¥

### æ•°æ®åº“è¿æ¥å¤±è´¥
1. æ£€æŸ¥ `config.js` ä¸­çš„ URL å’Œ Key
2. ç¡®è®¤ Supabase é¡¹ç›®çŠ¶æ€æ­£å¸¸
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### Edge Function è°ƒç”¨å¤±è´¥
1. æ£€æŸ¥å‡½æ•°æ˜¯å¦å·²éƒ¨ç½²
2. ç¡®è®¤ç¯å¢ƒå˜é‡å·²è®¾ç½®
3. æŸ¥çœ‹ Function æ—¥å¿—: `supabase functions logs story-agent`

### è¯æ±‡æ¨èä¸ºç©º
1. ç¡®è®¤è¯æ±‡æ•°æ®å·²å¯¼å…¥
2. æ£€æŸ¥éš¾åº¦ç­‰çº§æ˜¯å¦åŒ¹é…
3. æŸ¥çœ‹æ•°æ®åº“æŸ¥è¯¢æ—¥å¿—

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- ğŸ“– [å®Œæ•´è®¾è®¡æ–‡æ¡£](../STORY_VOCABULARY_APP_DESIGN.md)
- ğŸ“ [MVP è®¡åˆ’](../STORY_VOCABULARY_MVP_PLAN.md)
- ğŸ› [GitHub Issues](https://github.com/...)

---

## ğŸ“„ License

å¾…å®š

---

**æœ€åæ›´æ–°**: 2025-10-06  
**ç‰ˆæœ¬**: 1.0.0-mvp  
**çŠ¶æ€**: å¼€å‘ä¸­

