---
description: Story-Vocab Supabase éƒ¨ç½²è¦ç¯„ - å­é …ç›®ç¨ç«‹éƒ¨ç½²
globs:
  - supabase/**
  - docs/**
  - "**/supabase*.sh"
alwaysApply: false
---

# Story-Vocab Supabase éƒ¨ç½²è¦ç¯„

> æœ¬è¦å‰‡åƒ…é©ç”¨æ–¼ story-vocab é …ç›®ï¼Œå®šç¾©å…¶ Supabase éƒ¨ç½²çš„æœ€ä½³å¯¦è¸

## ğŸ¯ æ ¸å¿ƒåŸå‰‡

Story-Vocab æ¡ç”¨**å®Œå…¨ç¨ç«‹çš„ Supabase æ¶æ§‹**ï¼š
- âœ… åœ¨ story-vocab ç›®éŒ„å…§ç›´æ¥éƒ¨ç½²
- âœ… æ“æœ‰ç¨ç«‹çš„ `config.toml`ï¼ˆproject_id: "story-vocab"ï¼‰
- âŒ **çµ•ä¸**è¤‡è£½è³‡æºåˆ°å¤ªè™›å¹»å¢ƒæ ¹ç›®éŒ„

## ğŸ“‹ æ­£ç¢ºéƒ¨ç½²æµç¨‹

### æ­¥é©Ÿ 1ï¼šé€²å…¥é …ç›®ç›®éŒ„
```bash
cd /Users/ylzhang/Documents/GitHub/chineseclassics.github.io/story-vocab
```

**é‡è¦**ï¼šæ‰€æœ‰ Supabase CLI å‘½ä»¤éƒ½å¿…é ˆåœ¨æ­¤ç›®éŒ„åŸ·è¡Œ

### æ­¥é©Ÿ 2ï¼šé€£æ¥é …ç›®
```bash
supabase link --project-ref bjykaipbeokbbykvseyr
```

### æ­¥é©Ÿ 3ï¼šé‹è¡Œæ•¸æ“šåº«é·ç§»
```bash
supabase db push
```

### æ­¥é©Ÿ 4ï¼šéƒ¨ç½² Edge Functions
```bash
# éƒ¨ç½²æ‰€æœ‰å‡½æ•¸
supabase functions deploy vocab-recommender
supabase functions deploy vocab-difficulty-evaluator
supabase functions deploy story-agent

# é©—è­‰éƒ¨ç½²
supabase functions list
```

## âœ… æ­£ç¢ºåšæ³•

### éƒ¨ç½² Edge Functions
```bash
cd story-vocab
supabase functions deploy vocab-recommender
```

### é‹è¡Œ Supabase å·¥å…·
```bash
cd story-vocab
./supabase-utils.sh tables
./query-table-structure.sh vocabulary
```

### æŸ¥çœ‹å‡½æ•¸æ—¥èªŒ
```bash
cd story-vocab
supabase functions logs vocab-recommender --tail
```

## âŒ éŒ¯èª¤åšæ³•

### ä¸è¦è¤‡è£½åˆ°æ ¹ç›®éŒ„
```bash
# âŒ çµ•ä¸é€™æ¨£åšï¼
cp -r story-vocab/supabase/functions /supabase/
cd /
supabase functions deploy
```

### ä¸è¦åœ¨æ ¹ç›®éŒ„åŸ·è¡Œå‘½ä»¤
```bash
# âŒ è·¯å¾‘éŒ¯èª¤
cd /Users/ylzhang/Documents/GitHub/chineseclassics.github.io
./story-vocab/supabase-utils.sh tables
```

### ä¸è¦ä½¿ç”¨æ ¹ç›®éŒ„çš„é…ç½®
```bash
# âŒ éŒ¯èª¤çš„é…ç½®
cd /
supabase link --project-ref bjykaipbeokbbykvseyr
```

## ğŸ—„ï¸ æ•¸æ“šåº«æ¶æ§‹

### æ ¸å¿ƒè¡¨
- `vocabulary` - è©å½™è¡¨
- `stories` - æ•…äº‹è¡¨
- `user_wordbook` - ç”¨æˆ¶è©æœ¬
- `wordlists` - è©è¡¨ç³»çµ±
- `wordlist_tags` - è©è¡¨æ¨™ç±¤

### Edge Functions
- `vocab-recommender` - AI è©å½™æ¨è–¦
- `vocab-difficulty-evaluator` - è©å½™é›£åº¦è©•ä¼°
- `story-agent` - æ•…äº‹ç”Ÿæˆ Agent

## ğŸ”§ é–‹ç™¼å·¥å…·

### Supabase ç®¡ç†è…³æœ¬
ä½æ–¼ `story-vocab/` æ ¹ç›®éŒ„ï¼š
- `supabase-utils.sh` - ä¸»è¦ç®¡ç†å·¥å…·
- `query-table-structure.sh` - è¡¨çµæ§‹æŸ¥è©¢
- `start-server.sh` - å•Ÿå‹•æœ¬åœ°æœå‹™å™¨

### ä½¿ç”¨æ–¹å¼
```bash
cd story-vocab

# æŸ¥çœ‹æ‰€æœ‰è¡¨
./supabase-utils.sh tables

# æŸ¥çœ‹è¡¨çµæ§‹
./query-table-structure.sh vocabulary

# å¥åº·æª¢æŸ¥
./supabase-utils.sh health
```

## ğŸ“ é…ç½®æ–‡ä»¶

### config.toml ä½ç½®
`story-vocab/supabase/config.toml`

### é—œéµé…ç½®
```toml
project_id = "story-vocab"  # å°ˆå±¬ IDï¼Œä¸æ˜¯ "chineseclassics.github.io"
```

## ğŸ› å¸¸è¦‹éŒ¯èª¤æ’æŸ¥

### éŒ¯èª¤ï¼šæ‰¾ä¸åˆ° supabase ç›®éŒ„
```bash
# åŸå› ï¼šä¸åœ¨æ­£ç¢ºçš„ç›®éŒ„
# è§£æ±ºï¼šç¢ºä¿åœ¨ story-vocab ç›®éŒ„
pwd  # æ‡‰è©²è¼¸å‡º .../story-vocab
```

### éŒ¯èª¤ï¼šfunctions éƒ¨ç½²å¤±æ•—
```bash
# åŸå› ï¼šå¯èƒ½åœ¨éŒ¯èª¤çš„ç›®éŒ„
# è§£æ±ºï¼šæª¢æŸ¥ç•¶å‰ç›®éŒ„ï¼Œæ‡‰è©²åœ¨ story-vocab
cd story-vocab
supabase functions deploy [function-name]
```

### éŒ¯èª¤ï¼šé€£æ¥åˆ°éŒ¯èª¤çš„é …ç›®
```bash
# åŸå› ï¼šä½¿ç”¨äº†æ ¹ç›®éŒ„çš„é…ç½®
# è§£æ±ºï¼šåœ¨ story-vocab ç›®éŒ„é‡æ–°é€£æ¥
cd story-vocab
supabase link --project-ref bjykaipbeokbbykvseyr
```

## ğŸ“š ç›¸é—œæ–‡æª”

- [Story-Vocab éƒ¨ç½²æŒ‡å—](../docs/DEPLOYMENT.md)
- [Supabase CLI ä½¿ç”¨æŒ‡å—](../docs/SUPABASE_CLI_GUIDE.md)
- [è©è¡¨ç³»çµ±éƒ¨ç½²](../docs/WORDLIST_DEPLOYMENT_GUIDE.md)
- [å¤ªè™›å¹»å¢ƒ Supabase æ¶æ§‹](@supabase-architecture) - å¹³å°ç´šè¦å‰‡

## ğŸ”— èˆ‡å¹³å°ç´šè¦å‰‡çš„é—œä¿‚

æœ¬è¦å‰‡æ˜¯å¹³å°ç´š `supabase-architecture.mdc` çš„**å…·é«”å¯¦ç¾**ï¼š
- å¹³å°ç´šè¦å‰‡å®šç¾©äº†ã€Œå­é …ç›®ç¨ç«‹éƒ¨ç½²ã€çš„åŸå‰‡
- æœ¬è¦å‰‡æä¾›äº† story-vocab çš„å…·é«”æ“ä½œæ­¥é©Ÿ
- å…©è€…äº’è£œï¼Œä¸è¡çª

---

**è‡ªå‹•å•Ÿç”¨æ¢ä»¶**ï¼šç•¶è™•ç† story-vocab çš„ Supabase ç›¸é—œæ–‡ä»¶æ™‚è‡ªå‹•å•Ÿç”¨æ­¤è¦å‰‡ã€‚
