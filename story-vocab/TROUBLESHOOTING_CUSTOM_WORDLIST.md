# è‡ªå®šç¾©è©è¡¨æ¨è–¦å•é¡Œè¨ºæ–·

## å•é¡Œæè¿°

ç”¨æˆ¶ä¸Šå‚³è‡ªå®šç¾©è©è¡¨ä¸¦é¸æ“‡åˆ†å±¤å¾Œï¼ŒéŠæˆ²æ¨è–¦çš„ä¸æ˜¯è‡ªå®šç¾©è©è¡¨ä¸­çš„è©ã€‚

## è¨ºæ–·æ­¥é©Ÿ

### 1. æª¢æŸ¥å‰ç«¯å‚³éçš„åƒæ•¸

æ‰“é–‹æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œé–‹å§‹éŠæˆ²ï¼ŒæŸ¥æ‰¾ä»¥ä¸‹æ—¥èªŒï¼š

```
ğŸ“š å¼€å§‹æ¸¸æˆ - è¯è¡¨æ¨¡å¼: wordlist
ğŸ“š è¯è¡¨ID: [æ‡‰è©²æœ‰UUID]
ğŸ“š å±‚çº§2: [æ‡‰è©²æ˜¯ä½ é¸æ“‡çš„åˆ†å±¤ï¼Œå¦‚"åŸºç¤"]
ğŸ“š å±‚çº§3: null
```

**æª¢æŸ¥é»**ï¼š
- âœ… wordlistMode æ‡‰è©²æ˜¯ 'wordlist'ï¼ˆä¸æ˜¯ 'ai'ï¼‰
- âœ… wordlistId æ‡‰è©²æœ‰å€¼
- âœ… level2Tag æ‡‰è©²æ˜¯ä½ é¸æ“‡çš„åˆ†å±¤

å¦‚æœé€™äº›éƒ½æ­£ç¢ºï¼Œç¹¼çºŒä¸‹ä¸€æ­¥ã€‚

---

### 2. æª¢æŸ¥ Edge Function æ¥æ”¶çš„åƒæ•¸

åœ¨æ§åˆ¶å°çš„ Network æ¨™ç±¤ï¼š
1. ç¯©é¸ï¼š`vocab-recommender`
2. é»æ“Šè«‹æ±‚
3. æŸ¥çœ‹ **Payload**ï¼ˆè«‹æ±‚é«”ï¼‰

æ‡‰è©²çœ‹åˆ°ï¼š
```json
{
  "userId": "...",
  "sessionId": "...",
  "roundNumber": 1,
  "storyContext": "",
  "wordlistMode": "wordlist",
  "wordlistId": "æ‡‰è©²æ˜¯ä½ çš„è©è¡¨UUID",
  "level2Tag": "æ‡‰è©²æ˜¯ä½ é¸çš„åˆ†å±¤",
  "level3Tag": null
}
```

**æª¢æŸ¥é»**ï¼š
- âœ… wordlistMode æ˜¯ 'wordlist'
- âœ… wordlistId æœ‰å€¼
- âœ… level2Tag æœ‰å€¼

å¦‚æœåƒæ•¸æ­£ç¢ºï¼Œç¹¼çºŒä¸‹ä¸€æ­¥ã€‚

---

### 3. æª¢æŸ¥ Edge Function çš„æ—¥èªŒ

åœ¨ Supabase Dashboardï¼š
1. é€²å…¥ **Edge Functions** â†’ **vocab-recommender**
2. é»æ“Š **Logs** æ¨™ç±¤
3. æŸ¥çœ‹æœ€æ–°çš„æ—¥èªŒ

æ‡‰è©²çœ‹åˆ°ï¼š
```
[è©è¡¨æ¨¡å¼] è©è¡¨ID: xxx, L2: åŸºç¤, L3: null
âœ… å¾è©è¡¨ç²å– X å€‹å€™é¸è©å½™
âœ… æ¨è–¦äº† 5 å€‹è©
```

**å¯èƒ½çš„å•é¡Œ**ï¼š

#### å•é¡Œ Aï¼šæŸ¥è©¢è¿”å› 0 å€‹è©å½™
```
âš ï¸ è©è¡¨ xxx åœ¨æŒ‡å®šå±¤ç´šæ²’æœ‰è©å½™
```

**åŸå› **ï¼š
- ä¸Šå‚³æ™‚ level_2_tag æ²’æœ‰æ­£ç¢ºä¿å­˜
- æˆ–è€…æŸ¥è©¢æ¢ä»¶ä¸åŒ¹é…

**è§£æ±º**ï¼šæŸ¥çœ‹è³‡æ–™åº«ä¸­çš„æ•¸æ“š

#### å•é¡Œ Bï¼šEdge Function ä»ç„¶ä½¿ç”¨èˆŠä»£ç¢¼
```
[æŸ¥è©¢è©è¡¨å¤±æ•—] ...
```

**åŸå› **ï¼šEdge Function æ²’æœ‰æ­£ç¢ºéƒ¨ç½²

**è§£æ±º**ï¼šé‡æ–°éƒ¨ç½²

---

### 4. æª¢æŸ¥è³‡æ–™åº«ä¸­çš„æ•¸æ“š

åœ¨ Supabase Dashboard â†’ SQL Editorï¼š

```sql
-- æŸ¥çœ‹ä½ çš„è‡ªå®šç¾©è©è¡¨
SELECT * FROM wordlists 
WHERE type = 'custom' 
ORDER BY created_at DESC 
LIMIT 5;

-- æŸ¥çœ‹è©è¡¨ä¸­çš„è©å½™
SELECT * FROM wordlist_vocabulary 
WHERE wordlist_id = 'YOUR_WORDLIST_ID'
LIMIT 20;
```

**æª¢æŸ¥é»**ï¼š
- âœ… wordlist è¨˜éŒ„å­˜åœ¨
- âœ… wordlist_vocabulary ä¸­æœ‰è©å½™è¨˜éŒ„
- âœ… level_2_tag æ¬„ä½æœ‰å€¼ï¼ˆå¦‚ "åŸºç¤"ï¼‰
- âœ… è©å½™æ•¸é‡ >= 5

---

## å¿«é€Ÿè¨ºæ–·å‘½ä»¤

è«‹åœ¨æ§åˆ¶å°é‹è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç„¶å¾ŒæŠŠçµæœå‘Šè¨´æˆ‘ï¼š

```javascript
// æª¢æŸ¥ gameState
console.log('è©è¡¨æ¨¡å¼:', gameState.wordlistMode);
console.log('è©è¡¨ID:', gameState.wordlistId);
console.log('ç¬¬äºŒå±¤ç´š:', gameState.level2Tag);
console.log('ç¬¬ä¸‰å±¤ç´š:', gameState.level3Tag);
```

ç„¶å¾Œå‘Šè¨´æˆ‘è¼¸å‡ºçš„å…§å®¹ï¼

