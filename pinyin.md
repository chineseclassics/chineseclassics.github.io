拼音拼拼樂 - 軟件開發計劃書 (MVP V6)

1. 項目概述

項目名稱： 拼音拼拼樂 (暫定)
核心目標： 為幼兒園大班學生提供一個遊戲化、可探索的拼音學習工具。
核心用戶： 幼兒園學生 (學習者)、幼兒園教師及家長 (內容管理者)。
核心價值：

對學生： 在一個受控的（「專注模式」）或開放的（「自由模式」）環境中，通過拖拽、組合、即時反饋來主動探索和學習拼音、漢字與詞語。

對教師： 提供一個高度靈活、零技術門檻的教學工具，支持離線使用、批量備課和完全自定義的拼音標註，完美貼合教學大綱。

2. 核心架構 (V6 方案)

技術棧： 純前端應用 (Client-Only)。

數據庫： 瀏覽器 Local Storage。所有數據（系統數據、自定義數據）均存儲於本地。

優點： 零服務器成本，響應極快，100% 離線運行（學習模式）。

缺點： 數據隨設備，清理緩存可能導致數據丟失（通過「導出」功能規避）。

未來擴展 (Deferred)： 本 MVP 方案不包含 Supabase 數據庫同步或 DeepSeek AI 功能。這些將作為 V2.0 版本的擴展點。

3. 數據核心：離線優先混合模式

本方案的關鍵是不依賴實時 API 來實現核心拼音標註功能。

3.1. 內置離線詞庫 (Offline DB)：

App 將內置一個由 pinyin-pro-data (基於《現代漢語詞典》第7版) 處理生成的 our-app-pinyin-db.json 詞庫。

此詞庫包含數萬條常用字詞及其標準拼音。

目的： 實現 99% 的拼音本地秒查，支持離線批量導入和手動添加。

3.2. 在線備選 (Online Fallback)：

觸發： 僅當老師添加的字詞在內置詞庫中查詢不到時（例如生僻字、自創詞）。

行為： App 將嘗試調用「萌典 (MoeDict) API」獲取拼音建議。

狀態： 此功能為輔助，非必需。在斷網狀態下，老師可手動為查詢失敗的詞語輸入拼音。

4. 內容管理：內容包 (Content Pack)

4.1. 組織方式： 所有教學內容（系統內置除外）都以「內容包 (Pack)」的形式組織。

4.2. 內容包類型：

unit (主題單元)：例如 "交通工具"。

exercise (專項練習)：例如 "b p m f 練習"。

註： 這兩個類型僅為標籤區分，App 處理邏輯完全一致。

4.3. 自動推導範圍 (Auto-Inferred Scope)：

核心機制： 老師無需手動設置一個包的拼音範圍。

流程： 當老師創建/導入一個包並添加字詞（如 巴士(bā shì)、汽車(qì chē)）後，App 自動解析所有拼音，並生成一個 scope 對象（例如 scope: { shengmu: ["b", "sh", "q", "ch"], yunmu: ["a", "i", "e"] }）。

此 scope 將用於「專注模式」下的界面過濾。

5. 學習模式 (Learning Modes)

App 啟動後（界面二），學生可選擇兩種模式：

5.1. 自由模式 (Global Mode)：

觸發： 選擇固定的「自由模式」（或「拼音王國」）卡片。

界面： 「拼音組合器」顯示所有的聲母、韻母、整體認讀音節。

邏輯： 拼出 mā 時，系統會搜索所有包（系統+自定義）中的 媽。

5.2. 專注模式 (Focus Mode)：

觸發： 選擇一個老師創建的「內容包」（例如 "交通工具")。

界面： 「拼音組合器」的「拼音選擇區」被該包的 scope 自動過濾（例如只顯示 b, sh, q, ch 等）。

邏輯： 學生在此受控範圍內探索。拼出 qì 時，系統顯示 汽車。

6. 核心界面與交互 (UI/UX)

6.1. 界面一：拼音組合器 (學習界面)

佈局： 「工作台」（上半部分）+「拼音選擇區」（下半部分）。

工作台： 包含 [ 聲母卡槽 ] 和 [ 韻母卡槽 ]。

選擇區：

通過 [ 聲母 ] [ 韻母 ] [ 整體 ] 三個標籤 (Tabs) 切換。

內容區為水平滾動的「傳送帶」。

在「專注模式」下，「傳送帶」中的內容被 scope 過濾。

交互流程：

拖拽： 學生從「選擇區」拖拽 b 到 [ 聲母卡槽 ]。

吸附： 成功吸附，播放 b 音效，[ 韻母卡槽 ] 閃爍提示。

引導： 「選擇區」自動切換到 [ 韻母 ] 標籤。

組合： 學生拖拽 a 到 [ 韻母卡槽 ]，b 和 a 合併為 ba，播放 ba 音效。

選調： ba 上方彈出聲調按鈕（bā, bá, bǎ, bà）。

確認： 學生點擊 bà，播放 bà 標準音，並播放成功動畫（星星/煙花）。

出字： 系統查詢 Local Storage，[ 爸 (bà) ] 按鈕出現。

出詞： 學生點擊 [ 爸 ]，彈出詞語 [ 爸爸 (bà ba) ]。

錯誤反饋： 錯誤組合（如 b + m）或拖到錯誤卡槽，組件將「抖動」並播放錯誤音效，然後彈回原位。

6.2. 界面二：內容包選擇器 (啟動頁)

學生視圖 (默認)：

頂部為 App 標題和一個低調的 ⚙️ (設置) 圖標（「家長鎖」入口）。

內容區為大型圖形化卡片列表。

卡片 1 (固定)： 「自由模式」（彩虹/城堡圖標）。

卡片 2, 3... (自定義)： 老師創建的包（如 "交通工具"，帶 🚗 圖標）。

點擊卡片即進入「界面一」對應的模式。

教師視圖 (編輯模式)：

長按 ⚙️ 圖標 5 秒進入。

界面上出現 [ + 導入 Excel ] 和 [ + 手動創建新單元 ] 按鈕。

所有「自定義卡片」上出現 [ 編輯 ] [ 導出 ] [ 刪除 ] 按鈕。

7. 教師/編輯模式 (In-App CMS)

7.1. 拼音手動微調 (Pinyin Override)

核心需求： 老師必須擁有拼音的最終決定權。

流程： 無論是手動添加還是批量導入，系統自動填寫的拼音（gē ge）永遠出現在一個可編輯的輸入框中。

輔助： 系統需提供一個「拼音聲調鍵盤」（包含 ā á ǎ à 等）輔助老師修改。

保存： 系統最終保存的是老師微調後的版本。

7.2. 批量導入 (Batch Import) - (V6 流程)

模板 (極簡)： 老師在 Excel 中只需填寫 Pack_Info (包名稱, 類型), Characters (漢字), Words (詞語)。無需填寫拼音。

導入 (Import)： 老師在 App 內點擊「導入」，選擇 Excel 文件。

處理 (Process)： App 解析文件，首先查詢「內置離線詞庫」獲取拼音 (秒級)。

備選 (Fallback)： 對於內置詞庫查不到的詞，嘗試調用「萌典 API」獲取拼音。

審核 (Review)： App 彈出「導入審核」界面，顯示所有字詞和已自動填寫的拼音。

微調 (Override)： 老師在此界面手動修改任何不滿意的拼音（或為 API 失敗的詞手動填寫）。

確認 (Confirm)： 老師點擊「確認導入」，App 將最終數據存入 Local Storage，並自動推導 scope。

7.3. 批量導出 (Batch Export)

目的： 備份數據，防止 Local Storage 數據丟失。

功能： 在「編輯模式」下，老師可以將任意「內容包」導出為 Excel 文件。

8. 數據結構 (Local Storage 簡化 Schema)

{
  "system_data": {
    "characters": [
      { "pinyin": "bā", "char": "八" }
    ],
    "words": [
      { "base_char": "八", "word": "八個", "pinyin": "bā gè" }
    ]
  },
  "custom_packs": [
    {
      "pack_id": "uuid-pack-1",
      "pack_name": "交通工具",
      "type": "unit",
      "scope": {
        "shengmu": ["b", "sh", "q", "ch", "h"],
        "yunmu": ["a", "i", "e", "uo"],
        "zhengti": ["shi"]
      },
      "characters": [
        { "id": "uuid-c1", "pinyin": "qì", "char": "汽" },
        { "id": "uuid-c2", "pinyin": "chē", "char": "車" }
      ],
      "words": [
        { "id": "uuid-w1", "base_char": "汽", "word": "汽車", "pinyin": "qì chē" },
        { "id": "uuid-w2", "base_char": "車", "word": "火車", "pinyin": "huǒ chē" },
        { "id": "uuid-w3", "base_char": "車", "word": "巴士", "pinyin": "bā shì" }
      ]
    }
  ]
}


9. Excel 導入模板 (極簡 V6)

文件： template.xlsx

工作表 1：Pack_Info (包信息)
| pack_name (包名稱) | type (類型) |
| :--- | :--- |
| 交通工具 | unit |

工作表 2：Characters (漢字表)
| character (漢字) |
| :--- |
| 汽 |
| 車 |
| 巴 |
| 士 |
| 火 |

工作表 3：Words (詞語表)
| base_char (關聯漢字) | word (詞語) |
| :--- | :--- |
| 汽 | 汽車 |
| 車 | 火車 |
| 巴 | 巴士 |