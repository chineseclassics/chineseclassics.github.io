/**
 * 時文寶鑑 - AI 反饋側邊欄樣式
 * 
 * 配色方案：青灰雅士
 * AI 專用色：栗褐色（賈雨村）
 * 
 * @updated 2025-10-22 - 遷移到設計令牌系統
 */

/* ================================
   側邊欄基礎樣式
   ================================ */

#ai-feedback-sidebar {
    transition: all var(--duration-normal) var(--ease-out);
}

/* 側邊欄內容區域滾動優化 */
#sidebar-feedback-content {
    scrollbar-width: thin;
    scrollbar-color: var(--gray-400) var(--gray-100);
}

#sidebar-feedback-content::-webkit-scrollbar {
    width: 6px;
}

#sidebar-feedback-content::-webkit-scrollbar-track {
    background: var(--gray-100);
    border-radius: 3px;
}

#sidebar-feedback-content::-webkit-scrollbar-thumb {
    background: var(--gray-400);
    border-radius: 3px;
}

#sidebar-feedback-content::-webkit-scrollbar-thumb:hover {
    background: var(--gray-500);
}

/* ================================
   動畫效果
   ================================ */

/* 移動端模態框滑入動畫 */
.animate-slide-up {
    animation: slideUp var(--duration-normal) var(--ease-out);
}

/* 移動端內聯反饋下滑動畫 */
.animate-slide-down {
    animation: slideDown var(--duration-normal) var(--ease-out);
}

/* 模態框背景淡入 */
#ai-feedback-modal {
    animation: fadeIn var(--duration-normal) var(--ease-out);
}

/* 注意：slideUp, slideDown, fadeIn 動畫已在 animations.css 中定義 */

/* ================================
   響應式調整
   ================================ */

/* 桌面端：側邊欄固定在右側 */
@media (min-width: 1024px) {
    #ai-feedback-sidebar {
        max-height: calc(100vh - 120px);
    }
    
    /* 確保側邊欄不會太窄 */
    aside.lg\:w-1\/3 {
        min-width: 320px;
        max-width: 450px;
    }
}

/* 平板端：調整側邊欄寬度 */
@media (min-width: 1024px) and (max-width: 1280px) {
    aside.lg\:w-1\/3 {
        width: 35%;
    }
}

/* 大屏端：限制側邊欄最大寬度 */
@media (min-width: 1536px) {
    aside.lg\:w-1\/3 {
        width: 30%;
        max-width: 500px;
    }
}

/* ================================
   反饋卡片樣式優化（側邊欄專用）
   ================================ */

#sidebar-feedback-content .bg-gradient-to-br {
    /* 側邊欄中的反饋卡片使用更柔和的背景 */
    background: linear-gradient(to bottom right, var(--primary-50), var(--primary-100));
}

/* 側邊欄中的反饋組件間距優化 */
#sidebar-feedback-content > div > div {
    margin-bottom: 1rem;
}

/* 側邊欄中的按鈕樣式 */
#sidebar-feedback-content button {
    cursor: pointer;
}

/* ================================
   移動端模態框樣式優化
   ================================ */

@media (max-width: 1023px) {
    /* 確保模態框在最上層 */
    #ai-feedback-modal {
        z-index: 9999;
    }
    
    /* 模態框內容滾動優化 */
    #ai-feedback-modal .overflow-y-auto {
        -webkit-overflow-scrolling: touch;
    }
}

/* ================================
   段落高亮效果
   ================================ */

.paragraph-highlighted {
    transition: all 0.3s ease;
}

/* 問題徽章樣式 */
.feedback-badge {
    display: inline-flex;
    align-items: center;
    animation: badge-appear 0.3s ease-out;
}

@keyframes badge-appear {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* ================================
   內聯反饋容器樣式
   ================================ */

.inline-feedback-container {
    position: relative;
}

/* 內聯反饋的視覺連接線 */
.inline-feedback-container::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 50%;
    width: 2px;
    height: 8px;
    background: linear-gradient(to bottom, transparent, var(--primary-400));
}

/* ================================
   句子提示條樣式
   ================================ */

#sentence-tooltip {
    max-width: 90vw;
    animation: tooltipAppear var(--duration-normal) var(--ease-out);
}

/* 注意：使用自定義動畫，與 components.css 的 tooltip 動畫類似 */
@keyframes tooltipAppear {
    from {
        opacity: 0;
        transform: translate(-50%, -10px);
    }
    to {
        opacity: 1;
        transform: translate(-50%, 0);
    }
}

/* 句子問題條目 hover 效果 */
.sentence-issue-item {
    position: relative;
}

.sentence-issue-item:hover {
    transform: translateX(2px);
}

.sentence-issue-item::before {
    content: '';
    position: absolute;
    left: -4px;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    background: var(--warning-500);  /* 秋香色 */
    transition: height var(--duration-fast) var(--ease-out);
}

.sentence-issue-item:hover::before {
    height: 80%;
}

/* ================================
   打印樣式（隱藏側邊欄和反饋）
   ================================ */

@media print {
    #ai-feedback-sidebar {
        display: none;
    }
    
    .inline-feedback-container {
        display: none;
    }
    
    .lg\:w-2\/3 {
        width: 100% !important;
    }
    
    .paragraph-highlighted {
        border: none !important;
        background: none !important;
    }
}

