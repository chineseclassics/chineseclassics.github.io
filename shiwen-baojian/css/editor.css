/**
 * 時文寶鑑 - 編輯器樣式
 * 
 * 設計理念：
 * - 扁平化極簡風格
 * - 淡雅配色，不分散注意力
 * - 統一圓角，視覺協調
 * - 無立體感，純粹平面設計
 */

/* ================================
   編輯器容器統一樣式
   ================================ */

.ql-container {
    border-radius: 0 !important;
    border: 1px solid #e5e7eb !important;
    border-top: none !important;
    background: #ffffff;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    font-size: 16px;
    transition: border-color 0.2s ease;
}

/* 聚焦時：恢復頂部邊框 */
.ql-container:focus-within {
    border-top: 1px solid #3b82f6 !important;
    border-left: 1px solid #3b82f6 !important;
    border-right: 1px solid #3b82f6 !important;
    border-bottom: 1px solid #3b82f6 !important;
    outline: none !important;
}

/* 移除編輯器默認焦點樣式 */
.ql-editor:focus,
.ql-editor:focus-visible {
    outline: none !important;
}

/* 工具栏样式 - 扁平化 */
.ql-toolbar {
    border-radius: 0 !important;
    border: 1px solid #e5e7eb !important;
    border-bottom: none !important;
    background: #fafafa;
    padding: 10px 12px !important;
    transition: border-color 0.2s ease;
}

/* 聚焦時：工具欄變藍（使用父容器的 :focus-within） */
#intro-editor:focus-within .ql-toolbar,
#conclusion-editor:focus-within .ql-toolbar {
    border-color: #3b82f6 !important;
}

/* 段落編輯器的工具欄 */
div[id$="-editor"]:focus-within .ql-toolbar {
    border-color: #3b82f6 !important;
}

/* 工具栏按钮 - 扁平化 */
.ql-toolbar button {
    width: 32px !important;
    height: 32px !important;
    border-radius: 4px;
    transition: background-color 0.15s ease;
    margin: 0 2px;
    background: transparent;
}

.ql-toolbar button:hover {
    background: #e5e7eb;
}

.ql-toolbar button:active,
.ql-toolbar button.ql-active {
    background: #dbeafe;
    color: #3b82f6;
}

.ql-toolbar button svg {
    opacity: 0.65;
    transition: opacity 0.15s ease;
}

.ql-toolbar button:hover svg,
.ql-toolbar button.ql-active svg {
    opacity: 1;
}

/* 工具栏下拉菜单 - 扁平化 */
.ql-toolbar select {
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    padding: 4px 8px;
    background: white;
    transition: border-color 0.15s ease;
}

.ql-toolbar select:hover {
    border-color: #cbd5e1;
}

.ql-toolbar select:focus {
    border-color: #3b82f6;
    outline: none;
}

/* ================================
   編輯器內容區樣式
   ================================ */

.ql-editor {
    padding: 24px 28px !important;
    min-height: 180px;
    line-height: 1.8;
    color: #1f2937;
}

/* 段落样式 */
.ql-editor p {
    margin-bottom: 1em;
    text-indent: 0;
}

.ql-editor p:last-child {
    margin-bottom: 0;
}

/* 标题样式 */
.ql-editor h1,
.ql-editor h2,
.ql-editor h3 {
    font-weight: 600;
    color: #111827;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
}

.ql-editor h1 { font-size: 1.5em; }
.ql-editor h2 { font-size: 1.3em; }
.ql-editor h3 { font-size: 1.1em; }

/* 列表样式 */
.ql-editor ul,
.ql-editor ol {
    padding-left: 1.5em;
    margin-bottom: 1em;
}

.ql-editor li {
    margin-bottom: 0.5em;
}

/* 引用样式 - 扁平化 */
.ql-editor blockquote {
    border-left: 3px solid #3b82f6;
    padding-left: 1em;
    margin-left: 0;
    margin-right: 0;
    color: #4b5563;
    font-style: italic;
    background: #f0f9ff;
    padding: 12px 16px;
    border-radius: 0;
}

/* Placeholder 样式 */
.ql-editor.ql-blank::before {
    color: #9ca3af;
    font-style: normal;
    left: 28px;
}

/* ================================
   分論點和段落樣式優化 - 扁平化
   ================================ */

/* 分論點容器 - 扁平化 */
.bg-gradient-to-r.from-blue-50 {
    background: #f0f9ff !important;
    border-radius: 0;
    border: 1px solid #e0f2fe;
    border-left: 3px solid #3b82f6;
    padding: 24px !important;
    margin-bottom: 0;
    transition: border-color 0.15s ease;
}

.bg-gradient-to-r.from-blue-50:hover {
    border-left-color: #2563eb;
}

/* 分論點標題輸入框 - 扁平化 */
.bg-transparent.border-b-2 {
    border-radius: 0 !important;
    padding: 8px 12px !important;
    transition: border-color 0.15s ease;
}

.bg-transparent.border-b-2:hover {
    background: transparent !important;
    border-color: #cbd5e1 !important;
}

.bg-transparent.border-b-2:focus {
    background: transparent !important;
    border-color: #3b82f6 !important;
}

/* 分論點編號徽章 - 扁平化 */
.rounded-full.bg-blue-600 {
    background: #3b82f6 !important;
    box-shadow: none;
}

/* 段落卡片 - 扁平化 */
.bg-white.rounded-lg.border {
    border-radius: 0 !important;
    border-color: #e5e7eb !important;
    transition: border-color 0.15s ease;
    overflow: hidden;
    background: #ffffff;
}

.bg-white.rounded-lg.border:hover {
    border-color: #cbd5e1 !important;
}

/* ================================
   按鈕樣式優化 - 扁平化
   ================================ */

/* 添加分論點按鈕 - 扁平化 */
#add-argument-btn {
    border-radius: 0 !important;
    border: 1px dashed #cbd5e1 !important;
    background: #ffffff !important;
    transition: all 0.15s ease;
}

#add-argument-btn:hover {
    border-color: #3b82f6 !important;
    border-style: solid !important;
    background: #f0f9ff !important;
}

/* 添加段落按鈕 - 扁平化 */
.add-paragraph-btn {
    border-radius: 0 !important;
    border-color: #e0f2fe !important;
    background: #ffffff !important;
    transition: all 0.15s ease;
}

.add-paragraph-btn:hover {
    border-color: #3b82f6 !important;
    border-style: solid !important;
    background: #eff6ff !important;
}

/* 刪除按鈕 - 扁平化 */
.delete-argument-btn,
.delete-paragraph-btn {
    border-radius: 4px;
    transition: all 0.15s ease;
}

.delete-argument-btn:hover,
.delete-paragraph-btn:hover {
    background: #fef2f2 !important;
    color: #dc2626 !important;
}

/* ================================
   引言和結論區域樣式 - 扁平化
   ================================ */

/* 引言編輯器容器 - 扁平化，移除外层背景框 */
#intro-editor,
#conclusion-editor {
    border-radius: 0 !important;
    background: transparent;
    border: none;
    padding: 0;
}

#intro-editor:focus-within,
#conclusion-editor:focus-within {
    background: transparent;
}

/* ================================
   頂部工具欄樣式 - 扁平化
   ================================ */

/* 字數統計和保存狀態 - 扁平化 */
.bg-white.rounded-lg.shadow-sm.p-4 {
    border-radius: 8px !important;
    border: 1px solid #e5e7eb;
    background: #ffffff !important;
    box-shadow: none !important;
}

/* 保存狀態指示器 */
#save-status i {
    transition: all 0.3s ease;
}

#save-status .fa-spinner {
    color: #3b82f6;
}

#save-status .fa-check-circle {
    color: #10b981;
}

#save-status .fa-exclamation-circle {
    color: #ef4444;
}

/* ================================
   響應式優化
   ================================ */

@media (max-width: 768px) {
    .ql-toolbar {
        padding: 8px !important;
    }
    
    .ql-toolbar button {
        width: 28px !important;
        height: 28px !important;
        margin: 0 1px;
    }
    
    .ql-editor {
        padding: 16px 20px !important;
        font-size: 15px;
    }
    
    #intro-editor,
    #conclusion-editor {
        min-height: 150px !important;
    }
}

/* ================================
   焦點和選中狀態
   ================================ */

/* 選中文字的樣式 */
.ql-editor ::selection {
    background: rgba(59, 130, 246, 0.2);
}

/* 焦點環樣式 */
button:focus-visible,
input:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
}

/* 編輯器焦點：移除雙重外框 */
.ql-editor:focus,
.ql-editor:focus-visible,
.ql-container:focus,
.ql-container:focus-visible {
    outline: none !important;
}

/* 工具栏焦点 */
.ql-toolbar:focus,
.ql-toolbar:focus-visible {
    outline: none !important;
}

/* ================================
   微妙動畫效果 - 保持極簡
   ================================ */

/* 移除淡入動畫，保持扁平 */

/* 保存中動畫（僅保留必要的旋轉） */
#save-status .fa-spinner {
    /* 已由 Font Awesome 自带的 fa-spin 类处理 */
}

/* ================================
   標題輸入區樣式
   ================================ */

/* 主標題輸入框 */
#essay-title {
    font-size: 1.875rem;
    font-weight: 700;
    line-height: 1.3;
    color: #111827;
    padding: 0;
    transition: color 0.15s ease;
}

#essay-title:focus {
    color: #1f2937;
}

#essay-title::placeholder {
    color: #d1d5db;
    font-weight: 600;
}

/* 副標題輸入框 */
#essay-subtitle {
    font-size: 1.125rem;
    font-weight: 500;
    line-height: 1.4;
    color: #6b7280;
    padding: 0;
    transition: color 0.15s ease;
}

#essay-subtitle:focus {
    color: #4b5563;
}

#essay-subtitle::placeholder {
    color: #d1d5db;
    font-weight: 400;
}

/* 標題區容器 */
.border-b.border-gray-200.p-6:has(#essay-title) {
    background: #fafafa;
    border-bottom: 2px solid #e5e7eb !important;
}

/* ================================
   字體優化（可選）
   ================================ */

/* 如果需要更優雅的中文字體，可以啟用以下樣式 */
/*
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&display=swap');

.ql-editor {
    font-family: 'Noto Serif SC', 'Songti SC', 'SimSun', serif;
}
*/

/* ================================
   打印樣式優化
   ================================ */

@media print {
    .ql-toolbar {
        display: none;
    }
    
    .ql-container {
        border: none !important;
        box-shadow: none !important;
    }
    
    #add-argument-btn,
    .delete-argument-btn,
    .delete-paragraph-btn,
    .add-paragraph-btn {
        display: none;
    }
}
