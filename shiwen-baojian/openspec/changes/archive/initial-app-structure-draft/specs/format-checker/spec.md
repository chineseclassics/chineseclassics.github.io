# Format Checker Specification

## ADDED Requirements

### Requirement: 文本輸入區域
應用 SHALL 提供文本輸入區域，讓用戶粘貼或輸入論文內容進行格式檢查。

#### Scenario: 文本輸入界面
- **WHEN** 用戶進入格式檢查器
- **THEN** 顯示大型文本輸入框
- **AND** 輸入框支持多行文本
- **AND** 輸入框高度至少 400px

#### Scenario: 文本粘貼
- **WHEN** 用戶粘貼文本到輸入框
- **THEN** 保留原始格式（段落、換行）
- **AND** 自動觸發格式檢查
- **AND** 顯示「正在檢查...」提示

#### Scenario: 清空文本
- **WHEN** 用戶點擊「清空」按鈕
- **THEN** 清除輸入框中的所有文本
- **AND** 清除檢查結果
- **AND** 顯示初始提示信息

### Requirement: 標題格式檢查
應用 SHALL 檢測標題的格式問題，包括對齊方式和字體設置。

#### Scenario: 標題對齊檢查
- **WHEN** 檢測到第一行為標題
- **THEN** 檢查標題是否居中
- **AND** 如果未居中，標記為錯誤
- **AND** 提示「標題應該居中對齊」

#### Scenario: 標題字體檢查
- **WHEN** 檢測到標題
- **THEN** 檢查是否使用了推薦字號
- **AND** 如果字號過小或過大，提供警告
- **AND** 建議使用 16-18pt 字號

### Requirement: 段落縮進檢查
應用 SHALL 檢測正文段落的首行縮進問題。

#### Scenario: 首行縮進檢查
- **WHEN** 檢測到正文段落
- **THEN** 檢查段落首行是否縮進
- **AND** 如果未縮進，標記為錯誤
- **AND** 提示「段落首行應縮進 2 個字符」

#### Scenario: 過度縮進檢查
- **WHEN** 檢測到段落首行縮進
- **THEN** 檢查縮進是否過多（超過 4 個字符）
- **AND** 如果過多，提供警告
- **AND** 建議使用標準 2 字符縮進

### Requirement: 引用標註檢查
應用 SHALL 檢測引用是否正確標註來源。

#### Scenario: 引用格式檢查
- **WHEN** 檢測到引號或引用標記
- **THEN** 檢查引用後是否有來源標註
- **AND** 如果缺少標註，標記為錯誤
- **AND** 提示「引用需要標註來源」

#### Scenario: 引用來源格式
- **WHEN** 檢測到引用標註
- **THEN** 檢查標註格式是否規範
- **AND** 驗證是否包含作者、年份等信息
- **AND** 如果格式不規範，提供修正建議

### Requirement: 參考文獻格式檢查
應用 SHALL 檢測參考文獻列表的格式問題。

#### Scenario: 參考文獻標題檢查
- **WHEN** 檢測到「參考文獻」標題
- **THEN** 檢查標題格式是否正確
- **AND** 檢查是否使用了正確的樣式
- **AND** 提示格式要求

#### Scenario: 文獻條目格式檢查
- **WHEN** 檢測到參考文獻條目
- **THEN** 檢查條目格式（作者、標題、出版信息）
- **AND** 驗證是否符合選定的引用格式（APA/MLA）
- **AND** 標記格式錯誤

#### Scenario: 文獻排序檢查
- **WHEN** 檢測到多個參考文獻條目
- **THEN** 檢查條目是否按字母順序排列
- **AND** 如果順序錯誤，提供警告
- **AND** 建議正確的排序方式

### Requirement: 檢查結果展示
應用 SHALL 清晰展示格式檢查的結果，包括錯誤位置和類型。

#### Scenario: 錯誤列表顯示
- **WHEN** 格式檢查完成
- **THEN** 在側邊欄顯示錯誤列表
- **AND** 每個錯誤顯示：
  - 錯誤類型圖標
  - 錯誤描述
  - 錯誤位置（行號）
- **AND** 錯誤數量統計（X 個錯誤，Y 個警告）

#### Scenario: 錯誤高亮標記
- **WHEN** 檢查結果顯示
- **THEN** 在文本中標記所有錯誤位置
- **AND** 錯誤用紅色下劃線標記
- **AND** 警告用黃色下劃線標記

#### Scenario: 點擊錯誤跳轉
- **WHEN** 用戶點擊錯誤列表中的某個錯誤
- **THEN** 自動滾動到文本中對應位置
- **AND** 高亮顯示錯誤區域
- **AND** 顯示詳細錯誤說明

### Requirement: 修正建議面板
應用 SHALL 為每個格式錯誤提供具體的修正建議。

#### Scenario: 顯示修正建議
- **WHEN** 用戶選中某個錯誤
- **THEN** 在右側顯示修正建議面板
- **AND** 包含：
  - 錯誤說明
  - 正確格式示例
  - 修正步驟
- **AND** 提供「查看範例」鏈接

#### Scenario: 一鍵修正
- **WHEN** 修正建議面板顯示
- **THEN** 提供「自動修正」按鈕（如果支持）
- **AND** 點擊按鈕自動修正文本
- **AND** 更新檢查結果

### Requirement: 格式規則配置
應用 SHALL 從 JSON 文件加載格式檢查規則，支持靈活配置。

#### Scenario: 加載檢查規則
- **WHEN** 應用初始化
- **THEN** 從 `assets/data/format-rules.json` 加載規則
- **AND** 解析規則為可執行的檢查邏輯
- **AND** 緩存規則到內存

#### Scenario: 規則數據結構
- **WHEN** 規則被解析
- **THEN** 每條規則包含：
  - id: 規則標識符
  - category: 規則分類
  - pattern: 檢測模式（正則表達式）
  - severity: 嚴重程度（error/warning）
  - message: 錯誤提示信息
  - suggestion: 修正建議

