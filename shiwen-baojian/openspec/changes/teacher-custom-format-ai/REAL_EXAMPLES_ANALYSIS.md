# 真實教學案例分析 - AI Prompt 優化指南

## 📚 案例來源

基於 ISF 弘立書院真實教學任務（`docs/老師任務描述例子/`）

---

## 🎯 核心發現

### 1. 任務類型多樣化（從極簡到複雜）

| 任務 | 字數 | 段落 | 結構類型 | 適合模式 |
|------|------|------|---------|---------|
| 春江花月夜結構分析 | 400-600 | 2 段 | 片段分析 | 模式 C |
| 鶯鶯傳人物短寫 | 400+ | 3 段 | 固定結構 | 模式 C |
| 詞自選題目小論文 | 700+ | 5 段 | 完整論文 | 模式 B |
| 九年級小說比較 | 1000-1800 | 5 段 | 比較分析 | 模式 C |
| 九年級詩歌論文 | 1000-2000 | 開放 | 開放選題 | 模式 C |

**關鍵洞察**：
- ✅ 不是所有任務都需要「引言-正文-結論」
- ✅ 短寫練習（400-600 字）很常見
- ✅ 模式 C（完全自定義）非常重要！

---

### 2. 老師描述的語言模式

#### 模式 1：段落序號描述（最常見）

**原文**：
```
第一段：引入，解釋關鍵詞，介紹分論點
第二段：分論點一，引用原文，分析，總結
第三段：分論點二，引用原文，分析，總結
第四段：結論
```

**AI 需要識別**：
- 「第X段」→ 段落順序
- 「引入、解釋、介紹」→ 必需元素
- 「引用、分析、總結」→ 檢查點

**轉換為 JSON**：
```json
{
  "structure": {
    "required_sections": [
      {"id": "para_1", "name": "引入段", "order": 1},
      {"id": "para_2", "name": "分論點一", "order": 2},
      {"id": "para_3", "name": "分論點二", "order": 3},
      {"id": "para_4", "name": "結論段", "order": 4}
    ]
  },
  "paragraph_types": {
    "intro": {
      "required_elements": [
        {"name": "關鍵詞解釋", "required": true},
        {"name": "分論點介紹", "required": true}
      ]
    },
    "body": {
      "required_elements": [
        {"name": "原文引用", "required": true},
        {"name": "分析", "required": true},
        {"name": "總結", "required": true}
      ]
    }
  }
}
```

---

#### 模式 2：選擇性要求

**原文**：
```
從以下角度選擇一個：
• 意象
• 結構
• 象徵
...（15 個選項）

從以下範圍選擇一個：
• 《詩經》
• 魏晉詩
• 唐詩
```

**AI 需要識別**：
- 這是「選擇其一」，不是「全部必需」
- 學生有選擇權

**轉換為 JSON**：
```json
{
  "content_requirements": [
    {
      "type": "optional_selection",
      "description": "學生自選分析角度和詩歌範圍",
      "selection_options": {
        "analysis_angle": ["意象", "結構", "象徵", "對比", "感官描寫"...],
        "poem_range": ["《詩經》", "魏晉詩", "唐詩"]
      },
      "required_count": 1,
      "feedback_strategy": "AI 反饋時先識別學生選擇，不強制特定角度"
    }
  ]
}
```

**AI 反饋策略**：
```
✅ 應該檢查：
- 論證是否圍繞選定角度展開？
- 引用是否來自選定範圍？

❌ 不應該檢查：
- 「為什麼不選意象分析？」← 不強制
- 「應該從象徵角度思考」← 不建議
```

---

#### 模式 3：比較研習（重複結構）

**原文**：
```
2. 女性人物形象比較
   • 相似點
   • 不同點
   • 背後原因
   
3. 寫作特色比較
   • 相似點
   • 不同點
   • 背後原因
   
4. 主題比較
   • 相似點
   • 不同點
   • 背後原因
```

**AI 需要識別**：
- 這是重複的「三段論」模式
- 應用到三個維度

**轉換為 JSON**：
```json
{
  "paragraph_types": {
    "comparison": {
      "name": "比較分析段",
      "required_elements": [
        {"name": "相似點", "required": true},
        {"name": "不同點", "required": true},
        {"name": "背後原因", "required": true}
      ],
      "analysis_dimensions": [
        {
          "id": "comparison_depth",
          "name": "比較分析深度",
          "checks": [
            "是否指出了相似點？",
            "是否指出了不同點？",
            "是否分析了背後原因？",
            "是否結合時代或作者背景？"
          ]
        }
      ]
    }
  },
  "structure": {
    "required_sections": [
      {"id": "intro", "name": "引入", "order": 1},
      {"id": "compare_character", "name": "人物比較", "order": 2, "type": "comparison"},
      {"id": "compare_style", "name": "手法比較", "order": 3, "type": "comparison"},
      {"id": "compare_theme", "name": "主題比較", "order": 4, "type": "comparison"},
      {"id": "conclusion", "name": "結論", "order": 5}
    ]
  }
}
```

---

### 3. 評分標準引用模式

**原文常見格式**：
```
評分標準：
A: 分析
B: 組織
D: 運用語言
```

或：
```
評分標準：
標準 A: 分析
標準 B: 組織
標準 D: 運用語言
```

**AI 需要**：
- 識別 A/B/C/D 代碼
- 關聯到系統內置的 IB MYP 評分標準
- 不要求老師重複輸入評分細則

**轉換為 JSON**：
```json
{
  "grading_rubric": {
    "type": "ib-myp-chinese-literature",
    "active_criteria": ["A", "B", "D"],
    "excluded_criteria": ["C"]
  }
}
```

---

## 🚨 AI 職責邊界實例

基於真實案例，明確 AI 應該和不應該做什麼：

### ✅ 客觀檢查（AI 應該做）

**案例 1：結構完整性**
```
老師要求：「三段格式：開頭、分析、結尾」
AI 檢查：
  ✅ 是否有三段？
  ✅ 每段是否包含必需元素？
  ❌ 不評判「開頭是否吸引人」
```

**案例 2：引用完整性**
```
老師要求：「兩到三處原文引用」
AI 檢查：
  ✅ 引用數量是否 2-3 處？
  ✅ 是否有引號標註？
  ❌ 不評判「引用是否恰當」（主觀）
```

**案例 3：分析充分性**
```
老師要求：「細讀分析」
AI 檢查：
  ✅ 分析長度是否 > 引用長度？
  ✅ 是否緊扣文本字詞句？
  ✅ 是否避免空泛議論（「這說明」）？
  ❌ 不評判「分析是否深刻」（主觀）
```

---

### ❌ 主觀判斷（AI 不應該做）

**案例 1：觀點質量**
```
學生寫：「林黛玉的性格孤傲清高」
AI 不能說：
  ❌ 「這個理解不對」
  ❌ 「應該說她性格敏感脆弱」
  
AI 可以說：
  ✅ 「論點已明確提出」
  ✅ 「建議結合原文引用支持此觀點」
```

**案例 2：思考方向**
```
老師要求：「延伸思考」
AI 不能說：
  ❌ 「你可以聯繫中國文學傳統...」
  ❌ 「建議從女性主義角度思考」
  
AI 可以說：
  ✅ 「結論包含了延伸思考」
  ✅ 「建議提升到更大的文化或歷史背景」（提示方向，不指定）
```

**案例 3：文學理解**
```
學生寫：「瀟湘館象徵林黛玉的悲劇命運」
AI 不能說：
  ❌ 「這個象徵理解不夠準確」
  ❌ 「應該從...角度理解」
  
AI 可以說：
  ✅ 「已提出象徵意義的闡釋」
  ✅ 「建議結合原文細節支持此理解」
```

---

## 📋 AI Prompt 優化建議

### 1. 加入真實案例到 Few-shot Examples

**必須包含的案例類型**：
- ✅ 極簡任務（兩段話，400-600 字）
- ✅ 三段固定結構（短寫，400+ 字）
- ✅ 開放選題（自選角度/範圍）
- ✅ 比較研習（相似-不同-原因）
- ✅ 完整論文（基於系統格式增量）

→ 覆蓋從簡單到複雜的所有場景

---

### 2. 強調「忠實於老師要求」

**反例**：
```
老師要求：「兩段話，不需要開頭結尾」
AI 過度添加：
  ❌ 「建議添加引言和結論，使結構更完整」
  ❌ 自動生成引言和結論的檢查點
```

**正確做法**：
```
老師要求：「兩段話，不需要開頭結尾」
AI 忠實執行：
  ✅ 只生成兩個分析段的格式
  ✅ 不添加引言和結論
  ✅ 理解總結：「學生只需寫兩段分析，無需完整結構」
```

---

### 3. 處理字數表述的多樣性

**老師的表述方式**：
```
• 「700 字以上」→ { "min": 700 }
• 「400-600 字」→ { "min": 400, "max": 600 }
• 「1000-2000 字之間」→ { "min": 1000, "max": 2000 }
• 「至少 400 字」→ { "min": 400 }
• 「1000 字左右」→ { "min": 900, "max": 1100 }（±10%）
```

---

### 4. 識別評分標準引用

**常見表述**：
```
• 「評分標準：A 分析、B 組織、D 語言」
• 「標準A: 分析 標準B: 組織」
• 「評分標準（參考後面的細項）A 分析 B 組織 D 運用語言」
```

**AI 應該**：
- 提取標準代碼：["A", "B", "D"]
- 關聯到 `ib-myp-chinese-literature`
- 不要求老師輸入完整評分細則

---

## 🔧 軟件設計需要注意的事項

### 1. 系統格式的靈活性

**MVP 階段**：
- 只有 1 個系統格式（紅樓夢論文格式）
- 適用於標準的大論文

**但要預留擴展接口**：
```javascript
// 系統格式列表（未來可擴展）
const SYSTEM_FORMATS = [
  {
    id: 'honglou-essay',
    name: '紅樓夢論文格式',
    type: '完整學術論文',
    word_count: '1500-2500',
    suitable_for: '文學分析大論文'
  },
  // 未來添加：
  // { id: 'short-write-3para', name: '三段式短寫', ... },
  // { id: 'comparison-analysis', name: '比較分析格式', ... },
  // { id: 'open-topic', name: '開放選題格式', ... }
];
```

---

### 2. 格式預覽功能的重要性

**問題**：老師怎麼知道「紅樓夢論文格式」的內容？

**解決方案**：
```
格式卡片上：
  [👁️ 預覽詳情] 按鈕
    ↓
在 Quill 中顯示人類可讀版本
    ↓
老師可以：
  • 閱讀完整要求
  • 複製分享給學生
  • 決定是否使用或修改
```

**必需實現**：
- `formatJSONToHumanReadable()` 函數
- 格式化輸出（標題、列表、粗體）
- 可複製到剪貼板

---

### 3. 選擇性要求的 AI 反饋策略

**場景**：開放選題任務
```
學生可以從 15 個角度選一個
AI 反饋時怎麼辦？
```

**策略 1：AI 自動識別**（推薦）
```
AI Prompt：
「這是開放選題任務。請先識別學生選了哪個角度，
 然後檢查論證是否圍繞該角度展開。
 不要強制要求特定角度。」
```

**策略 2：寬鬆檢查**
```
只檢查通用要求：
  ✅ 論點是否明確？
  ✅ 是否引用原文？
  ✅ 分析是否具體？
  
不檢查具體角度（因為是開放的）
```

**實現方式**：
```json
{
  "content_requirements": [
    {
      "type": "optional_selection",
      "feedback_strategy": "identify_then_check",  // 識別後檢查
      // 或
      "feedback_strategy": "generic_check_only"   // 只檢查通用要求
    }
  ]
}
```

---

### 4. 比較研習的模式識別

**特徵識別**：
```
如果老師要求包含：
  • 「相似點」「不同點」「背後原因」
  • 重複應用到多個維度
  
→ 識別為「比較分析」格式
```

**未來系統格式**：
```json
{
  "id": "comparison-analysis",
  "name": "比較分析格式",
  "comparison_pattern": {
    "structure": ["相似點", "不同點", "背後原因"],
    "applies_to": ["dimension_1", "dimension_2", "dimension_3"]
  }
}
```

---

### 5. 評分標準的數據結構

**基於真實文檔**：`「中國古典文學」評分標準.md`

**JSON Schema**：
```json
{
  "id": "ib-myp-chinese-literature",
  "name": "IB MYP 中國古典文學評分標準",
  "criteria": {
    "A": {
      "name": "分析",
      "max_score": 8,
      "levels": {
        "7-8": {
          "description": "敏銳地分析文本內容、語言、結構、技巧...",
          "indicators": [
            "運用一系列例子和透徹的解釋",
            "運用了準確的術語",
            "廣泛連系各種體裁和文本"
          ]
        },
        "5-6": {...},
        "3-4": {...},
        "1-2": {...}
      }
    },
    "B": {
      "name": "組織",
      "max_score": 8,
      ...
    },
    "C": {...},
    "D": {...}
  }
}
```

**任務引用時**：
```json
{
  "assignment": {
    "grading_rubric": {
      "type": "ib-myp-chinese-literature",
      "active_criteria": ["A", "B", "D"]  // 只用這三個
    }
  }
}
```

---

## ✅ 實施建議

### MVP 階段聚焦點

1. **系統格式**：只做紅樓夢論文格式（已有）
2. **AI 能力**：重點是「理解老師要求 → 生成可用格式」
3. **真實測試**：用真實教學案例測試 AI Prompt
4. **邊界清晰**：確保 AI 只做客觀檢查

### 測試用例（必須通過）

使用真實案例進行測試：
- [ ] 春江花月夜結構分析（極簡）
- [ ] 鶯鶯傳人物短寫（三段式）
- [ ] 詞自選題目小論文（五段 + 自選）
- [ ] 詩歌論文自選角度（開放選題）
- [ ] 紅樓夢 + 字數要求（增量模式）

成功標準：
- AI 理解準確率 > 85%
- 老師滿意度 > 4/5
- 無主觀判斷反饋

---

**最後更新**：2025-10-19  
**狀態**：設計定稿，準備開發

