<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>內聯批註視覺演示 - 時文寶鑑</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: #f5f5f5;
            padding: 20px;
            line-height: 1.8;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 24px;
            margin-bottom: 30px;
            color: #333;
            text-align: center;
        }

        .essay-content {
            font-size: 16px;
            color: #333;
        }

        .paragraph {
            margin-bottom: 20px;
        }

        /* 高亮文本樣式 */
        .highlighted {
            background: #fff3cd;
            padding: 2px 0;
            border-radius: 2px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .highlighted:hover {
            background: #ffe69c;
        }

        /* 批註容器 */
        .annotation-block {
            margin: 16px 0 24px 0;
            border-left: 4px solid #4a90e2;
            background: #f8f9fa;
            border-radius: 4px;
            padding: 16px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 批註頭部 */
        .annotation-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-size: 14px;
            color: #666;
        }

        .annotation-author {
            font-weight: 600;
            color: #333;
        }

        .annotation-time {
            font-size: 12px;
            color: #999;
        }

        /* 批註內容 */
        .annotation-content {
            font-size: 15px;
            color: #444;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        /* 評論串區域 */
        .comments-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e0e0e0;
        }

        .comment-toggle {
            font-size: 13px;
            color: #4a90e2;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 8px;
            user-select: none;
        }

        .comment-toggle:hover {
            color: #357abd;
        }

        .comments-list {
            margin-top: 8px;
        }

        .comment-item {
            padding: 8px 0 8px 16px;
            border-left: 2px solid #e0e0e0;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .comment-item:last-child {
            margin-bottom: 0;
        }

        .comment-author {
            font-weight: 600;
            color: #555;
            margin-right: 8px;
        }

        .comment-text {
            color: #666;
            line-height: 1.5;
        }

        .comment-time {
            font-size: 11px;
            color: #999;
            margin-top: 4px;
        }

        /* 回覆按鈕 */
        .reply-button {
            display: inline-block;
            padding: 6px 12px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .reply-button:hover {
            background: #f8f9fa;
            border-color: #4a90e2;
            color: #4a90e2;
        }

        /* 回覆輸入框 */
        .reply-input-area {
            margin-top: 12px;
            display: none;
        }

        .reply-input-area.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .reply-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            min-height: 60px;
        }

        .reply-input:focus {
            outline: none;
            border-color: #4a90e2;
        }

        .reply-actions {
            margin-top: 8px;
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 16px;
            border: none;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #4a90e2;
            color: white;
        }

        .btn-primary:hover {
            background: #357abd;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #666;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        /* 批註類型標籤 */
        .annotation-type {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }

        .type-error {
            background: #fee;
            color: #c33;
        }

        .type-warning {
            background: #ffc;
            color: #c93;
        }

        .type-success {
            background: #efe;
            color: #3c3;
        }

        /* 已解決狀態 */
        .annotation-block.resolved {
            opacity: 0.7;
            border-left-color: #28a745;
        }

        .resolved-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            background: #d4edda;
            color: #155724;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
        }

        /* 示例說明 */
        .demo-note {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 16px;
            margin-bottom: 30px;
            border-radius: 4px;
        }

        .demo-note h3 {
            font-size: 16px;
            color: #1976d2;
            margin-bottom: 8px;
        }

        .demo-note p {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }

        /* 切換按鈕 */
        .toggle-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .toggle-btn {
            padding: 8px 16px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .toggle-btn.active {
            background: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .toggle-btn:hover {
            border-color: #4a90e2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📝 內聯批註視覺演示</h1>

        <div class="demo-note">
            <h3>💡 演示說明</h3>
            <p>這是內聯插入式批註的視覺效果演示。批註直接插入在正文對應段落下方，學生無需點擊即可看到所有批註內容。您可以點擊下方按鈕切換不同的評論串展示模式。</p>
        </div>

        <div class="toggle-buttons">
            <button class="toggle-btn active" onclick="setMode('smart')">智能摺疊模式</button>
            <button class="toggle-btn" onclick="setMode('expanded')">全部展開模式</button>
            <button class="toggle-btn" onclick="setMode('collapsed')">摺疊評論串模式</button>
        </div>

        <div class="essay-content">
            <div class="paragraph">
                <p>人工智能技術的快速發展正在深刻改變我們的生活方式。從智能手機的語音助手到自動駕駛汽車，<span class="highlighted">AI 技術已經滲透到日常生活的方方面面</span>。然而，這種技術進步也帶來了一些值得關注的問題。</p>
            </div>

            <!-- 批註 1：需要修改 -->
            <div class="annotation-block" data-annotation-id="1">
                <div class="annotation-header">
                    <span class="annotation-type type-error">🔴 需要修改</span>
                    <span class="annotation-author">👨‍🏫 張老師</span>
                    <span class="annotation-time">2 小時前</span>
                </div>
                <div class="annotation-content">
                    這句話過於籠統。請具體說明 AI 技術在哪些方面滲透到日常生活？建議列舉 2-3 個具體例子，如智能家居、醫療診斷、教育輔助等。
                </div>
                <div class="comments-section">
                    <div class="comment-toggle" onclick="toggleComments(1)">
                        💬 <span id="toggle-text-1">展開 2 條回覆</span> <span id="toggle-icon-1">▼</span>
                    </div>
                    <div class="comments-list" id="comments-1" style="display: none;">
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🎓 小明</span>
                                <span class="comment-text">好的老師，我會補充智能家居（如智能音箱、掃地機器人）和醫療診斷（如 AI 輔助影像診斷）的例子。</span>
                            </div>
                            <div class="comment-time">1 小時前</div>
                        </div>
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🏫 張老師</span>
                                <span class="comment-text">很好！這樣例子就具體多了。記得在修改時保持段落的連貫性。</span>
                            </div>
                            <div class="comment-time">30 分鐘前</div>
                        </div>
                    </div>
                    <button class="reply-button" onclick="toggleReply(1)">回覆此批註</button>
                    <div class="reply-input-area" id="reply-area-1">
                        <textarea class="reply-input" placeholder="輸入您的回覆..."></textarea>
                        <div class="reply-actions">
                            <button class="btn btn-primary">發送</button>
                            <button class="btn btn-secondary" onclick="toggleReply(1)">取消</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="paragraph">
                <p>首先，<span class="highlighted">隱私保護成為一個重要議題</span>。AI 系統需要大量數據來訓練和優化，這些數據往往包含用戶的個人信息。如何在利用數據的同時保護用戶隱私，是科技公司和政府監管部門需要共同面對的挑戰。</p>
            </div>

            <!-- 批註 2：建議改進 -->
            <div class="annotation-block" data-annotation-id="2">
                <div class="annotation-header">
                    <span class="annotation-type type-warning">🟡 建議改進</span>
                    <span class="annotation-author">👨‍🏫 張老師</span>
                    <span class="annotation-time">2 小時前</span>
                </div>
                <div class="annotation-content">
                    這段論述很好，但可以更深入。建議補充一個具體案例，例如某個知名科技公司的隱私洩露事件，或者歐盟的 GDPR 法規如何應對這個問題。這樣會讓論證更有說服力。
                </div>
                <div class="comments-section">
                    <div class="comment-toggle" onclick="toggleComments(2)">
                        💬 <span id="toggle-text-2">展開 1 條回覆</span> <span id="toggle-icon-2">▼</span>
                    </div>
                    <div class="comments-list" id="comments-2" style="display: none;">
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🎓 小明</span>
                                <span class="comment-text">明白了！我會補充 Facebook 的數據洩露事件作為例子，並簡要介紹 GDPR 的相關規定。</span>
                            </div>
                            <div class="comment-time">1 小時前</div>
                        </div>
                    </div>
                    <button class="reply-button" onclick="toggleReply(2)">回覆此批註</button>
                    <div class="reply-input-area" id="reply-area-2">
                        <textarea class="reply-input" placeholder="輸入您的回覆..."></textarea>
                        <div class="reply-actions">
                            <button class="btn btn-primary">發送</button>
                            <button class="btn btn-secondary" onclick="toggleReply(2)">取消</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="paragraph">
                <p>其次，<span class="highlighted">就業市場的變化也值得關注</span>。隨著自動化和智能化程度的提高，許多傳統工作崗位面臨被取代的風險。根據研究報告，未來十年內，約有 30% 的工作可能會被 AI 和機器人替代。這要求我們重新思考教育體系和職業培訓，幫助勞動者適應新的就業環境。</p>
            </div>

            <!-- 批註 3：做得很好（已解決）-->
            <div class="annotation-block resolved" data-annotation-id="3">
                <div class="annotation-header">
                    <span class="annotation-type type-success">🟢 做得很好</span>
                    <span class="resolved-badge">✓ 已解決</span>
                    <span class="annotation-author">👨‍🏫 張老師</span>
                    <span class="annotation-time">3 小時前</span>
                </div>
                <div class="annotation-content">
                    這段寫得非常好！引用了具體的數據（30%），並且提出了建設性的解決方案（重新思考教育體系）。論證邏輯清晰，值得保持。
                </div>
                <div class="comments-section">
                    <div class="comment-toggle" onclick="toggleComments(3)">
                        💬 <span id="toggle-text-3">展開 1 條回覆</span> <span id="toggle-icon-3">▼</span>
                    </div>
                    <div class="comments-list" id="comments-3" style="display: none;">
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🎓 小明</span>
                                <span class="comment-text">謝謝老師的肯定！我會繼續保持這種寫作方式。</span>
                            </div>
                            <div class="comment-time">2 小時前</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="paragraph">
                <p>最後，AI 技術的發展還涉及倫理問題。例如，自動駕駛汽車在面臨不可避免的事故時應該如何做出決策？AI 系統是否應該具有道德判斷能力？這些問題沒有簡單的答案，需要社會各界共同探討和制定相應的規範。</p>
            </div>

            <div class="paragraph">
                <p>總之，人工智能技術的發展是一把雙刃劍。我們既要擁抱技術進步帶來的便利，也要警惕其可能帶來的負面影響。只有通過審慎的規劃和有效的監管，才能確保 AI 技術真正造福人類社會。</p>
            </div>

            <!-- 批註 4：需要修改（多條評論）-->
            <div class="annotation-block" data-annotation-id="4">
                <div class="annotation-header">
                    <span class="annotation-type type-error">🔴 需要修改</span>
                    <span class="annotation-author">👨‍🏫 張老師</span>
                    <span class="annotation-time">2 小時前</span>
                </div>
                <div class="annotation-content">
                    結論段落需要加強。「雙刃劍」這個比喻已經過於常見，建議用更有新意的表達方式。另外，可以在結論中呼應開頭，形成首尾呼應的結構。
                </div>
                <div class="comments-section">
                    <div class="comment-toggle" onclick="toggleComments(4)">
                        💬 <span id="toggle-text-4">展開 4 條回覆</span> <span id="toggle-icon-4">▼</span>
                    </div>
                    <div class="comments-list" id="comments-4" style="display: none;">
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🎓 小明</span>
                                <span class="comment-text">老師，我可以用「機遇與挑戰並存」來替代「雙刃劍」嗎？</span>
                            </div>
                            <div class="comment-time">1.5 小時前</div>
                        </div>
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🏫 張老師</span>
                                <span class="comment-text">這個表達也比較常見。試試用更具體的描述，比如「AI 技術如同一扇通往未來的大門，既充滿希望，也需要謹慎前行」。</span>
                            </div>
                            <div class="comment-time">1 小時前</div>
                        </div>
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🎓 小明</span>
                                <span class="comment-text">好的！我還想在結論中提到開頭的「日常生活」，形成呼應。</span>
                            </div>
                            <div class="comment-time">50 分鐘前</div>
                        </div>
                        <div class="comment-item">
                            <div>
                                <span class="comment-author">👨‍🏫 張老師</span>
                                <span class="comment-text">非常好的想法！這樣結構就更完整了。期待看到你的修改版本。</span>
                            </div>
                            <div class="comment-time">30 分鐘前</div>
                        </div>
                    </div>
                    <button class="reply-button" onclick="toggleReply(4)">回覆此批註</button>
                    <div class="reply-input-area" id="reply-area-4">
                        <textarea class="reply-input" placeholder="輸入您的回覆..."></textarea>
                        <div class="reply-actions">
                            <button class="btn btn-primary">發送</button>
                            <button class="btn btn-secondary" onclick="toggleReply(4)">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 切換評論串顯示
        function toggleComments(id) {
            const commentsList = document.getElementById(`comments-${id}`);
            const toggleText = document.getElementById(`toggle-text-${id}`);
            const toggleIcon = document.getElementById(`toggle-icon-${id}`);
            
            if (commentsList.style.display === 'none') {
                commentsList.style.display = 'block';
                toggleText.textContent = '收起回覆';
                toggleIcon.textContent = '▲';
            } else {
                commentsList.style.display = 'none';
                const commentCount = commentsList.querySelectorAll('.comment-item').length;
                toggleText.textContent = `展開 ${commentCount} 條回覆`;
                toggleIcon.textContent = '▼';
            }
        }

        // 切換回覆輸入框
        function toggleReply(id) {
            const replyArea = document.getElementById(`reply-area-${id}`);
            replyArea.classList.toggle('active');
        }

        // 切換顯示模式
        function setMode(mode) {
            // 更新按鈕狀態
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // 根據模式設置評論串顯示
            const allComments = document.querySelectorAll('.comments-list');
            const allToggles = document.querySelectorAll('.comment-toggle');
            
            if (mode === 'expanded') {
                // 全部展開模式
                allComments.forEach((comments, index) => {
                    comments.style.display = 'block';
                    const id = index + 1;
                    document.getElementById(`toggle-text-${id}`).textContent = '收起回覆';
                    document.getElementById(`toggle-icon-${id}`).textContent = '▲';
                });
            } else if (mode === 'collapsed') {
                // 摺疊評論串模式
                allComments.forEach((comments, index) => {
                    comments.style.display = 'none';
                    const id = index + 1;
                    const commentCount = comments.querySelectorAll('.comment-item').length;
                    document.getElementById(`toggle-text-${id}`).textContent = `展開 ${commentCount} 條回覆`;
                    document.getElementById(`toggle-icon-${id}`).textContent = '▼';
                });
            } else if (mode === 'smart') {
                // 智能摺疊模式（1-2條展開，3+條摺疊）
                allComments.forEach((comments, index) => {
                    const id = index + 1;
                    const commentCount = comments.querySelectorAll('.comment-item').length;
                    
                    if (commentCount <= 2) {
                        comments.style.display = 'block';
                        document.getElementById(`toggle-text-${id}`).textContent = '收起回覆';
                        document.getElementById(`toggle-icon-${id}`).textContent = '▲';
                    } else {
                        comments.style.display = 'none';
                        document.getElementById(`toggle-text-${id}`).textContent = `展開 ${commentCount} 條回覆`;
                        document.getElementById(`toggle-icon-${id}`).textContent = '▼';
                    }
                });
            }
        }

        // 頁面加載時設置為智能摺疊模式
        window.addEventListener('DOMContentLoaded', () => {
            setMode('smart');
        });
    </script>
</body>
</html>

