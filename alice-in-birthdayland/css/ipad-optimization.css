/* ========================================
   Alice in Birthdayland - iPad 響應式優化
   ======================================== */

/* iPad 專用樣式 */
@media (min-width: 768px) and (max-width: 1024px) {
    
    /* 主頁地圖優化 */
    .birthdayland-map {
        padding: 20px;
    }
    
    .birthday-banner {
        padding: 30px 20px;
    }
    
    .magical-title {
        font-size: 3.5rem;
        line-height: 1.2;
    }
    
    .subtitle {
        font-size: 1.5rem;
    }
    
    /* 地圖網格優化 */
    .grid-2x2 {
        max-width: 800px;
        gap: 40px;
        padding: 30px;
    }
    
    .location-row {
        gap: 60px;
    }
    
    .location {
        width: 200px;
        height: 240px;
    }
    
    .location-name {
        font-size: 1.1rem;
    }
    
    .location-subtitle {
        font-size: 0.9rem;
    }
    
    /* 拼圖遊戲 iPad 優化 */
    .puzzle-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .puzzle-header {
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .puzzle-title {
        font-size: 2.5rem;
    }
    
    .puzzle-subtitle {
        font-size: 1.2rem;
    }
    
    /* 拼圖區域 */
    .puzzle-area {
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 30px;
        align-items: start;
    }
    
    .puzzle-board {
        width: 100%;
        max-width: 500px;
        aspect-ratio: 1;
    }
    
    .puzzle-pieces {
        max-height: 500px;
        overflow-y: auto;
    }
    
    .piece-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
    }
    
    .puzzle-piece {
        width: 60px;
        height: 60px;
        font-size: 0.8rem;
    }
    
    /* 控制面板 */
    .puzzle-controls {
        padding: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        backdrop-filter: blur(10px);
    }
    
    .control-group {
        margin-bottom: 20px;
    }
    
    .control-label {
        font-size: 1rem;
        margin-bottom: 10px;
    }
    
    .btn {
        padding: 12px 20px;
        font-size: 1rem;
    }
    
    /* 蛋糕遊戲 iPad 優化 */
    .studio-workspace {
        grid-template-columns: 280px 1fr 220px;
        gap: 25px;
    }
    
    .tools-panel {
        padding: 20px;
        max-height: calc(100vh - 150px);
    }
    
    .cake-canvas {
        width: 350px;
        height: 350px;
    }
    
    .cake-base.round {
        width: 180px;
        height: 180px;
    }
    
    .tips-panel {
        padding: 20px;
        max-height: calc(100vh - 150px);
    }
    
    /* 工具選項優化 */
    .cake-base-options {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .cake-option {
        padding: 12px 8px;
        font-size: 0.85rem;
    }
    
    .option-icon {
        font-size: 1.5rem;
        margin-bottom: 6px;
    }
    
    .frosting-colors {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .color-btn {
        padding: 10px;
        font-size: 0.85rem;
    }
    
    .color-preview {
        width: 18px;
        height: 18px;
    }
    
    /* 裝飾元素 */
    .deco-item {
        width: 45px;
        height: 45px;
        font-size: 1.8rem;
        line-height: 45px;
        margin: 4px;
    }
    
    .deco-category h4 {
        font-size: 0.9rem;
        margin-bottom: 8px;
    }
    
    /* 文字輸入 */
    .text-select, .text-input {
        padding: 8px;
        font-size: 0.9rem;
    }
    
    .btn {
        padding: 10px 16px;
        font-size: 0.9rem;
    }
}

/* iPad 橫向模式 */
@media (min-width: 1024px) and (max-width: 1366px) and (orientation: landscape) {
    
    /* 主頁地圖橫向優化 */
    .birthdayland-map {
        padding: 15px;
    }
    
    .birthday-banner {
        padding: 20px 15px;
    }
    
    .magical-title {
        font-size: 3rem;
    }
    
    .subtitle {
        font-size: 1.3rem;
    }
    
    /* 地圖網格橫向佈局 */
    .grid-2x2 {
        max-width: 1000px;
        gap: 30px;
        padding: 20px;
    }
    
    .location-row {
        gap: 50px;
    }
    
    .location {
        width: 180px;
        height: 220px;
    }
    
    /* 拼圖遊戲橫向優化 */
    .puzzle-area {
        grid-template-columns: 1fr 250px;
        gap: 25px;
    }
    
    .puzzle-board {
        max-width: 450px;
    }
    
    .puzzle-pieces {
        max-height: 400px;
    }
    
    .piece-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
    }
    
    .puzzle-piece {
        width: 55px;
        height: 55px;
        font-size: 0.75rem;
    }
    
    /* 蛋糕遊戲橫向優化 */
    .studio-workspace {
        grid-template-columns: 250px 1fr 200px;
        gap: 20px;
    }
    
    .cake-canvas {
        width: 320px;
        height: 320px;
    }
    
    .cake-base.round {
        width: 160px;
        height: 160px;
    }
}

/* iPad 豎向模式 */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
    
    /* 主頁地圖豎向優化 */
    .birthdayland-map {
        padding: 25px;
    }
    
    .birthday-banner {
        padding: 40px 25px;
    }
    
    .magical-title {
        font-size: 4rem;
        line-height: 1.1;
    }
    
    .subtitle {
        font-size: 1.6rem;
    }
    
    /* 地圖網格豎向佈局 */
    .grid-2x2 {
        max-width: 700px;
        gap: 50px;
        padding: 40px;
    }
    
    .location-row {
        gap: 70px;
    }
    
    .location {
        width: 220px;
        height: 260px;
    }
    
    /* 拼圖遊戲豎向優化 */
    .puzzle-container {
        max-width: 800px;
        padding: 25px;
    }
    
    .puzzle-area {
        grid-template-columns: 1fr;
        gap: 25px;
    }
    
    .puzzle-board {
        max-width: 400px;
        margin: 0 auto;
    }
    
    .puzzle-pieces {
        max-height: 300px;
    }
    
    .piece-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
    }
    
    .puzzle-piece {
        width: 50px;
        height: 50px;
        font-size: 0.7rem;
    }
    
    /* 蛋糕遊戲豎向優化 */
    .studio-workspace {
        grid-template-columns: 1fr;
        gap: 25px;
    }
    
    .tools-panel, .tips-panel {
        max-height: none;
    }
    
    .cake-canvas {
        width: 300px;
        height: 300px;
    }
    
    .cake-base.round {
        width: 150px;
        height: 150px;
    }
}

/* iPad 觸摸優化 */
@media (min-width: 768px) and (max-width: 1024px) {
    
    /* 觸摸目標大小優化 */
    .btn, .cake-option, .color-btn, .deco-item {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* 觸摸反饋 */
    .btn:active, .cake-option:active, .color-btn:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }
    
    /* 拖拽優化 */
    .puzzle-piece {
        touch-action: none;
        user-select: none;
    }
    
    .decoration-item, .text-item {
        touch-action: none;
        user-select: none;
    }
    
    /* 滾動優化 */
    .tools-panel, .tips-panel, .puzzle-pieces {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
    }
    
    /* 防止縮放 */
    .puzzle-board, .cake-canvas {
        touch-action: manipulation;
    }
}

/* iPad Pro 優化 */
@media (min-width: 1024px) and (max-width: 1366px) {
    
    /* 更大的觸摸目標 */
    .btn {
        padding: 14px 24px;
        font-size: 1.1rem;
    }
    
    .puzzle-piece {
        width: 70px;
        height: 70px;
        font-size: 0.9rem;
    }
    
    .deco-item {
        width: 50px;
        height: 50px;
        font-size: 2rem;
        line-height: 50px;
    }
    
    /* 更大的畫布 */
    .puzzle-board {
        max-width: 600px;
    }
    
    .cake-canvas {
        width: 400px;
        height: 400px;
    }
    
    .cake-base.round {
        width: 200px;
        height: 200px;
    }
}

/* 高分辨率 iPad 優化 */
@media (-webkit-min-device-pixel-ratio: 2) and (min-width: 768px) {
    
    /* 更清晰的邊框 */
    .location, .puzzle-piece, .cake-option, .color-btn {
        border-width: 2px;
    }
    
    /* 更清晰的陰影 */
    .location, .puzzle-board, .cake-canvas {
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    /* 更清晰的文字 */
    .location-name, .puzzle-title, .studio-title {
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
    }
}

/* iPad 安全區域 */
@supports (padding: max(0px)) {
    .birthdayland-map {
        padding-left: max(20px, env(safe-area-inset-left));
        padding-right: max(20px, env(safe-area-inset-right));
    }
    
    .puzzle-container, .studio-container {
        padding-left: max(20px, env(safe-area-inset-left));
        padding-right: max(20px, env(safe-area-inset-right));
    }
}

/* 橫豎屏切換動畫 */
@media (min-width: 768px) and (max-width: 1024px) {
    .birthdayland-map, .puzzle-container, .studio-container {
        transition: all 0.3s ease;
    }
    
    /* 防止橫豎屏切換時的佈局跳動 */
    .grid-2x2, .puzzle-area, .studio-workspace {
        transition: grid-template-columns 0.3s ease;
    }
}

/* 性能優化 */
@media (min-width: 768px) and (max-width: 1024px) {
    
    /* 減少動畫複雜度 */
    .particle {
        animation-duration: 4s;
    }
    
    .location-glow {
        animation-duration: 3s;
    }
    
    /* 優化重繪 */
    .puzzle-piece, .decoration-item, .text-item {
        will-change: transform;
    }
    
    /* 減少陰影計算 */
    .location, .puzzle-board, .cake-canvas {
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
}
