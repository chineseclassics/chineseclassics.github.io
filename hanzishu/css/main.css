:root {
            /* 小學生活潑友善配色方案 */
            --primary: #FF6B9D;          /* 活潑粉紅色 */
            --secondary: #4DABF7;        /* 清新藍色 */
            --accent: #FFE66D;           /* 陽光黃色 */
            --background: #FFFDF7;       /* 溫暖乳白色 */
            --success: #51CF66;          /* 成功綠色 */
            --danger: #FF6B6B;           /* 友善紅色 */
            --warning: #FFB366;          /* 溫暖橙色 */
            --text: #2D3436;             /* 深灰色文字 */
            --light-text: #636E72;       /* 淡灰色 */
            --border-radius: 16px;       /* 更圓潤的邊角 */
            --ink-color: #2D3436;        /* 深灰色墨水 */
            --highlight-color: #FF7675;  /* 高亮粉色 */
            --border-color: #E3E8F0;     /* 柔和邊框色 */
            --panel-bg: #FFFFFF;         /* 純白面板背景 */
            
            /* 小學生友好的補充顏色 */
            --purple: #A29BFE;           /* 可愛紫色 */
            --mint: #81ECEC;             /* 薄荷綠色 */
            --coral: #FF7675;            /* 珊瑚色 */
            --lavender: #DDD6FE;         /* 薰衣草色 */
            --peach: #FDCB6E;            /* 桃子色 */
            --sky: #74B9FF;              /* 天空藍 */
            --lime: #00B894;             /* 青檸色 */
            --rose: #FD79A8;             /* 玫瑰色 */
            
            /* 活潑漸變色變量 */
            --ink-gradient: linear-gradient(135deg, #FF6B9D 0%, #4DABF7 100%);
            --paper-gradient: linear-gradient(135deg, #FFFDF7 0%, #FFF0F6 100%);
            --accent-gradient: linear-gradient(135deg, #FFE66D 0%, #FFB366 100%);
            --success-gradient: linear-gradient(135deg, #51CF66 0%, #81ECEC 100%);
            --info-gradient: linear-gradient(135deg, #74B9FF 0%, #A29BFE 100%);
            --rainbow-gradient: linear-gradient(135deg, #FF6B9D 0%, #4DABF7 25%, #FFE66D 50%, #51CF66 75%, #A29BFE 100%);
        }
        
        body {
            font-family: 'Noto Serif TC', 'Source Han Serif', 'Georgia', serif;
            background: var(--background);  /* 使用純色背景 */
            margin: 0;
            padding: 10px;
            color: var(--text);
            position: relative;
            min-height: 100vh;
            height: auto;
            overflow: auto !important; /* 強制允許滾動 */
            overflow-x: hidden !important; /* 防止水平滾動 */
            display: flex;
            flex-direction: column;
            /* 優化字體渲染 */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            font-feature-settings: "kern" 1, "liga" 1;
            /* 移動端滾動優化 */
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
        
        /* 新增微交互效果 */
        .interactive-element {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .interactive-element:hover {
            filter: brightness(1.05);
        }
        
        .interactive-element:active {
            transform: scale(0.98);
            filter: brightness(0.95);
        }
        
        /* 焦點狀態優化 - 小學生友善 */
        .btn:focus,
        .nav-button:focus,
        input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.4);
            transform: scale(1.02);
        }
        
        /* 加載狀態優化 */
        .loading-state {
            pointer-events: none;
            opacity: 0.7;
            position: relative;
        }
        
        .loading-state::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid rgba(255, 107, 157, 0.3);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* 成功狀態反饋 - 簡化版本 */
        .success-feedback {
            animation: sparkle 0.6s ease-out;
        }
        
        /* 錯誤狀態反饋 - 溫和晃動 */
        .error-feedback {
            animation: gentle-shake 0.5s ease-in-out;
        }
        
        /* 小學生專屬動畫 */
        @keyframes sparkle {
            0% { filter: brightness(1) saturate(1); }
            50% { filter: brightness(1.3) saturate(1.5); transform: scale(1.05); }
            100% { filter: brightness(1) saturate(1); }
        }
        
        @keyframes gentle-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }
        

        

        
        /* 整體布局優化 - 縮減整體寬度 */
        .app-container {
            max-width: 900px;  /* 從1200px縮減到900px */
            margin: 0 auto;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: auto;
            min-height: 100vh;
            flex: 1;
            width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        /* 全局文本寬度控制 */
        * {
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        /* 主面板寬度統一控制 */
        .main-panel {
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        /* 頂部導航設計 */
        header {
            text-align: center;
            padding: 15px 15px;
            background-color: var(--panel-bg);
            border-radius: var(--border-radius);
            color: var(--text);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }
        
        /* 主導航設計 - 縮減寬度 */
        .main-nav {
            background-color: var(--panel-bg);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            padding: 5px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .nav-container {
            display: flex;
            justify-content: center;  /* 改為center，配合gap使用 */
            gap: 8px;  /* 添加按鈕之間的間距 */
            max-width: 480px;  /* 從600px縮減到480px */
            margin: 0 auto;
            padding: 0 8px;  /* 添加左右內邊距 */
        }
        
        .nav-button {
            flex: 1;
            max-width: 110px;  /* 限制最大寬度，防止按鈕過寬 */
            padding: 14px 8px;  /* 減少左右內邊距 */
            border: none;
            background: transparent;
            color: var(--light-text);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-family: 'Noto Serif TC', serif;
            position: relative;
            overflow: hidden;
            /* 增強觸覺反饋 */
            -webkit-tap-highlight-color: transparent;
            /* 防止按鈕變形 */
            min-width: 0;
            box-sizing: border-box;
        }
        
        .nav-button::before {
            content: '';
            position: absolute;
            top: 2px;  /* 留出邊距 */
            left: 2px;  /* 留出邊距 */
            right: 2px;  /* 留出邊距 */
            bottom: 2px;  /* 留出邊距 */
            background: #FFE66D;  /* 統一使用黃色 */
            opacity: 0;
            transition: opacity 0.35s ease;
            z-index: -1;
            border-radius: calc(var(--border-radius) - 2px);  /* 調整圓角 */
        }
        
        .nav-button svg {
            margin-bottom: 3px;
            transition: all 0.3s ease;
        }
        
        .nav-button.active {
            color: #8B6914;  /* 深色文字確保在黃色背景上清晰 */
            font-weight: 700;
            text-shadow: none;  /* 移除文字陰影 */
        }
        
        .nav-button.active::before {
            opacity: 1;
        }
        
        .nav-button.active svg {
            transform: scale(1.1);
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
        }
        
        .nav-button:not(.active):hover {
            background-color: rgba(139, 69, 19, 0.08);
            color: var(--ink-color);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);  /* 添加陰影效果 */
        }
        
        .nav-button:not(.active):hover svg {
            transform: scale(1.05);
        }
        
        .nav-button.active::after {
            content: '';
            position: absolute;
            bottom: 2px;  /* 調整位置 */
            left: 20%;  /* 調整位置 */
            width: 60%;  /* 調整寬度 */
            height: 3px;  /* 稍微減少高度 */
            background: #E6B800;  /* 使用純色代替漸變 */
            border-radius: 3px 3px 0 0;  /* 調整圓角 */
            box-shadow: 0 -2px 6px rgba(230, 184, 0, 0.3);
        }
        

        

        

        

        
        .content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            color: var(--ink-color);
            font-weight: bold;
            letter-spacing: 2px;
            font-family: 'Noto Serif TC', serif;
            line-height: 1.2;
        }
        
        .tagline {
            font-size: 1em;
            margin-top: 5px;
            color: var(--secondary);
            font-weight: normal;
            font-family: 'Noto Serif TC', serif;
        }
        
        /* 主要內容區採用兩欄布局 */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            flex: 1;
        }
        
        /* 主面板 - 功能展示區域，縮減寬度 */
        .main-panel {
            flex: 2.5;  /* 從flex: 3 調整為 2.5 */
            min-width: 280px;  /* 從320px縮減到280px */
            max-width: 600px;  /* 從800px縮減到600px */
            width: 100%;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
        }
        
        /* 側邊面板區域 - 調整寬度保持平衡 */
        .side-panel-container {
            flex: 1.5;  /* 從flex: 1 調整為 1.5 */
            min-width: 200px;  /* 從220px縮減到200px */
            max-width: 280px;  /* 從300px縮減到280px */
            display: flex;
            flex-direction: column;
        }
        
        /* 今日漢字樣式 */
        .daily-character-display {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .daily-character {
            font-size: 100px;  /* 從120px縮減到100px */
            line-height: 1.2;
            margin-bottom: 15px;
            font-family: 'Noto Serif TC', serif;
            color: var(--ink-color);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            text-align: center;
            min-height: 120px;  /* 從140px縮減到120px */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .daily-character:hover {
            transform: scale(1.05);
            text-shadow: 2px 2px 8px rgba(142, 62, 26, 0.2);
        }
        
        .daily-character-hint {
            font-size: 14px;
            color: var(--light-text);
            text-align: center;
            line-height: 1.5;
            margin-top: 8px;
            font-style: italic;
        }
        
        .panel {
            background: var(--panel-bg);  /* 使用純色背景 */
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 18px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);  /* 簡化陰影 */
            position: relative;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;  /* 簡化過渡 */
        }
        
        .panel:hover {
            transform: translateY(-1px);  /* 減少移動距離 */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);  /* 簡化陰影 */
        }
        
        .panel-compact {
            padding: 12px;
        }
        
        .panel h2 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            color: var(--ink-color);
            position: relative;
            padding-left: 15px;
            font-family: 'Noto Serif TC', serif;
        }
        
        .panel h2::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 80%;
            background-color: var(--highlight-color);
            border-radius: 2px;
        }
        
        /* 更古典的輸入區域 */
        .character-search {
            display: flex;
            margin-bottom: 15px;
            padding: 3px;
            background-color: rgba(255, 255, 255, 0.4);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            width: 100%;
            box-sizing: border-box;
        }
        
        .character-input {
            flex-grow: 1;
            padding: 8px 15px;
            font-size: 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius) 0 0 var(--border-radius);
            background-color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
            color: var(--text);
            font-family: 'Noto Serif TC', serif;
            min-width: 0; /* 允許在flex容器中縮小，避免小螢幕溢出 */
        }
        
        .character-input:focus {
            outline: none;
            border-color: var(--highlight-color);
            box-shadow: 0 0 0 2px rgba(142, 62, 26, 0.2);
        }
        
        .search-button {
            background-color: var(--accent);
            color: white;
            font-size: 16px;
            padding: 8px 15px;
            border: none;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-family: 'Noto Serif TC', serif;
            flex-shrink: 0; /* 防止按鈕被擠壓變形 */
        }
        
        .search-button:hover {
            background-color: #3A3F60;
        }
        
        .search-button svg {
            margin-right: 6px;
        }
        
        .error-message {
            color: var(--danger);
            text-align: center;
            margin: 5px 0;
            display: none;
            font-weight: bold;
            font-size: 14px;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .loader-container {
            position: relative;
            height: 30px;
            width: 100%;
            margin: 5px 0;
        }
        
        .loader {
            border: 3px solid rgba(35, 45, 82, 0.1);
            border-radius: 50%;
            border-top: 3px solid var(--accent);
            width: 25px;
            height: 25px;
            animation: spin 1s linear infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -12px;
            margin-left: -12px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .loader.active {
            opacity: 1;
            visibility: visible;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 優化漢字展示區 */
        .character-display-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding-top: 10px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;  
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        

        
        .character-board {
            position: relative;
            width: 220px;  /* 從250px縮減到220px */
            height: 220px;  /* 從250px縮減到220px */
            margin: 0 auto 10px;
            background-color: #F9F5EC;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        
        .grid-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
            border: 1px solid #E8DFD0;
        }
        
        .grid-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(to right, 
                    transparent calc(50% - 1px), 
                    rgba(142, 62, 26, 0.15) calc(50% - 1px), 
                    rgba(142, 62, 26, 0.15) calc(50% + 1px), 
                    transparent calc(50% + 1px)
                ),
                linear-gradient(to bottom, 
                    transparent calc(50% - 1px), 
                    rgba(142, 62, 26, 0.15) calc(50% - 1px), 
                    rgba(142, 62, 26, 0.15) calc(50% + 1px), 
                    transparent calc(50% + 1px)
                );
        }
        
        .character-target {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            z-index: 2;
        }
        
        .character-info {
            text-align: center;
            margin: 10px 0 15px 0;
        }
        
        .character-label {
            font-size: 48px;
            font-weight: bold;
            color: var(--ink-color);
            margin-right: 5px;
            display: inline-block;
            font-family: 'Noto Serif TC', serif;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .pinyin {
            font-size: 24px;
            color: var(--secondary);
            display: block;
            margin-top: 5px;
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: 600;
            min-height: 32px; /* 預留空間，避免載入時頁面跳動 */
            line-height: 1.3; /* 設置行高，確保文字垂直居中 */
            opacity: 0; /* 初始隱藏，但保留空間 */
            transition: opacity 0.2s ease-in; /* 平滑過渡 */
        }
        
        .pinyin:not(:empty) {
            opacity: 1; /* 有內容時顯示 */
        }
        .stroke-count {
            font-size: 14px;
            color: var(--light-text);
            margin-top: 3px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        

        
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 18px;
            font-size: 14px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12), 0 1px 3px rgba(0, 0, 0, 0.08);
            white-space: nowrap;
            font-family: 'Noto Serif TC', serif;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            /* 觸覺反饋優化 */
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        /* 按鈕漣漪效果 */
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            z-index: 1;
        }
        
        .btn:active::before {
            width: 300px;
            height: 300px;
        }
        
        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn:active {
            transform: translateY(-1px) scale(0.98);
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn svg {
            margin-right: 6px;
            width: 16px;
            height: 16px;
            transition: transform 0.25s ease;
            z-index: 2;
            position: relative;
        }
        
        .btn:hover svg {
            transform: scale(1.1);
        }
        
        /* 統一按鈕配色 - 活潑但不花哨 */
        .btn-primary {
            background: #FF6B9D;  /* 粉紅色 - 主要操作 */
            color: white;
            border: 1px solid transparent;
        }
        
        .btn-primary:hover {
            background: #E85A87;  /* 深一點的粉紅色 */
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3), 0 3px 8px rgba(255, 107, 157, 0.2);
        }
        
        .btn-secondary {
            background: #4DABF7;  /* 藍色 - 次要操作 */
            color: white;
            border: 1px solid transparent;
        }
        
        .btn-secondary:hover {
            background: #3490DC;  /* 深一點的藍色 */
            box-shadow: 0 8px 25px rgba(77, 171, 247, 0.3), 0 3px 8px rgba(77, 171, 247, 0.2);
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background: rgba(255, 230, 109, 0.15);  /* 淺黃色背景 */
            color: #E6B800;  /* 深黃色文字 */
            border: 2px solid #FFE66D;  /* 黃色邊框 */
            font-weight: 600;
        }
        
        .btn-outline:hover {
            background: #FFE66D;  /* 黃色背景 */
            border-color: #E6B800;
            color: #8B6914;  /* 深色文字確保對比度 */
            box-shadow: 0 8px 20px rgba(255, 230, 109, 0.4);
        }
        
        .btn-solid-light {
            background: #F8F9FA;  /* 淺灰色背景 */
            color: #6C757D;  /* 中灰色文字 */
            border: 1px solid #DEE2E6;  /* 淺邊框 */
            font-weight: 600;
        }
        
        .btn-solid-light:hover {
            background: #E9ECEF;  /* 稍深的淺灰色 */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            color: #495057;  /* 深一點的文字顏色 */
        }
        

        
        /* 選項卡式界面 */
        .tab-container {
            margin-top: 5px;
        }
        
        .tab-header {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 12px;
        }
        .tab-button {
            padding: 8px 15px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-weight: bold;
            color: var(--light-text);
            font-size: 14px;
            transition: all 0.3s;
            font-family: 'Noto Serif TC', serif;
        }
        
        .tab-button.active {
            color: #B8860B;
            border-bottom-color: #B8860B;
            background: rgba(255, 230, 109, 0.15);
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        /* 游戏模式部分 */
        .game-modes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .game-card {
            flex: 1 1 calc(50% - 10px);
            min-width: 130px;
            background-color: rgba(255, 255, 255, 0.4);
            border-radius: var(--border-radius);
            padding: 12px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        
        .game-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: var(--highlight-color);
        }
        
        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: #FFE66D;  /* 統一使用黃色裝飾條 */
            opacity: 0.8;
        }
        
        .game-card-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--ink-color);
            font-family: 'Noto Serif TC', serif;
        }
        
        .game-card-description {
            font-size: 12px;
            color: var(--light-text);
            margin-bottom: 8px;
            line-height: 1.4;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 50px;
            font-size: 10px;
            font-weight: bold;
            margin-right: 6px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .badge-primary {
            background-color: rgba(255, 230, 109, 0.2);
            color: #B8860B;
            border: 1px solid rgba(184, 134, 11, 0.3);
        }
        
        .badge-warning {
            background-color: rgba(183, 148, 63, 0.1);
            color: var(--warning);
        }
        
        /* 字詞本樣式 */
        .vocabulary-book-content {
            margin-top: 15px;
        }
        
        .vocabulary-count {
            font-size: 12px;
            color: var(--light-text);
            margin-left: 5px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        /* .vocabulary-list 先移除空規則，避免 Linter 警告 */
        
        .vocabulary-item {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #FFFDF7 0%, #FFF8E1 100%);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .vocabulary-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(255, 107, 157, 0.2);
            border-color: var(--primary);
        }
        
        .vocabulary-item-number {
            font-size: 12px;
            color: var(--secondary);
            font-weight: bold;
            margin-right: 10px;
            min-width: 20px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .vocabulary-item-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .vocabulary-item-text {
            display: flex;
            align-items: flex-end;
            margin-top: 2px;
        }
        
        .vocabulary-character-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 4px;
        }
        
        .vocabulary-character-container:last-child {
            margin-right: 0;
        }
        
        .vocabulary-character-pinyin {
            font-size: 9px;
            color: var(--secondary);
            font-family: 'Noto Sans TC', sans-serif;
            margin-bottom: 1px;
            text-align: center;
            font-weight: 500;
            height: 12px;
            line-height: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
        }
        
        .vocabulary-character-box {
            position: relative;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #FFFDF7 0%, #FFF8E1 100%);
            border: 1px solid rgba(255, 107, 157, 0.3);
            border-radius: 4px;
        }
        
        /* 田字格背景 */
        .vocabulary-character-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(to right, rgba(255, 107, 157, 0.22) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255, 107, 157, 0.22) 1px, transparent 1px);
            background-size: 50% 50%;
            background-position: 0 0;
        }
        
        .vocabulary-character {
            font-size: 16px;
            font-weight: bold;
            color: var(--ink-color);
            font-family: 'Noto Serif TC', serif;
            z-index: 2;
            position: relative;
        }
        

        
        .vocabulary-remove {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 16px;
            height: 16px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 10px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3;
            transition: all 0.2s ease;
        }
        
        .vocabulary-item:hover .vocabulary-remove {
            display: flex;
        }
        
        .vocabulary-remove:hover {
            background: #E74C3C;
            transform: scale(1.1);
        }
        
        .vocabulary-more {
            margin-top: 10px;
            text-align: center;
        }
        
        .btn-more {
            width: 100%;
            font-size: 12px;
            padding: 8px 12px;
        }
        
        .empty-vocabulary {
            text-align: center;
            padding: 20px;
            color: var(--light-text);
        }
        
        .empty-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .empty-text {
            font-size: 14px;
            margin-bottom: 4px;
            font-family: 'Noto Serif TC', serif;
        }
        
        .empty-hint {
            font-size: 12px;
            opacity: 0.7;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        /* 模態窗口樣式 */
        .vocabulary-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .vocabulary-modal-content {
            background: var(--background);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            max-height: 80%;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .vocabulary-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .vocabulary-modal-header h3 {
            margin: 0;
            color: var(--ink-color);
            font-family: 'Noto Serif TC', serif;
        }
        
        .vocabulary-modal-count {
            font-size: 14px;
            color: var(--light-text);
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .vocabulary-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--light-text);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .vocabulary-modal-close:hover {
            background: var(--danger);
            color: white;
        }
        
        .vocabulary-modal-body {
            flex: 1;
            /* 移除固定滾動，改為自適應 */
            /* overflow-y: auto; */
            padding: 20px;
        }
        
        .vocabulary-modal-list {
            display: grid;
            gap: 8px;
        }
        
        /* 收藏按鈕樣式 */
        .btn-favorite {
            background: linear-gradient(135deg, #FF69B4 0%, #FF1493 100%);
            color: white;
            border: none;
            font-size: 14px;
            font-weight: 600;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-favorite:hover {
            background: linear-gradient(135deg, #FF1493 0%, #DC143C 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 20, 147, 0.4);
        }
        
        .btn-favorite.favorited {
            background: linear-gradient(135deg, #32CD32 0%, #228B22 100%);
            animation: heartbeat 0.6s ease-in-out;
        }
        
        .btn-favorite.favorited:hover {
            background: linear-gradient(135deg, #228B22 0%, #006400 100%);
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        
        @keyframes toastSlideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes toastSlideOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }
        

        
        /* 笔顺挑战模式 */
        .quiz-container {
            display: none;
            text-align: center;
            padding: 12px;
            position: relative;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        
        .quiz-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent);
            font-family: 'Noto Serif TC', serif;
        }
        
        .quiz-instruction {
            color: var(--light-text);
            margin-bottom: 10px;
            font-size: 14px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .quiz-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50px;
            padding: 3px;
            border: 1px solid var(--border-color);
        }
        
        .quiz-progress-level {
            flex: 1;
            padding: 5px;
            font-size: 12px;
            border-radius: 50px;
            text-align: center;
            transition: all 0.3s ease;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .quiz-progress-level.active {
            background-color: var(--accent);
            color: white;
            font-weight: bold;
        }
        
        .quiz-target {
            width: 260px;  /* 行動端放大以提升短筆畫識別 */
            height: 260px;  /* 行動端放大以提升短筆畫識別 */
            margin: 0 auto 25px;  /* 增加底部間距從10px到25px */
            position: relative;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            background-color: #F9F5EC;
        }
        
        .quiz-result {
            display: none;
            padding: 12px;
            border-radius: var(--border-radius);
            margin-top: 15px;  /* 增加頂部間距從10px到15px */
            text-align: center;
            animation: fadeIn 0.5s ease;
            font-size: 14px;
            border: 1px solid var(--border-color);
        }
        
        .quiz-result.success {
            background-color: rgba(58, 115, 85, 0.1);
            color: var(--success);
        }
        
        .quiz-result.error {
            background-color: rgba(180, 61, 61, 0.1);
            color: var(--danger);
        }
        .quiz-result-message {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            font-family: 'Noto Serif TC', serif;
        }
        
        .quiz-result-detail {
            font-size: 13px;
            opacity: 0.8;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .quiz-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;  /* 增加頂部間距從10px到20px */
            flex-wrap: wrap;
        }
        
        /* 記憶遊戲 */
        .memory-game-container {
            display: none;
            text-align: center;
            padding: 12px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        
        .memory-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--warning);
            font-family: 'Noto Serif TC', serif;
        }
        
        .memory-instruction {
            color: var(--light-text);
            margin-bottom: 15px;
            font-size: 14px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .memory-level {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            justify-content: center;
        }
        
        .level-btn {
            padding: 6px 12px;
            font-size: 14px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.4);
            color: var(--light-text);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .level-btn.active {
            background: #51CF66;  /* 統一使用綠色 */
            color: white;
            font-weight: bold;
            border-color: #51CF66;
            box-shadow: 0 2px 8px rgba(81, 207, 102, 0.3);
        }
        
        .memory-characters {
            display: grid;
            grid-template-columns: repeat(auto-fit, 55px);  /* 從60px縮減到55px */
            gap: 10px;  /* 從12px縮減到10px */
            margin-bottom: 20px;
            justify-content: center;
            width: 100%;
            max-width: 280px;  /* 從320px縮減到280px */
            margin-left: auto;
            margin-right: auto;
        }
        
        .memory-character {
            width: 55px;  /* 從60px縮減到55px */
            height: 55px;  /* 從60px縮減到55px */
            display: flex;
            align-items: center;
            justify-content: center;
            background: #4DABF7;  /* 統一使用藍色 */
            color: white;
            font-size: 26px;  /* 從28px縮減到26px */
            font-weight: bold;
            border-radius: 5px;
            box-shadow: 0 3px 8px rgba(77, 171, 247, 0.3);
            transition: all 0.3s ease;
            animation: fadeIn 0.3s ease;
            font-family: 'Noto Serif TC', serif;
            border: 1px solid rgba(77, 171, 247, 0.3);
        }
        
        .memory-character.hidden {
            background-color: #E0E0E0;
            color: transparent;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
            border-color: var(--border-color);
            position: relative;
        }
        
        .memory-character.hidden::after {
            content: "?";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 28px;
            color: var(--light-text);
            font-weight: bold;
        }
        
        .memory-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
            width: 100%;
            justify-items: center;
        }
        
        .memory-option {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.4);
            transition: all 0.3s ease;
            font-family: 'Noto Serif TC', serif;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        
        .memory-option:hover {
            border-color: #FF6B9D;  /* 統一使用粉紅色 */
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(255, 107, 157, 0.3);
        }
        
        .memory-option.selected {
            background: #FF6B9D;  /* 統一使用粉紅色 */
            color: white;
            border-color: #FF6B9D;
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(255, 107, 157, 0.4);
        }
        
        /* 選對的字 */
        .memory-option.correct {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
        }
        
        /* 選錯的字 */
        .memory-option.wrong {
            background-color: var(--danger);
            color: white;
            border-color: var(--danger);
        }
        
        /* 未選擇但應該選的字 */
        .memory-option.missed {
            background-color: rgba(255, 255, 255, 0.4);
            border: 1px dashed var(--success);
            position: relative;
        }
        
        .memory-option.missed::after {
            content: "✓";
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 12px;
            color: var(--success);
            font-weight: bold;
        }
        
        .memory-timer {
            font-size: 16px;
            font-weight: bold;
            color: var(--light-text);
            margin-bottom: 15px;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .memory-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .memory-result {
            display: none;
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            text-align: center;
            animation: fadeIn 0.5s ease;
            border: 1px solid var(--border-color);
        }
        
        .memory-result.success {
            background-color: rgba(58, 115, 85, 0.1);
            color: var(--success);
        }
        
        .memory-result.error {
            background-color: rgba(180, 61, 61, 0.1);
            color: var(--danger);
        }
        
        /* 脉动提示效果 */
        .stroke-hint {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 107, 157, 0.4);
            animation: pulse 1.5s infinite;
            pointer-events: none;
            z-index: 10;
            display: none;
            border: 2px solid rgba(255, 107, 157, 0.6);
        }
        
        @keyframes pulse {
            0% {
                transform: scale(0.8);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.4;
            }
            100% {
                transform: scale(0.8);
                opacity: 0.7;
            }
        }
        
        /* 笔顺提示 */
        .stroke-animation-hint {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #51CF66;  /* 統一使用綠色 */
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(81, 207, 102, 0.4);
            opacity: 0;
            transition: opacity 0.3s ease;
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .stroke-animation-hint.visible {
            opacity: 1;
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-5px); }
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-6px); }
        }
        
        .bounce {
            animation: bounce 1s ease;
        }
        
        /* HanziWriter 定制样式 */
        #quiz-target-field {
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 5;
            cursor: pointer;
            touch-action: none;
            overscroll-behavior: contain;
        }
        
        #quiz-target-field svg {
            overflow: visible !important;
        }
        
        /* 书法字体风格覆盖 */
        .chinese-text {
            font-family: 'Noto Serif TC', serif;
            letter-spacing: 1px;
        }
        
        /* 多字符選擇器樣式 */
        .character-selector {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            width: 100%;
            box-sizing: border-box;
        }
        
        .selector-title {
            font-size: 16px;
            font-weight: bold;
            color: var(--ink-color);
            margin-bottom: 12px;
            text-align: center;
            font-family: 'Noto Serif TC', serif;
        }
        
        .character-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            align-items: center;
        }
        
        .character-btn {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            font-family: 'Noto Serif TC', serif;
            color: var(--ink-color);
            background-color: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-image:
                linear-gradient(
                    to right,
                    transparent calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.22) calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.22) calc(50% + 0.5px),
                    transparent calc(50% + 0.5px)
                ),
                linear-gradient(
                    to bottom,
                    transparent calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.22) calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.22) calc(50% + 0.5px),
                    transparent calc(50% + 0.5px)
                );
            background-repeat: no-repeat, no-repeat;
            background-position: center, center;
            background-size: 100% 100%, 100% 100%;
        }
        
        .character-btn:hover:not(.active) {
            transform: translateY(-2px) scale(1.05);
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
            background-color: rgba(255, 107, 157, 0.05);
        }
        
        .character-btn.active:hover {
            transform: scale(1.15);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
            }
            
        .character-btn.active {
            background: rgba(255, 255, 255, 0.95);
            color: #22c55e;
            font-weight: 900;
            border: 3px solid #22c55e;
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.3);
            /* 田字格保持中心對齊，避免縮放時偏移 */
            background-image:
                linear-gradient(
                    to right,
                    transparent calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.25) calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.25) calc(50% + 0.5px),
                    transparent calc(50% + 0.5px)
                ),
                linear-gradient(
                    to bottom,
                    transparent calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.25) calc(50% - 0.5px),
                    rgba(255, 107, 157, 0.25) calc(50% + 0.5px),
                    transparent calc(50% + 0.5px)
                );
            background-repeat: no-repeat, no-repeat;
            background-size: 100% 100%, 100% 100%;
            background-position: center, center;

        }
        
        .character-btn:active {
            transform: translateY(0) scale(1.02);
            }
            
        /* 為選中狀態添加輕微的閃爍動畫 */

        
        /* 字義解釋區樣式 - 簡潔版本 */
        .character-definition {
            margin-top: 20px;
            padding: 18px;
            background: var(--panel-bg);  /* 使用純色背景 */
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);  /* 簡化陰影 */
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        
        .character-definition::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #FFE66D;  /* 統一使用黃色裝飾條 */
        }
        
        .definition-header {
            font-size: 16px;
            font-weight: 700;
            color: var(--ink-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Noto Serif TC', serif;
            letter-spacing: 0.5px;
        }
        
        .definition-content {
            text-align: left;
        }
        
        .definition-item {
            margin-bottom: 16px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            position: relative;
        }
        
        .definition-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            }
            
        .definition-main {
            margin-bottom: 8px;
            line-height: 1.8;
        }
        
        .definition-type {
            display: inline-block;
            font-size: 11px;
            color: white;
            background: #FF6B9D;  /* 統一使用粉紅色 */
            padding: 4px 10px;
            border-radius: 12px;
            margin-right: 10px;
            margin-bottom: 0;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(255, 107, 157, 0.3);
            vertical-align: baseline;
            }
            
        .definition-text {
            color: var(--ink-color);
            font-size: 16px;
            line-height: 1.7;
            font-family: 'Noto Serif TC', serif;
            margin-bottom: 8px;
            text-align: left;
            font-weight: 400;
            display: inline;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            white-space: normal;
            overflow: hidden;
            }
            
        .definition-english {
            color: #2563eb;
            font-size: 15px;
            line-height: 1.6;
            font-family: 'Georgia', serif;
            margin: 8px 0;
            padding: 10px 14px;
            background: rgba(37, 99, 235, 0.05);
            border-left: 3px solid #2563eb;
            border-radius: 0 6px 6px 0;
            font-style: italic;
            text-align: left;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            white-space: normal;
            overflow: hidden;
            }
            
        .definition-example {
            font-size: 14px;
            color: #64748b;
            margin-top: 10px;
            padding: 8px 12px;
            background: rgba(100, 116, 139, 0.05);
            border-radius: 6px;
            font-family: 'Noto Serif TC', serif;
            line-height: 1.5;
            text-align: left;
            position: relative;
            border-left: 2px solid var(--accent);
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            white-space: normal;
            overflow: hidden;
            }
            
        .definition-example::before {
            content: "例：";
            color: var(--primary);
            font-weight: bold;
            margin-right: 6px;
        }
        
        .definition-loading {
            text-align: center;
            color: var(--light-text);
            font-style: italic;
            font-size: 13px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            }
            
        .definition-loading::before {
            content: '🔍';
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
            }
            
        /* 響應式調整 */
        @media (max-width: 768px) {
            .character-definition {
                padding: 15px;
                margin-top: 15px;
            }
            
            .definition-header {
                font-size: 15px;
            }
            
            .definition-text {
                font-size: 15px;
            }
            
            .definition-english {
                font-size: 14px;
                padding: 8px 12px;
            }
            
            .definition-example {
                font-size: 13px;
                padding: 6px 10px;
            }
        }
        

        

        
        /* 新增功能區樣式 */
        .character-search-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
        }
        
        .function-section {
            position: relative;
            min-width: 100%;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        .function-container {
            width: 100%;
            max-width: 100%;
            min-height: 500px;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        

        

        
        .side-panel {
            margin-bottom: 15px;
        }
        
        .side-panel-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .side-panel-header h2 {
            margin: 0;
            font-size: 1.2em;
            padding-left: 0;
        }
        
        .side-panel-header h2::before {
            display: none;
        }
        
        .side-panel-header svg {
            color: var(--highlight-color);
        }
        
        .tip-content {
            font-size: 14px;
            line-height: 1.6;
            margin: 0;
            color: var(--text);
        }
        
        .tip-source {
            text-align: right;
            font-style: italic;
            margin-top: 5px;
            color: var(--light-text);
            font-size: 12px;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .main-panel, .side-panel-container {
                width: 100%;
                max-width: 100%;
            }
            
            .character-board, .quiz-target {
                width: 260px;  /* 行動端放大 */
                height: 260px; /* 行動端放大 */
            }
            
            .game-card {
                flex: 1 1 100%;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .nav-container {
                width: 100%;
            }
            
            .nav-button span {
                font-size: 14px;
            }
            
            /* 字符選擇器響應式 */
            .character-btn {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            
            .character-buttons {
                gap: 6px;
            }
            
            .selector-title {
                font-size: 14px;
            }
        }
        
        @media (min-width: 768px) {
            .tagline {
                display: block;
                font-size: 1.1em;
                margin-top: 8px;
                letter-spacing: 1px;
            }
            
            .panel {
                padding: 20px;
            }
            
            .character-board, .quiz-target {
                width: 240px;  /* 從280px縮減到240px */
                height: 240px;  /* 從280px縮減到240px */
            }
        }
        
        /* 部首組字遊戲樣式 */
        .radical-game-container {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 100%;
            text-align: center;
            padding: 2px;
            position: relative;
            height: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        
        /* 顶部游戏介绍和难度选择区域 - 更紧凑的设计 */
        .radical-header-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 5px;
            padding: 5px;
            background-color: var(--panel-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            text-align: center;
        }
        
        /* 头部标题 */
        .radical-head-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--ink-color);
            margin-bottom: 5px;
            width: 100%;
            text-align: center;
        }
        
        .radical-instruction {
            color: var(--text);
            margin-bottom: 5px;
            font-size: 14px;
            font-weight: 500;
            font-family: 'Noto Sans TC', sans-serif;
            line-height: 1.3;
            background-color: rgba(255, 255, 255, 0.4);
            padding: 5px 8px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(142, 62, 26, 0.2);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .radical-level-wrapper {
            width: 100%;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 5px;
        }
        
        .radical-level-label {
            font-size: 16px;
            font-weight: bold;
            color: var(--highlight-color);
            margin-bottom: 10px;
            text-align: center;
        }
        
        .radical-level {
            display: flex;
            gap: 15px;
            margin: 0 auto;
            justify-content: center;
            width: 100%;
            max-width: 350px;
        }
        
        /* 下方功能区 */
        .radical-game-board {
            width: 100%;
            max-width: 420px;  /* 從500px縮減到420px */
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 10px;
            background-color: rgba(255, 255, 255, 0.4);
            padding: 10px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        /* 功能区域标签样式 */
        .workspace-label, .radicals-label {
            font-size: 16px;
            font-weight: bold;
            color: var(--highlight-color);
            margin-bottom: 10px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 8px;
        }
        
        .target-word-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            background-color: rgba(255, 255, 255, 0.6);
            padding: 8px 10px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
        }
        
        .target-word-label {
            font-size: 18px;
            font-weight: bold;
            color: var(--highlight-color);
            margin-bottom: 10px;
        }
        
        .target-word {
            font-size: 60px;  /* 從70px縮減到60px */
            color: var(--ink-color);
            line-height: 1;
            width: 85px;  /* 從100px縮減到85px */
            height: 85px;  /* 從100px縮減到85px */
            font-family: 'Noto Serif TC', serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed var(--border-color);
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .radical-workspace {
            position: relative;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: var(--border-radius);
            border: 2px dashed var(--highlight-color);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .radical-drop-area {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: center;
            min-height: 80px;
        }
        
        .drop-placeholder {
            color: var(--light-text);
            font-size: 14px;
            text-align: center;
            font-style: italic;
        }
        
        .radicals-container {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            justify-content: center;
            margin-bottom: 10px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: var(--border-radius);
            border: 1px solid var(--highlight-color);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        @media (max-width: 540px) {
            .radicals-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 400px) {
            .radicals-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .radical-item {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--highlight-color);
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
            transition: all 0.25s ease;
            font-family: 'Noto Serif TC', serif;
            position: relative;
            margin: 0 auto;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        
        .radical-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            background-color: rgba(142, 62, 26, 0.1);
        }
        
        .radical-item.selected {
            background-color: rgba(35, 45, 82, 0.1);
            transform: scale(0.95);
        }
        
        .radical-item.selected::after {
            content: '';
            position: absolute;
            top: -5px;
            right: -5px;
            width: 12px;
            height: 12px;
            background-color: var(--accent);
            border-radius: 50%;
        }
        
        .radical-item-workspace {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--accent);
            border-radius: 8px;
            user-select: none;
            transition: all 0.3s ease;
            font-family: 'Noto Serif TC', serif;
            position: relative;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
            margin: 5px;
        }
        
        .radical-item-workspace:hover {
            background-color: rgba(35, 45, 82, 0.05);
        }
        
        .radical-item-workspace::after {
            content: '×';
            position: absolute;
            top: -8px;
            right: -8px;
            width: 16px;
            height: 16px;
            background-color: var(--primary);
            border-radius: 50%;
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .radical-result {
            display: none;
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            text-align: center;
            animation: fadeIn 0.5s ease;
            border: 1px solid var(--border-color);
        }
        
        .radical-result.success {
            background-color: rgba(58, 115, 85, 0.1);
            color: var(--success);
        }
        
        .radical-result.error {
            background-color: rgba(180, 61, 61, 0.1);
            color: var(--danger);
        }
        
        .radical-hint {
            display: none;
            color: var(--highlight-color);
            font-size: 14px;
            text-align: center;
            margin: 10px 0;
            font-style: italic;
            background-color: rgba(142, 62, 26, 0.05);
            padding: 8px;
            border-radius: var(--border-radius);
            border: 1px dashed var(--border-color);
        }
        .radical-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        /* 字词查询模式 */
        .word-lookup-container {
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
        }
        
        .word-search-section {
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }
        
        .word-search {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .word-input {
            flex: 1;
            min-width: 200px;
            max-width: 400px;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 25px;
            font-size: 16px;
            font-family: 'Noto Serif TC', serif;
            background: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .word-input:focus {
            outline: none;
            border-color: #4DABF7;
            box-shadow: 0 4px 12px rgba(77, 171, 247, 0.3);
            transform: translateY(-1px);
        }
        
        .word-result-section {
            width: 100%;
            max-width: 800px;
            margin-top: 20px;
        }
        
        .word-display {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: var(--panel-bg);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .word-title {
            font-size: 56px;
            font-weight: bold;
            color: var(--ink-color);
            font-family: 'Noto Serif TC', serif;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
        }
        
        .word-pronunciation {
            font-size: 20px;
            color: #4DABF7;
            font-weight: 600;
            margin-bottom: 0;
            font-family: 'Noto Sans TC', sans-serif;
            letter-spacing: 1px;
            min-height: 28px; /* 預留空間，避免載入時頁面跳動 */
            line-height: 1.3; /* 設置行高，確保文字垂直居中 */
            opacity: 0; /* 初始隱藏，但保留空間 */
            transition: opacity 0.2s ease-in; /* 平滑過渡 */
        }
        
        .word-pronunciation:not(:empty) {
            opacity: 1; /* 有內容時顯示 */
        }
        
        .word-control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
            padding: 0 20px;
        }
        
        .word-definition {
            margin-top: 0;
            padding: 20px;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden;
            text-align: left;
        }
        
        .word-definition::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #4DABF7;
        }
        
        .word-lookup-container .definition-type {
            display: inline-block;
            background: #4DABF7;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(77, 171, 247, 0.3);
            vertical-align: baseline;
            margin-right: 8px;
        }
        
        /* 字词查询模式专用样式 */
        .word-lookup-container .definition-text {
            color: var(--ink-color);
            font-size: 20px !important;  /* 增大到20px，确保比例句的14px大 */
            line-height: 1.7;
            font-family: 'Noto Serif TC', serif;
            margin-bottom: 8px;
            text-align: left;
            font-weight: 500;  /* 比笔顺查询的400更粗 */
            display: inline;  /* 改为inline，与词性标签在同一行 */
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            white-space: normal;
            overflow: hidden;
        }
        
        .word-lookup-container .definition-main {
            margin-bottom: 12px;
            display: flex;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .word-lookup-container .definition-example {
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(77, 171, 247, 0.1);
            border-left: 3px solid #4DABF7;
            border-radius: 0 6px 6px 0;
            font-size: 14px;  /* 保持14px，比解释文字的18px小 */
            color: #666;
            font-style: italic;
            line-height: 1.5;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            white-space: normal;
            overflow: hidden;
        }
        
        .word-lookup-container .definition-example::before {
            content: "例：";
            color: #4DABF7;
            font-weight: bold;
            margin-right: 6px;
        }
        .definition-header {
            font-size: 18px;
            font-weight: bold;
            color: #4DABF7;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .definition-loading {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }
        
        /* 响应式调整 - 字词查询模式 */
        @media (max-width: 768px) {
            .word-lookup-container .definition-text {
                font-size: 18px !important;  /* 小屏幕上保持18px，仍然比例句大 */
            }
            
            .word-lookup-container .definition-example {
                font-size: 13px;  /* 小屏幕上例句更小 */
                padding: 6px 10px;
            }
        }
        
        /* 记忆游戏 */
        
        /* 墨寶積分系統樣式 */
        
        /* 頂部狀態欄 */
        .moba-status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, #FF6B9D, #4DABF7);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .moba-player-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .moba-level {
            font-weight: bold;
            font-size: 16px;
        }
        
        .moba-points {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        .moba-progress-container {
            flex: 1;
            max-width: 200px;
            margin: 0 20px;
        }
        
        .moba-progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .moba-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFE66D, #51CF66);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .moba-streak {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        /* 通知樣式 */
        .points-notification,
        .level-up-notification,
        .achievement-notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            padding: 15px;
            z-index: 2000;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 300px;
        }
        
        .points-notification.show,
        .level-up-notification.show,
        .achievement-notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .points-notification.hide,
        .level-up-notification.hide,
        .achievement-notification.hide {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .points-notification {
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #FFE66D, #FF6B9D);
            color: white;
        }
        
        .points-icon {
            font-size: 24px;
        }
        
        .points-amount {
            font-weight: bold;
            font-size: 16px;
        }
        
        .points-desc {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .level-up-notification {
            background: linear-gradient(135deg, #4DABF7, #51CF66);
            color: white;
            text-align: center;
        }
        
        .level-up-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .level-up-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .level-up-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .old-level,
        .new-level {
            font-weight: bold;
            font-size: 16px;
        }
        
        .level-arrow {
            font-size: 14px;
        }
        
        .level-up-name {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .level-up-desc {
            font-size: 12px;
            opacity: 0.9;
        }
        
        /* 成就系統已移除 */
        
        .achievement-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .achievement-icon-large {
            font-size: 32px;
        }
        
        .achievement-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .achievement-name {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .achievement-desc {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 4px;
        }
        
        .achievement-points {
            font-size: 12px;
            font-weight: bold;
        }
        
        /* 頂部狀態欄樣式 */
        .top-status-bar {
            background: linear-gradient(135deg, #FF6B9D22, #4DABF722);
            border: 2px solid #FF6B9D44;
            border-radius: 15px;
            padding: 12px 20px;
            margin: 0 auto 20px auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.15);
            backdrop-filter: blur(10px);
            width: calc(100% - 40px);
            max-width: 1200px;
            position: relative;
            z-index: 10;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .level-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #FF6B9D, #FF8787);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(255, 107, 157, 0.3);
        }

        .level-number {
            font-size: 16px;
            font-weight: 900;
        }

        .level-name {
            font-size: 14px;
            font-weight: 600;
        }

        .points-display {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.9);
            padding: 6px 12px;
            border-radius: 15px;
            border: 2px solid #FFD43B;
            box-shadow: 0 2px 6px rgba(255, 212, 59, 0.2);
        }

        .points-icon {
            font-size: 16px;
        }

        .points-value {
            font-size: 16px;
            font-weight: bold;
            color: #FF6B9D;
        }

        .progress-section {
            flex: 1;
            max-width: 300px;
            margin: 0 20px;
        }

        .progress-bar-container {
            position: relative;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            border: 2px solid #4DABF7;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4DABF7, #51CF66);
            border-radius: 8px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: bold;
            color: #333;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }

        .streak-info {
            display: flex;
            align-items: center;
        }

        .streak-display {
            display: flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #FFD43B, #FFE66D);
            padding: 6px 12px;
            border-radius: 15px;
            border: 2px solid #FF8787;
            box-shadow: 0 2px 6px rgba(255, 212, 59, 0.2);
        }

        .streak-icon {
            font-size: 16px;
        }

        .streak-value {
            font-size: 16px;
            font-weight: bold;
            color: #E03131;
        }

        .streak-label {
            font-size: 12px;
            color: #E03131;
            font-weight: 600;
        }

        /* 通知動畫樣式 */
        .point-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, #51CF66, #40C057);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(81, 207, 102, 0.4);
            z-index: 1000;
            animation: slideInRight 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .level-up-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #FFD43B, #FFE66D);
            color: #E03131;
            padding: 20px 30px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 18px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(255, 212, 59, 0.5);
            z-index: 1001;
            animation: bounceIn 0.6s ease, fadeOut 0.5s ease 3s forwards;
            border: 3px solid #FF6B9D;
        }

        .achievement-notification {
            position: fixed;
            top: 150px;
            right: 20px;
            background: linear-gradient(135deg, #9775FA, #845EF7);
            color: white;
            padding: 15px 25px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 6px 20px rgba(151, 117, 250, 0.4);
            z-index: 1002;
            animation: slideInRight 0.5s ease, fadeOut 0.5s ease 4s forwards;
            max-width: 300px;
        }

        .achievement-notification .achievement-title {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .achievement-notification .achievement-desc {
            font-size: 12px;
            opacity: 0.9;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes bounceIn {
            0% {
                transform: translate(-50%, -50%) scale(0.3);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        /* 更新成就面板樣式 */
        .achievement-count {
            font-size: 12px;
            color: var(--light-text);
            margin-left: 8px;
        }

        .achievements-summary {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .recent-achievements {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .recent-achievement {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: linear-gradient(135deg, rgba(151, 117, 250, 0.1), rgba(255, 107, 157, 0.1));
            border-radius: 8px;
            border: 1px solid rgba(151, 117, 250, 0.2);
            animation: slideInRight 0.5s ease;
        }

        .recent-achievement-icon {
            font-size: 16px;
            width: 24px;
            text-align: center;
        }

        .recent-achievement-info {
            flex: 1;
        }

        .recent-achievement-name {
            font-size: 12px;
            font-weight: bold;
            color: var(--ink-color);
            margin-bottom: 2px;
        }

        .recent-achievement-desc {
            font-size: 10px;
            color: var(--light-text);
        }

        .recent-achievement-points {
            font-size: 11px;
            color: #9775FA;
            font-weight: bold;
        }

        .achievement-progress-overview {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .progress-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .progress-item:last-child {
            border-bottom: none;
        }

        .progress-label {
            font-size: 12px;
            color: var(--text);
        }

        .progress-value {
            font-size: 12px;
            font-weight: bold;
            color: var(--accent);
        }

        .btn-view-all {
            width: 100%;
            padding: 8px;
            font-size: 12px;
            text-align: center;
        }

        /* 成就模態窗口樣式 */
        .achievements-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .achievements-modal-content {
            background: var(--panel-bg);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
        }

        .achievements-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            border-bottom: 2px solid var(--border-color);
            background: linear-gradient(135deg, #FF6B9D22, #4DABF722);
        }

        .achievements-modal-header h3 {
            margin: 0;
            font-size: 18px;
            color: var(--ink-color);
            font-family: 'Noto Serif TC', serif;
        }

        .achievements-modal-count {
            font-size: 14px;
            color: var(--light-text);
        }
        .achievements-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--light-text);
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .achievements-modal-close:hover {
            background: rgba(255, 107, 157, 0.1);
            color: var(--accent);
        }

        .achievements-modal-body {
            padding: 20px;
            /* 移除高度限制和滾動條，允許模態框自適應 */
            /* max-height: 60vh; */
            /* overflow-y: auto; */
        }

        .achievements-modal-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .achievement-category {
            font-weight: bold;
            color: var(--ink-color);
            font-size: 14px;
            margin: 0 0 12px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-color);
        }

        .achievement-category:first-child {
            margin-top: 0;
        }
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .achievement {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background: rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
            min-height: 70px;
            max-height: 100px;
            position: relative;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .achievement:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, rgba(81, 207, 102, 0.1), rgba(255, 230, 109, 0.1));
            border-color: #51CF66;
            box-shadow: 0 2px 8px rgba(81, 207, 102, 0.2);
        }

        .achievement.unlocked:hover {
            box-shadow: 0 6px 16px rgba(81, 207, 102, 0.3);
        }

        .achievement.locked {
            opacity: 0.6;
            background: rgba(200, 200, 200, 0.1);
        }

        .achievement.locked:hover {
            opacity: 0.8;
        }

        .achievement-icon {
            font-size: 20px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .achievement.unlocked .achievement-icon {
            background: linear-gradient(135deg, #51CF66, #40C057);
            color: white;
            border-color: #51CF66;
        }

        .achievement-details {
            flex: 1;
            min-width: 0; /* 允許文字換行 */
        }

        .achievement-name {
            font-size: 14px;
            font-weight: bold;
            color: var(--ink-color);
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .achievement-description {
            font-size: 12px;
            color: var(--light-text);
            margin-bottom: 4px;
            line-height: 1.3;
            word-wrap: break-word;
        }

        .achievement-progress {
            font-size: 11px;
            color: var(--accent);
            font-weight: bold;
            background: rgba(77, 171, 247, 0.1);
            padding: 2px 6px;
            border-radius: 8px;
            display: inline-block;
        }

        .achievement-points {
            font-size: 12px;
            font-weight: bold;
            color: #9775FA;
            background: rgba(151, 117, 250, 0.1);
            padding: 4px 8px;
            border-radius: 12px;
            border: 1px solid rgba(151, 117, 250, 0.2);
        }

        /* 響應式設計 */
        @media (max-width: 1200px) {
            .achievement-grid {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
        }

        @media (max-width: 900px) {
            .achievement-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .achievements-modal-content {
                width: 95%;
                max-height: 85vh;
            }

            .achievements-modal-header {
                padding: 15px;
            }

            .achievements-modal-header h3 {
                font-size: 16px;
            }

            .achievements-modal-body {
                padding: 15px;
                max-height: 65vh;
            }

            .achievement-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            .achievement-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
        }
        
        @media (max-width: 480px) {
            .achievement {
                padding: 10px;
                gap: 10px;
                min-height: 60px;
            }

            .achievement-icon {
                width: 28px;
                height: 28px;
                font-size: 18px;
            }

            .achievement-name {
                font-size: 13px;
            }

            .achievement-description {
                font-size: 11px;
            }

            .achievement-points {
                font-size: 11px;
                padding: 3px 6px;
            }

            .recent-achievement {
                padding: 6px;
                gap: 6px;
            }

            .recent-achievement-icon {
                font-size: 14px;
                width: 20px;
            }

            .recent-achievement-name {
                font-size: 11px;
            }

            .recent-achievement-desc {
                font-size: 9px;
            }

            .recent-achievement-points {
                font-size: 10px;
            }

            .progress-item {
                padding: 3px 0;
            }

            .progress-label,
            .progress-value {
                font-size: 11px;
            }

            .btn-view-all {
                padding: 6px;
                font-size: 11px;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .achievement-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1025px) {
            .achievement-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }
        
        /* 調整主內容區域以適應頂部狀態欄 */
        .container {
            margin-top: 70px;
        }
        
        /* 響應式設計 - 墨寶積分系統 */
        @media (max-width: 768px) {
            .top-status-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
                width: calc(100% - 30px);
            }
            
            .player-info {
                gap: 10px;
            }
            
            .level-badge {
                padding: 4px 8px;
            }
            
            .level-number {
                font-size: 14px;
            }
            
            .level-name {
                font-size: 12px;
            }
            
            .points-display {
                padding: 4px 8px;
            }
            
            .points-value {
                font-size: 14px;
            }
            
            .progress-section {
                max-width: 200px;
                margin: 0;
            }
            
            .streak-display {
                padding: 4px 8px;
            }
            
            .streak-value {
                font-size: 14px;
            }
            
            .points-notification,
            .level-up-notification,
            .achievement-notification {
                right: 10px;
                max-width: 250px;
                padding: 12px;
            }
            /* 追加：行動端置中與滿寬調整，避免擠壓與錯位 */
            .player-info,
            .streak-info {
                width: 100%;
                display: flex;
                justify-content: center;
            }
            .progress-section {
                width: 100%;
                max-width: 100%;
                margin: 0;
            }
            .progress-bar {
                height: 16px;
            }
            .progress-text {
                font-size: 11px;
            }
            .character-search {
                width: 100%;
                box-sizing: border-box;
            }
            .character-input {
                min-width: 0;
            }
            .search-button {
                padding: 8px 12px;
                white-space: nowrap;
            }
            .word-search {
                gap: 8px;
            }
            .word-input {
                min-width: 0;
                max-width: none;
                flex: 1;
            }
        }

/* 漢字樹 綠色主題覆蓋 */
        :root {
            --primary: #2E7D32;          /* 深林綠 */
            --secondary: #43A047;        /* 鮮葉綠 */
            --accent: #A3E635;           /* 青檸綠 */
            --background: #F4FFF6;       /* 淺綠紙色 */
            --success: #43A047;          /* 成功綠 */
            --danger: #E53935;           /* 友善紅（保留） */
            --warning: #F59E0B;          /* 橙黃色（保留） */
            --text: #2D3436;             /* 深灰文字（保留） */
            --light-text: #5C6B60;       /* 柔和灰綠 */
            --ink-color: #1F2937;        /* 墨色（略深） */
            --border-color: #D7E8D3;     /* 柔和綠邊框 */
            --panel-bg: #FFFFFF;         /* 面板純白 */
            --ink-gradient: linear-gradient(135deg, #2E7D32 0%, #43A047 100%);
            --paper-gradient: linear-gradient(135deg, #F4FFF6 0%, #E8F5E9 100%);
            --accent-gradient: linear-gradient(135deg, #A3E635 0%, #86EFAC 100%);
            --success-gradient: linear-gradient(135deg, #43A047 0%, #2E7D32 100%);
            --info-gradient: linear-gradient(135deg, #34D399 0%, #10B981 100%);
        }

        /* 按鈕 */
        .btn-primary { background: var(--primary); color: #FFFFFF; border: 1px solid transparent; }
        .btn-primary:hover { background: #1B5E20; box-shadow: 0 8px 25px rgba(46, 125, 50, 0.3), 0 3px 8px rgba(46, 125, 50, 0.2); }
        .btn-secondary { background: #388E3C; color: #FFFFFF; border: 1px solid transparent; }
        .btn-secondary:hover { background: #2E7D32; box-shadow: 0 8px 25px rgba(56, 142, 60, 0.3), 0 3px 8px rgba(56, 142, 60, 0.2); }
        .btn-outline { background: rgba(163, 230, 53, 0.15); color: #2E7D32; border: 2px solid #A3E635; }
        .btn-outline:hover { background: #A3E635; border-color: #2E7D32; color: #0F172A; box-shadow: 0 8px 20px rgba(163, 230, 53, 0.35); }
        .btn-favorite { background: linear-gradient(135deg, #43A047 0%, #2E7D32 100%); }
        .btn-favorite:hover { background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%); box-shadow: 0 4px 12px rgba(46, 125, 50, 0.35); }
        .btn-favorite.favorited { background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%); }

        /* 頂部狀態欄與徽章 */
        .top-status-bar { background: linear-gradient(135deg, #E8F5E9AA, #D1FAE5AA); border: 2px solid #A7F3D0; box-shadow: 0 4px 12px rgba(46, 125, 50, 0.15); }
        .level-badge { background: linear-gradient(135deg, #2E7D32, #43A047); box-shadow: 0 2px 8px rgba(46, 125, 50, 0.3); }
        .points-display { border: 2px solid #A3E635; box-shadow: 0 2px 6px rgba(163, 230, 53, 0.2); }
        .points-value { color: #2E7D32; }

        /* 進度條 */
        .progress-bar { border: 2px solid #43A047; }
        .progress-fill { background: linear-gradient(90deg, #2E7D32, #A3E635); }

        /* 連續登入條 */
        .streak-display { background: linear-gradient(135deg, #A3E635, #86EFAC); border: 2px solid #43A047; box-shadow: 0 2px 6px rgba(67, 160, 71, 0.2); }
        .streak-value, .streak-label { color: #1B5E20; }

        /* 通知 */
        .level-up-notification { background: linear-gradient(135deg, #A3E635, #86EFAC); color: #1B5E20; border: 3px solid #2E7D32; box-shadow: 0 8px 25px rgba(67, 160, 71, 0.35); }
        .achievement-notification { background: linear-gradient(135deg, #2E7D32, #1B5E20); box-shadow: 0 6px 20px rgba(27, 94, 32, 0.4); }
        .recent-achievement { background: linear-gradient(135deg, rgba(46, 125, 50, 0.08), rgba(163, 230, 53, 0.12)); border: 1px solid rgba(46, 125, 50, 0.25); }
        .recent-achievement-points { color: #2E7D32; }

        /* 選項卡 */
        .tab-button.active { color: #2E7D32; border-bottom-color: #2E7D32; background: rgba(163, 230, 53, 0.15); }

        /* 卡片與懸浮陰影 */
        .game-card { border: 1px solid var(--border-color); }
        .game-card:hover { box-shadow: 0 6px 18px rgba(46, 125, 50, 0.15); }

#wordlist-selector-panel {
                        margin-bottom: 20px;
                        max-height: 600px;  /* 設置整個面板的最大高度 */
                        overflow-y: auto;   /* 當內容超過高度時，整個面板可以滾動 */
                        display: flex;
                        flex-direction: column;
                    }
                    
                    .wordlist-selector-content {
                        padding: 0;
                        flex: 1;
                        min-height: 0;  /* 確保可以正確收縮 */
                    }
                    
                    /* 層級選擇器容器 */
                    .wordlist-level-selectors {
                        padding: 15px;
                        padding-bottom: 10px;
                    }
                    
                    /* 單個層級 */
                    .wordlist-level {
                        margin-bottom: 16px;
                        animation: slideInLevel 0.3s ease-out;
                    }
                    
                    /* 層級標籤 */
                    .level-label {
                        display: flex;
                        align-items: center;
                        gap: 6px;
                        margin-bottom: 6px;
                        font-size: 13px;
                        color: var(--light-text);
                    }
                    
                    .level-number {
                        display: inline-flex;
                        align-items: center;
                        justify-content: center;
                        width: 20px;
                        height: 20px;
                        background: var(--primary);
                        color: white;
                        border-radius: 50%;
                        font-size: 11px;
                        font-weight: 600;
                    }
                    
                    .level-name {
                        font-weight: 500;
                    }
                    
                    /* 層級控制區 */
                    .level-controls {
                        display: flex;
                        gap: 6px;
                        align-items: center;
                    }
                    
                    .level-select {
                        flex: 1;
                        min-width: 0;
                        padding: 8px 10px;
                        border: 2px solid var(--border-color);
                        border-radius: 8px;
                        font-size: 14px;
                        font-family: 'Noto Sans TC', sans-serif;
                        background: white;
                        color: var(--text);
                        cursor: pointer;
                        transition: all 0.2s ease;
                    }
                    
                    .level-select:hover {
                        border-color: var(--primary);
                    }
                    
                    .level-select:focus {
                        outline: none;
                        border-color: var(--primary);
                        box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.15);
                    }
                    
                    .level-confirm-btn {
                        width: 35px;
                        height: 35px;
                        padding: 0;
                        background: linear-gradient(135deg, var(--primary), var(--secondary));
                        border: none;
                        border-radius: 8px;
                        color: white;
                        font-size: 18px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        flex-shrink: 0;
                    }
                    
                    .level-confirm-btn:hover {
                        transform: scale(1.05);
                        box-shadow: 0 4px 12px rgba(255, 107, 157, 0.4);
                    }
                    
                    .level-confirm-btn:active {
                        transform: scale(0.98);
                    }
                    
                    /* 字詞展開區域 */
                    .wordlist-display {
                        padding: 15px;
                        padding-top: 0;
                    }
                    
                    /* 字詞表田字格展示區域 */
                    .wordlist-items {
                        display: flex;
                        flex-wrap: wrap;
                        gap: 12px;
                        padding: 5px;
                        justify-content: flex-start;
                        align-items: flex-start;
                    }
                    
                    .wordlist-tianzige-display {
                        display: flex;
                        flex-wrap: wrap;
                        gap: 12px;
                        padding: 5px;
                        justify-content: flex-start;
                        align-items: flex-start;
                    }
                    
                    /* 詞語組容器（字詞查詢模式使用） */
                    .wordlist-word-group {
                        display: inline-flex;
                        gap: 2px;
                        cursor: pointer;
                        padding: 2px;
                        border-radius: 10px;
                        transition: all 0.2s ease;
                    }
                    
                    .wordlist-word-group:hover {
                        background: rgba(255, 107, 157, 0.08);
                        transform: translateY(-2px);
                        box-shadow: 0 4px 12px rgba(255, 107, 157, 0.2);
                    }
                    
                    /* 田字格按鈕（複用並調整） */
                    .wordlist-char-btn {
                        width: 45px;
                        height: 45px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 22px;
                        font-weight: bold;
                        font-family: 'Noto Serif TC', serif;
                        color: var(--ink-color);
                        background-color: white;
                        border: 2px solid var(--border-color);
                        border-radius: 8px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        position: relative;
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                        flex-shrink: 0;
                        background-image:
                            linear-gradient(
                                to right,
                                transparent calc(50% - 0.5px),
                                rgba(255, 107, 157, 0.22) calc(50% - 0.5px),
                                rgba(255, 107, 157, 0.22) calc(50% + 0.5px),
                                transparent calc(50% + 0.5px)
                            ),
                            linear-gradient(
                                to bottom,
                                transparent calc(50% - 0.5px),
                                rgba(255, 107, 157, 0.22) calc(50% - 0.5px),
                                rgba(255, 107, 157, 0.22) calc(50% + 0.5px),
                                transparent calc(50% + 0.5px)
                            );
                        background-repeat: no-repeat, no-repeat;
                        background-position: center, center;
                        background-size: 100% 100%, 100% 100%;
                    }
                    
                    /* 筆順模式：單字獨立點擊 */
                    .wordlist-char-btn.stroke-mode {
                        cursor: pointer;
                    }
                    
                    .wordlist-char-btn.stroke-mode:hover {
                        transform: translateY(-2px) scale(1.08);
                        border-color: var(--primary);
                        box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
                    }
                    
                    .wordlist-char-btn.stroke-mode:active {
                        transform: translateY(0) scale(1.02);
                    }
                    
                    /* 字詞模式：禁止單獨懸停效果（由詞組容器處理） */
                    .wordlist-char-btn.word-mode {
                        pointer-events: none;
                    }
                    
                    /* 詞組內最後一個字和第一個字的特殊處理 */
                    .wordlist-word-group .wordlist-char-btn:first-child {
                        border-top-right-radius: 4px;
                        border-bottom-right-radius: 4px;
                    }
                    
                    .wordlist-word-group .wordlist-char-btn:last-child {
                        border-top-left-radius: 4px;
                        border-bottom-left-radius: 4px;
                    }
                    
                    .wordlist-word-group .wordlist-char-btn:only-child {
                        border-radius: 8px;
                    }
                    
                    
                    /* 動畫 */
                    @keyframes slideInLevel {
                        from { opacity: 0; transform: translateY(-10px); }
                        to { opacity: 1; transform: translateY(0); }
                    }

.wordlist-input {
                        width: 100%;
                        padding: 10px 12px;
                        border: 2px solid var(--border-color);
                        border-radius: 10px;
                        font-size: 14px;
                        font-family: 'Noto Sans TC', sans-serif;
                        transition: all 0.3s ease;
                    }
                    
                    .wordlist-input:focus {
                        outline: none;
                        border-color: var(--primary);
                        box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.2);
                    }
                    
                    .wordlist-textarea {
                        width: 100%;
                        padding: 10px 12px;
                        border: 2px solid var(--border-color);
                        border-radius: 10px;
                        font-size: 14px;
                        font-family: 'Noto Sans TC', sans-serif;
                        resize: vertical;
                        min-height: 120px;
                        line-height: 1.6;
                        transition: all 0.3s ease;
                    }
                    
                    .wordlist-textarea:focus {
                        outline: none;
                        border-color: var(--primary);
                        box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.2);
                    }

/* 固定高度，無滾動 */
                    #hanzi-tree-panel .hanzi-tree-cloud { height: 380px; position: relative; border-radius: 12px; background: linear-gradient(180deg, rgba(163, 230, 53, 0.10), rgba(163, 230, 53, 0.04)); overflow: hidden; }
                    #hanzi-tree-panel canvas { position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 2; }
                    #hanzi-tree-panel canvas.trunk-canvas { z-index: 1; }
                    #hanzi-tree-panel .hanzi-tree-decor { position: absolute; inset: 0; z-index: 0; }
                    /* 陽光 */
                    #hanzi-tree-panel .decor-sun { position: absolute; right: 16px; top: 14px; width: 56px; height: 56px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #FFE66D 0%, #FFB366 70%); box-shadow: 0 0 22px rgba(255, 230, 109, 0.65); opacity: 0.95; }
                    /* 雲朵 */
                    #hanzi-tree-panel .decor-cloud { position: absolute; background: #FFFFFF; box-shadow: 0 6px 18px rgba(0,0,0,0.06); border-radius: 50px; opacity: 0.9; }
                    #hanzi-tree-panel .cloud-1 { left: 14px; top: 20px; width: 80px; height: 26px; }
                    #hanzi-tree-panel .cloud-2 { left: 120px; top: 46px; width: 110px; height: 30px; }
                    #hanzi-tree-panel .cloud-3 { right: 100px; top: 70px; width: 90px; height: 28px; }
                    /* 平坦土地（佔用較少高度） */
                    #hanzi-tree-panel .decor-ground { position: absolute; left: 0; right: 0; bottom: 0; height: 14%; background: linear-gradient(180deg, rgba(76, 175, 80, 0.9), rgba(56, 142, 60, 1)); border-top-left-radius: 12px; border-top-right-radius: 12px; }
                    /* 樹幹：落在土地上 */
                    /* 以SVG樹幹替代矩形樹幹 */
                    #hanzi-tree-panel .decor-trunk { display: none; }
                    /* 小螢幕高度略小 */
                    @media (max-width: 768px) {
                        #hanzi-tree-panel .hanzi-tree-cloud { height: 300px; }
                        #hanzi-tree-panel .decor-sun { width: 44px; height: 44px; }
                    }
                    /* 提示氣泡 */
                    .hanzi-tree-tooltip { position: fixed; z-index: 9999; background: rgba(0,0,0,0.8); color: #fff; padding: 6px 10px; border-radius: 8px; font-size: 12px; pointer-events: none; transform: translate(-50%, -120%); white-space: nowrap; }

                    /* 放大模態版本：與側邊一致的自然場景與層級 */
                    #hanzi-tree-modal .hanzi-tree-cloud-large { position: absolute; inset: 0; border-radius: 12px; background: linear-gradient(180deg, rgba(163, 230, 53, 0.10), rgba(163, 230, 53, 0.04)); overflow: hidden; }
                    #hanzi-tree-modal canvas { position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 2; }
                    #hanzi-tree-modal canvas.trunk-canvas { z-index: 1; }
                    #hanzi-tree-modal .hanzi-tree-decor { position: absolute; inset: 0; z-index: 0; }
                    #hanzi-tree-modal .decor-sun { position: absolute; right: 16px; top: 14px; width: 64px; height: 64px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #FFE66D 0%, #FFB366 70%); box-shadow: 0 0 24px rgba(255, 230, 109, 0.65); opacity: 0.95; }
                    #hanzi-tree-modal .decor-cloud { position: absolute; background: #FFFFFF; box-shadow: 0 8px 18px rgba(0,0,0,0.06); border-radius: 50px; opacity: 0.9; }
                    #hanzi-tree-modal .cloud-1 { left: 20px; top: 24px; width: 120px; height: 36px; }
                    #hanzi-tree-modal .cloud-2 { left: 160px; top: 60px; width: 160px; height: 42px; }
                    #hanzi-tree-modal .cloud-3 { right: 140px; top: 90px; width: 130px; height: 36px; }
                    #hanzi-tree-modal .decor-ground { position: absolute; left: 0; right: 0; bottom: 0; height: 14%; background: linear-gradient(180deg, rgba(76, 175, 80, 0.9), rgba(56, 142, 60, 1)); border-top-left-radius: 12px; border-top-right-radius: 12px; }
                    /* 以SVG樹幹替代矩形樹幹 */
                    #hanzi-tree-modal .decor-trunk { display: none; }