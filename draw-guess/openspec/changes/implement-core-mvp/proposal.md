# Change Proposal: implement-core-mvp

## Summary
實現「你畫我猜」的核心 MVP 版本，建立完整的遊戲循環：房間創建、繪畫、猜詞、計分、實時同步。本提案聚焦核心可玩系統，確保遊戲循環完整且支持中文詞彙。

## Why
本變更是「你畫我猜」項目的第一個實現階段，旨在建立核心可玩系統。通過實現 MVP 版本，我們可以：
- 驗證核心遊戲機制（繪畫、猜詞、實時同步）的可行性
- 建立技術架構基礎（Supabase、Canvas、Realtime）
- 為後續功能（詞庫系統、分數累積、社交功能）奠定基礎
- 快速交付可用的產品，供用戶測試和反饋

## Motivation
- **核心教育目標**：通過繪畫和猜測，幫助學生掌握概念名詞和詩句
- **支持中文**：專為中文詞彙、概念、詩句設計的繪畫猜詞遊戲
- **實時多人**：支持多人同時參與，增強互動和學習效果
- **技術現代化**：使用 Vue 3 + Vite + Pinia，提供更好的開發體驗和代碼組織
- **極簡 UI**：低調配色，突出畫作和文字

## Scope
Included:
- **用戶系統**：匿名遊玩 + Google OAuth 登入
- **房間系統**：創建房間、加入房間、離開房間、房間狀態管理
- **繪畫系統**：Canvas 繪圖、畫筆工具、橡皮擦、清空、實時同步
- **猜詞系統**：輸入猜測、匹配判斷、提示顯示
- **計分系統**：猜中得分、繪畫得分、獲勝獎勵
- **實時同步**：房間狀態同步、繪畫數據同步、猜詞結果同步
- **基礎 UI**：房間列表、創建房間界面、遊戲界面、等待大廳

Excluded:
- 詞庫系統（系統詞庫管理、詞庫選擇器）- 階段 2
- 分數累積系統（個人統計、成就、排行榜）- 階段 3
- 好友系統 - 階段 4
- 詞彙掌握度系統 - 階段 4
- 每日挑戰 - 階段 4
- 移動端優化（觸摸繪畫）- 階段 4

## Non-Goals
- 不引入其他前端框架（僅使用 Vue 3）
- 不引入複雜的狀態管理庫（僅使用 Pinia）
- 不實現詞庫管理功能（僅支持自定義詞語輸入）
- 不實現分數累積和成就系統
- 不實現好友系統
- 不實現複雜的動畫效果（保持極簡，適量的優雅動畫）

## Success Criteria
- 用戶可以匿名遊玩或登入遊玩
- 用戶可以創建房間並生成 6 位房間碼
- 用戶可以通過房間碼加入房間
- 玩家可以輪流繪畫，其他人實時看到畫作
- 玩家可以輸入猜測，系統正確匹配詞語
- 分數正確計算（猜中順序、繪畫得分）
- 實時同步正常工作（房間狀態、繪畫、猜詞）
- UI 極簡且低調，突出畫作和文字

## Risks & Mitigations
- **風險**：繪畫實時同步可能延遲或數據量大  
  **緩解**：使用節流和數據壓縮，優化傳輸效率
- **風險**：Supabase Realtime 連接可能不穩定  
  **緩解**：實現連接重試機制和降級方案
- **風險**：Canvas 繪畫在移動端體驗不佳  
  **緩解**：MVP 階段專注桌面端，移動端優化放在後續階段
- **風險**：詞語匹配可能不夠智能（繁體/簡體、同義詞）  
  **緩解**：MVP 階段使用精確匹配，後續可優化

## Dependencies
- 參考文件：`docs/DEVELOPMENT_PLAN.md`（主要設計文檔）
- Supabase 項目：需要創建獨立的 Supabase 項目
- Supabase 認證：需要配置 Google OAuth

## Spec Map
本變更拆分為以下能力規範：

1. **user-system** - 用戶系統
   - 匿名遊玩模式
   - Google OAuth 登入
   - 用戶資料管理
   - UUID 主鍵 + 多重身份系統

2. **room-system** - 房間系統
   - 房間創建（生成 6 位房間碼）
   - 房間加入（通過房間碼）
   - 房間狀態管理（waiting, playing, finished）
   - 玩家列表管理

3. **drawing-system** - 繪畫系統
   - Canvas 繪圖（支持鼠標和觸摸）
   - 畫筆工具（顏色、粗細）
   - 橡皮擦、清空功能
   - 繪畫數據序列化
   - 實時同步（節流、壓縮）

4. **guessing-system** - 猜詞系統
   - 詞語輸入（支持中文）
   - 匹配判斷（精確匹配）
   - 提示顯示（可選）
   - 已猜中玩家列表

5. **scoring-system** - 計分系統
   - 猜中得分計算（根據順序：100%, 80%, 60%...）
   - 繪畫得分計算（根據猜中玩家數量）
   - 獲勝獎勵
   - 分數顯示

6. **realtime-sync** - 實時同步
   - 房間狀態同步（Supabase Realtime Channels）
   - 繪畫數據同步（broadcast 消息）
   - 猜詞結果同步（postgres_changes）
   - 連接管理和重試

7. **core-ui** - 核心 UI
   - 房間列表界面
   - 創建房間界面
   - 遊戲界面（畫布、工具欄、猜詞區）
   - 等待大廳
   - 極簡設計、低調配色

