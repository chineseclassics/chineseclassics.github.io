# Room System

## Requirements

### Requirement: 房間創建
系統 SHALL 允許用戶創建遊戲房間。

#### Scenario: 創建房間流程
- 用戶輸入房間名稱
- 用戶輸入自定義詞語（至少 6 個，最多 600 字符）
- 用戶設置遊戲參數（繪畫時間、輪數、提示數量）
- 系統生成 6 位數字房間碼（唯一）
- 系統創建房間記錄（插入 `game_rooms` 表）
- 系統返回房間信息（房間碼、房間 ID）

#### Scenario: 房間碼生成
- 房間碼為 6 位數字（000000-999999）
- 房間碼必須唯一（檢查數據庫）
- 如果重複，重新生成

#### Scenario: 房間設置驗證
- 房間名稱：1-50 個字符
- 詞語列表：至少 6 個詞語
- 每個詞語：1-32 個字符
- 總字符數：最多 600 個字符
- 繪畫時間：60-180 秒
- 輪數：3-10 輪（不能超過詞語總數）

### Requirement: 房間加入
系統 SHALL 允許用戶通過房間碼加入房間。

#### Scenario: 加入房間流程
- 用戶輸入 6 位房間碼
- 用戶輸入暱稱（1-20 個字符）
- 系統驗證房間碼是否存在
- 系統檢查房間狀態（只能加入 waiting 狀態的房間）
- 系統檢查房間人數（不能超過最大人數）
- 系統創建參與記錄（插入 `room_participants` 表）
- 用戶進入等待大廳

#### Scenario: 加入房間驗證
- 房間碼必須存在
- 房間狀態必須是 'waiting'
- 房間人數未達上限
- 暱稱不能為空

### Requirement: 房間狀態管理
系統 SHALL 管理房間的狀態轉換。

#### Scenario: 房間狀態
- 'waiting'：等待中，玩家可以加入
- 'playing'：遊戲進行中，玩家不能加入
- 'finished'：遊戲結束，房間關閉

#### Scenario: 狀態轉換
- waiting → playing：房主點擊「開始遊戲」
- playing → finished：所有輪次完成
- finished：房間不再接受新玩家

### Requirement: 玩家列表管理
系統 SHALL 管理房間內的玩家列表。

#### Scenario: 玩家列表顯示
- 顯示所有已加入的玩家
- 顯示玩家暱稱、頭像（如有）
- 標記房主（顯示特殊標識）
- 顯示玩家準備狀態（如有）

#### Scenario: 玩家離開
- 玩家可以主動離開房間
- 玩家離開時，刪除參與記錄
- 如果房主離開，房間關閉或轉移房主權限
- 如果遊戲進行中，玩家離開不影響遊戲

### Requirement: 房間列表界面
系統 SHALL 提供房間列表界面。

#### Scenario: 房間列表顯示
- 顯示所有公開房間（可選功能，MVP 階段可簡化）
- 顯示房間名稱、玩家數量、狀態
- 提供「創建房間」按鈕
- 提供「加入房間」按鈕（輸入房間碼）

#### Scenario: 房間列表 UI
- 極簡設計，低調配色
- 房間卡片設計（細線條邊框）
- 清晰的狀態標識

