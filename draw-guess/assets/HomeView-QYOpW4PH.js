import{d as D,u as Q,c as n,a as h,b as o,e,t as u,o as l,_ as F,r as x,f as E,g as de,h as be,w as q,i as S,v as z,n as I,j as oe,k as fe,F as ae,l as ne,m as P,p as A,q as ye,s as we}from"./index-Ba2nALym.js";import{u as K,a as $e,I as le,W as ke}from"./WaitingLobby-K0eLGlXb.js";import{u as re}from"./useWordLibrary-D9nEPAkD.js";const xe={class:"user-auth"},Ce={key:0},Re=["disabled"],Se={key:1},Me={class:"user-info-card border margin-bottom-small"},Ve={class:"row flex-middle margin-bottom-small"},We={class:"col-8"},Ae={class:"row flex-middle"},Le={class:"col-auto"},Te=["src","alt"],Ee={key:1,class:"user-avatar border user-avatar-placeholder"},He={class:"col"},Ue={class:"text-hand user-name"},ze={class:"text-small user-status"},Ge={class:"col-4 text-right"},je=["disabled"],qe={key:0,class:"user-stats-inline"},De={class:"stats-row"},Fe={class:"stat-item"},Ne={class:"stat-value"},Oe={key:2,class:"alert alert-danger margin-top-small"},Je=D({__name:"UserAuth",setup(N){const d=Q();async function v(){const b=await d.signInWithGoogle();b&&!b.success&&console.error("Google ç™»å…¥å¤±æ•—:",b.error)}async function M(){const b=await d.signOut();b.success||console.error("ç™»å‡ºå¤±æ•—:",b.error)}function C(b){return b.toLocaleString("zh-TW")}return(b,_)=>(l(),n("div",xe,[o(d).isAuthenticated?(l(),n("div",Se,[e("div",Me,[e("div",Ve,[e("div",We,[e("div",Ae,[e("div",Le,[o(d).profile?.avatar_url?(l(),n("img",{key:0,src:o(d).profile.avatar_url,alt:o(d).profile.display_name,class:"user-avatar border"},null,8,Te)):(l(),n("div",Ee,u(o(d).profile?.display_name?.charAt(0)||"?"),1))]),e("div",He,[e("div",Ue,u(o(d).profile?.display_name||"ç”¨æˆ¶"),1),e("div",ze,u(o(d).isAnonymous?"åŒ¿åéŠç©":"å·²ç™»å…¥"),1)])])]),e("div",Ge,[e("button",{onClick:M,disabled:o(d).loading,class:"paper-btn btn-small"},u(o(d).loading?"è™•ç†ä¸­...":"ç™»å‡º"),9,je)])]),o(d).isRegistered&&o(d).profile?(l(),n("div",qe,[e("div",De,[e("div",Fe,[_[0]||(_[0]=e("span",{class:"stat-label"},"ç¸½ç©åˆ†",-1)),e("span",Ne,u(C(o(d).profile.total_score||0)),1)])]),_[1]||(_[1]=e("div",{class:"gamification-placeholder margin-top-small"},null,-1))])):h("",!0)])])):(l(),n("div",Ce,[h("",!0),e("button",{onClick:v,disabled:o(d).loading,class:"paper-btn btn-primary btn-block"},u(o(d).loading?"è™•ç†ä¸­...":"Google ç™»å…¥"),9,Re)])),o(d).error?(l(),n("div",Oe,u(o(d).error),1)):h("",!0)]))}}),ie=F(Je,[["__scopeId","data-v-7ac95212"]]),Be={class:"room-create"},Ie={class:"card"},Pe={class:"card-body"},Qe={class:"form-group room-theme-group"},Ke={class:"form-group game-mode-group"},Xe={class:"game-mode-options"},Ye={key:0,class:"form-group single-round-group"},Ze={class:"checkbox-label"},et={key:1,class:"form-group"},tt={key:0,class:"text-small text-secondary"},st={key:1,class:"word-library-dropdown"},ot={class:"dropdown-wrapper"},at={class:"dropdown-text"},nt={class:"dropdown-arrow"},lt={key:0,class:"dropdown-menu"},it=["onClick"],dt={class:"dropdown-item-content"},rt={class:"dropdown-item-main"},ut={class:"dropdown-item-title"},ct={class:"dropdown-item-desc"},mt={class:"dropdown-item-count"},vt=["onClick","disabled"],pt={key:0,class:"collection-detail-panel"},_t={class:"detail-header"},gt={class:"detail-title-section"},ht={class:"detail-title"},bt={class:"detail-desc"},ft={class:"detail-count"},yt={class:"detail-entries"},wt={key:0,class:"text-small text-secondary text-center"},$t={key:1,class:"text-small text-secondary text-center"},kt={key:2,class:"entries-list"},xt={class:"entry-checkbox"},Ct=["checked","onChange"],Rt={class:"entry-text"},St={key:0,class:"entry-category"},Mt={class:"detail-actions"},Vt=["disabled"],Wt=["disabled"],At={key:1,class:"text-small info-hint margin-top-small"},Lt={key:2,class:"form-group words-input-group"},Tt={class:"words-stats"},Et={class:"text-small"},Ht={key:0,class:"text-small",style:{color:"#e8590c"}},Ut={key:3,class:"storyboard-info"},zt={class:"margin-top-medium game-settings-section"},Gt={class:"form-group"},jt={key:4,class:"alert alert-danger margin-top-small"},qt={class:"row flex-spaces submit-buttons-section"},Dt=["disabled"],Ft=D({__name:"RoomCreate",emits:["cancel","created"],setup(N,{emit:d}){const v=d,{createRoom:M,loading:C}=K(),{collections:b,entriesMap:_,loadingCollections:r,loadingEntries:H,loadCollections:V,loadEntries:y}=re(),i=x({name:"",wordsText:"",settings:{draw_time:60,rounds:0,word_count_per_round:1,hints_count:2},gameMode:"classic",singleRoundMode:!1}),c=x(null),w=x(null),f=x(!1),p=x(null),$=x({}),W=x(new Set);function O(a){return a.split(/[ï¼Œ,\n]/).map(t=>t.trim()).filter(t=>t.length>0)}function g(){c.value=null}const m=E(()=>O(i.value.wordsText)),k=E(()=>{const a=new Set,t=[];for(const s of m.value)a.has(s)||(a.add(s),t.push(s));return t}),L=E(()=>k.value.length),G=E(()=>i.value.wordsText.length),X=E(()=>{const a=i.value.name.trim().length>0&&i.value.name.length<=50;return i.value.gameMode==="storyboard"?a:a&&L.value>=6&&G.value<=600&&k.value.every(t=>t.length>=1&&t.length<=32)});function Y(){const a=new Set(k.value);W.value=new Set([...W.value].filter(t=>a.has(t)))}function ue(a,t){return $.value[a]?.has(t)??!1}function ce(a,t){const s=$.value[a]||new Set;s.has(t)?s.delete(t):s.add(t),$.value={...$.value,[a]:s}}function Z(a){return($.value[a]?.size||0)>0}function j(a){if($.value[a]){const t={...$.value};delete t[a],$.value=t}}function ee(a){const t=a.map(U=>U.trim()).filter(Boolean),s=k.value,R=new Set(s),T=[...s];let J=0,B=0;t.forEach(U=>{R.has(U)?B++:(R.add(U),T.push(U),J++)}),i.value.wordsText=T.join(`
`),W.value=new Set([...W.value,...t]),Y(),B>0?w.value=`å·²åŠ å…¥ ${J} å€‹è©æ¢ï¼Œè·³é ${B} å€‹é‡è¤‡è©æ¢`:w.value=`å·²åŠ å…¥ ${J} å€‹è©æ¢`}function me(){f.value=!f.value,f.value}async function ve(a){const t=b.value.find(s=>s.id===a);t&&(p.value={id:t.id,title:t.title,description:t.description,entry_count:t.entry_count},f.value=!1,await y(a))}async function pe(a){f.value=!1,await te(a)}function _e(){const a=p.value?.id;a&&j(a),p.value=null}async function ge(a){const t=_.value[a]||await y(a),s=$.value[a];if(!s||s.size===0)return;const R=t?.filter(T=>s.has(T.id)).map(T=>T.text)||[];ee(R),j(a),p.value=null}async function te(a){const s=(_.value[a]||await y(a)||[]).map(R=>R.text);ee(s),j(a),p.value=null}function se(a){!a.target.closest(".word-library-dropdown")&&f.value&&(f.value=!1)}de(()=>{V(),document.addEventListener("click",se)}),be(()=>{document.removeEventListener("click",se)});async function he(){if(!X.value){c.value="è«‹æª¢æŸ¥è¡¨å–®è¼¸å…¥";return}c.value=null,Y();try{const a=i.value.gameMode==="storyboard"?[]:k.value.map(s=>({text:s,source:W.value.has(s)?"wordlist":"custom"})),t=await M({name:i.value.name.trim(),words:a,settings:i.value.settings,gameMode:i.value.gameMode,singleRoundMode:i.value.singleRoundMode});t.success&&t.room?v("created",t.room.code):(c.value=t.error||"å‰µå»ºæˆ¿é–“å¤±æ•—",console.error("å‰µå»ºæˆ¿é–“å¤±æ•—:",t.error))}catch(a){c.value=a instanceof Error?a.message:"å‰µå»ºæˆ¿é–“æ™‚ç™¼ç”ŸéŒ¯èª¤",console.error("å‰µå»ºæˆ¿é–“ç•°å¸¸:",a)}}return(a,t)=>(l(),n("div",Be,[e("div",Ie,[e("div",Pe,[t[21]||(t[21]=e("h2",{class:"card-title text-hand-title"},"å‰µå»ºæˆ¿é–“",-1)),e("form",{onSubmit:q(he,["prevent"])},[e("div",Qe,[t[10]||(t[10]=e("label",null,"æˆ¿é–“ä¸»é¡Œ",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.name=s),type:"text",placeholder:"è¼¸å…¥æˆ¿é–“ä¸»é¡Œï¼ˆä¾‹å¦‚ï¼šå¤ä»£ä½œå®¶ã€ç´…æ¨“å¤¢ç­‰ï¼‰",maxlength:"50",required:"",class:"room-theme-input"},null,512),[[z,i.value.name]])]),e("div",Ke,[t[13]||(t[13]=e("label",null,"éŠæˆ²æ¨¡å¼",-1)),e("div",Xe,[e("label",{class:I(["game-mode-option",{active:i.value.gameMode==="classic"}])},[S(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=s=>i.value.gameMode=s),value:"classic",name:"gameMode"},null,512),[[oe,i.value.gameMode]]),t[11]||(t[11]=e("div",{class:"mode-content"},[e("span",{class:"mode-icon"},"ğŸ¨"),e("span",{class:"mode-name"},"å‚³çµ±æ¨¡å¼"),e("span",{class:"mode-desc"},"çŒœè©ç«¶æŠ€ï¼ŒçŒœå°å¾—åˆ†")],-1))],2),e("label",{class:I(["game-mode-option",{active:i.value.gameMode==="storyboard"}])},[S(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=s=>i.value.gameMode=s),value:"storyboard",name:"gameMode"},null,512),[[oe,i.value.gameMode]]),t[12]||(t[12]=e("div",{class:"mode-content"},[e("span",{class:"mode-icon"},"ğŸ“–"),e("span",{class:"mode-name"},"åˆ†é¡æ¥é¾"),e("span",{class:"mode-desc"},"åˆä½œå‰µä½œæ•…äº‹æ¼«ç•«")],-1))],2)])]),i.value.gameMode==="storyboard"?(l(),n("div",Ye,[e("label",Ze,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>i.value.singleRoundMode=s)},null,512),[[fe,i.value.singleRoundMode]]),t[14]||(t[14]=e("span",{class:"checkbox-text"},"å–®å±€æ¨¡å¼",-1)),t[15]||(t[15]=e("span",{class:"checkbox-hint"},"ï¼ˆå‹¾é¸å¾ŒéŠæˆ²åªé€²è¡Œä¸€å±€å³çµæŸï¼‰",-1))])])):h("",!0),i.value.gameMode==="classic"?(l(),n("div",et,[t[16]||(t[16]=e("label",{class:"library-label"},"ä¸»é¡Œè©å¥åº«",-1)),o(r)?(l(),n("div",tt,"è©å¥åº«è¼‰å…¥ä¸­...")):(l(),n("div",st,[e("div",ot,[e("div",{class:I(["dropdown-trigger",{"dropdown-open":f.value}]),onClick:me},[e("span",at,u(p.value?p.value.title:"é¸æ“‡ä¸»é¡Œæˆ–ä¸€éµåŠ å…¥..."),1),e("span",nt,u(f.value?"â–²":"â–¼"),1)],2),f.value?(l(),n("div",lt,[(l(!0),n(ae,null,ne(o(b),s=>(l(),n("div",{key:s.id,class:"dropdown-item",onClick:q(R=>ve(s.id),["stop"])},[e("div",dt,[e("div",rt,[e("div",ut,u(s.title),1),e("div",ct,u(s.description),1),e("div",mt,u(s.entry_count)+" æ¢",1)]),e("button",{type:"button",class:"paper-btn btn-primary btn-small dropdown-quick-add",onClick:q(R=>pe(s.id),["stop"]),disabled:s.entry_count===0}," ä¸€éµåŠ å…¥ ",8,vt)])],8,it))),128))])):h("",!0)]),p.value&&!f.value?(l(),n("div",pt,[e("div",_t,[e("div",gt,[e("h4",ht,"ğŸ“š "+u(p.value.title),1),e("p",bt,u(p.value.description),1),e("span",ft,"å…± "+u(p.value.entry_count)+" æ¢",1)]),e("button",{type:"button",class:"paper-btn btn-small",onClick:_e}," é—œé–‰ ")]),e("div",yt,[o(H)[p.value.id]?(l(),n("div",wt," è©æ¢è¼‰å…¥ä¸­... ")):(o(_)[p.value.id]||[]).length===0?(l(),n("div",$t," è©²ä¸»é¡Œæš«ç„¡è©æ¢ ")):(l(),n("div",kt,[(l(!0),n(ae,null,ne(o(_)[p.value.id]||[],s=>(l(),n("div",{key:s.id,class:"entry-item"},[e("label",xt,[e("input",{type:"checkbox",checked:ue(p.value.id,s.id),onChange:R=>ce(p.value.id,s.id)},null,40,Ct),e("span",Rt,u(s.text),1),s.category?(l(),n("span",St,"("+u(s.category)+")",1)):h("",!0)])]))),128))]))]),e("div",Mt,[e("button",{type:"button",class:"paper-btn btn-primary btn-small",disabled:!Z(p.value.id),onClick:t[4]||(t[4]=s=>ge(p.value.id))}," åŠ å…¥å·²å‹¾é¸ ",8,Vt),e("button",{type:"button",class:"paper-btn btn-secondary btn-small",onClick:t[5]||(t[5]=s=>te(p.value.id)),disabled:p.value.entry_count===0}," å…¨éƒ¨åŠ å…¥ ",8,Wt),Z(p.value.id)?(l(),n("button",{key:0,type:"button",class:"paper-btn btn-link btn-small",onClick:t[6]||(t[6]=s=>j(p.value.id))}," æ¸…é™¤ ")):h("",!0)])])):h("",!0),w.value?(l(),n("div",At,u(w.value),1)):h("",!0)]))])):h("",!0),i.value.gameMode==="classic"?(l(),n("div",Lt,[t[17]||(t[17]=e("label",null,"è‡ªå®šç¾©è©èªï¼ˆè‡³å°‘ 6 å€‹ï¼Œæ¯å€‹ 1-32 å­—ç¬¦ï¼Œæœ€å¤š 600 å­—ç¬¦ï¼‰",-1)),S(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.wordsText=s),rows:"6",placeholder:`è¼¸å…¥è©èªï¼Œç”¨é€—è™Ÿï¼ˆï¼Œæˆ–,ï¼‰æˆ–æ›è¡Œåˆ†éš”
ä¾‹å¦‚ï¼šæ˜¥å¤©ï¼Œå‹èª¼ï¼Œå‹‡æ°£`,onInput:g,class:"words-textarea"},null,544),[[z,i.value.wordsText]]),e("div",Tt,[e("div",Et," å·²è¼¸å…¥ "+u(L.value)+" å€‹è©èªï¼Œ"+u(G.value)+" / 600 å­—ç¬¦ ",1),L.value<6?(l(),n("div",Ht," é‚„éœ€è¦ "+u(6-L.value)+" å€‹è©èª ",1)):h("",!0)])])):h("",!0),i.value.gameMode==="storyboard"?(l(),n("div",Ut,[...t[18]||(t[18]=[e("div",{class:"info-card"},[e("h4",null,"ğŸ“– åˆ†é¡æ¥é¾æ¨¡å¼èªªæ˜"),e("ul",null,[e("li",null,"ğŸ¨ ç•«å®¶æ ¹æ“šä¸Šä¸€è¼ªå‹å‡ºå¥å­ç¹ªç•«"),e("li",null,"âœï¸ ç·¨åŠ‡æ ¹æ“šç•«ä½œå‰µä½œä¸‹ä¸€å¥æ•…äº‹"),e("li",null,"ğŸ—³ï¸ æ‰€æœ‰ç©å®¶æŠ•ç¥¨é¸å‡ºæœ€ä½³å¥å­"),e("li",null,"ğŸ“š æœ€çµ‚ç”¢å‡ºä¸€å€‹åœ–æ–‡äº¤æ›¿çš„æ•…äº‹æ¼«ç•«")]),e("p",{class:"info-note"},"âš ï¸ åˆ†é¡æ¨¡å¼éœ€è¦è‡³å°‘ 3 ä½ç©å®¶")],-1)])])):h("",!0),e("div",zt,[t[20]||(t[20]=e("h4",{class:"text-hand-title"},"éŠæˆ²è¨­ç½®",-1)),e("div",Gt,[t[19]||(t[19]=e("label",null,"ç¹ªç•«æ™‚é–“ï¼ˆç§’ï¼‰",-1)),S(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>i.value.settings.draw_time=s),type:"number",min:"60",max:"180",required:""},null,512),[[z,i.value.settings.draw_time,void 0,{number:!0}]])])]),c.value?(l(),n("div",jt,u(c.value),1)):h("",!0),e("div",qt,[e("button",{type:"submit",disabled:o(C)||!X.value,class:"paper-btn btn-primary"},u(o(C)?"å‰µå»ºä¸­...":"å‰µå»ºæˆ¿é–“"),9,Dt),e("button",{type:"button",onClick:t[9]||(t[9]=s=>a.$emit("cancel")),class:"paper-btn btn-secondary"}," å–æ¶ˆ ")])],32)])])]))}}),Nt=F(Ft,[["__scopeId","data-v-58b0d681"]]),Ot={class:"room-join"},Jt={class:"card"},Bt={class:"card-body"},It={class:"form-group"},Pt={class:"form-group"},Qt={key:0,class:"alert alert-danger"},Kt={class:"row flex-spaces margin-top-medium"},Xt=["disabled"],Yt=D({__name:"RoomJoin",emits:["cancel","joined"],setup(N,{emit:d}){const v=d,{joinRoom:M,loading:C}=K(),b=Q(),_=x({code:"",nickname:b.profile?.display_name||""}),r=x(null);function H(i){const c=i.target;_.value.code=c.value.replace(/\D/g,"").slice(0,6),r.value=null}const V=E(()=>_.value.code.length===6&&_.value.nickname.trim().length>0&&_.value.nickname.length<=20);async function y(){if(!V.value){r.value="è«‹æª¢æŸ¥è¡¨å–®è¼¸å…¥";return}r.value=null;const i=await M(_.value.code,_.value.nickname.trim());i.success?v("joined"):r.value=i.error||"åŠ å…¥æˆ¿é–“å¤±æ•—"}return(i,c)=>(l(),n("div",Ot,[e("div",Jt,[e("div",Bt,[c[6]||(c[6]=e("h2",{class:"card-title text-hand-title"},"åŠ å…¥æˆ¿é–“",-1)),e("form",{onSubmit:q(y,["prevent"])},[e("div",It,[c[3]||(c[3]=e("label",null,"æˆ¿é–“ç¢¼",-1)),S(e("input",{"onUpdate:modelValue":c[0]||(c[0]=w=>_.value.code=w),type:"text",class:"text-center",style:{"font-size":"2rem","letter-spacing":"0.5rem"},placeholder:"000000",maxlength:"6",pattern:"[0-9]{6}",required:"",onInput:H},null,544),[[z,_.value.code]]),c[4]||(c[4]=e("div",{class:"text-small"}," è¼¸å…¥ 6 ä½æ•¸å­—æˆ¿é–“ç¢¼ ",-1))]),e("div",Pt,[c[5]||(c[5]=e("label",null,"æš±ç¨±",-1)),S(e("input",{"onUpdate:modelValue":c[1]||(c[1]=w=>_.value.nickname=w),type:"text",placeholder:"è¼¸å…¥æ‚¨çš„æš±ç¨±",maxlength:"20",required:""},null,512),[[z,_.value.nickname]])]),r.value?(l(),n("div",Qt,u(r.value),1)):h("",!0),e("div",Kt,[e("button",{type:"submit",disabled:o(C)||!V.value,class:"paper-btn btn-primary"},u(o(C)?"åŠ å…¥ä¸­...":"åŠ å…¥æˆ¿é–“"),9,Xt),e("button",{type:"button",onClick:c[2]||(c[2]=w=>i.$emit("cancel")),class:"paper-btn btn-secondary"}," å–æ¶ˆ ")])],32)])])]))}}),Zt=F(Yt,[["__scopeId","data-v-35f98c69"]]),es={class:"container margin-top-large"},ts={class:"row flex-center"},ss={class:"col-12 col-lg-10"},os={class:"text-center margin-bottom-large"},as={class:"text-hand-title",style:{"font-size":"2.25rem","margin-bottom":"1rem",display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem"}},ns={key:0,class:"home-welcome-section"},ls={class:"welcome-card"},is={class:"welcome-icon"},ds={class:"welcome-auth"},rs={key:1,class:"margin-bottom-medium"},us={key:2,class:"margin-bottom-medium"},cs={key:3},ms={key:0,class:"margin-bottom-medium"},vs={key:1,class:"margin-bottom-medium"},ps={key:2,class:"home-main-layout"},_s={class:"home-user-section"},gs={class:"user-info-card"},hs={class:"user-header"},bs=["src","alt"],fs={key:1,class:"user-avatar user-avatar-placeholder"},ys={class:"user-details"},ws={class:"user-name"},$s={class:"user-status"},ks={key:0,class:"user-stats"},xs={class:"stat-item"},Cs={class:"stat-value"},Rs={class:"user-actions"},Ss=["disabled"],Ms={class:"home-actions-section"},Vs={class:"actions-card"},Ws={class:"actions-buttons"},As={key:3,class:"home-main-layout"},Ls={class:"home-auth-section"},Ts={class:"anonymous-upgrade-card"},Es=D({__name:"HomeView",setup(N){const d=we(),{currentRoom:v,participants:M,leaveRoom:C,isHost:b}=K(),{subscribeRoom:_}=$e(),r=Q(),{isAdmin:H,refreshAdminStatus:V}=re(),y=x(!1),i=x(!1);function c(g){y.value=!1,v.value&&d.push(`/room/${v.value.code}`)}function w(){i.value=!1,v.value&&d.push(`/room/${v.value.code}`)}function f(){console.log("[HomeView] æ”¶åˆ°éŠæˆ²é–‹å§‹äº‹ä»¶"),v.value&&d.push(`/room/${v.value.code}`)}async function p(){(await C()).success&&(y.value=!1,i.value=!1)}P(()=>v.value,g=>{g&&r.user&&_(g.code,g.id,r.user.id,{nickname:r.profile?.display_name||"ç©å®¶"})},{immediate:!0}),P(()=>v.value?.status,async(g,m)=>{if(console.log("[HomeView] æˆ¿é–“ç‹€æ…‹è®ŠåŒ–:",{oldStatus:m,newStatus:g,currentRoute:d.currentRoute.value.name,isHost:b.value}),v.value&&(g==="playing"||g==="finished")){const k=d.currentRoute.value;if(k.name!=="room"||k.params.code!==v.value.code){console.log("[HomeView] æº–å‚™è·³è½‰åˆ° RoomView:",v.value.code,"(isHost:",b.value,")");const L=`/room/${v.value.code}`;try{await d.push(L),console.log("[HomeView] è·¯ç”±è·³è½‰æˆåŠŸ")}catch(G){console.error("[HomeView] è·¯ç”±è·³è½‰éŒ¯èª¤:",G)}}else console.log("[HomeView] å·²åœ¨ RoomViewï¼Œç„¡éœ€è·³è½‰")}}),de(()=>{r.profile?.email&&V(!0)}),P(()=>r.profile?.email,g=>{g&&V(!0)});function $(){d.push("/word-library")}async function W(){const g=await r.signOut();g.success||console.error("ç™»å‡ºå¤±æ•—:",g.error)}function O(g){return g.toLocaleString("zh-TW")}return(g,m)=>(l(),n("div",es,[e("div",ts,[e("div",ss,[e("div",os,[e("h1",as,[A(o(le),{size:32,weight:"duotone",style:{color:"var(--color-primary)"}}),m[4]||(m[4]=ye(" ä½ ç•«æˆ‘çŒœ ",-1))])]),o(r).isAuthenticated?h("",!0):(l(),n("div",ns,[e("div",ls,[e("div",is,[A(o(le),{size:48,weight:"duotone"})]),m[5]||(m[5]=e("p",{class:"welcome-text"},"èˆ‡æœ‹å‹ä¸€èµ·ç•«ç•«çŒœè©ï¼Œè€ƒé©—é»˜å¥‘ï¼",-1)),e("div",ds,[A(ie)]),m[6]||(m[6]=e("p",{class:"welcome-hint"},"ä½¿ç”¨ Google å¸³è™Ÿç™»å…¥å³å¯é–‹å§‹éŠæˆ²",-1))])])),o(v)&&o(v).status==="waiting"?(l(),n("div",rs,[A(ke,{room:o(v),participants:o(M),onStartGame:f,onLeaveRoom:p},null,8,["room","participants"])])):o(v)&&(o(v).status==="playing"||o(v).status==="finished")?(l(),n("div",us,[...m[7]||(m[7]=[e("div",{class:"text-center"},[e("p",{class:"text-hand"},"æ­£åœ¨è·³è½‰åˆ°éŠæˆ²æˆ¿é–“...")],-1)])])):(l(),n("div",cs,[y.value?(l(),n("div",ms,[A(Nt,{onCreated:c,onCancel:m[0]||(m[0]=()=>{console.log("å–æ¶ˆå‰µå»ºæˆ¿é–“"),y.value=!1})})])):i.value?(l(),n("div",vs,[A(Zt,{onJoined:w,onCancel:m[1]||(m[1]=k=>i.value=!1)})])):o(r).isRegistered?(l(),n("div",ps,[e("div",_s,[e("div",gs,[e("div",hs,[o(r).profile?.avatar_url?(l(),n("img",{key:0,src:o(r).profile.avatar_url,alt:o(r).profile.display_name,class:"user-avatar"},null,8,bs)):(l(),n("div",fs,u(o(r).profile?.display_name?.charAt(0)||"?"),1)),e("div",ys,[e("div",ws,u(o(r).profile?.display_name||"ç”¨æˆ¶"),1),e("div",$s,u(o(r).isAnonymous?"åŒ¿åéŠç©":"å·²ç™»å…¥"),1)])]),o(r).isRegistered&&o(r).profile?(l(),n("div",ks,[e("div",xs,[m[8]||(m[8]=e("span",{class:"stat-label"},"ç¸½ç©åˆ†",-1)),e("span",Cs,u(O(o(r).profile.total_score||0)),1)])])):h("",!0),e("div",Rs,[e("button",{onClick:W,disabled:o(r).loading,class:"paper-btn btn-small btn-block"},u(o(r).loading?"è™•ç†ä¸­...":"ç™»å‡º"),9,Ss)])])]),e("div",Ms,[e("div",Vs,[e("div",Ws,[e("button",{onClick:m[2]||(m[2]=k=>y.value=!0),class:"paper-btn btn-primary btn-block margin-bottom-small"}," å‰µå»ºæˆ¿é–“ "),e("button",{onClick:m[3]||(m[3]=k=>i.value=!0),class:"paper-btn btn-secondary btn-block margin-bottom-small"}," åŠ å…¥æˆ¿é–“ "),o(H)?(l(),n("button",{key:0,class:"paper-btn btn-warning btn-block",onClick:$}," è©å¥åº«ç®¡ç† ")):h("",!0)])])])])):o(r).isAuthenticated&&!o(r).isRegistered?(l(),n("div",As,[e("div",Ls,[e("div",Ts,[m[9]||(m[9]=e("p",{class:"text-hand"},"æ‚¨ç›®å‰æ˜¯åŒ¿åç”¨æˆ¶",-1)),m[10]||(m[10]=e("p",{class:"text-small text-secondary"},"ä½¿ç”¨ Google ç™»å…¥ä»¥ä¿å­˜éŠæˆ²è¨˜éŒ„",-1)),A(ie)])])])):h("",!0)]))])])]))}}),Gs=F(Es,[["__scopeId","data-v-25d6219d"]]);export{Gs as default};
