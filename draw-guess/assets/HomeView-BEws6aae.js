import{d as N,u as Q,c as n,a as f,b as o,e,t as c,o as l,_ as D,r as x,f as E,g as re,h as be,w as q,i as S,v as z,n as I,j as oe,k as ae,l as ye,F as ne,m as le,p as P,q as A,s as we,x as $e}from"./index-BUyV4ejb.js";import{u as K,a as ke,I as ie,W as xe}from"./WaitingLobby-DW32UsFM.js";import{u as ce}from"./useWordLibrary-CoEkUEoN.js";const Ce={class:"user-auth"},Re={key:0},Se=["disabled"],Me={key:1},Ve={class:"user-info-card border margin-bottom-small"},We={class:"row flex-middle margin-bottom-small"},Ae={class:"col-8"},Le={class:"row flex-middle"},Te={class:"col-auto"},Ee=["src","alt"],He={key:1,class:"user-avatar border user-avatar-placeholder"},Ue={class:"col"},ze={class:"text-hand user-name"},Ge={class:"text-small user-status"},je={class:"col-4 text-right"},qe=["disabled"],Ne={key:0,class:"user-stats-inline"},De={class:"stats-row"},Fe={class:"stat-item"},Oe={class:"stat-value"},Je={key:2,class:"alert alert-danger margin-top-small"},Be=N({__name:"UserAuth",setup(F){const d=Q();async function v(){const h=await d.signInWithGoogle();h&&!h.success&&console.error("Google ç™»å…¥å¤±æ•—:",h.error)}async function M(){const h=await d.signOut();h.success||console.error("ç™»å‡ºå¤±æ•—:",h.error)}function C(h){return h.toLocaleString("zh-TW")}return(h,_)=>(l(),n("div",Ce,[o(d).isAuthenticated?(l(),n("div",Me,[e("div",Ve,[e("div",We,[e("div",Ae,[e("div",Le,[e("div",Te,[o(d).profile?.avatar_url?(l(),n("img",{key:0,src:o(d).profile.avatar_url,alt:o(d).profile.display_name,class:"user-avatar border"},null,8,Ee)):(l(),n("div",He,c(o(d).profile?.display_name?.charAt(0)||"?"),1))]),e("div",Ue,[e("div",ze,c(o(d).profile?.display_name||"ç”¨æˆ¶"),1),e("div",Ge,c(o(d).isAnonymous?"åŒ¿åéŠç©":"å·²ç™»å…¥"),1)])])]),e("div",je,[e("button",{onClick:M,disabled:o(d).loading,class:"paper-btn btn-small"},c(o(d).loading?"è™•ç†ä¸­...":"ç™»å‡º"),9,qe)])]),o(d).isRegistered&&o(d).profile?(l(),n("div",Ne,[e("div",De,[e("div",Fe,[_[0]||(_[0]=e("span",{class:"stat-label"},"ç¸½ç©åˆ†",-1)),e("span",Oe,c(C(o(d).profile.total_score||0)),1)])]),_[1]||(_[1]=e("div",{class:"gamification-placeholder margin-top-small"},null,-1))])):f("",!0)])])):(l(),n("div",Re,[f("",!0),e("button",{onClick:v,disabled:o(d).loading,class:"paper-btn btn-primary btn-block"},c(o(d).loading?"è™•ç†ä¸­...":"Google ç™»å…¥"),9,Se)])),o(d).error?(l(),n("div",Je,c(o(d).error),1)):f("",!0)]))}}),de=D(Be,[["__scopeId","data-v-7ac95212"]]),Ie={class:"room-create"},Pe={class:"card"},Qe={class:"card-body"},Ke={class:"form-group room-theme-group"},Xe={class:"form-group game-mode-group"},Ye={class:"game-mode-options"},Ze={key:0,class:"form-group single-round-group"},et={class:"checkbox-label"},tt={key:1,class:"form-group"},st={key:0,class:"text-small text-secondary"},ot={key:1,class:"word-library-dropdown"},at={class:"dropdown-wrapper"},nt={class:"dropdown-text"},lt={class:"dropdown-arrow"},it={key:0,class:"dropdown-menu"},dt=["onClick"],rt={class:"dropdown-item-content"},ct={class:"dropdown-item-main"},ut={class:"dropdown-item-title"},mt={class:"dropdown-item-desc"},vt={class:"dropdown-item-count"},pt=["onClick","disabled"],_t={key:0,class:"collection-detail-panel"},gt={class:"detail-header"},ft={class:"detail-title-section"},ht={class:"detail-title"},bt={class:"detail-desc"},yt={class:"detail-count"},wt={class:"detail-entries"},$t={key:0,class:"text-small text-secondary text-center"},kt={key:1,class:"text-small text-secondary text-center"},xt={key:2,class:"entries-list"},Ct={class:"entry-checkbox"},Rt=["checked","onChange"],St={class:"entry-text"},Mt={key:0,class:"entry-category"},Vt={class:"detail-actions"},Wt=["disabled"],At=["disabled"],Lt={key:1,class:"text-small info-hint margin-top-small"},Tt={key:2,class:"form-group words-input-group"},Et={class:"words-stats"},Ht={class:"text-small"},Ut={key:0,class:"text-small",style:{color:"#e8590c"}},zt={key:3,class:"storyboard-info"},Gt={class:"margin-top-medium game-settings-section"},jt={class:"form-group"},qt={key:4,class:"alert alert-danger margin-top-small"},Nt={class:"row flex-spaces submit-buttons-section"},Dt=["disabled"],Ft=N({__name:"RoomCreate",emits:["cancel","created"],setup(F,{emit:d}){const v=d,{createRoom:M,loading:C}=K(),{collections:h,entriesMap:_,loadingCollections:r,loadingEntries:H,loadCollections:V,loadEntries:y}=ce(),i=x({name:"",wordsText:"",settings:{draw_time:60,rounds:0,word_count_per_round:1,hints_count:2},gameMode:"classic",singleRoundMode:!1}),u=x(null),w=x(null),b=x(!1),p=x(null),$=x({}),W=x(new Set);function O(a){return a.split(/[ï¼Œ,\n]/).map(t=>t.trim()).filter(t=>t.length>0)}function g(){u.value=null}const m=E(()=>O(i.value.wordsText)),k=E(()=>{const a=new Set,t=[];for(const s of m.value)a.has(s)||(a.add(s),t.push(s));return t}),L=E(()=>k.value.length),G=E(()=>i.value.wordsText.length),X=E(()=>{const a=i.value.name.trim().length>0&&i.value.name.length<=50;return i.value.gameMode==="storyboard"?a:a&&L.value>=6&&G.value<=600&&k.value.every(t=>t.length>=1&&t.length<=32)});function Y(){const a=new Set(k.value);W.value=new Set([...W.value].filter(t=>a.has(t)))}function ue(a,t){return $.value[a]?.has(t)??!1}function me(a,t){const s=$.value[a]||new Set;s.has(t)?s.delete(t):s.add(t),$.value={...$.value,[a]:s}}function Z(a){return($.value[a]?.size||0)>0}function j(a){if($.value[a]){const t={...$.value};delete t[a],$.value=t}}function ee(a){const t=a.map(U=>U.trim()).filter(Boolean),s=k.value,R=new Set(s),T=[...s];let J=0,B=0;t.forEach(U=>{R.has(U)?B++:(R.add(U),T.push(U),J++)}),i.value.wordsText=T.join(`
`),W.value=new Set([...W.value,...t]),Y(),B>0?w.value=`å·²åŠ å…¥ ${J} å€‹è©æ¢ï¼Œè·³é ${B} å€‹é‡è¤‡è©æ¢`:w.value=`å·²åŠ å…¥ ${J} å€‹è©æ¢`}function ve(){b.value=!b.value,b.value}async function pe(a){const t=h.value.find(s=>s.id===a);t&&(p.value={id:t.id,title:t.title,description:t.description,entry_count:t.entry_count},b.value=!1,await y(a))}async function _e(a){b.value=!1,await te(a)}function ge(){const a=p.value?.id;a&&j(a),p.value=null}async function fe(a){const t=_.value[a]||await y(a),s=$.value[a];if(!s||s.size===0)return;const R=t?.filter(T=>s.has(T.id)).map(T=>T.text)||[];ee(R),j(a),p.value=null}async function te(a){const s=(_.value[a]||await y(a)||[]).map(R=>R.text);ee(s),j(a),p.value=null}function se(a){!a.target.closest(".word-library-dropdown")&&b.value&&(b.value=!1)}re(()=>{V(),document.addEventListener("click",se)}),be(()=>{document.removeEventListener("click",se)});async function he(){if(!X.value){u.value="è«‹æª¢æŸ¥è¡¨å–®è¼¸å…¥";return}u.value=null,Y();try{const a=i.value.gameMode==="storyboard"?[]:k.value.map(s=>({text:s,source:W.value.has(s)?"wordlist":"custom"})),t=await M({name:i.value.name.trim(),words:a,settings:i.value.settings,gameMode:i.value.gameMode,singleRoundMode:i.value.singleRoundMode});t.success&&t.room?v("created",t.room.code):(u.value=t.error||"å‰µå»ºæˆ¿é–“å¤±æ•—",console.error("å‰µå»ºæˆ¿é–“å¤±æ•—:",t.error))}catch(a){u.value=a instanceof Error?a.message:"å‰µå»ºæˆ¿é–“æ™‚ç™¼ç”ŸéŒ¯èª¤",console.error("å‰µå»ºæˆ¿é–“ç•°å¸¸:",a)}}return(a,t)=>(l(),n("div",Ie,[e("div",Pe,[e("div",Qe,[t[21]||(t[21]=e("h2",{class:"card-title text-hand-title"},"å‰µå»ºæˆ¿é–“",-1)),e("form",{onSubmit:q(he,["prevent"])},[e("div",Ke,[t[10]||(t[10]=e("label",null,"æˆ¿é–“ä¸»é¡Œ",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.name=s),type:"text",placeholder:"è¼¸å…¥æˆ¿é–“ä¸»é¡Œï¼ˆä¾‹å¦‚ï¼šå¤ä»£ä½œå®¶ã€ç´…æ¨“å¤¢ç­‰ï¼‰",maxlength:"50",required:"",class:"room-theme-input"},null,512),[[z,i.value.name]])]),e("div",Xe,[t[13]||(t[13]=e("label",null,"éŠæˆ²æ¨¡å¼",-1)),e("div",Ye,[e("label",{class:I(["game-mode-option",{active:i.value.gameMode==="classic"}])},[S(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=s=>i.value.gameMode=s),value:"classic",name:"gameMode"},null,512),[[ae,i.value.gameMode]]),t[11]||(t[11]=oe('<div class="mode-content" data-v-9357c7f5><span class="mode-icon" data-v-9357c7f5>ğŸ¨</span><div class="mode-text" data-v-9357c7f5><span class="mode-name" data-v-9357c7f5>å‚³çµ±æ¨¡å¼</span><span class="mode-desc" data-v-9357c7f5>çŒœè©ç«¶æŠ€ï¼ŒçŒœå°å¾—åˆ†</span></div></div>',1))],2),e("label",{class:I(["game-mode-option",{active:i.value.gameMode==="storyboard"}])},[S(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=s=>i.value.gameMode=s),value:"storyboard",name:"gameMode"},null,512),[[ae,i.value.gameMode]]),t[12]||(t[12]=oe('<div class="mode-content" data-v-9357c7f5><span class="mode-icon" data-v-9357c7f5>ğŸ“–</span><div class="mode-text" data-v-9357c7f5><span class="mode-name" data-v-9357c7f5>åˆ†é¡æ¥é¾</span><span class="mode-desc" data-v-9357c7f5>åˆä½œå‰µä½œæ•…äº‹æ¼«ç•«</span></div></div>',1))],2)])]),i.value.gameMode==="storyboard"?(l(),n("div",Ze,[e("label",et,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>i.value.singleRoundMode=s)},null,512),[[ye,i.value.singleRoundMode]]),t[14]||(t[14]=e("span",{class:"checkbox-text"},"å–®å ´æ¨¡å¼",-1)),t[15]||(t[15]=e("span",{class:"checkbox-hint"},"ï¼ˆå‹¾é¸å¾ŒéŠæˆ²åªé€²è¡Œä¸€å ´å³çµæŸï¼‰",-1))])])):f("",!0),i.value.gameMode==="classic"?(l(),n("div",tt,[t[16]||(t[16]=e("label",{class:"library-label"},"ä¸»é¡Œè©å¥åº«",-1)),o(r)?(l(),n("div",st,"è©å¥åº«è¼‰å…¥ä¸­...")):(l(),n("div",ot,[e("div",at,[e("div",{class:I(["dropdown-trigger",{"dropdown-open":b.value}]),onClick:ve},[e("span",nt,c(p.value?p.value.title:"é¸æ“‡ä¸»é¡Œæˆ–ä¸€éµåŠ å…¥..."),1),e("span",lt,c(b.value?"â–²":"â–¼"),1)],2),b.value?(l(),n("div",it,[(l(!0),n(ne,null,le(o(h),s=>(l(),n("div",{key:s.id,class:"dropdown-item",onClick:q(R=>pe(s.id),["stop"])},[e("div",rt,[e("div",ct,[e("div",ut,c(s.title),1),e("div",mt,c(s.description),1),e("div",vt,c(s.entry_count)+" æ¢",1)]),e("button",{type:"button",class:"paper-btn btn-primary btn-small dropdown-quick-add",onClick:q(R=>_e(s.id),["stop"]),disabled:s.entry_count===0}," ä¸€éµåŠ å…¥ ",8,pt)])],8,dt))),128))])):f("",!0)]),p.value&&!b.value?(l(),n("div",_t,[e("div",gt,[e("div",ft,[e("h4",ht,"ğŸ“š "+c(p.value.title),1),e("p",bt,c(p.value.description),1),e("span",yt,"å…± "+c(p.value.entry_count)+" æ¢",1)]),e("button",{type:"button",class:"paper-btn btn-small",onClick:ge}," é—œé–‰ ")]),e("div",wt,[o(H)[p.value.id]?(l(),n("div",$t," è©æ¢è¼‰å…¥ä¸­... ")):(o(_)[p.value.id]||[]).length===0?(l(),n("div",kt," è©²ä¸»é¡Œæš«ç„¡è©æ¢ ")):(l(),n("div",xt,[(l(!0),n(ne,null,le(o(_)[p.value.id]||[],s=>(l(),n("div",{key:s.id,class:"entry-item"},[e("label",Ct,[e("input",{type:"checkbox",checked:ue(p.value.id,s.id),onChange:R=>me(p.value.id,s.id)},null,40,Rt),e("span",St,c(s.text),1),s.category?(l(),n("span",Mt,"("+c(s.category)+")",1)):f("",!0)])]))),128))]))]),e("div",Vt,[e("button",{type:"button",class:"paper-btn btn-primary btn-small",disabled:!Z(p.value.id),onClick:t[4]||(t[4]=s=>fe(p.value.id))}," åŠ å…¥å·²å‹¾é¸ ",8,Wt),e("button",{type:"button",class:"paper-btn btn-secondary btn-small",onClick:t[5]||(t[5]=s=>te(p.value.id)),disabled:p.value.entry_count===0}," å…¨éƒ¨åŠ å…¥ ",8,At),Z(p.value.id)?(l(),n("button",{key:0,type:"button",class:"paper-btn btn-link btn-small",onClick:t[6]||(t[6]=s=>j(p.value.id))}," æ¸…é™¤ ")):f("",!0)])])):f("",!0),w.value?(l(),n("div",Lt,c(w.value),1)):f("",!0)]))])):f("",!0),i.value.gameMode==="classic"?(l(),n("div",Tt,[t[17]||(t[17]=e("label",null,"è‡ªå®šç¾©è©èªï¼ˆè‡³å°‘ 6 å€‹ï¼Œæ¯å€‹ 1-32 å­—ç¬¦ï¼Œæœ€å¤š 600 å­—ç¬¦ï¼‰",-1)),S(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.wordsText=s),rows:"6",placeholder:`è¼¸å…¥è©èªï¼Œç”¨é€—è™Ÿï¼ˆï¼Œæˆ–,ï¼‰æˆ–æ›è¡Œåˆ†éš”
ä¾‹å¦‚ï¼šæ˜¥å¤©ï¼Œå‹èª¼ï¼Œå‹‡æ°£`,onInput:g,class:"words-textarea"},null,544),[[z,i.value.wordsText]]),e("div",Et,[e("div",Ht," å·²è¼¸å…¥ "+c(L.value)+" å€‹è©èªï¼Œ"+c(G.value)+" / 600 å­—ç¬¦ ",1),L.value<6?(l(),n("div",Ut," é‚„éœ€è¦ "+c(6-L.value)+" å€‹è©èª ",1)):f("",!0)])])):f("",!0),i.value.gameMode==="storyboard"?(l(),n("div",zt,[...t[18]||(t[18]=[e("div",{class:"info-card"},[e("h4",null,"ğŸ“– åˆ†é¡æ¥é¾æ¨¡å¼èªªæ˜"),e("ul",null,[e("li",null,"ğŸ¨ åˆ†é¡å¸«æ ¹æ“šä¸Šä¸€é¡å‹å‡ºå¥å­ç¹ªç•«"),e("li",null,"âœï¸ ç·¨åŠ‡æ ¹æ“šç•«ä½œå‰µä½œä¸‹ä¸€å¥æ•…äº‹"),e("li",null,"ğŸ—³ï¸ æ‰€æœ‰ç©å®¶æŠ•ç¥¨é¸å‡ºæœ€ä½³å¥å­"),e("li",null,"ğŸ“š æœ€çµ‚ç”¢å‡ºä¸€å€‹åœ–æ–‡äº¤æ›¿çš„æ•…äº‹æ¿")]),e("p",{class:"info-note"},"âš ï¸ åˆ†é¡æ¨¡å¼éœ€è¦è‡³å°‘ 3 ä½ç©å®¶")],-1)])])):f("",!0),e("div",Gt,[t[20]||(t[20]=e("h4",{class:"text-hand-title"},"éŠæˆ²è¨­ç½®",-1)),e("div",jt,[t[19]||(t[19]=e("label",null,"ç¹ªç•«æ™‚é–“ï¼ˆç§’ï¼‰",-1)),S(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>i.value.settings.draw_time=s),type:"number",min:"60",max:"180",required:""},null,512),[[z,i.value.settings.draw_time,void 0,{number:!0}]])])]),u.value?(l(),n("div",qt,c(u.value),1)):f("",!0),e("div",Nt,[e("button",{type:"submit",disabled:o(C)||!X.value,class:"paper-btn btn-primary"},c(o(C)?"å‰µå»ºä¸­...":"å‰µå»ºæˆ¿é–“"),9,Dt),e("button",{type:"button",onClick:t[9]||(t[9]=s=>a.$emit("cancel")),class:"paper-btn btn-secondary"}," å–æ¶ˆ ")])],32)])])]))}}),Ot=D(Ft,[["__scopeId","data-v-9357c7f5"]]),Jt={class:"room-join"},Bt={class:"card"},It={class:"card-body"},Pt={class:"form-group"},Qt={class:"form-group"},Kt={key:0,class:"alert alert-danger"},Xt={class:"row flex-spaces margin-top-medium"},Yt=["disabled"],Zt=N({__name:"RoomJoin",emits:["cancel","joined"],setup(F,{emit:d}){const v=d,{joinRoom:M,loading:C}=K(),h=Q(),_=x({code:"",nickname:h.profile?.display_name||""}),r=x(null);function H(i){const u=i.target;_.value.code=u.value.replace(/\D/g,"").slice(0,6),r.value=null}const V=E(()=>_.value.code.length===6&&_.value.nickname.trim().length>0&&_.value.nickname.length<=20);async function y(){if(!V.value){r.value="è«‹æª¢æŸ¥è¡¨å–®è¼¸å…¥";return}r.value=null;const i=await M(_.value.code,_.value.nickname.trim());i.success?v("joined"):r.value=i.error||"åŠ å…¥æˆ¿é–“å¤±æ•—"}return(i,u)=>(l(),n("div",Jt,[e("div",Bt,[e("div",It,[u[6]||(u[6]=e("h2",{class:"card-title text-hand-title"},"åŠ å…¥æˆ¿é–“",-1)),e("form",{onSubmit:q(y,["prevent"])},[e("div",Pt,[u[3]||(u[3]=e("label",null,"æˆ¿é–“ç¢¼",-1)),S(e("input",{"onUpdate:modelValue":u[0]||(u[0]=w=>_.value.code=w),type:"text",class:"text-center",style:{"font-size":"2rem","letter-spacing":"0.5rem"},placeholder:"000000",maxlength:"6",pattern:"[0-9]{6}",required:"",onInput:H},null,544),[[z,_.value.code]]),u[4]||(u[4]=e("div",{class:"text-small"}," è¼¸å…¥ 6 ä½æ•¸å­—æˆ¿é–“ç¢¼ ",-1))]),e("div",Qt,[u[5]||(u[5]=e("label",null,"æš±ç¨±",-1)),S(e("input",{"onUpdate:modelValue":u[1]||(u[1]=w=>_.value.nickname=w),type:"text",placeholder:"è¼¸å…¥æ‚¨çš„æš±ç¨±",maxlength:"20",required:""},null,512),[[z,_.value.nickname]])]),r.value?(l(),n("div",Kt,c(r.value),1)):f("",!0),e("div",Xt,[e("button",{type:"submit",disabled:o(C)||!V.value,class:"paper-btn btn-primary"},c(o(C)?"åŠ å…¥ä¸­...":"åŠ å…¥æˆ¿é–“"),9,Yt),e("button",{type:"button",onClick:u[2]||(u[2]=w=>i.$emit("cancel")),class:"paper-btn btn-secondary"}," å–æ¶ˆ ")])],32)])])]))}}),es=D(Zt,[["__scopeId","data-v-35f98c69"]]),ts={class:"container margin-top-large"},ss={class:"row flex-center"},os={class:"col-12 col-lg-10"},as={class:"text-center margin-bottom-large"},ns={class:"text-hand-title",style:{"font-size":"2.25rem","margin-bottom":"1rem",display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem"}},ls={key:0,class:"home-welcome-section"},is={class:"welcome-card"},ds={class:"welcome-icon"},rs={class:"welcome-auth"},cs={key:1,class:"margin-bottom-medium"},us={key:2,class:"margin-bottom-medium"},ms={key:3},vs={key:0,class:"margin-bottom-medium"},ps={key:1,class:"margin-bottom-medium"},_s={key:2,class:"home-main-layout"},gs={class:"home-user-section"},fs={class:"user-info-card"},hs={class:"user-header"},bs=["src","alt"],ys={key:1,class:"user-avatar user-avatar-placeholder"},ws={class:"user-details"},$s={class:"user-name"},ks={class:"user-status"},xs={key:0,class:"user-stats"},Cs={class:"stat-item"},Rs={class:"stat-value"},Ss={class:"user-actions"},Ms=["disabled"],Vs={class:"home-actions-section"},Ws={class:"actions-card"},As={class:"actions-buttons"},Ls={key:3,class:"home-main-layout"},Ts={class:"home-auth-section"},Es={class:"anonymous-upgrade-card"},Hs=N({__name:"HomeView",setup(F){const d=$e(),{currentRoom:v,participants:M,leaveRoom:C,isHost:h}=K(),{subscribeRoom:_}=ke(),r=Q(),{isAdmin:H,refreshAdminStatus:V}=ce(),y=x(!1),i=x(!1);function u(g){y.value=!1,v.value&&d.push(`/room/${v.value.code}`)}function w(){i.value=!1,v.value&&d.push(`/room/${v.value.code}`)}function b(){console.log("[HomeView] æ”¶åˆ°éŠæˆ²é–‹å§‹äº‹ä»¶"),v.value&&d.push(`/room/${v.value.code}`)}async function p(){(await C()).success&&(y.value=!1,i.value=!1)}P(()=>v.value,g=>{g&&r.user&&_(g.code,g.id,r.user.id,{nickname:r.profile?.display_name||"ç©å®¶"})},{immediate:!0}),P(()=>v.value?.status,async(g,m)=>{if(console.log("[HomeView] æˆ¿é–“ç‹€æ…‹è®ŠåŒ–:",{oldStatus:m,newStatus:g,currentRoute:d.currentRoute.value.name,isHost:h.value}),v.value&&(g==="playing"||g==="finished")){const k=d.currentRoute.value;if(k.name!=="room"||k.params.code!==v.value.code){console.log("[HomeView] æº–å‚™è·³è½‰åˆ° RoomView:",v.value.code,"(isHost:",h.value,")");const L=`/room/${v.value.code}`;try{await d.push(L),console.log("[HomeView] è·¯ç”±è·³è½‰æˆåŠŸ")}catch(G){console.error("[HomeView] è·¯ç”±è·³è½‰éŒ¯èª¤:",G)}}else console.log("[HomeView] å·²åœ¨ RoomViewï¼Œç„¡éœ€è·³è½‰")}}),re(()=>{r.profile?.email&&V(!0)}),P(()=>r.profile?.email,g=>{g&&V(!0)});function $(){d.push("/word-library")}async function W(){const g=await r.signOut();g.success||console.error("ç™»å‡ºå¤±æ•—:",g.error)}function O(g){return g.toLocaleString("zh-TW")}return(g,m)=>(l(),n("div",ts,[e("div",ss,[e("div",os,[e("div",as,[e("h1",ns,[A(o(ie),{size:32,weight:"duotone",style:{color:"var(--color-primary)"}}),m[4]||(m[4]=we(" ä½ ç•«æˆ‘çŒœ ",-1))])]),o(r).isAuthenticated?f("",!0):(l(),n("div",ls,[e("div",is,[e("div",ds,[A(o(ie),{size:48,weight:"duotone"})]),m[5]||(m[5]=e("p",{class:"welcome-text"},"èˆ‡æœ‹å‹ä¸€èµ·ç•«ç•«çŒœè©ï¼Œè€ƒé©—é»˜å¥‘ï¼",-1)),e("div",rs,[A(de)]),m[6]||(m[6]=e("p",{class:"welcome-hint"},"ä½¿ç”¨ Google å¸³è™Ÿç™»å…¥å³å¯é–‹å§‹éŠæˆ²",-1))])])),o(v)&&o(v).status==="waiting"?(l(),n("div",cs,[A(xe,{room:o(v),participants:o(M),onStartGame:b,onLeaveRoom:p},null,8,["room","participants"])])):o(v)&&(o(v).status==="playing"||o(v).status==="finished")?(l(),n("div",us,[...m[7]||(m[7]=[e("div",{class:"text-center"},[e("p",{class:"text-hand"},"æ­£åœ¨è·³è½‰åˆ°éŠæˆ²æˆ¿é–“...")],-1)])])):(l(),n("div",ms,[y.value?(l(),n("div",vs,[A(Ot,{onCreated:u,onCancel:m[0]||(m[0]=()=>{console.log("å–æ¶ˆå‰µå»ºæˆ¿é–“"),y.value=!1})})])):i.value?(l(),n("div",ps,[A(es,{onJoined:w,onCancel:m[1]||(m[1]=k=>i.value=!1)})])):o(r).isRegistered?(l(),n("div",_s,[e("div",gs,[e("div",fs,[e("div",hs,[o(r).profile?.avatar_url?(l(),n("img",{key:0,src:o(r).profile.avatar_url,alt:o(r).profile.display_name,class:"user-avatar"},null,8,bs)):(l(),n("div",ys,c(o(r).profile?.display_name?.charAt(0)||"?"),1)),e("div",ws,[e("div",$s,c(o(r).profile?.display_name||"ç”¨æˆ¶"),1),e("div",ks,c(o(r).isAnonymous?"åŒ¿åéŠç©":"å·²ç™»å…¥"),1)])]),o(r).isRegistered&&o(r).profile?(l(),n("div",xs,[e("div",Cs,[m[8]||(m[8]=e("span",{class:"stat-label"},"ç¸½ç©åˆ†",-1)),e("span",Rs,c(O(o(r).profile.total_score||0)),1)])])):f("",!0),e("div",Ss,[e("button",{onClick:W,disabled:o(r).loading,class:"paper-btn btn-small btn-block"},c(o(r).loading?"è™•ç†ä¸­...":"ç™»å‡º"),9,Ms)])])]),e("div",Vs,[e("div",Ws,[e("div",As,[e("button",{onClick:m[2]||(m[2]=k=>y.value=!0),class:"paper-btn btn-primary btn-block margin-bottom-small"}," å‰µå»ºæˆ¿é–“ "),e("button",{onClick:m[3]||(m[3]=k=>i.value=!0),class:"paper-btn btn-secondary btn-block margin-bottom-small"}," åŠ å…¥æˆ¿é–“ "),o(H)?(l(),n("button",{key:0,class:"paper-btn btn-warning btn-block",onClick:$}," è©å¥åº«ç®¡ç† ")):f("",!0)])])])])):o(r).isAuthenticated&&!o(r).isRegistered?(l(),n("div",Ls,[e("div",Ts,[e("div",Es,[m[9]||(m[9]=e("p",{class:"text-hand"},"æ‚¨ç›®å‰æ˜¯åŒ¿åç”¨æˆ¶",-1)),m[10]||(m[10]=e("p",{class:"text-small text-secondary"},"ä½¿ç”¨ Google ç™»å…¥ä»¥ä¿å­˜éŠæˆ²è¨˜éŒ„",-1)),A(de)])])])):f("",!0)]))])])]))}}),js=D(Hs,[["__scopeId","data-v-25d6219d"]]);export{js as default};
