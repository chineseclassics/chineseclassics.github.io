<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ çš„å‚³å¥‡ï¼šç¾ˆçµ†èˆ‡è¶…è„« - å®Œæ•´ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        ancient: {
                            paper: '#F5F1E8',
                            ink: '#2D3748',
                            gold: '#D69E2E',
                            red: '#E53E3E'
                        }
                    },
                    fontFamily: {
                        'chinese': ['SimSun', 'serif']
                    }
                }
            },
            darkMode: 'class'
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap');
        
        .font-chinese {
            font-family: 'Noto Serif SC', 'SimSun', serif;
        }
        
        .voice-icon {
            transition: all 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        .voice-active {
            transform: scale(1.05);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        .choice-hover:hover {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.1), rgba(93, 92, 222, 0.05));
            transform: translateY(-2px);
        }
        
        .ancient-bg {
            background: linear-gradient(135deg, #F5F1E8 0%, #E8DCC0 100%);
        }
        
        .dark .ancient-bg {
            background: linear-gradient(135deg, #1A202C 0%, #2D3748 100%);
        }
        
        .word-tooltip {
            position: relative;
            cursor: help;
            border-bottom: 1px dotted #5D5CDE;
        }
        
        .word-tooltip .tooltip-content {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2D3748;
            color: white;
            text-align: center;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .word-tooltip:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .chapter-indicator {
            background: linear-gradient(45deg, #5D5CDE, #8B5CF6);
        }
        
        .ending-badge {
            box-shadow: 0 0 15px rgba(236, 72, 153, 0.7);
        }
        .quote-text {
            border-left: 3px solid #fde68a; /* A gold-like color */
            padding-left: 1rem;
            margin: 1rem 0;
            background-color: rgba(254, 249, 195, 0.1);
            font-style: italic;
            color: #d1d5db; /* Lighter text for dark mode */
        }
        [data-theme="light"] .quote-text {
            border-left-color: #facc15;
            background-color: rgba(254, 249, 195, 0.3);
            color: #4b5563; /* Darker text for light mode */
        }
        
        .achievement-notification {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body class="font-chinese ancient-bg min-h-screen">
    <!-- æ·±è‰²æ¨¡å¼æ£€æµ‹ -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- æ¸¸æˆå®¹å™¨ -->
    <div class="container mx-auto px-4 py-6 max-w-7xl">
        
        <!-- æ¸¸æˆæ ‡é¢˜ -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 dark:text-gray-100 mb-2">
                ä½ çš„å‚³å¥‡
            </h1>
            <p class="text-lg text-gray-600 dark:text-gray-300 mb-4">ä½ çš„ç¾ˆçµ†èˆ‡è¶…è„«</p>
            
            <!-- ç« èŠ‚å’Œè¿›åº¦æŒ‡ç¤ºå™¨ -->
            <div class="flex justify-center items-center space-x-4 mb-6">
                <div id="chapterIndicator" class="chapter-indicator text-white px-6 py-2 rounded-full text-sm font-bold">
                    ç¬¬ä¸€ç« ï¼šåˆå¿ƒä¹‹å•
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-600 dark:text-gray-400">é€²åº¦</span>
                    <div class="w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div id="globalProgress" class="bg-gradient-to-r from-primary to-purple-600 h-2 rounded-full transition-all duration-500" style="width: 5%"></div>
                    </div>
                </div>
            </div>
        </header>

        <!-- ä¸»æ¸¸æˆåŒºåŸŸ -->
        <div class="grid lg:grid-cols-4 gap-6">
            
            <!-- æ€æƒ³å†…é˜é¢æ¿ -->
            <div class="lg:col-span-1 order-2 lg:order-1">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sticky top-6">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 text-center">
                        ğŸ’­ æ€æƒ³å…§é–£
                    </h3>
                    
                    <!-- å£°éŸ³åˆ—è¡¨ -->
                    <div class="space-y-4" id="voicesPanel">
                        <!-- å­å¥³ä¹‹å¿ƒ -->
                        <div class="voice-item" data-voice="filialPiety">
                            <div class="flex items-center justify-between mb-2">
                                <span class="flex items-center text-sm font-semibold text-pink-600 dark:text-pink-400">
                                    ğŸ’ <span class="ml-2">å­å¥³ä¹‹å¿ƒ</span>
                                </span>
                                <span class="voice-level bg-pink-100 dark:bg-pink-900 text-pink-800 dark:text-pink-200 px-2 py-1 rounded text-xs">
                                    Lv.<span class="level-number">3</span>
                                </span>
                            </div>
                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                                <div class="progress-bar bg-pink-500 h-2 rounded-full" style="width: 30%"></div>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400 voice-quote italic">
                                "çˆ¶è¦ªé¤Šè‚²ä¹‹æ©ï¼Œè±ˆå¯è¼•å¿˜ï¼Ÿ"
                            </p>
                        </div>

                        <!-- å¸ˆé—¨ä¹‹è®­ -->
                        <div class="voice-item" data-voice="masterTraining">
                            <div class="flex items-center justify-between mb-2">
                                <span class="flex items-center text-sm font-semibold text-gray-600 dark:text-gray-400">
                                    âš¡ <span class="ml-2">å¸«é–€ä¹‹è¨“</span>
                                </span>
                                <span class="voice-level bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-2 py-1 rounded text-xs">
                                    Lv.<span class="level-number">1</span>
                                </span>
                            </div>
                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                                <div class="progress-bar bg-gray-500 h-2 rounded-full" style="width: 10%"></div>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400 voice-quote italic">
                                "æœå¾æ˜¯å”¯ä¸€çš„é¸æ“‡..."
                            </p>
                        </div>

                        <!-- æŸ”æƒ…ä¹‹æ„ -->
                        <div class="voice-item" data-voice="tenderness">
                            <div class="flex items-center justify-between mb-2">
                                <span class="flex items-center text-sm font-semibold text-purple-600 dark:text-purple-400">
                                    ğŸ’• <span class="ml-2">æŸ”æƒ…ä¹‹æ„</span>
                                </span>
                                <span class="voice-level bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs">
                                    Lv.<span class="level-number">2</span>
                                </span>
                            </div>
                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                                <div class="progress-bar bg-purple-500 h-2 rounded-full" style="width: 20%"></div>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400 voice-quote italic">
                                "è‹¥èƒ½æœ‰ä¸€è™•å®‰ç©©çš„å®¶..."
                            </p>
                        </div>

                        <!-- å¿ ä¹‰ä¹‹å¿µ -->
                        <div class="voice-item" data-voice="loyalty">
                            <div class="flex items-center justify-between mb-2">
                                <span class="flex items-center text-sm font-semibold text-red-600 dark:text-red-400">
                                    âš”ï¸ <span class="ml-2">å¿ ç¾©ä¹‹å¿µ</span>
                                </span>
                                <span class="voice-level bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 px-2 py-1 rounded text-xs">
                                    Lv.<span class="level-number">1</span>
                                </span>
                            </div>
                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                                <div class="progress-bar bg-red-500 h-2 rounded-full" style="width: 10%"></div>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400 voice-quote italic">
                                "æ—¢å—æ©æƒ ï¼Œç•¶ä»¥å‘½å ±ä¹‹..."
                            </p>
                        </div>

                        <!-- å±±æ°´æ±‚é“ -->
                        <div class="voice-item" data-voice="seekingDao">
                            <div class="flex items-center justify-between mb-2">
                                <span class="flex items-center text-sm font-semibold text-blue-600 dark:text-blue-400">
                                    ğŸŒŠ <span class="ml-2">å±±æ°´æ±‚é“</span>
                                </span>
                                <span class="voice-level bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded text-xs">
                                    Lv.<span class="level-number">1</span>
                                </span>
                            </div>
                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                                <div class="progress-bar bg-blue-500 h-2 rounded-full" style="width: 15%"></div>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400 voice-quote italic">
                                "å±±ä¸­æœ‰çœŸæ„ï¼Œä½†è­˜è€…å¹¾äººï¼Ÿ"
                            </p>
                        </div>
                    </div>

                    <!-- è¯æ±‡ç¬”è®° -->
                    <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-600">
                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ğŸ“ è©å½™ç­†è¨˜</h4>
                        <div id="learnedWords" class="flex flex-wrap gap-1">
                            <span class="text-xs text-gray-500 dark:text-gray-400">æš«ç„¡æ”¶é›†è©å½™</span>
                        </div>
                    </div>

                    <!-- æˆå°±ç³»ç»Ÿ -->
                    <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-600">
                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ğŸ† æˆå°±</h4>
                        <div id="achievements" class="space-y-1">
                            <span class="text-xs text-gray-500 dark:text-gray-400">æš«ç„¡è§£é–æˆå°±</span>
                        </div>
                    </div>

                    <!-- ç»“å±€æ”¶é›† -->
                    <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-600">
                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ğŸ“š çµå±€æ”¶é›†</h4>
                        <div id="endingsCollection" class="space-y-1">
                            <span class="text-xs text-gray-500 dark:text-gray-400">å°šæœªé”æˆä»»ä½•çµå±€</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸»è¦æ•…äº‹åŒºåŸŸ -->
            <div class="lg:col-span-3 order-1 lg:order-2">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                    
                    <!-- ç« èŠ‚è¿›åº¦æ¡ -->
                    <div class="bg-gradient-to-r from-primary to-purple-600 h-3 relative">
                        <div id="chapterProgress" class="bg-white h-full transition-all duration-500" style="width: 10%"></div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="progressText" class="text-xs font-bold text-white opacity-75">10%</span>
                        </div>
                    </div>

                    <!-- æ•…äº‹å†…å®¹ -->
                    <div class="p-6 md:p-8">
                        <div id="storyContent" class="prose max-w-none dark:prose-invert">
                            <!-- åˆå§‹å†…å®¹å°†ç”±JavaScriptå¡«å…… -->
                        </div>

                        <!-- é€‰æ‹©åŒºåŸŸ -->
                        <div id="choicesContainer" class="mt-6 space-y-3">
                            <!-- é€‰æ‹©å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>

                        <!-- å£°éŸ³å¯¹è¯åŒºåŸŸ -->
                        <div id="voiceDialogue" class="mt-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hidden">
                            <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-3">ğŸ’­ å…§å¿ƒè²éŸ³</h4>
                            <div id="voiceMessages" class="space-y-2">
                                <!-- å£°éŸ³å¯¹è¯å°†ç”±JavaScriptå¡«å…… -->
                            </div>
                        </div>

                        <!-- ç‰¹æ®Šäº‹ä»¶æç¤º -->
                        <div id="specialEvent" class="mt-6 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-lg p-4 hidden">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">âš¡</span>
                                <div>
                                    <h4 class="font-bold">ç‰¹æ®Šäº‹ä»¶è§¸ç™¼ï¼</h4>
                                    <p id="specialEventText" class="text-sm opacity-90"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¸¸æˆæ§åˆ¶é¢æ¿ -->
                <div class="mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4">
                    <div class="flex flex-wrap justify-center gap-3">
                        <button id="saveGameBtn" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                            ğŸ’¾ å„²å­˜é€²åº¦
                        </button>
                        <button id="loadGameBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                            ğŸ“ è¼‰å…¥é€²åº¦
                        </button>
                        <button id="restartBtn" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                            ğŸ”„ é‡æ–°é–‹å§‹
                        </button>
                        <button id="endingsBtn" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors">
                            ğŸ“– çµå±€åœ–é‘‘
                        </button>
                        <button id="helpBtn" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                            â“ éŠæˆ²èªªæ˜
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <footer class="mt-8 text-center text-sm text-gray-600 dark:text-gray-400">
            <p>åŸºæ–¼è£´é‰¶ã€Šè¶éš±å¨˜ã€‹å‰µä½œ | äº’å‹•å¼å¤å…¸æ–‡å­¸æ•™è‚²éŠæˆ²</p>
            <p class="mt-1">éŠæˆ²ç‰ˆæœ¬: v2.0 å®Œæ•´ç‰ˆ | åŒ…å«7ç« ç¯€ Â· 18ç¨®çµå±€ Â· å®Œæ•´å­¸ç¿’ç³»çµ±</p>
        </footer>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div id="modalOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modalTitle" class="text-xl font-bold text-gray-800 dark:text-gray-100"></h3>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl">Ã—</button>
                </div>
                <div id="modalContent" class="text-gray-600 dark:text-gray-300">
                    <!-- åŠ¨æ€å†…å®¹ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€ç®¡ç†ç±»
        class GameState {
            constructor() {
                this.currentScene = 'intro';
                this.currentChapter = 1;
                this.voices = {
                    filialPiety: 30,    // å­å¥³ä¹‹å¿ƒ
                    masterTraining: 10, // å¸ˆé—¨ä¹‹è®­
                    tenderness: 20,     // æŸ”æƒ…ä¹‹æ„
                    loyalty: 10,        // å¿ ä¹‰ä¹‹å¿µ
                    seekingDao: 15      // å±±æ°´æ±‚é“
                };
                this.learnedWords = [];
                this.globalProgress = 5;
                this.chapterProgress = 10;
                this.relationships = {
                    father: 50,
                    husband: 0,
                    liuChangyi: 0,
                    weiShuai: 30,
                    master: 0
                };
                this.unlockedEndings = [];
                this.achievements = [];
                this.gameHistory = [];
                this.age = 10;
                this.location = "è¶å®¶";
                this.specialFlags = {};
            }

            updateVoice(voiceName, change) {
                this.voices[voiceName] = Math.max(0, Math.min(100, this.voices[voiceName] + change));
                this.updateVoiceDisplay();
                this.checkVoiceReactions(voiceName, change);
                this.checkSpecialEvents();
            }

            updateVoiceDisplay() {
                Object.keys(this.voices).forEach(voiceName => {
                    const voiceElement = document.querySelector(`[data-voice="${voiceName}"]`);
                    if (voiceElement) {
                        const level = Math.floor(this.voices[voiceName] / 10) + 1;
                        const progress = this.voices[voiceName];
                        
                        voiceElement.querySelector('.level-number').textContent = level;
                        voiceElement.querySelector('.progress-bar').style.width = `${progress}%`;
                        
                        // æ›´æ–°å¼•è¨€
                        const quotes = this.getVoiceQuotes(voiceName, level);
                        voiceElement.querySelector('.voice-quote').textContent = quotes;
                        
                        // é«˜äº®æ´»è·ƒçš„å£°éŸ³
                        if (progress >= 60) {
                            voiceElement.classList.add('voice-active');
                        } else {
                            voiceElement.classList.remove('voice-active');
                        }
                    }
                });
            }

            getVoiceQuotes(voiceName, level) {
                const quotes = {
                    filialPiety: [
                        "å®¶äººå°±æ˜¯ä¸€åˆ‡...",
                        "çˆ¶è¦ªé¤Šè‚²ä¹‹æ©ï¼Œè±ˆå¯è¼•å¿˜ï¼Ÿ",
                        "å®¶æ—æ¦®è€€é«˜æ–¼å€‹äºº...",
                        "è¡€æ¿ƒæ–¼æ°´çš„è¦ªæƒ…...",
                        "è¶æ°é–€ç¬¬ä¸å¯å¢œè½ï¼",
                        "ç‚ºäº†å®¶æ—ï¼Œæˆ‘é¡˜æ„çŠ§ç‰²ä¸€åˆ‡",
                        "å®¶æ—çš„æœŸæœ›æ˜¯æˆ‘çš„ä½¿å‘½",
                        "ç¥–å…ˆçš„éˆé­‚åœ¨çœ‹è‘—æˆ‘",
                        "å®¶æ—å¾©èˆˆåœ¨æˆ‘ä¸€èº«",
                        "è¡€è„ˆå‚³æ‰¿æ°¸ä¸æ–·çµ•"
                    ],
                    masterTraining: [
                        "æœå¾æ˜¯å”¯ä¸€çš„é¸æ“‡...",
                        "å¸«çˆ¶çš„æ•™å°åˆ»éª¨éŠ˜å¿ƒ",
                        "ç´€å¾‹å°±æ˜¯åŠ›é‡",
                        "æ„Ÿæƒ…åªæœƒè®“åˆ€é‹’é²éˆ",
                        "æˆ‘æ˜¯å¸«çˆ¶é›é€ çš„æ­¦å™¨",
                        "å†·é…·æ˜¯ç”Ÿå­˜çš„å¿…éœ€",
                        "æ®ºæˆ®æ˜¯æˆ‘å­˜åœ¨çš„æ„ç¾©",
                        "å¸«é–€ä¹‹è¨“ä¸å¯é•èƒŒ",
                        "æˆ‘å·²ç¶“æ²’æœ‰å›é ­è·¯",
                        "è¡€èˆ‡æ­»äº¡æ˜¯æˆ‘çš„å®¿å‘½"
                    ],
                    tenderness: [
                        "æ„›è®“ä¸–ç•Œè®Šå¾—æº«æš–...",
                        "è‹¥èƒ½æœ‰ä¸€è™•å®‰ç©©çš„å®¶...",
                        "æº«æŸ”çš„åŠ›é‡ä¹Ÿå¾ˆå¼·å¤§",
                        "æ„›å¯ä»¥åŒ–è§£ä¸€åˆ‡ä»‡æ¨",
                        "æƒ³è¦ä¿è­·æ‰€æ„›çš„äºº",
                        "æƒ…æ„Ÿæ˜¯äººæ€§çš„å…‰è¼",
                        "æ„›æƒ…èƒ½æˆ°å‹ä¸€åˆ‡å›°é›£",
                        "æº«æš–çš„æ‡·æŠ±æ˜¯æœ€å¥½çš„é¿é¢¨æ¸¯",
                        "ç‚ºæ„›è€Œç”Ÿï¼Œç‚ºæ„›è€Œæ­»",
                        "çœŸæ„›å¯ä»¥è¶…è¶Šç”Ÿæ­»"
                    ],
                    loyalty: [
                        "å¿ ç¾©æ˜¯æˆ‘çš„ä¿¡å¿µ...",
                        "æ—¢å—æ©æƒ ï¼Œç•¶ä»¥å‘½å ±ä¹‹ï¼",
                        "å›è‡£ä¹‹ç¾©ä¸å¯é•",
                        "å¿ èª æ˜¯æ­¦è€…çš„éˆé­‚",
                        "ç‚ºä¸»å›èµ´æ¹¯è¹ˆç«åœ¨æ‰€ä¸è¾­",
                        "ç¾©æ°£åƒç§‹ï¼Œæ°¸ä¸èƒŒå›",
                        "å¿ è‡£ä¸äº‹äºŒä¸»",
                        "ç¾©é‡å¦‚å±±ï¼Œæ­»è€Œå¾Œå·²",
                        "å¿ ç¾©ä¹‹å¿ƒæ˜­æ—¥æœˆ",
                        "ç”Ÿç‚ºå¿ è‡£ï¼Œæ­»ç‚ºç¾©é¬¼"
                    ],
                    seekingDao: [
                        "å±±ä¸­æœ‰çœŸæ„...",
                        "å±±ä¸­æœ‰çœŸæ„ï¼Œä½†è­˜è€…å¹¾äººï¼Ÿ",
                        "è¶…è„«ä¸–ä¿—æ‰æ˜¯æ­£é“",
                        "å¤§é“è‡³ç°¡ï¼Œè¿”ç’æ­¸çœŸ",
                        "èº«åœ¨å¡µä¸–ï¼Œå¿ƒå‘é’å¤©",
                        "ä¸–é–“ç¨®ç¨®çš†æ˜¯è™›å¦„",
                        "å”¯æœ‰è¶…è„«æ‰èƒ½å¾—çœŸè‡ªç”±",
                        "å¤©åœ°æœ‰å¤§ç¾è€Œä¸è¨€",
                        "é“æ³•è‡ªç„¶ï¼Œç„¡ç‚ºè€Œæ²»",
                        "å·²åˆ°ç„¡æˆ‘ç„¡ç›¸ä¹‹å¢ƒ"
                    ]
                };
                return quotes[voiceName][Math.min(level - 1, quotes[voiceName].length - 1)];
            }

            checkVoiceReactions(changedVoice, change) {
                if (Math.abs(change) >= 10) {
                    this.showVoiceReaction(changedVoice, change > 0);
                }
                
                // æ£€æŸ¥å£°éŸ³å†²çª
                this.checkVoiceConflicts();
            }

            checkVoiceConflicts() {
                const conflicts = [
                    { voices: ['filialPiety', 'seekingDao'], threshold: 70 },
                    { voices: ['masterTraining', 'tenderness'], threshold: 60 },
                    { voices: ['loyalty', 'seekingDao'], threshold: 65 }
                ];

                conflicts.forEach(conflict => {
                    const [voice1, voice2] = conflict.voices;
                    if (this.voices[voice1] >= conflict.threshold && this.voices[voice2] >= conflict.threshold) {
                        this.triggerVoiceConflict(voice1, voice2);
                    }
                });
            }

            triggerVoiceConflict(voice1, voice2) {
                if (!this.specialFlags[`conflict_${voice1}_${voice2}`]) {
                    this.specialFlags[`conflict_${voice1}_${voice2}`] = true;
                    this.showSpecialEvent(`å†…å¿ƒè²éŸ³è¡çªï¼${this.getVoiceName(voice1)}èˆ‡${this.getVoiceName(voice2)}ç™¼ç”Ÿæ¿€çƒˆçˆ­åŸ·...`);
                }
            }

            getVoiceName(voiceName) {
                const names = {
                    filialPiety: 'å­å¥³ä¹‹å¿ƒ',
                    masterTraining: 'å¸«é–€ä¹‹è¨“',
                    tenderness: 'æŸ”æƒ…ä¹‹æ„',
                    loyalty: 'å¿ ç¾©ä¹‹å¿µ',
                    seekingDao: 'å±±æ°´æ±‚é“'
                };
                return names[voiceName];
            }

            checkSpecialEvents() {
                // æ£€æŸ¥å¸ˆé—¨çªç ´
                if (this.voices.masterTraining >= 70 && this.voices.seekingDao >= 50 && !this.specialFlags.masterBreakthrough) {
                    this.specialFlags.masterBreakthrough = true;
                    this.showSpecialEvent('å¸«é–€æ¡æ¢é–‹å§‹é¬†å‹•ï¼å…§å¿ƒçš„è‡ªç”±æ„å¿—æ­£åœ¨è¦ºé†’...');
                    this.unlockAchievement('master_breakthrough', 'å¸«é–€çªç ´', 'é–‹å§‹è³ªç–‘å¸«çˆ¶çš„çµ•å°æ¬Šå¨');
                }

                // æ£€æŸ¥é“æ‚Ÿå¢ƒç•Œ
                if (this.voices.seekingDao >= 80 && !this.specialFlags.daoEnlightenment) {
                    this.specialFlags.daoEnlightenment = true;
                    this.showSpecialEvent('é“æ‚Ÿå¢ƒç•Œæå‡ï¼é–‹å§‹ç†è§£è¶…è„«ä¸–ä¿—çš„çœŸè«¦...');
                    this.unlockAchievement('dao_enlightenment', 'é“æ‚Ÿåˆæˆ', 'é”åˆ°è¼ƒé«˜çš„ç²¾ç¥å¢ƒç•Œ');
                }

                // æ£€æŸ¥æƒ…æ„Ÿè§‰é†’
                if (this.voices.tenderness >= 70 && this.voices.filialPiety >= 50 && !this.specialFlags.emotionalAwakening) {
                    this.specialFlags.emotionalAwakening = true;
                    this.showSpecialEvent('æƒ…æ„Ÿè¦ºé†’ï¼å®¶åº­èˆ‡æ„›æƒ…çš„ç¾å¥½è®“å¿ƒéˆæ›´åŠ è±å¯Œ...');
                    this.unlockAchievement('emotional_awakening', 'æƒ…æ„Ÿè¦ºé†’', 'é«”é©—åˆ°æ„›çš„å¤šé‡é¢å‘');
                }
            }

            showSpecialEvent(text) {
                const eventDiv = document.getElementById('specialEvent');
                const eventText = document.getElementById('specialEventText');
                eventText.textContent = text;
                eventDiv.classList.remove('hidden');
                
                setTimeout(() => {
                    eventDiv.classList.add('hidden');
                }, 5000);
            }

            unlockAchievement(id, name, description) {
                if (!this.achievements.find(a => a.id === id)) {
                    this.achievements.push({ id, name, description, unlockedAt: new Date() });
                    this.updateAchievementsDisplay();
                    this.showAchievementNotification(name, description);
                }
            }

            showAchievementNotification(name, description) {
                const notification = document.createElement('div');
                notification.className = 'achievement-notification fixed top-4 right-4 bg-yellow-500 text-white px-6 py-4 rounded-lg shadow-lg z-50 max-w-sm';
                notification.innerHTML = `
                    <div class="flex items-start">
                        <span class="text-2xl mr-3">ğŸ†</span>
                        <div>
                            <h4 class="font-bold">æˆå°±è§£é–ï¼</h4>
                            <p class="text-sm font-semibold">${name}</p>
                            <p class="text-xs opacity-90">${description}</p>
                        </div>
                    </div>
                `;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 500);
                }, 4000);
            }

            updateAchievementsDisplay() {
                const container = document.getElementById('achievements');
                if (this.achievements.length === 0) {
                    container.innerHTML = '<span class="text-xs text-gray-500 dark:text-gray-400">æš«ç„¡è§£é–æˆå°±</span>';
                } else {
                    container.innerHTML = this.achievements.map(a => 
                        `<div class="text-xs bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded mb-1">
                            <span class="font-semibold">${a.name}</span>
                            <br><span class="text-xs opacity-75">${a.description}</span>
                        </div>`
                    ).join('');
                }
            }

            showVoiceReaction(voiceName, positive) {
                const voiceConfig = {
                    filialPiety: { 
                        icon: 'ğŸ’', 
                        name: 'å­å¥³ä¹‹å¿ƒ',
                        positiveMsg: 'å®¶æ—æƒ…æ„Ÿæ·±æ·±è§¸å‹•äº†å…§å¿ƒ...',
                        negativeMsg: 'å°å®¶æ—çš„ç–é è®“æˆ‘æ„Ÿåˆ°ä¸å®‰...'
                    },
                    masterTraining: { 
                        icon: 'âš¡', 
                        name: 'å¸«é–€ä¹‹è¨“',
                        positiveMsg: 'å¸«çˆ¶çš„æ•™å°åœ¨å¿ƒä¸­è¿´éŸ¿...',
                        negativeMsg: 'è³ªç–‘å¸«çˆ¶çš„è²éŸ³åœ¨å¢å¼·...'
                    },
                    tenderness: { 
                        icon: 'ğŸ’•', 
                        name: 'æŸ”æƒ…ä¹‹æ„',
                        positiveMsg: 'å…§å¿ƒçš„æº«æŸ”è¢«å–šé†’äº†...',
                        negativeMsg: 'å¿ƒè®Šå¾—æ›´åŠ å …ç¡¬å†·é…·...'
                    },
                    loyalty: { 
                        icon: 'âš”ï¸', 
                        name: 'å¿ ç¾©ä¹‹å¿µ',
                        positiveMsg: 'å¿ ç¾©çš„ä¿¡å¿µåœ¨åŠ å¼·...',
                        negativeMsg: 'å°å¿ èª çš„æ‡·ç–‘åœ¨å¢é•·...'
                    },
                    seekingDao: { 
                        icon: 'ğŸŒŠ', 
                        name: 'å±±æ°´æ±‚é“',
                        positiveMsg: 'è¶…è„«çš„æ™ºæ…§åœ¨è¦ºé†’...',
                        negativeMsg: 'ä¸–ä¿—çš„ç‰½çµ†åœ¨åŠ æ·±...'
                    }
                };

                const config = voiceConfig[voiceName];
                const message = positive ? config.positiveMsg : config.negativeMsg;
                
                this.createFloatingMessage(`${config.icon} ${config.name}: ${message}`);
            }

            createFloatingMessage(text) {
                const message = document.createElement('div');
                message.className = 'fixed top-20 right-4 bg-primary text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-500 transform translate-x-full text-sm max-w-sm';
                message.textContent = text;
                document.body.appendChild(message);

                setTimeout(() => {
                    message.classList.remove('translate-x-full');
                }, 100);

                setTimeout(() => {
                    message.classList.add('translate-x-full');
                    setTimeout(() => {
                        if (document.body.contains(message)) {
                            document.body.removeChild(message);
                        }
                    }, 500);
                }, 3000);
            }

            addLearnedWord(word, meaning) {
                if (!this.learnedWords.find(w => w.word === word)) {
                    this.learnedWords.push({ word, meaning });
                    this.updateLearnedWordsDisplay();
                    
                    // è¯æ±‡å­¦ä¹ æˆå°±
                    if (this.learnedWords.length >= 10) {
                        this.unlockAchievement('word_collector', 'è©å½™æ”¶é›†å®¶', 'å­¸æœƒäº†10å€‹æ–‡è¨€æ–‡è©å½™');
                    }
                    if (this.learnedWords.length >= 20) {
                        this.unlockAchievement('word_master', 'è©å½™å¤§å¸«', 'å­¸æœƒäº†20å€‹æ–‡è¨€æ–‡è©å½™');
                    }
                }
            }

            updateLearnedWordsDisplay() {
                const container = document.getElementById('learnedWords');
                if (this.learnedWords.length === 0) {
                    container.innerHTML = '<span class="text-xs text-gray-500 dark:text-gray-400">æš«ç„¡æ”¶é›†è©å½™</span>';
                } else {
                    container.innerHTML = this.learnedWords.map(w => 
                        `<span class="inline-block bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded text-xs mr-1 mb-1" title="${w.meaning}">${w.word}</span>`
                    ).join('');
                }
            }

            updateProgress(chapterProgress, globalProgress = null) {
                this.chapterProgress = chapterProgress;
                if (globalProgress !== null) {
                    this.globalProgress = globalProgress;
                }
                
                document.getElementById('chapterProgress').style.width = `${chapterProgress}%`;
                document.getElementById('progressText').textContent = `${chapterProgress}%`;
                document.getElementById('globalProgress').style.width = `${this.globalProgress}%`;
            }

            updateChapter(chapter, title) {
                this.currentChapter = chapter;
                document.getElementById('chapterIndicator').textContent = `ç¬¬${chapter}ç« ï¼š${title}`;
            }

            unlockEnding(endingId, endingName, description) {
                if (!this.unlockedEndings.find(e => e.id === endingId)) {
                    this.unlockedEndings.push({ 
                        id: endingId, 
                        name: endingName, 
                        description: description,
                        unlockedAt: new Date(),
                        playthrough: this.gameHistory.length + 1
                    });
                    this.updateEndingsDisplay();
                    
                    // ç»“å±€è§£é”æˆå°±
                    if (this.unlockedEndings.length >= 1) {
                        this.unlockAchievement('first_ending', 'åˆæ¬¡é«”é©—', 'è§£é–äº†ç¬¬ä¸€å€‹çµå±€');
                    }
                    if (this.unlockedEndings.length >= 5) {
                        this.unlockAchievement('ending_explorer', 'çµå±€æ¢ç´¢è€…', 'è§£é–äº†5å€‹ä¸åŒçµå±€');
                    }
                    if (this.unlockedEndings.length >= 10) {
                        this.unlockAchievement('ending_collector', 'çµå±€æ”¶é›†å®¶', 'è§£é–äº†10å€‹ä¸åŒçµå±€');
                    }
                }
            }

            updateEndingsDisplay() {
                const container = document.getElementById('endingsCollection');
                if (this.unlockedEndings.length === 0) {
                    container.innerHTML = '<span class="text-xs text-gray-500 dark:text-gray-400">å°šæœªé”æˆä»»ä½•çµå±€</span>';
                } else {
                    container.innerHTML = this.unlockedEndings.map(e => 
                        `<div class="text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded mb-1">
                            <span class="font-semibold">${e.name}</span>
                            <br><span class="text-xs opacity-75">ç¬¬${e.playthrough}å‘¨ç›®é”æˆ</span>
                        </div>`
                    ).join('');
                }
            }

            saveGame() {
                const saveData = {
                    gameState: this,
                    timestamp: new Date(),
                    version: '2.0'
                };
                localStorage.setItem('nieYinNiang_save', JSON.stringify(saveData));
                this.createFloatingMessage('ğŸ’¾ éŠæˆ²é€²åº¦å·²ä¿å­˜');
            }

            loadGame() {
                try {
                    const saveData = JSON.parse(localStorage.getItem('nieYinNiang_save'));
                    if (saveData && saveData.gameState) {
                        Object.assign(this, saveData.gameState);
                        this.updateVoiceDisplay();
                        this.updateLearnedWordsDisplay();
                        this.updateAchievementsDisplay();
                        this.updateEndingsDisplay();
                        this.updateProgress(this.chapterProgress, this.globalProgress);
                        this.updateChapter(this.currentChapter, this.getChapterTitle(this.currentChapter));
                        this.createFloatingMessage('ğŸ“ éŠæˆ²é€²åº¦å·²è¼‰å…¥');
                        return true;
                    }
                } catch (error) {
                    console.error('è¼‰å…¥éŠæˆ²å¤±æ•—:', error);
                }
                return false;
            }

            getChapterTitle(chapter) {
                const titles = {
                    1: 'åˆå¿ƒä¹‹å•',
                    2: 'å¸«é–€å¡‘é€ ', 
                    3: 'è¦ªæƒ…å›æ­¸',
                    4: 'ä¸–ä¿—æ·é–',
                    5: 'å¿ èª è€ƒé©—',
                    6: 'è­·ä¸»æ±ºæˆ°',
                    7: 'çµ‚æ¥µé¸æ“‡'
                };
                return titles[chapter] || 'æœªçŸ¥ç« ç¯€';
            }
        }

        // åˆ›å»ºæ–‡è¨€æ–‡è¯æ±‡æç¤º
        function createWordTooltip(word, meaning) {
            return `<span class="word-tooltip">${word}<span class="tooltip-content">${meaning}</span></span>`;
        }

        // æ•…äº‹åœºæ™¯å®šä¹‰ï¼ˆå®Œæ•´ç‰ˆï¼‰
        const storyScenes = {
            // ç¬¬ä¸€ç« ï¼šåˆå¿ƒä¹‹å• (10å²)
            intro: {
                title: "ä¸é€Ÿä¹‹å®¢",
                chapter: 1,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬ä¸€ç« ï¼šåˆå¿ƒä¹‹å• Â· å”è²å…ƒå¹´é–“ Â· é­åšå¤§å°‡åºœ Â· ä½ åæ­²
                        </div>
                    </div>
                    
                    <p class="text-lg leading-relaxed mb-4">
                        ä½ æ˜¯é­åšå¤§å°‡è¶é‹’ä¹‹å¥³ï¼Œå¹´æ–¹åæ­²ã€‚è²å…ƒçš„æ—¥å…‰ï¼Œæ­£æš–æš–åœ°ç…§åœ¨åºœé‚¸çš„åº­é™¢ã€‚
                    </p>
                    
                    <p class="leading-relaxed mb-4">
                        åˆå¾Œï¼Œä½ åœ¨é™¢ä¸­è‡¨å¸–ï¼Œç­†å°–å¢¨é¦™èˆ‡æ»¿æ¶è–”è–‡çš„èŠ¬èŠ³äº¤ç»‡ã€‚å¿½èé–€å¤–å‚³ä¾†ä¸€è²${createWordTooltip('å±', 'å¤§è²å‘µæ–¥')}ï¼Œæ‰“ç ´äº†é€™ä»½å¯§éœã€‚ä½ å¥½å¥‡åœ°æ”¾ä¸‹ç­†ï¼Œæ‚„æ‚„ç§»æ­¥è‡³é–€é‚Šã€‚
                    </p>
                    
                    <p class="leading-relaxed mb-4">
                        ä¸€ä½é’è¡£å°¼å§‘ç«‹æ–¼é–€å‰ï¼Œæ°£åº¦æ²‰éœï¼Œæ­£èˆ‡ä½ çš„çˆ¶è¦ªèªªè©±ã€‚å¥¹çš„ç›®å…‰è½‰å‘ä½ ï¼Œçœ¼ä¸­ç«Ÿéœ²å‡ºä¸€çµ²${createWordTooltip('æ‚…', 'å–œæ­¡')}è‰²ï¼Œèªæ°£å¹³ç·©å»ä¸å®¹ç½®ç–‘ï¼šã€Œé€™å¥³å­©å¤©è³‡æ¸…å¥‡ï¼Œè‹¥éš¨æˆ‘ä¿®è¡Œï¼Œä»–æ—¥æˆå°±ä¸å¯é™é‡ã€‚ã€
                    </p>

                    <div class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 my-4">
                        <p class="text-sm italic">ğŸ’¡ ä¸€å€‹å°‹å¸¸åˆå¾Œï¼Œå› ä¸€ä½ä¸é€Ÿä¹‹å®¢è€Œä¸å†å°‹å¸¸ã€‚ä½ çš„å‘½é‹ï¼Œæ­£æ‚„ç„¶ç«‹æ–¼å²”è·¯å£ã€‚</p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ“š å±æ¯å‡ç¥ï¼Œæƒ³è½å¾—æ›´çœŸåˆ‡äº›",
                        description: "ï¼ˆå¥¹å€‘åœ¨èªªä»€éº¼ï¼Ÿå’Œæˆ‘æœ‰é—œå—ï¼Ÿï¼‰",
                        effects: { seekingDao: 5, tenderness: 5 },
                        learnedWords: [{ word: 'æ‚…', meaning: 'å–œæ­¡' }],
                        nextScene: 'curiosity'
                    },
                    {
                        text: "ğŸ  èº²åˆ°çˆ¶è¦ªå¯¬é—Šçš„èƒŒå¾Œ",
                        description: "ï¼ˆé™Œç”Ÿäººçš„çœ¼ç¥è®“æˆ‘ä¸å®‰ï¼Œçˆ¶è¦ªèº«é‚Šæœ€æ˜¯å®‰ç©©ï¼‰",
                        effects: { filialPiety: 10, tenderness: 5 },
                        learnedWords: [{ word: 'æ‚…', meaning: 'å–œæ­¡' }, { word: 'å±', meaning: 'å¤§è²å‘µæ–¥' }],
                        nextScene: 'hideByFather'
                    },
                    {
                        text: "ğŸ˜¤ å¦ç„¶èµ°å‡ºï¼Œé¢å°æœªçŸ¥çš„ç›®å…‰",
                        description: "ï¼ˆæ—¢ç„¶èˆ‡æˆ‘æœ‰é—œï¼Œæˆ‘ä¾¿æ‡‰ç•¶åœ¨å ´ï¼‰",
                        effects: { seekingDao: 10, loyalty: 5 },
                        learnedWords: [{ word: 'æ‚…', meaning: 'å–œæ­¡' }],
                        nextScene: 'braveFace'
                    }
                ]
            },

            curiosity: {
                title: "å·è½çš„å°å¥³å­©",
                chapter: 1,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ èº²åœ¨é–€å¾Œï¼Œè±èµ·è€³æœµä»”ç´°è½è‘—ã€‚åªè½çˆ¶è¦ªè¶é‹’${createWordTooltip('å±', 'å¤§è²å‘µæ–¥')}é“ï¼šã€Œæˆ‘å¥³å…’å¹´å¹¼ï¼Œä¸éœ€è¦ä»€éº¼æ•™å°ï¼ä½ é€™å°¼å§‘è«è¦èƒ¡è¨€äº‚èªï¼ã€
                    </p>
                    
                    <p class="leading-relaxed mb-4">
                        å°¼å§‘å»ä¸ä»¥ç‚ºç„¶ï¼Œæ·¡æ·¡ä¸€ç¬‘ï¼šã€ŒæŠ¼è¡™è«è¦${createWordTooltip('é©šé§­', 'åƒé©šå®³æ€•')}ï¼Œè€å°¼åªè¦‹æ­¤å­©æœ‰æ…§æ ¹ï¼Œæ¬²åŠ é»åŒ–ã€‚å³ä¾¿æŠ¼è¡™é–æ–¼éµæ«ƒï¼Œè€å°¼äº¦èƒ½å¸¶å»ã€‚ã€
                    </p>
                    
                    <p class="leading-relaxed mb-6">
                        ä½ è½å¾—å¿ƒä¸­äº”å‘³é›œé™³ï¼Œæ—¢ç‚ºçˆ¶è¦ªçš„ä¿è­·æ„Ÿåˆ°æº«æš–ï¼Œåˆå°å°¼å§‘å£ä¸­çš„ã€Œæ•™å°ã€å……æ»¿å¥½å¥‡...
                    </p>
                    
                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"é€™å€‹å°¼å§‘èªªè©±å¥½å¥‡æ€ª...ä»€éº¼å«'æœ‰æ…§æ ¹'ï¼Ÿå¤–é¢çš„ä¸–ç•ŒçœŸçš„é‚£éº¼ç¥å¥‡å—ï¼Ÿ"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ¤” æ€è€ƒå°¼å§‘è©±ä¸­çš„æ·±æ„",
                        description: "ï¼ˆä»€éº¼æ˜¯æ…§æ ¹ï¼Ÿç‚ºä»€éº¼å¥¹èªªæˆ‘ä¸ä¸€æ¨£ï¼Ÿï¼‰",
                        effects: { seekingDao: 15, filialPiety: -5 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'deepThinking'
                    },
                    {
                        text: "ğŸ˜¨ ç‚ºçˆ¶è¦ªçš„å®‰å…¨æ“”å¿ƒ",
                        description: "ï¼ˆé€™å€‹äººèªªè©±å¥½å¯æ€•ï¼Œæˆ‘è¦ä¿è­·çˆ¶è¦ªï¼‰",
                        effects: { filialPiety: 15, tenderness: 10 },
                        learnedWords: [{ word: 'å±', meaning: 'å¤§è²å‘µæ–¥' }, { word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'worryForFather'
                    }
                ]
            },

            hideByFather: {
                title: "çˆ¶è¦ªçš„ä¿è­·",
                chapter: 1,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ€¯æ€¯åœ°èº²åˆ°çˆ¶è¦ªèº«å¾Œï¼Œå°æ‰‹ç·Šç·ŠæŠ“ä½çˆ¶è¦ªçš„è¡£è¢ã€‚è¶é‹’æ„Ÿå—åˆ°ä½ çš„ææ‡¼ï¼Œæ›´åŠ ${createWordTooltip('å±', 'å¤§è²å‘µæ–¥')}é“ï¼šã€Œä½ é€™å¦–å°¼ï¼Œä¼‘è¦åš‡å”¬æˆ‘çš„å¥³å…’ï¼ã€
                    </p>

                    <p class="leading-relaxed mb-6">
                        ä½ åœ¨çˆ¶è¦ªçš„æ‡·æŠ±ä¸­æ„Ÿåˆ°ç„¡æ¯”å®‰å…¨ï¼Œä½†å¿ƒä¸­ä¹Ÿéš±ç´„æ„Ÿåˆ°ï¼Œé€™å€‹å°¼å§‘ä¼¼ä¹ä¸¦ä¸ç°¡å–®...
                    </p>
                    
                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> 
                            <em>"çˆ¶è¦ªé€™éº¼ä¿è­·æˆ‘ï¼Œæˆ‘ä¸€å®šè¦åšå€‹å¥½å¥³å…’ï¼Œä¸è®“ä»–æ“”å¿ƒã€‚"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ¤— ç·Šç·ŠæŠ±ä½çˆ¶è¦ª",
                        description: "ï¼ˆçˆ¶è¦ªæ˜¯æˆ‘åœ¨é€™å€‹ä¸–ç•Œä¸Šæœ€é‡è¦çš„äººï¼‰",
                        effects: { filialPiety: 20, tenderness: 10 },
                        learnedWords: [{ word: 'å±', meaning: 'å¤§è²å‘µæ–¥' }],
                        nextScene: 'finalChoice'
                    },
                    {
                        text: "ğŸ‘€ å·å·è§€å¯Ÿå°¼å§‘",
                        description: "ï¼ˆé›–ç„¶å®³æ€•ï¼Œä½†é‚„æ˜¯æƒ³çœ‹çœ‹å¥¹åˆ°åº•æ˜¯ä»€éº¼äººï¼‰",
                        effects: { filialPiety: 10, seekingDao: 10 },
                        learnedWords: [{ word: 'æ‚…', meaning: 'å–œæ­¡' }],
                        nextScene: 'finalChoice'
                    }
                ]
            },

            braveFace: {
                title: "å‹‡æ•¢çš„ä½ ",
                chapter: 1,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ·±å¸ä¸€å£æ°£ï¼Œå¾é–€å¾Œèµ°äº†å‡ºä¾†ï¼Œç›´è¦–è‘—å°¼å§‘çš„çœ¼ç›ã€‚é›–ç„¶åªæœ‰åæ­²ï¼Œä½†ä½ çš„ç›®å…‰ä¸­å·²å¸¶è‘—ä¸€çµ²ä¸åŒå°‹å¸¸çš„å …å®šã€‚
                    </p>

                    <p class="leading-relaxed mb-6">
                        å°¼å§‘å¾®ç¬‘é“ï¼šã€Œå°å¨ƒå¨ƒï¼Œä½ æƒ³ä¸æƒ³å­¸åˆ°çœŸæ­£çš„æœ¬é ˜ï¼Ÿæƒ³ä¸æƒ³çœ‹çœ‹é€™å€‹ä¸–ç•Œçš„çœŸç›¸ï¼Ÿã€
                    </p>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"æˆ‘ä¸çŸ¥é“ç‚ºä»€éº¼ï¼Œä½†æˆ‘è¦ºå¾—ä¸æ‡‰è©²è®“åˆ¥äººæ›¿æˆ‘åšæ±ºå®šã€‚"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ—£ï¸ ç›´æ¥å•å°¼å§‘çš„ç›®çš„",
                        description: "ï¼ˆæˆ‘è¦çŸ¥é“æ‚¨åˆ°åº•æƒ³æ•™æˆ‘ä»€éº¼ï¼‰",
                        effects: { seekingDao: 20, loyalty: -5 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'finalChoice'
                    },
                    {
                        text: "ğŸ‘¨ å…ˆçœ‹çˆ¶è¦ªçš„åæ‡‰",
                        description: "ï¼ˆé›–ç„¶æˆ‘å¾ˆå¥½å¥‡ï¼Œä½†çˆ¶è¦ªçš„æƒ³æ³•ä¹Ÿå¾ˆé‡è¦ï¼‰",
                        effects: { filialPiety: 10, seekingDao: 10 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'finalChoice'
                    }
                ]
            },

            deepThinking: {
                title: "æ…§æ ¹çš„å›°æƒ‘",
                chapter: 1,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ é™·å…¥äº†æ·±æ·±çš„æ€è€ƒã€‚ã€Œæ…§æ ¹ã€äºŒå­—å¦‚ç¨®å…¥å¿ƒï¼Œæ–¼å¹¼å°çš„å¿ƒéˆä¸­æ‚„ç„¶ç”Ÿæ ¹ã€‚
                    </p>

                    <p class="leading-relaxed mb-6">
                        æ­£æ­¤æ™‚ï¼Œçˆ¶è¦ªç™¼ç¾äº†ä½ çš„${createWordTooltip('å½±éŸ¿', 'èº«å½±èˆ‡è²éŸ¿')}...
                    </p>

                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"ä¹Ÿè¨±...ä¹Ÿè¨±æˆ‘çœŸçš„å’Œå…¶ä»–å­©å­ä¸ä¸€æ¨£ï¼Ÿ"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸƒ ç«‹åˆ»è·‘åˆ°çˆ¶è¦ªèº«é‚Š",
                        description: "ï¼ˆæˆ‘ä¸èƒ½è®“çˆ¶è¦ªæ“”å¿ƒï¼‰",
                        effects: { filialPiety: 15 },
                        learnedWords: [{ word: 'å½±éŸ¿', meaning: 'èº«å½±èˆ‡è²éŸ¿' }],
                        nextScene: 'finalChoice'
                    },
                    {
                        text: "ğŸ¤« ç¹¼çºŒèº²è‘—æ€è€ƒ",
                        description: "ï¼ˆæˆ‘éœ€è¦æ›´å¤šæ™‚é–“æƒ³æ¸…æ¥šï¼‰",
                        effects: { seekingDao: 10, filialPiety: -5 },
                        learnedWords: [{ word: 'å½±éŸ¿', meaning: 'èº«å½±èˆ‡è²éŸ¿' }],
                        nextScene: 'finalChoice'
                    }
                ]
            },

            worryForFather: {
                title: "ä¿è­·çˆ¶è¦ªçš„æ±ºå¿ƒ",
                chapter: 1,
                content: `
                    <p class="leading-relaxed mb-4">
                        çœ‹åˆ°çˆ¶è¦ªå› ä¿è­·ä½ è€Œèˆ‡å°¼å§‘çˆ­åŸ·ï¼Œä½ å¿ƒä¸­å¿½èµ·è­·çˆ¶ä¹‹å¿µï¼Œæ±ºæ„ä¸å†èº²æ–¼æš—è™•ã€‚
                    </p>

                    <p class="leading-relaxed mb-6">
                        ä½ èµ°äº†å‡ºä¾†ï¼Œç«™åœ¨çˆ¶è¦ªèº«é‚Šï¼Œå°å°çš„èº«è»€æŒºå¾—ç­†ç›´...
                    </p>

                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> 
                            <em>"çˆ¶è¦ªç‚ºäº†æˆ‘é€™éº¼è¾›è‹¦ï¼Œæˆ‘ä¸èƒ½å†è®“ä»–ç‚ºé›£äº†ã€‚"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ’ª ç«™åœ¨çˆ¶è¦ªé¢å‰ä¿è­·ä»–",
                        description: "ï¼ˆé›–ç„¶æˆ‘å¾ˆå°ï¼Œä½†æˆ‘è¦ä¿è­·çˆ¶è¦ªï¼‰",
                        effects: { filialPiety: 25, loyalty: 10 },
                        nextScene: 'finalChoice'
                    },
                    {
                        text: "ğŸ™ è«‹æ±‚å°¼å§‘ä¸è¦ç‚ºé›£çˆ¶è¦ª",
                        description: "ï¼ˆä¹Ÿè¨±å¥½å¥½èªªè©±å¯ä»¥è§£æ±ºå•é¡Œï¼‰",
                        effects: { filialPiety: 15, tenderness: 15 },
                        nextScene: 'finalChoice'
                    }
                ]
            },

            finalChoice: {
                title: "å‘½é‹çš„å²”è·¯",
                chapter: 1,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-red-500 text-white px-4 py-2 rounded-full text-sm mb-4">
                            æŠ‰æ“‡ä¹‹åˆ»
                        </div>
                    </div>
                    
                    <p class="leading-relaxed mb-4">
                        ç´›äº‚ä¹‹éš›ï¼Œå°¼å§‘çš„ç›®å…‰è¶Šéä½ çš„çˆ¶è¦ªï¼Œå¾‘ç›´è½åœ¨ä½ èº«ä¸Šï¼Œè²éŸ³æ¸…å†·å¦‚ç‰çŸ³ç›¸æ“Šï¼šã€Œå¥³å­©ï¼Œå¡µä¸–çš„å¯Œè²´èˆ‡å®‰ç©©ï¼Œæˆ–å±±å·”çš„å­¤å¯‚èˆ‡çœŸç›¸ï¼Œä½ é¸å“ªä¸€æ¢è·¯ï¼Ÿã€
                    </p>

                    <p class="leading-relaxed mb-4">
                        çˆ¶è¦ª${createWordTooltip('é©šé§­', 'åƒé©šå®³æ€•')}é“ï¼šã€Œæˆ‘å¥³å…’å°šå¹¼ï¼Œè±ˆå®¹ä½ åœ¨æ­¤è ±æƒ‘ï¼ã€å°¼å§‘å»åªçœ‹è‘—ä½ ï¼Œæ·¡ç„¶é“ï¼šã€Œè·¯ï¼Œçµ‚ç©¶è¦è‡ªå·±é¸ã€‚ã€
                    </p>

                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-l-4 border-purple-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ’­ ä½ å¿ƒåº•çš„è²éŸ³ï¼Œæ­¤åˆ»éŸ¿æˆä¸€ç‰‡ï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-pink-600">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> <em>ã€Œçˆ¶è¦ªçš„æ‡·æŠ±å¦‚æ­¤æº«æš–ï¼Œæˆ‘æ€èƒ½æ¨å¾—é›¢é–‹ï¼Ÿã€</em></p>
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>ã€Œå¯ã€çœŸç›¸ã€ç©¶ç«Ÿæ˜¯ä»€éº¼ï¼Ÿå±±çš„å¾Œé¢ï¼Œåˆæ˜¯æ€æ¨£çš„ä¸–ç•Œï¼Ÿã€</em></p>
                            <p><span class="font-semibold text-purple-600">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>ã€Œè‹¥æˆ‘é›¢å»ï¼Œçˆ¶è¦ªæœƒå¤šéº¼å¿ƒç¢â€¦â€¦ã€</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6 font-semibold text-lg">
                        ä½ çš„å›ç­”ï¼Œå°‡ç•«ä¸‹ä½ äººç”Ÿçš„ç¬¬ä¸€ç­†ï¼Œæ·±é ï¼Œä¸”å†é›£å¡—æ”¹ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ  ã€Œæˆ‘è¦ç•™ä¸‹ï¼Œé™ªè‘—çˆ¶è¦ªã€",
                        description: "ï¼ˆä¸–é–“è¬èˆ¬ï¼Œä¸åŠæ­¤åˆ»çš„æº«æš–èˆ‡å®‰ç©©ï¼‰",
                        effects: { filialPiety: 30, tenderness: 15, seekingDao: -20 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'chapter1_stayHome'
                    },
                    {
                        text: "ğŸŒŸ ã€Œæˆ‘â€¦â€¦æƒ³å»çœ‹ä¸€çœ‹ã€",
                        description: "ï¼ˆå¿ƒä¸­æœ‰å€‹è²éŸ³å‘Šè¯‰æˆ‘ï¼Œæˆ‘å±äºæ›´è¿œçš„åœ°æ–¹ï¼‰",
                        effects: { seekingDao: 35, filialPiety: -15, masterTraining: 20 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'chapter2_start'
                    },
                    {
                        text: "ğŸ¤ ã€Œè«‹çµ¦æˆ‘â€¦â€¦ä¸€äº›æ™‚é–“ã€",
                        description: "ï¼ˆå¦‚æ­¤é‡å¤§çš„æ±ºå®šï¼Œæˆ‘ä¸èƒ½ç«‹åˆ»å›ç­”ï¼‰",
                        effects: { seekingDao: 10, filialPiety: 10, tenderness: 10 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'chapter1_postpone'
                    }
                ]
            },

            // ç¬¬ä¸€ç« ç»“å±€
            chapter1_stayHome: {
                title: "åº­é™¢æ·±æ·±",
                chapter: 1,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬ä¸€ç«  Â· çµ‚
                        </div>
                    </div>

                    <p class="leading-relaxed mb-4">
                        ä½ æœ€çµ‚é‚„æ˜¯é¸æ“‡äº†ç•™ä¸‹ã€‚å°¼å§‘æ·±æ·±åœ°çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ²’æœ‰å†èªªä»€éº¼ï¼Œè½‰èº«é›¢å»ï¼Œé’è‰²çš„èº«å½±æ¶ˆå¤±åœ¨å··å£çš„æ—¥å…‰è£¡ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        çˆ¶è¦ªå°‡ä½ ç·Šç·Šæ‘Ÿåœ¨æ‡·ä¸­ï¼Œæ‰‹æŒæº«åšè€Œæœ‰åŠ›ã€‚åº­é™¢é‡æ­¸å¯§éœï¼Œå½·å½¿ä»€éº¼ä¹Ÿæœªæ›¾ç™¼ç”Ÿã€‚å¾€å¾Œçš„æ­²æœˆï¼Œä½ èº«è™•éŒ¦ç¹¡ï¼Œå‚™å—å¯µæ„›ï¼Œä¾å¾ªè‘—ä¸–å®¶å¥³å­çš„è»Œè·¡æˆé•·ã€‚
                    </p>

                    <p class="leading-relaxed mb-6">
                        ä½ çš„ç«¥å¹´å°‡åœ¨å®‰ç©©ä¸­åº¦éï¼Œä½†é‚£æ‰‡é€šå¾€æœªçŸ¥çš„é–€ï¼ŒçœŸçš„å°±æ­¤é—œä¸Šäº†å—ï¼Ÿ
                    </p>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“ (æ½›è—):</span> 
                            <em>ç„¶è€Œï¼Œåœ¨ç„¡æ•¸å€‹ç¨è‡ªä¸€äººçš„åˆå¾Œï¼Œç•¶ä½ çœ‹å‘é å±±ï¼Œç¸½æœƒä¸ç¶“æ„åœ°æƒ³èµ·é‚£å€‹å°¼å§‘ï¼Œæƒ³èµ·å¥¹å£ä¸­çš„ã€Œå¦ä¸€å€‹ä¸–ç•Œã€ã€‚å¿ƒä¸­çš„é‚£é¡†ç¨®å­ï¼Œä¸¦æœªæ¯èï¼Œåªæ˜¯æ²‰ç¡ã€‚</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "â³ äº”å¹´å¾Œ...",
                        description: "",
                        nextScene: 'chapter2_alternative'
                    }
                ]
            },

            chapter1_postpone: {
                title: "ç‰‡åˆ»çš„å¯§éœ",
                chapter: 1,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬ä¸€ç«  Â· å¾…çºŒ
                        </div>
                    </div>

                    <p class="leading-relaxed mb-4">
                        é¢å°å¦‚æ­¤é‡å¤§çš„æŠ‰æ“‡ï¼Œä½ å‡ºäººæ„æ–™åœ°ä¿æŒäº†é®éœã€‚ã€Œè«‹çµ¦æˆ‘ä¸€äº›æ™‚é–“ï¼Œã€ä½ èªªï¼Œè²éŸ³ä¸å¤§ï¼Œä½†å¾ˆæ¸…æ™°ã€‚
                    </p>
                    
                    <p class="leading-relaxed mb-4">
                        å°¼å§‘çš„çœ¼ä¸­é–ƒéä¸€çµ²è®šè¨±ã€‚ã€Œä¹Ÿå¥½ã€‚æ™ºæ…§ä¸åƒ…åœ¨æ–¼é¸æ“‡ï¼Œæ›´åœ¨æ–¼æ‡‚å¾—ä½•æ™‚é¸æ“‡ã€‚ã€å¥¹å°ä½ çˆ¶è¦ªèªªï¼šã€Œä¸€å€‹æœˆå¾Œï¼Œæˆ‘æœƒå†ä¾†ã€‚åˆ°é‚£æ™‚ï¼Œå¸Œæœ›ä½ å€‘å·²æœ‰äº†ç­”æ¡ˆã€‚ã€èªªç½·ï¼Œå¥¹è½‰èº«é£„ç„¶è€Œå»ã€‚
                    </p>
                    
                    <p class="leading-relaxed mb-6">
                        ä½ è·å¾—äº†ä¸€ä¸ªæœˆçš„å®è´µæ—¶é—´æ¥æ€è€ƒä½ çš„æœªæ¥ã€‚è¿™ä¸€ä¸ªæœˆï¼Œå°†å†³å®šä½ ä¸€ç”Ÿçš„èµ°å‘ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "â³ ä¸€å€‹æœˆå¾Œ...",
                        description: "",
                        nextScene: 'chapter2_thinking'
                    }
                ]
            },

            // ç¬¬äºŒç« é–‹å§‹ï¼ˆé¸æ“‡è·Ÿéš¨å°¼å§‘ï¼‰
            chapter2_start: {
                title: "çŸ³ç©´åˆæ¢",
                chapter: 2,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬äºŒç« ï¼šå¸«é–€ Â· æ·±å±±çŸ³ç©´ Â· åæ­²è‡³åäº”æ­²
                        </div>
                    </div>
                    
                    <p class="leading-relaxed mb-4">
                        ä½ é¸æ“‡äº†æœªçŸ¥ã€‚é‚£å¤œï¼Œä½ æ¶ˆå¤±å¾—æ‚„ç„¡è²æ¯ï¼Œå¦‚ä¸€æ»´æ°´èå…¥å¤§æµ·ã€‚çˆ¶è¦ªè¶é‹’${createWordTooltip('æ¶•æ³£', 'å“­')}ä¸æ­¢ï¼Œå››è™•å°‹è¦“ï¼Œå»åªæ›ä¾†ç©ºå¯‚çš„å›éŸ³ã€‚
                    </p>

                    <blockquote class="quote-text">
                        ä½ åˆè¢«å°¼å§‘${createWordTooltip('æŒˆ', 'å¸¶è‘—')}è€Œè¡Œï¼Œä¸çŸ¥å¹¾é‡Œã€‚åŠæ˜ï¼Œè‡³å¤§çŸ³ç©´ä¹‹åµŒç©ºæ•¸åæ­¥ï¼Œå¯‚ç„¡å±…äººï¼ŒçŒ¿ç‹–æ¥µå¤šï¼Œæ¾è˜¿ç›Šé‚ƒã€‚å·²æœ‰äºŒå¥³ï¼Œäº¦å„åæ­²ã€‚çš†è°æ˜å©‰éº—ï¼Œä¸é£Ÿï¼Œèƒ½æ–¼å³­å£ä¸Šé£›èµ°ï¼Œè‹¥æ·çŒ±ç™»${createWordTooltip('æœ¨', 'æ¨¹')}ï¼Œç„¡æœ‰è¹¶å¤±ã€‚
                    </blockquote>

                    <div class="bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> 
                            <em>"å¾ä»Šæ—¥èµ·ï¼Œå¿˜æ‰ä½ çš„åå­—ï¼Œå¿˜æ‰ä½ çš„éå»ã€‚ä½ åªæ˜¯ä¸€å¡Šç’ç‰ï¼Œç­‰å¾…æˆ‘çš„é›•ç¢ã€‚"</em>
                        </p>
                    </div>

                    <blockquote class="quote-text">
                        å°¼å§‘çµ¦ä½ ä¸€ç²’è—¥ï¼Œå…¼ä»¤é•·åŸ·å¯¶åŠä¸€å£ï¼Œé•·äºŒå°º${createWordTooltip('è¨±', 'å¤§ç´„')}ï¼Œé‹’åˆ©å¹æ¯›ï¼Œä»¤å°ˆé€äºŒå¥³${createWordTooltip('æ”€ç·£', 'æ‹‰è‘—å‘ä¸Šçˆ¬')}...
                    </blockquote>
                `,
                choices: [
                    {
                        text: "ğŸ˜¨ ææ‡¼èˆ‡æ€å¿µå¦‚æ½®æ°´æ¹§ä¾†",
                        description: "ï¼ˆé€™è£é™°å†·è€Œé™Œç”Ÿï¼Œæˆ‘æƒ³å¿µçˆ¶è¦ªçš„æ‡·æŠ±ï¼‰",
                        effects: { filialPiety: 10, tenderness: 15, masterTraining: -5 },
                        learnedWords: [{ word: 'æ¶•æ³£', meaning: 'å“­' }, { word: 'æŒˆ', meaning: 'å¸¶è‘—' }],
                        nextScene: 'chapter2_homesick'
                    },
                    {
                        text: "ğŸ—¡ï¸ æ”¶æ–‚å¿ƒç¥ï¼ŒåŠªåŠ›é©æ‡‰",
                        description: "ï¼ˆæ—¢å·²é¸æ“‡ï¼Œä¾¿ä¸æ‡‰é€€ç¸®ï¼Œå”¯æœ‰å‘å‰ï¼‰",
                        effects: { masterTraining: 15, loyalty: 5, filialPiety: -5 },
                        learnedWords: [{ word: 'æœ¨', 'meaning': 'æ¨¹' }, { word: 'è¨±', meaning: 'å¤§ç´„' }],
                        nextScene: 'chapter2_adapt'
                    },
                    {
                        text: "ğŸ¤” éœé»˜è§€å¯Ÿï¼Œå°‹æ±‚ç­”æ¡ˆ",
                        description: "ï¼ˆå¸«çˆ¶ã€å¸«å§ã€é€™çŸ³ç©´â€¦â€¦ä¸€åˆ‡çš†æ˜¯è¬ï¼Œæˆ‘éœ€çœ‹æ¸…ï¼‰",
                        effects: { seekingDao: 20, masterTraining: 5 },
                        learnedWords: [{ word: 'æ”€ç·£', meaning: 'æ‹‰è‘—å‘ä¸Šçˆ¬' }],
                        nextScene: 'chapter2_observe'
                    }
                ]
            },

            chapter2_alternative: {
                title: "åº­é™¢ä¸­çš„ä¿®è¡Œ",
                chapter: 2,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬äºŒç« ï¼šå®¶ä¸­æ­²æœˆ Â· è¶åºœ Â· åæ­²è‡³åäº”æ­²
                        </div>
                    </div>

                    <p class="leading-relaxed mb-4">
                        äº”å¹´æ™‚å…‰ï¼Œå¦‚åº­é™¢ä¸­çš„èŠ±é–‹èŠ±è½ï¼Œæ‚„ç„¶é€å»ã€‚ä½ å·²æ˜¯åäº”æ­²çš„å°‘å¥³ï¼Œèº«å§¿äº­äº­ï¼Œçœ‰ç›®é–“å»æ¯”åŒé½¡äººå¤šäº†ä¸€ä»½æ²‰éœã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        å®‰ç©©çš„æ—¥å­æœªèƒ½æ’«å¹³ä½ å…§å¿ƒçš„æ³¢ç€¾ã€‚æ¯ç•¶å¤œæ·±äººéœï¼Œä½ ç¸½æœƒæƒ³èµ·é‚£ä½é’è¡£å°¼å§‘ï¼Œå’Œå¥¹å£ä¸­é‚£å€‹æœªçŸ¥çš„ã€æ›´å»£é—Šçš„ä¸–ç•Œã€‚
                    </p>

                    <p class="leading-relaxed mb-6">
                        ä¸€æ—¥ï¼Œåºœä¸­ä¾†å®¢ï¼Œè«‡åŠæ±Ÿæ¹–å¥‡èã€ä¿ å®¢ç¾©è¡Œï¼Œä½ åœ¨ä¸€æ—éœè½ï¼Œå¿ƒä¸­çš„ç¨®å­ä¼¼ä¹åœ¨æ‚„ç„¶ç™¼èŠ½ã€‚
                    </p>

                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"ç•™åœ¨é€™è£¡ï¼Œæˆ‘å®ˆè­·äº†è¦ªæƒ…ï¼Œä½†æˆ‘æ˜¯ä¸æ˜¯â€¦â€¦ä¹Ÿè¾œè² äº†å¦ä¸€ç¨®å¯èƒ½çš„è‡ªå·±ï¼Ÿ"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ’­ è¿½æ‚”ç•¶æ—¥çš„é¸æ“‡",
                        description: "ï¼ˆè‹¥ç•¶æ™‚è¸å‡ºé‚£ä¸€æ­¥ï¼Œå¦‚ä»Šçš„æˆ‘æœƒèº«åœ¨ä½•æ–¹ï¼Ÿï¼‰",
                        effects: { seekingDao: 15, filialPiety: -10 },
                        nextScene: 'chapter2_regret'
                    },
                    {
                        text: "ğŸ  æ›´åŠ çè¦–çœ¼å‰çš„æº«æš–",
                        description: "ï¼ˆæ±Ÿæ¹–é›–é ï¼Œä¸åŠå®¶ä¸­ä¸€ç›ç‡ˆç«ï¼‰",
                        effects: { filialPiety: 20, tenderness: 15 },
                        nextScene: 'chapter2_family_focused'
                    },
                    {
                        text: "ğŸ“š æ–¼åº­é™¢ä¸­ï¼Œé–‹å§‹è‡ªå·±çš„ä¿®è¡Œ",
                        description: "ï¼ˆèº«é›–åœ¨æ­¤ï¼Œå¿ƒå¯é¦³é¨åƒé‡Œã€‚é“ï¼Œä¸ä¸€å®šåªåœ¨å±±é‡ï¼‰",
                        effects: { seekingDao: 10, loyalty: 10 },
                        nextScene: 'chapter2_self_study'
                    }
                ]
            },

            chapter2_thinking: {
                title: "æŠ‰æ“‡ä¹‹æ€",
                chapter: 2,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬äºŒç« ï¼šæŠ‰æ“‡ä¹‹æ€ Â· è¶åºœ Â· ä¸€å€‹æœˆçš„çŒ¶è±«
                        </div>
                    </div>

                    <p class="leading-relaxed mb-4">
                        å°¼å§‘ç•™ä¸‹äº†ä¸€å€‹ç‚ºæœŸä¸€æœˆçš„ç´„å®šã€‚é€™æ®µæ™‚æ—¥ï¼Œä½ ç™½æ—¥æ‰¿æ­¡è†ä¸‹ï¼Œå¤œæ™šå‰‡ç¨åçª—å‰ï¼Œçœ‹æœˆå‡æœˆè½ï¼Œåè¦†å©å•å·±å¿ƒã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        çˆ¶è¦ªçš„æ†‚æ…®ï¼Œæ˜¯ä½ çœ¼ä¸­çš„ä¸æ¨ï¼›å®¶åƒ•çš„è«‡ç¬‘ï¼Œæ˜¯ä½ è€³é‚Šçš„å®‰ç©©ï¼›è€Œçª—å¤–çš„é¢¨è²ï¼Œå»åˆåƒæ˜¯é æ–¹çš„å‘¼å–šã€‚å»èˆ‡ç•™ï¼Œåœ¨ä½ å¿ƒä¸­åè¦†äº¤æˆ°ã€‚
                    </p>

                    <p class="leading-relaxed mb-6">
                        ä¸€æœˆæœŸæ»¿ï¼Œå°¼å§‘å¦‚ç´„è€Œè‡³ã€‚ä½ å·²æœ‰äº†ç­”æ¡ˆã€‚
                    </p>

                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"å“ªä¸€å€‹ï¼Œæ‰æ˜¯æˆ‘çœŸæ­£çš„äººç”Ÿï¼Ÿæ˜¯æˆç‚ºçˆ¶è¦ªçš„é©•å‚²ï¼Œé‚„æ˜¯æˆç‚ºæˆ‘è‡ªå·±ï¼Ÿ"</em>
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ  ã€Œæˆ‘æ±ºå®šç•™ä¸‹ï¼Œä½†å¸Œæœ›å­¸ç¿’ä¸€äº›æœ¬é ˜ã€",
                        description: "ï¼ˆæˆ‘è¦ä¿è­·å®¶äººï¼Œä½†ä¹Ÿè¦æœ‰ä¿è­·ä»–å€‘çš„èƒ½åŠ›ï¼‰",
                        effects: { filialPiety: 15, loyalty: 15, masterTraining: 10 },
                        nextScene: 'chapter2_compromise'
                    },
                    {
                        text: "ğŸŒŸ ã€Œæˆ‘æ±ºå®šè·Ÿæ‚¨èµ°ï¼Œä½†å¸Œæœ›èƒ½ç¶“å¸¸å›å®¶çœ‹çœ‹ã€",
                        description: "ï¼ˆæˆ‘è¦å­¸ç¿’ï¼Œä½†ä¸æƒ³å®Œå…¨æ–·çµ•è¦ªæƒ…ï¼‰",
                        effects: { seekingDao: 20, masterTraining: 15, filialPiety: 5 },
                        nextScene: 'chapter2_conditional'
                    },
                    {
                        text: "âš–ï¸ ã€Œæˆ‘é‚„æ˜¯ä¸çŸ¥é“è©²æ€éº¼é¸æ“‡ã€",
                        description: "ï¼ˆé€™å€‹é¸æ“‡çœŸçš„å¤ªé›£äº†ï¼‰",
                        effects: { seekingDao: 5, filialPiety: 5, tenderness: 10 },
                        nextScene: 'chapter2_still_confused'
                    }
                ]
            },

            // ç¬¬äºŒç« çš„è¨“ç·´å ´æ™¯
            chapter2_homesick: {
                title: "æ€å¿µæ˜¯å”¯ä¸€çš„è¡Œæ",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        é€™åº§çŸ³ç©´ï¼Œå¦‚åŒä¸€åº§æ²’æœ‰æº«åº¦çš„å·¢ã€‚å¤œæ·±ä¹‹éš›ï¼Œæ€å¿µä¾¿åŒ–ä½œç„¡å½¢çš„è—¤è”“ï¼Œå°‡ä½ ç·Šç·Šç¼ ç»•ã€‚ä½ æƒ³å¿µçˆ¶è¦ªå¯¬åšçš„æ‰‹æŒï¼Œæƒ³å¿µå®¶ä¸­é£¯èœçš„é¦™æ°£ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶çœ‹ç©¿äº†ä½ çš„è»Ÿå¼±ï¼Œè²éŸ³æ²’æœ‰ä¸€çµ²æ³¢æ¾œï¼šã€Œæ—¢å…¥æ­¤é–€ï¼Œä¾¿ç•¶æ–¬æ–·å¡µç·£ã€‚ä½ çš„å®¶ï¼Œåªåœ¨æ­¤è™•ã€‚ã€
                    </p>

                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> 
                            <em>"çˆ¶è¦ªç¾åœ¨ä¸€å®šå¾ˆæ“”å¿ƒæˆ‘...æˆ‘æ˜¯ä¸æ˜¯åšéŒ¯äº†ï¼Ÿ"</em>
                        </p>
                        <p class="text-sm mt-2">
                            <span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> 
                            <em>"éå»çš„ä¸€åˆ‡éƒ½æ˜¯å¼±é»ï¼Œå¿…é ˆæ–¬æ–·é€™äº›æƒ…æ„Ÿçš„æ·é–ã€‚"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        å„˜ç®¡å…§å¿ƒç—›è‹¦ï¼Œä½ ä»é–‹å§‹è‰±è‹¦è¨“ç·´ï¼›ä½†æ€é„‰ä¹‹æƒ…ä½¿ä½ é›£ä»¥å°ˆå¿ƒï¼Œå¸¸åœ¨ç·´ç¿’ä¸­å¤±æ‰‹...
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ˜¢ æš—ä¸­å“­æ³£ï¼Œä½†ç¹¼çºŒå …æŒè¨“ç·´",
                        description: "ï¼ˆå†ç—›è‹¦ä¹Ÿè¦å …æŒä¸‹å»ï¼‰",
                        effects: { filialPiety: 10, masterTraining: 10, tenderness: 5 },
                        nextScene: 'chapter2_training1'
                    },
                    {
                        text: "ğŸ’ª åŠªåŠ›å£“æŠ‘æ€é„‰ä¹‹æƒ…ï¼Œå°ˆå¿ƒå­¸ç¿’",
                        description: "ï¼ˆä¸èƒ½è®“å¸«çˆ¶å¤±æœ›ï¼Œæˆ‘è¦è®Šå¼·ï¼‰",
                        effects: { masterTraining: 20, filialPiety: -10 },
                        nextScene: 'chapter2_training1'
                    },
                    {
                        text: "ğŸ™ è«‹æ±‚å¸«çˆ¶å…è¨±è‡ªå·±çµ¦å®¶è£¡å¯«ä¿¡",
                        description: "ï¼ˆè‡³å°‘è®“çˆ¶è¦ªçŸ¥é“æˆ‘é‚„æ´»è‘—ï¼‰",
                        effects: { filialPiety: 15, masterTraining: -5 },
                        nextScene: 'chapter2_write_letter'
                    }
                ]
            },

            chapter2_adapt: {
                title: "æ²‰å¯‚çš„å­¸å¾’",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ å°‡æ€å¿µæ·±è—å¿ƒåº•ï¼Œå¦‚çŸ³æ²‰å¤§æµ·ï¼Œä¸å†æ³›èµ·æ³¢ç€¾ã€‚ä½ æ²‰é»˜åœ°è§€å¯Ÿã€æ¨¡ä»¿ã€è¶…è¶Šã€‚ä½ çš„æ±—æ°´ï¼Œæ˜¯é€™çŸ³ç©´ä¸­å”¯ä¸€çš„è¨€èªã€‚
                    </p>

                    <blockquote class="quote-text">
                        ä½ æ¼¸è¦ºèº«è¼•å¦‚é¢¨ã€‚ä¸€å¹´å¾Œï¼ŒåˆºçŒ¿ç‹–ç™¾ç„¡ä¸€å¤±ï¼›å¾Œåˆºè™è±¹ï¼Œçš†${createWordTooltip('æ±º', 'æ–·')}å…¶é¦–è€Œæ­¸ã€‚ä¸‰å¹´å¾Œèƒ½é£›ï¼Œä½¿åˆºé·¹éš¼ï¼Œç„¡ä¸${createWordTooltip('ä¸­', 'å‘½ä¸­')}ã€‚
                    </blockquote>

                    <div class="bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> 
                            <em>"å¾ˆå¥½ã€‚ä½ æ­£åœ¨è®Šæˆæˆ‘æƒ³è¦çš„æ¨£å­ã€‚è¨˜ä½ï¼Œæœå¾èˆ‡å°ˆæ³¨ï¼Œä¾¿æ˜¯ä½ çš„åŠ›é‡ã€‚"</em>
                        </p>
                    </div>

                    <blockquote class="quote-text">
                        åŠä¹‹åˆƒæ¼¸æ¸›äº”å¯¸ï¼Œé£›ç¦½é‡ä¹‹ï¼Œä¸çŸ¥å…¶ä¾†ä¹Ÿã€‚
                    </blockquote>
                    <p class="leading-relaxed mb-6">
                        ä½ çš„æŠ€è—æ—¥ç›Šç²¾é€²ï¼Œå¿ƒå»å½·å½¿ä¹Ÿéš¨ä¹‹è®Šå¾—é‹’åˆ©è€Œå†°å†·ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ˜Š ç‚ºæŠ€è—çš„ç²¾é€²æ„Ÿåˆ°ä¸€çµ²æ»¿è¶³",
                        description: "ï¼ˆæˆ‘æ­£åœ¨è®Šå¼·ï¼Œé€™ä¾¿æ˜¯æˆ‘é¸æ“‡çš„è·¯ï¼‰",
                        effects: { masterTraining: 20, loyalty: 10 },
                        learnedWords: [{ word: 'æ±º', meaning: 'æ–·' }, { word: 'ä¸­', meaning: 'å‘½ä¸­' }],
                        nextScene: 'chapter2_first_mission'
                    },
                    {
                        text: "ğŸ¤” æ€è€ƒæ®ºæˆ®çš„æœ¬è³ª",
                        description: "ï¼ˆç‚ºä½•è¦æ®ºé€™äº›ç”Ÿéˆï¼Ÿé€™ä»½åŠ›é‡ï¼Œç©¶ç«Ÿæ‡‰ç”¨æ–¼ä½•è™•ï¼Ÿï¼‰",
                        effects: { seekingDao: 15, masterTraining: 5 },
                        learnedWords: [{ word: 'æ±º', meaning: 'æ–·' }],
                        nextScene: 'chapter2_moral_doubt'
                    },
                    {
                        text: "ğŸ˜° å°ç”Ÿå‘½çš„é€å»æ„Ÿåˆ°ä¸å®‰",
                        description: "ï¼ˆæ¯ä¸€æ¬¡å‡ºæ‰‹ï¼Œéƒ½è®“æˆ‘è¦ºå¾—å¿ƒé ­ä¸€ç·Šï¼Œä½†æˆ‘å¿…é ˆå…‹æœï¼‰",
                        effects: { tenderness: 10, masterTraining: 10 },
                        learnedWords: [{ word: 'ä¸­', meaning: 'å‘½ä¸­' }],
                        nextScene: 'chapter2_reluctant_killer'
                    }
                ]
            },

            chapter2_observe: {
                title: "æ²‰é»˜çš„è§€å¯Ÿ",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        è¨“ç·´ä¹‹é¤˜ï¼Œä½ ç¸½æ˜¯åœ¨è§€å¯Ÿã€‚ä½ ç™¼ç¾å…©ä½å¸«å§æŠ€è—é›–é«˜ï¼Œçœ¼ç¥å»æ˜¯ç©ºæ´çš„ï¼Œåƒæ˜¯ç²¾ç·»çš„äººå¶ï¼ŒåªæœƒåŸ·è¡Œå‘½ä»¤ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶å°å¥¹å€‘çš„æ§åˆ¶ï¼Œç´°ç·»åˆ°æ¯ä¸€æ¬¡å‘¼å¸ã€‚ä½ å¿½ç„¶æ˜ç™½ï¼Œå¸«çˆ¶æƒ³è¦çš„ï¼Œä¸æ˜¯å‚³äººï¼Œè€Œæ˜¯å®Œç¾çš„å·¥å…·ã€‚é€™è®“ä½ æ„Ÿåˆ°ä¸€çµ²ä¸å¯’è€Œæ…„ã€‚
                    </p>

                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"è‹¥å¼·å¤§æ„å‘³è‘—å¤±å»è‡ªæˆ‘ï¼Œé‚£é€™ä»½å¼·å¤§ï¼Œé‚„æ˜¯æˆ‘æƒ³è¦çš„å—ï¼Ÿ"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        ä½ çš„æ²‰æ€ï¼Œå¼•ä¾†äº†å¸«çˆ¶çš„æ³¨æ„ã€‚å¥¹çš„è²éŸ³åœ¨ä½ èº«å¾ŒéŸ¿èµ·ï¼Œå†°å†·å¦‚éµï¼šã€Œè§€å¯Ÿå¯ä»¥ï¼Œä½†ä¸è¦æ€è€ƒã€‚æœå¾ï¼Œæ˜¯ä½ å”¯ä¸€éœ€è¦å­¸æœƒçš„ã€‚ã€
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ˜” è¡¨é¢æœå¾ï¼Œå…§å¿ƒä¿æŒæ€è€ƒ",
                        description: "ï¼ˆæˆ‘è¦å‡è£é †å¾ï¼Œä½†ä¸èƒ½åœæ­¢æ€è€ƒï¼‰",
                        effects: { seekingDao: 20, masterTraining: 5 },
                        nextScene: 'chapter2_hidden_thoughts'
                    },
                    {
                        text: "ğŸ¤ å˜—è©¦èˆ‡å¸«å§å€‘ç§ä¸‹äº¤æµ",
                        description: "ï¼ˆä¹Ÿè¨±å¯ä»¥äº†è§£å¥¹å€‘çš„çœŸå¯¦æƒ³æ³•ï¼‰",
                        effects: { tenderness: 15, seekingDao: 10 },
                        nextScene: 'chapter2_connect_sisters'
                    },
                    {
                        text: "ğŸ˜¨ è¢«å¸«çˆ¶çš„å¨åš´éœ‡æ‡¾ï¼Œé–‹å§‹æœå¾",
                        description: "ï¼ˆå¸«çˆ¶å¥½å¯æ€•ï¼Œæˆ‘é‚„æ˜¯ä¹–ä¹–è½è©±å§ï¼‰",
                        effects: { masterTraining: 15, seekingDao: -5 },
                        nextScene: 'chapter2_surrender_to_master'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šéš±åŒ¿æ€ç·’ï¼ˆæ‰¿æ¥ã€Œè§€å¯Ÿè€…çš„è¦–è§’ã€åˆ†æ”¯ï¼‰
            chapter2_hidden_thoughts: {
                title: "éš±åŒ¿æ€ç·’",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ è¡¨é¢æªå®ˆè¦è¨“ï¼Œå…§å¿ƒå»è‹¥æ°´æ½›æµï¼Œä¸éœ²ç—•è·¡ã€‚ä½ æ–¼æ·±å¤œç¨åçŸ³å£æ—ï¼Œé»˜èƒŒå¸«è¨“ï¼Œåˆæš—è‡ªæ€é‡ï¼š<span class="italic">"è¡“å¯æˆæ–¼å‹ï¼Œå¿ƒæœªå¯å›šæ–¼æ ¼ã€‚"</span>
                    </p>
                    <p class="leading-relaxed mb-4">
                        ä½ è¨˜èµ·åˆè‡³çŸ³ç©´ï¼Œå¸«çˆ¶ä»¥è—¥ä¸€ç²’ï¼Œä»¤é•·åŸ·åŠï¼Œè¿½å…©å¸«å§æ–¼å³­å£<span>${createWordTooltip('æ”€ç·£','æ‹‰è‘—å‘ä¸Šçˆ¬')}</span>ä¹‹æ™‚ï¼›èº«è¼•å¦‚é¢¨ï¼Œå¿ƒå»æ²‰å¦‚çŸ³ã€‚æ­¤åˆ»ï¼Œä½ åœ¨å¿ƒåº•æ‚„æ‚„å®‰ç½®ä¸€è™•è‡ªç•™ä¹‹åœ°ï¼Œä¸ä½¿æ—äººå¾—è¦‹ã€‚
                    </p>
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>"è¡“ç‚ºå™¨ï¼Œå¿ƒç‚ºä¸»ã€‚ä¸»è‹¥è¿·ï¼Œå™¨é›–åˆ©ï¼Œäº¦ä¸çŸ¥æ‰€å‘ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ æš—è‡ªç£¨åŠï¼Œå‚™ä¸æ¸¬ä¹‹éœ€",
                        description: "ï¼ˆè¡“ä¸å¯è’ï¼Œå¿ƒä¸å¯å¼›ï¼‰",
                        effects: { masterTraining: 10, seekingDao: 10 },
                        nextScene: 'chapter2_first_mission'
                    },
                    {
                        text: "ğŸ“œ æš—è¨˜è¡Œè—ï¼Œç•™é€€è·¯ä¸€ç·š",
                        description: "ï¼ˆå‡¡äº‹ä¸å¯ç›¡ï¼Œé ˆå­˜è‡ªå…¨ä¹‹é“ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter2_moral_doubt'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šèˆ‡å¸«å§ç§èªï¼ˆæ‰¿æ¥ã€Œè§€å¯Ÿè€…çš„è¦–è§’ã€åˆ†æ”¯ï¼‰
            chapter2_connect_sisters: {
                title: "çŸ³ç¸«ç§èª",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ–¼æ±²æ°´ä¹‹éš›ï¼Œä½è²å•äºŒå¸«å§å¾€äº‹ã€‚å¸«å§æ·¡ç„¶é“ï¼šã€Œåˆä¾†äº¦å¦‚æ±ï¼Œå¾Œä¾†ä¾¿ç„¡æ‰€æ€ã€‚ã€è¨€è‡³æ­¤è™•ï¼Œçœ¼æ³¢ç«Ÿæœ‰å¾®é¡«ï¼Œå¦‚é¢¨æ ç§‹æ°´ï¼Œç´‹ç†é›£å¹³ã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        ä¸€å¸«å§ç¬‘è€Œä¸èªï¼Œå¿½æ–¼çŸ³å£ä¸Šè¼•èºä¸‰æ­¥ï¼Œåˆå›çœ¸é“ï¼šã€Œå¿ƒè‹¥èµ·æ³¢ï¼Œè¶³ä¾¿äº‚ã€‚å¸«çˆ¶æœ€å¿Œæ­¤ã€‚ã€
                    </p>
                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>"åŸä¾†å¥¹å€‘ä¹Ÿæ›¾æ˜¯æœƒç¬‘ã€æœƒæ€•çš„äººã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ¤ èˆ‡å¸«å§çµä¸€æš—è™Ÿï¼Œäº’é€šå¿ƒè·¡",
                        description: "ï¼ˆäººå¿ƒç›¸å°ï¼Œæ–¹å¯ä¸å¤±æœ¬çœŸï¼‰",
                        effects: { tenderness: 15, seekingDao: 10 },
                        nextScene: 'chapter2_hidden_resistance'
                    },
                    {
                        text: "ğŸ˜¶ æ”¶æ–‚æƒ…æ€ï¼Œå…ç‚ºäººè¦º",
                        description: "ï¼ˆæ­¤åœ°å¤šç›®ï¼Œè¨€å¤šå¿…å¤±ï¼‰",
                        effects: { masterTraining: 10 },
                        nextScene: 'chapter2_first_mission'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šå‘å¸«å‘½æŠ˜è…°ï¼ˆæ‰¿æ¥ã€Œè§€å¯Ÿè€…çš„è¦–è§’ã€åˆ†æ”¯ï¼‰
            chapter2_surrender_to_master: {
                title: "å‘½ä¸‹å¦‚å±±",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶ç«‹æ–¼é™°å½±ï¼Œç›®å…‰å¯’å¦‚åˆƒï¼šã€Œè§€ä¸å¯å¤šï¼Œæ€ä¸å¯ç¹ã€‚æ±ä¹‹å¿ƒï¼Œç•¶å¦‚æ­¢æ°´ã€‚ã€
                    </p>
                    <p class="leading-relaxed mb-4">
                        ä½ ä¿¯é¦–è€Œæ‡‰ï¼Œè²æ¯æ¥µè¼•ã€‚ä½ çŸ¥æ­¤æ™‚é€†è½‰ç„¡ç›Šï¼Œä¸”å…ˆè—é‹’æ–‚æ¯ï¼Œå¾…æœ‰å¯ä¹˜ä¹‹éš™ã€‚
                    </p>
                    <div class="bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>"æ‰‹ä¸­ä¹‹åˆƒï¼Œå‹æ–¼å¿ƒä¸­ä¹‹å¿µã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ è¬¹éµæ•™ä»¤ï¼ŒåŠ ç·Šæ“ç·´",
                        description: "ï¼ˆå…ˆæ±‚ä¸æ•—ï¼Œå†æ±‚ä¸å¤±ï¼‰",
                        effects: { masterTraining: 20, seekingDao: -5 },
                        nextScene: 'chapter2_training1'
                    },
                    {
                        text: "ğŸ•Šï¸ ä»¥é€€ç‚ºé€²ï¼Œé¤Šæ™¦å¾…æ™‚",
                        description: "ï¼ˆé€€ä¸€æ­¥ï¼Œå¤©åœ°æˆ–é–‹ï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter2_moral_doubt'
                    }
                ]
            },

            // ç¬¬äºŒç« çš„é—œéµä»»å‹™ - é¦–æ¬¡æ®ºäºº
            chapter2_first_mission: {
                title: "æŸ“è¡€çš„åŒ•é¦–",
                chapter: 2,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-red-500 text-white px-4 py-2 rounded-full text-sm mb-4">
                            è©¦ç…‰
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        è‡³å››å¹´ï¼Œç•™äºŒå¥³å®ˆç©´ï¼Œ${createWordTooltip('æŒˆ', 'å¸¶è‘—')}æˆ‘æ–¼${createWordTooltip('éƒ½å¸‚', 'åŸå¸‚å¸‚å ´')}ï¼Œä¸çŸ¥ä½•è™•ä¹Ÿã€‚æŒ‡å…¶äººè€…ï¼Œä¸€ä¸€æ•¸å…¶${createWordTooltip('é', 'ééŒ¯')}ï¼Œæ›°ï¼šã€ç‚ºæˆ‘åˆºå…¶é¦–ä¾†ï¼Œç„¡ä½¿çŸ¥è¦ºã€‚å®šå…¶è†½ï¼Œè‹¥é£›é³¥ä¹‹å®¹æ˜“ä¹Ÿã€‚ã€
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶äº¤çµ¦ä½ ä¸€æŠŠç¾Šè§’åŒ•é¦–ï¼Œåˆƒå¯¬ä¸‰å¯¸ï¼Œå¯’å…‰å‡œå†½ã€‚é€™æ˜¯ä½ çš„ç¬¬ä¸€æ¬¡è©¦ç…‰ï¼Œç›®æ¨™æ˜¯ä¸€ä½ç½ªå¤§æƒ¡æ¥µçš„è²ªå®˜ã€‚ç„¶è€Œï¼Œç•¶ä½ æ½›ä¼åœ¨æš—è™•ï¼Œçœ‹åˆ°çš„åªæ˜¯ä¸€å€‹æ­£åœ¨ç‡ˆä¸‹è®€ä¿¡ã€é¢å®¹ç–²æ†Šçš„ä¸­å¹´äººã€‚
                    </p>

                    <div class="bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border-l-4 border-red-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ’­ å…§å¿ƒè²éŸ³æ¿€çƒˆè¡çªï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-gray-600">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>"é€™å°±æ˜¯ä½ å­˜åœ¨çš„æ„ç¾©ã€‚åŸ·è¡Œä»»å‹™ï¼Œä¸è¦çŒ¶è±«ã€‚"</em></p>
                            <p><span class="font-semibold text-purple-600">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>"ä»–ä¹Ÿæ˜¯æœ‰å®¶äººçš„äºº...æˆ‘çœŸçš„è¦é€™æ¨£åšå—ï¼Ÿ"</em></p>
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>"æ®ºæˆ®çœŸçš„æ˜¯æ­£ç¾©å—ï¼Ÿé‚„æ˜¯åªæ˜¯å¸«çˆ¶çš„å·¥å…·ï¼Ÿ"</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6">
                        ä½ æ½›å…¥ç›®æ¨™çš„æˆ¿é–“ï¼ŒåŒ•é¦–å·²èˆ‰ã€‚é€™ä¸€åˆ»çš„é¸æ“‡ï¼Œå°‡æ±ºå®šä½ æœªä¾†çš„é“è·¯...
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ å†·é…·åœ°å®Œæˆä»»å‹™",
                        description: "ï¼ˆå¸«çˆ¶æ˜¯å°çš„ï¼Œæˆ‘å¿…é ˆæˆç‚ºå®Œç¾çš„æ­¦å™¨ï¼‰",
                        effects: { masterTraining: 30, tenderness: -15, seekingDao: -10 },
                        learnedWords: [{ word: 'æŒˆ', meaning: 'å¸¶è‘—' }, { word: 'éƒ½å¸‚', meaning: 'åŸå¸‚å¸‚å ´' }, { word: 'é', meaning: 'ééŒ¯' }],
                        nextScene: 'chapter2_cold_killer'
                    },
                    {
                        text: "ğŸ’­ èª¿æŸ¥ç›®æ¨™çš„ç½ªè¡Œå¾Œå†æ±ºå®š",
                        description: "ï¼ˆæˆ‘è¦ç¢ºèªä»–çœŸçš„ç½ªæœ‰æ‡‰å¾—ï¼‰",
                        effects: { seekingDao: 20, masterTraining: 5 },
                        learnedWords: [{ word: 'é', meaning: 'ééŒ¯' }],
                        nextScene: 'chapter2_investigate'
                    },
                    {
                        text: "ğŸ˜° çŒ¶è±«ä¸æ±ºï¼Œé²é²ä¸ä¸‹æ‰‹",
                        description: "ï¼ˆæˆ‘åšä¸åˆ°...å³ä½¿ä»–æ˜¯å£äººï¼‰",
                        effects: { tenderness: 20, masterTraining: -10 },
                        learnedWords: [{ word: 'éƒ½å¸‚', meaning: 'åŸå¸‚å¸‚å ´' }],
                        nextScene: 'chapter2_hesitate'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šè¨“ç·´ä¹‹è‹¦ï¼ˆæ‰¿æ¥ã€Œæ€é„‰ã€ã€Œå¸«å‘½ã€åˆ†æ”¯ï¼‰
            chapter2_training1: {
                title: "çŸ³ç©´å¯’è¨“",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        é»æ˜ä¹‹å‰ï¼ŒçŸ³ç©´éœ²å¯’ã€‚ä½ è² çŸ³ç™»å£ï¼Œæ”€æ´å¦‚çŒ±ï¼Œæ­¥æ­¥çš†é©šã€‚æŒå¿ƒç£¨ä½œè–„ç¹­ï¼ŒåŠé‹’æ˜ å‡ºå¾®å…‰ï¼Œå†·å…¥éª¨é«“ã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶ç«‹æ–¼ä¸Šï¼Œè²è‹¥éµï¼šã€Œèº«å¯ç–²ï¼Œæ„ä¸å¯å¢®ã€‚è¦‹<span>${createWordTooltip('éƒ½å¸‚','åŸå¸‚å¸‚å ´')}</span>ä¸­è¬è±¡ï¼Œå¿ƒä¸å‹•ï¼Œæ‰‹ä¹ƒæº–ã€‚ã€
                    </p>
                    <div class="bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>"åˆƒä¹‹æ‰€è‡³ï¼Œä¸å‡äººæƒ…ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ å°‡è‹¦ç•¶ç£¨ï¼Œå°ˆå¿—æ–¼è¡“",
                        description: "ï¼ˆæŠ€è‡³ç´”ç†Ÿï¼Œå¿ƒè‡ªæ²‰è‘—ï¼‰",
                        effects: { masterTraining: 20 },
                        nextScene: 'chapter2_first_mission'
                    },
                    {
                        text: "ğŸ’­ è‹¦ä¸­å•é“ï¼Œçœå¯Ÿæ®ºèˆ‡ä¸æ®º",
                        description: "ï¼ˆè¡“ç²¾ä¹‹å¤–ï¼Œå°šæœ‰æ˜¯éï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter2_moral_doubt'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šæ›¸ä¿¡å®¶è²ï¼ˆæ‰¿æ¥ã€Œè«‹å…å¯«ä¿¡ã€åˆ†æ”¯ï¼‰
            chapter2_write_letter: {
                title: "å°ºç´ å®¶è²",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ ä»¥ç‡ˆèŠ±ç´°ç«ï¼Œå±•ç´™æˆå¹…ã€‚å¯«è‡³ã€Œçˆ¶è¦ªè¿‘å®‰ã€ï¼Œç­†å¿½ä¸€é¡«ï¼Œå¢¨æšˆå¦‚æ·šã€‚ä½ åˆè‡ªåˆªå…¶è©ï¼Œå”¯ç•™ã€Œå¥³åœ¨å±±ä¸­ï¼Œå‹¿å¿µã€ã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        æ›¸æ—¢ç•¢ï¼Œå¾©è‡ªç„šå…¶å‰¯æœ¬ã€‚ä½ çŸ¥æ­¤ä¿¡æœªå¿…å¯é”ï¼Œä½†ä¸€è²å¿ƒèªï¼Œå·²å¯„é¢¨ä¸­ã€‚
                    </p>
                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> <em>"å¯¸å¿ƒå¦‚ç·šï¼Œç‰½ç¹«ä¸æ–·ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ•¯ï¸ æ”¶å¥½æ®˜å­—ç¢å¢¨ï¼Œå°æ–¼å°å›Š",
                        description: "ï¼ˆä¸é¡˜æ—äººè¦‹æˆ‘æŸ”è™•ï¼‰",
                        effects: { filialPiety: 10, tenderness: 10 },
                        nextScene: 'chapter2_training1'
                    },
                    {
                        text: "ğŸ—¡ï¸ ä»¥è‹¦ç‚ºç ºï¼Œå›åˆ°æ“ç·´",
                        description: "ï¼ˆæƒ…ä¸ç¤™å¿—ï¼‰",
                        effects: { masterTraining: 10 },
                        nextScene: 'chapter2_first_mission'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šé“ç¾©ä¹‹è¾¨ï¼ˆæ‰¿æ¥ã€ŒåŠªåŠ›é©æ‡‰ã€ã€Œéš±åŒ¿æ€ç·’ã€åˆ†æ”¯ï¼‰
            chapter2_moral_doubt: {
                title: "é“ç¾©ä¹‹è¾¨",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ–¼æ—é–“ç·´æ¯ï¼Œè§€é£›ç¦½æé¢¨ï¼Œå¿µåŠæ˜”å¹´ã€ŒåˆºçŒ¿ç‹–ç™¾ç„¡ä¸€å¤±ã€ï¼Œå¿½è¦ºèƒ¸ä¸­æœ‰å¾®éš™ï¼š
                        <span class="italic">"ç™¾ä¸­ä¹‹å‹‡æ˜“ï¼Œç™¾å¿ä¹‹ä»é›£ã€‚"</span>
                    </p>
                    <p class="leading-relaxed mb-4">
                        ä½ è©¦ä»¥å·±å¿ƒæ¯”ä»–å¿ƒï¼Œå•è‹¥æ‰€æ–¬è€…éå¾’æƒ¡åï¼Œäº¦æœ‰è¦ªç¨šã€‚å¿µè‡³æ–¼æ­¤ï¼Œè…•ä¸Šå¾®é “ï¼Œåˆƒå…‰äº¦æ·¡ã€‚
                    </p>
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>"æ®ºèˆ‡ä¸æ®ºï¼Œå…¶é–“ä¸€å¿µï¼Œç•¶å•æ–¼é“ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ•µï¸ å…ˆå¯©å…¶äººï¼Œå†è«–å…¶ç½ª",
                        description: "ï¼ˆæ˜¯éä¸å¯ä»¥è€³ç›®ä¸€åï¼‰",
                        effects: { seekingDao: 20 },
                        nextScene: 'chapter2_first_mission'
                    },
                    {
                        text: "âš–ï¸ å›ºå®ˆåº•ç·šï¼Œå¯§é²ä¸æ¿«",
                        description: "ï¼ˆåˆ€å¿«ï¼Œå¿ƒæ›´é ˆç©©ï¼‰",
                        effects: { tenderness: 10, seekingDao: 10 },
                        nextScene: 'chapter2_hesitate'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šåˆ€ä¸‹é›£è½ï¼ˆæ‰¿æ¥ã€ŒåŠªåŠ›é©æ‡‰ã€åˆ†æ”¯ï¼‰
            chapter2_reluctant_killer: {
                title: "åˆ€ä¸‹é›£è½",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ è©¦æ–¼æœ¨æ¨æ¼”åˆºï¼Œåˆ€è‡³æ¨å‰ï¼Œå¿½ä½œä¸‰åˆ†é²ç–‘ã€‚ä½ è¨˜èµ·åŸä¸­ä¸€çˆ¶èˆ‡å­å¬‰ç¬‘ä¹‹æ™¯ï¼Œè€³ç•”ä»å—£éŸ¿å­©ç«¥ç¬‘èªã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶é ç«‹ä¸èªï¼Œå”¯ç›®å…‰å¦‚éœœã€‚ä½ è‡ªçŸ¥æ­¤å¿µä¸å®¹ä¹…ç•™ï¼Œé‚é–‰æ°£ä¸‰æ¯ï¼Œåˆ€æ„å¾©ç›´ã€‚
                    </p>
                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>"åŸä¾†ï¼Œæˆ‘ä»æ˜¯äººã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ˜” æ¥ç´é²ç–‘ï¼Œå­¸èˆ‡ä¹‹å…±è™•",
                        description: "ï¼ˆä¸å¿…è£ä½œç„¡æƒ…ï¼‰",
                        effects: { tenderness: 15 },
                        nextScene: 'chapter2_hesitate'
                    },
                    {
                        text: "ğŸ—¡ï¸ åè¦†ç·´å¿ƒï¼Œæ±‚ä¸€æ“Šå¿…ä¸­",
                        description: "ï¼ˆæŠ€é€²ä¸€åˆ†ï¼Œå¿ƒç…©é€€ä¸€åˆ†ï¼‰",
                        effects: { masterTraining: 15 },
                        nextScene: 'chapter2_first_mission'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šæ‚”å¿µå¦‚æ½®ï¼ˆæ‰¿æ¥ã€Œå®¶ä¸­æ­²æœˆã€åˆ†æ”¯ï¼‰
            chapter2_regret: {
                title: "æ‚”å¿µå¦‚æ½®",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        å¤œé›¨å…¥ç°·ï¼Œç‡ˆå½±é¡«å‹•ã€‚ä½ ç¨åï¼Œå¿µåŠç•¶æ—¥ä¸€å¿µä¹‹å·®ï¼Œå¿ƒæ½®ç¿»è¦†ã€‚ä½ æœ›å‘é–€å¤–ï¼Œä¼¼è¦‹é’è¡£å°¼ä¹‹èƒŒå½±éš±æ–¼é›¨å¹•ã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        ä½ æ¡æ‹³å¾©é¬†ï¼Œä½èªè‡ªå•ï¼š<span class="italic">"æ˜¯æˆ‘éŒ¯éäº†ï¼Œé‚„æ˜¯æˆ‘å®ˆä½äº†ï¼Ÿ"</span>
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ“š è‡ªè¨­èª²ç¨‹ï¼Œè£œå·±ä¹‹æ¬ ",
                        description: "ï¼ˆäººå¯è‡ªæˆä¸€å­¸ï¼‰",
                        effects: { seekingDao: 10, loyalty: 5 },
                        nextScene: 'chapter2_self_study'
                    },
                    {
                        text: "ğŸ  æ”¶æ–‚å¤–å¿ƒï¼Œå®‰æ–¼å®¶å…§",
                        description: "ï¼ˆå…ˆè®“çˆ¶è¦ªå¿ƒå®‰ï¼‰",
                        effects: { filialPiety: 15, tenderness: 10 },
                        nextScene: 'chapter2_family_focused'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šå®¶å‹™æœ‰å¸¸ï¼ˆæ‰¿æ¥ã€Œå®¶ä¸­æ­²æœˆã€åˆ†æ”¯ï¼‰
            chapter2_family_focused: {
                title: "å®¶å‹™æœ‰å¸¸",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        æ¸…æ™¨æƒåº­ï¼Œæš®é¼“ç†å¸³ã€‚æ—¥æœˆç›¸ç’°ï¼Œå®¶äº‹äº•ç„¶ã€‚ä½ å¿ƒç·’æ¼¸å¯§ï¼Œå»æ¯æ–¼éœå¤œå¿½èæ¾é¢¨ï¼Œä¼¼æ˜¯ç¾¤å±±ç›¸å¬ã€‚
                    </p>
                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> <em>"è¦ªåœ¨ï¼Œå¿ƒæœ‰æ‰€ç¹«ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸŒ¿ ç•™æ„ä¸–äº‹ï¼Œä¼ºæ©Ÿå†å­¸",
                        description: "ï¼ˆä¸å¤±æ–¼ä¸€ç«¯ï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter2_self_study'
                    },
                    {
                        text: "ğŸ§­ ç«‹å¿—ä»–æ—¥ï¼Œå†è¡Œé è·¯",
                        description: "ï¼ˆæ™‚æ©Ÿæœªè‡³ï¼Œå¿—ä¸å¯å¤±ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter3_return_home'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šè‡ªèª²æ­¦è—ï¼ˆæ‰¿æ¥ã€Œå®¶ä¸­æ­²æœˆã€ã€Œæ‚”å¿µã€åˆ†æ”¯ï¼‰
            chapter2_self_study: {
                title: "è‡ªèª²æ­¦è—",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ è‡ªç½®æœ¨æ¨ï¼Œç¹©ç³»æ²™å›Šï¼Œæ™¨æ˜å„ç·´ã€‚ä½ ä»¥<span>${createWordTooltip('åº¦','ç©¿é')}</span>é–€å½±å¯Ÿæ­¥ä¼ä¹‹å¿«ï¼Œä»¥è Ÿæ»´ä¹‹è²è½å‘¼å¸ä¹‹å‹»ã€‚æœˆè‰²å¦‚æ´—ï¼Œåº­ä¸­åŠå½±å¦‚æ°´ã€‚
                    </p>
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>"å¸«åœ¨å¿ƒä¸­ï¼Œè¬ç‰©çš†å¯ç‚ºå‹ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ è‡ªæˆä¸€æ ¼ï¼Œç·´è‡³å°æˆ",
                        description: "ï¼ˆä»–æ—¥æˆ–å¯ä¸€è©¦èº«æ‰‹ï¼‰",
                        effects: { seekingDao: 10, masterTraining: 5 },
                        nextScene: 'chapter3_return_home'
                    },
                    {
                        text: "ğŸ“– æ—æœå…¸ç±ï¼Œèæœƒå¤ä»Š",
                        description: "ï¼ˆæ‰‹èˆ‡å¿ƒä¸¦é€²ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter3_return_home'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šå…©ç›¸æ¬Šè¡¡ï¼ˆæ‰¿æ¥ã€Œä¸‰å¤©çš„æ·±æ€ã€åˆ†æ”¯ï¼‰
            chapter2_compromise: {
                title: "å…©ç›¸æ¬Šè¡¡",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ å‘å¸«çˆ¶è¨€æ˜ï¼šé¡˜å­¸è€Œä¸çµ•è¦ªæƒ…ã€‚å¸«çˆ¶å†·ç¬‘ï¼šã€Œæƒ…å¯ç”¨ï¼Œä¸å¯ä¿¡ã€‚ã€ä½ ä¸è¾¯ï¼Œåªæ–¼å¿ƒä¸‹è‡ªè¨˜å…¶èªã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ å…ˆå­¸ç‚ºè¦ï¼Œå¾Œåœ–è‡ªå…¨",
                        description: "ï¼ˆæ¬Šå…¶è¼•é‡ï¼‰",
                        effects: { masterTraining: 10, seekingDao: 5 },
                        nextScene: 'chapter2_training1'
                    },
                    {
                        text: "ğŸï¸ é€¢æ©Ÿå¤–å‡ºï¼Œå¯„ä¿¡å¹³å®‰",
                        description: "ï¼ˆå¿ƒæœ‰æ‰€å®‰ï¼‰",
                        effects: { filialPiety: 10 },
                        nextScene: 'chapter2_write_letter'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šå¾æ¬Šä¹‹ç´„ï¼ˆæ‰¿æ¥ã€Œä¸‰å¤©çš„æ·±æ€ã€åˆ†æ”¯ï¼‰
            chapter2_conditional: {
                title: "å¾æ¬Šä¹‹ç´„",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        å¸«çˆ¶é“ï¼šã€Œéš¨æˆ‘å‰‡ä¸å¯ç¸±å¿ƒã€‚ã€ä½ ç­”ï¼šã€Œä¸ç¸±ï¼Œéç„¡å¿ƒä¹Ÿã€‚ã€å¸«çˆ¶å¾®è¹™çœ‰ï¼Œçµ‚ä¸å¾©è¨€ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸª¶ è§€å…¶æ‰€ç¦ï¼Œæ€å…¶æ‰€ä»¥ç„¶",
                        description: "ï¼ˆä¸é€†ï¼Œäº¦ä¸ç›²å¾ï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter2_observe'
                    },
                    {
                        text: "ğŸ—¡ï¸ ç·´è‡³æ‰‹ç†Ÿï¼Œå¾…å•æ˜¯é",
                        description: "ï¼ˆå…ˆå‚™å…¶è¡“ï¼‰",
                        effects: { masterTraining: 10 },
                        nextScene: 'chapter2_training1'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šçŒ¶ç–‘ä¹‹å¤œï¼ˆæ‰¿æ¥ã€Œä¸‰å¤©çš„æ·±æ€ã€åˆ†æ”¯ï¼‰
            chapter2_still_confused: {
                title: "çŒ¶ç–‘ä¹‹å¤œ",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        å¤œæ°£å¦‚æ°´ï¼Œå¿ƒäº‹å¦‚çµ²ã€‚ä½ åè¦†æ¬Šè¡¡ï¼Œè¦ºè¬äº‹çµ‚é›£å…©å…¨ï¼ŒæƒŸé¡˜å¿ƒä¸æ¬ºå·±ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸŒ«ï¸ éš¨å¸«å…¥å±±ï¼Œå†è§€å…¶è®Š",
                        description: "ï¼ˆè¡Œä¸­æ±‚æ‚Ÿï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter2_adapt'
                    },
                    {
                        text: "ğŸ§˜ æ”¶æ‹¾å¿ƒç·’ï¼Œå°ˆè¡Œä¸€é€”",
                        description: "ï¼ˆå¤šæ€ä¸å¦‚ä¸€è¡Œï¼‰",
                        effects: { masterTraining: 10 },
                        nextScene: 'chapter2_training1'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šå†·åˆƒç„¡è²ï¼ˆæ‰¿æ¥ã€Œå†·é…·åœ°å®Œæˆä»»å‹™ã€åˆ†æ”¯ï¼‰
            chapter2_cold_killer: {
                title: "å†·åˆƒç„¡è²",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ç™½æ—¥<span>${createWordTooltip('éƒ½å¸‚','åŸå¸‚å¸‚å ´')}</span>ï¼Œäººè²å–§é¨°ï¼›ä¸€ç¬ä¹‹é–“ï¼Œä¸–é–“ä¼¼ç„¡è²ã€‚åŒ•é¦–å…¥ï¼Œæ°£æ¯æ­¢ã€‚ä½ ç«‹æ–¼ç°¾å½±ä¹‹å¾Œï¼Œåªè¦‹çª—å¤–é¢¨éç¾…å·¾ï¼Œä¸¦ä¸å›é ­ã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        ä½ å°‡é¦–ç´šåŒ–æ°´ï¼Œä»¥è—¥æ½‘ä¹‹ï¼Œç„¡ç—•å¯å°‹ã€‚æ­¥å‡ºä¹‹æ™‚ï¼Œå¿½èé å··å…’å•¼ï¼Œå¿ƒä¸Šä¸€å‹•ï¼Œåˆæ—‹å³å¹³å¯‚ã€‚
                    </p>
                    <div class="bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>"æ‰‹æ‡‰ä»¤ï¼Œå¿ƒå‹¿é¡§ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ©¸ ä»¥ç„¡æƒ…è‡ªè­·ï¼Œä¸å•å‰ç¨‹",
                        description: "ï¼ˆæƒ…æ–·ä¸€å¯¸ï¼Œè·¯ç›´ä¸€ä¸ˆï¼‰",
                        effects: { masterTraining: 20, tenderness: -10 },
                        nextScene: 'chapter2_hardened_heart'
                    },
                    {
                        text: "ğŸ•¯ï¸ å¤œæ·±è‡ªçœï¼Œå•å¿ƒæ‰€å®‰",
                        description: "ï¼ˆåˆƒå¿«ï¼Œå¿ƒæœªå¿…å®‰ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter2_moral_awakening'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šå¿ƒç”²æ¼¸åšï¼ˆæ‰¿æ¥ã€ŒçŒ¶è±«ä¹‹å¾Œã€ã€Œå†·åˆƒç„¡è²ã€åˆ†æ”¯ï¼‰
            chapter2_hardened_heart: {
                title: "å¿ƒç”²æ¼¸åš",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        è‡ªæ­¤ä»¥å¾Œï¼Œä½ è¨€ç¬‘æ¼¸å°‘ï¼Œç›®å…‰å¦‚éœœã€‚ä½ çŸ¥æŸ”è™•æœ€æ˜“ç‚ºäººæ‰€åˆ¶ï¼Œé‚ä»¥å†·ç‚ºç”²ï¼Œè—ä¹‹ä¸ç¤ºã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        ç„¶æ·±å¤œå¶å¤¢å­©å•¼ï¼Œé©šåè€Œèµ·ï¼Œèƒ¸å£ä¼¼æœ‰ç´°é‡éš±éš±ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ›¡ï¸ å …å…¶ç”²èƒ„ï¼Œå‹¿å—å¤–ç‰©ä¾µ",
                        description: "ï¼ˆæƒ…è‹¥ä¸å‹•ï¼Œèª°èƒ½å‚·æˆ‘ï¼‰",
                        effects: { masterTraining: 15, tenderness: -10 },
                        nextScene: 'chapter2_moral_awakening'
                    },
                    {
                        text: "ğŸ•¯ï¸ è¨˜ä¸‹æ­¤å¤¢ï¼Œæ…å®ˆæœ¬å¿ƒ",
                        description: "ï¼ˆå†·éçœŸå¼·ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter2_moral_awakening'
                    }
                ]
            },

            // ç¬¬äºŒç« è£œå……ï¼šæš—æ½®ä¸æ¯ï¼ˆæ‰¿æ¥ã€ŒçŒ¶è±«ä¹‹å¾Œã€ã€Œå¸«å§ç›¸åŠ©ã€åˆ†æ”¯ï¼‰
            chapter2_hidden_resistance: {
                title: "æš—æ½®ä¸æ¯",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ èˆ‡å¸«å§ä»¥æŒ‡ç¯€è¼•å©çŸ³ç¸«ç‚ºè¨˜ï¼šä¸€çŸ­ä¸€é•·ï¼Œä¾¿çŸ¥å¹³å®‰ã€‚ä½ å€‘åœ¨å¸«å‘½èˆ‡äººå¿ƒä¹‹é–“ï¼Œæ‚„æ‚„ä¿å­˜ä¸€ç·šé¤˜åœ°ã€‚
                    </p>
                    <p class="leading-relaxed mb-4">
                        æ—¥å¾Œæ¯é‡å‡ºåŸè¡Œäº‹ï¼Œä½ å¿…å…ˆå¯©å…¶äººï¼Œç´°å¯Ÿå…¶é<span>${createWordTooltip('é','ééŒ¯')}</span>æ˜¯å¦å¯¦æœ‰ã€‚æ­¤å¿µä¸€è¡Œï¼Œå¿ƒå¢ƒè‡ªç•°ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ•µï¸ å…ˆå¯Ÿè€Œå¾Œå‹•",
                        description: "ï¼ˆäººä¹‹æ˜¯éï¼Œç•¶å•å…¶å¯¦ï¼‰",
                        effects: { seekingDao: 20, tenderness: 10 },
                        nextScene: 'chapter2_first_mission'
                    },
                    {
                        text: "ğŸ—¡ï¸ è‹¥éè‡³æƒ¡ï¼Œä¸è¼•å‹•åˆƒ",
                        description: "ï¼ˆåˆ€åœ¨æ‰‹ï¼Œå¾·åœ¨å¿ƒï¼‰",
                        effects: { tenderness: 10 },
                        nextScene: 'chapter2_hesitate'
                    }
                ]
            },

            chapter2_hesitate: {
                title: "é²ç–‘çš„é‹’åˆƒ",
                chapter: 2,
                content: `
                    <blockquote class="quote-text">
                        ${createWordTooltip('åº¦', 'ç©¿é')}å…¶é–€${createWordTooltip('éš™', 'ç¸«')}ï¼Œç„¡æœ‰éšœç¤™ï¼Œ${createWordTooltip('ä¼', 'è¶´è‘—')}ä¹‹æ¨‘ä¸Šã€‚è‡³ç‘ï¼ŒæŒå¾—å…¶é¦–è€Œæ­¸ã€‚å°¼å¤§æ€’æ›°ï¼šã€ä½•å¤ªæ™š${createWordTooltip('å¦‚æ˜¯', 'åƒé€™æ¨£')}ï¼ã€
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        ä½ é²é²æœªèƒ½ä¸‹æ‰‹ã€‚åªå› ä½ åœ¨æš—è™•ï¼Œçœ‹åˆ°é‚£åå®˜å“¡æ­£åœ¨é€—å¼„è†ä¸‹çš„ä¸€å€‹å°å…’ï¼Œé‚£å­©å­ç¬‘å¾—å¤©çœŸçˆ›æ¼«ã€‚é‚£ä¸€åˆ»ï¼Œä»–ä¸æ˜¯è²ªå®˜ï¼Œåªæ˜¯ä¸€ä½çˆ¶è¦ªã€‚ä½ çš„å¿ƒï¼Œäº‚äº†ã€‚
                    </p>

                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> 
                            <em>"ä»–ä¹Ÿæœƒé€—å­©å­ç©...ä»–ä¹Ÿæœ‰æº«æŸ”çš„ä¸€é¢ã€‚æˆ‘æ€éº¼èƒ½æ®ºæ­»ä»–ï¼Ÿ"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        å¸«çˆ¶å¯Ÿè¦ºäº†ä½ çš„çŒ¶è±«ï¼Œè²éŸ³æ¯”ä»¥å¾€æ›´åŠ å†°å†·ï¼š<span class="font-bold">ã€å·²å¾Œé‡æ­¤è¼©ï¼Œå…ˆæ–·å…¶æ‰€æ„›ï¼Œç„¶å¾Œæ±ºä¹‹ã€‚ã€</span>é€™å¥è©±ï¼Œå¦‚åŒä¸€æ ¹å†°éŒï¼Œåˆºå…¥ä½ çš„å¿ƒåº•ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ˜¨ è¢«å¸«çˆ¶çš„è©±åš‡åˆ°ï¼Œé–‹å§‹åæ€",
                        description: "ï¼ˆå…ˆæ®ºä»–æ„›çš„äººï¼Ÿå¸«çˆ¶æ€éº¼èƒ½èªªå‡ºé€™æ¨£çš„è©±ï¼Ÿï¼‰",
                        effects: { seekingDao: 25, masterTraining: -15 },
                        learnedWords: [{ word: 'åº¦', meaning: 'ç©¿é' }, { word: 'éš™', meaning: 'ç¸«' }, { word: 'å±', meaning: 'å¤§è²å‘µæ–¥' }],
                        nextScene: 'chapter2_moral_awakening'
                    },
                    {
                        text: "ğŸ˜” å¼·è¿«è‡ªå·±æ¥å—å¸«çˆ¶çš„æ•™å°",
                        description: "ï¼ˆå¸«çˆ¶èªªå¾—å°ï¼Œæ„Ÿæƒ…åªæœƒæˆç‚ºå¼±é»ï¼‰",
                        effects: { masterTraining: 20, tenderness: -20 },
                        learnedWords: [{ word: 'ä¼', meaning: 'è¶´è‘—' }, { word: 'å¦‚æ˜¯', meaning: 'åƒé€™æ¨£' }],
                        nextScene: 'chapter2_hardened_heart'
                    },
                    {
                        text: "ğŸ’” å…§å¿ƒç—›è‹¦ä½†è¡¨é¢æœå¾",
                        description: "ï¼ˆæˆ‘å¿…é ˆå‡è£åŒæ„ï¼Œä½†å¿ƒè£¡æ°¸é ä¸æœƒæ¥å—ï¼‰",
                        effects: { seekingDao: 15, masterTraining: 5, tenderness: 5 },
                        learnedWords: [{ word: 'æˆ²å¼„', meaning: 'é€—å¼„' }],
                        nextScene: 'chapter2_hidden_resistance'
                    }
                ]
            },

            // ç¬¬äºŒç« çµæŸï¼Œé€²å…¥ç¬¬ä¸‰ç« 
            chapter2_moral_awakening: {
                title: "é“å¿ƒåˆæ˜",
                chapter: 2,
                content: `
                    <p class="leading-relaxed mb-4">
                        ã€Œå…ˆæ–·å…¶æ‰€æ„›ã€ï¼Œå¸«çˆ¶çš„è©±åœ¨ä½ å¿ƒä¸­æ€èµ·é©šæ¿¤é§­æµªã€‚ä½ çµ‚æ–¼å¾¹åº•æ˜ç™½ï¼Œå¸«çˆ¶æ‰€å‚³æˆçš„ã€Œé“ã€ï¼Œæ˜¯ä¸€æ¢çµ•æƒ…çµ•ç¾©ã€æ³¯æ»…äººæ€§çš„æ­»è·¯ã€‚å¥¹è¦çš„ä¸æ˜¯å¼Ÿå­ï¼Œè€Œæ˜¯ä¸€æŸ„æ²’æœ‰æ€æƒ³çš„åˆ€ã€‚
                    </p>

                    <blockquote class="quote-text">
                        å°¼æ›°ï¼šã€${createWordTooltip('æ±', 'ä½ ')}è¡“å·²æˆï¼Œå¯æ­¸å®¶ã€‚ã€é‚é€é‚„ï¼Œäº‘ï¼šã€å¾ŒäºŒåå¹´ï¼Œæ–¹å¯ä¸€è¦‹ã€‚ã€
                    </blockquote>

                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"æˆ‘çš„é“ï¼Œä¸èƒ½æ˜¯é€™æ¨£çš„ã€‚çœŸæ­£çš„åŠ›é‡ï¼Œæ‡‰ç•¶æœ‰æƒ…ï¼Œæœ‰ç¾©ï¼Œæœ‰è‡ªå·±çš„æŠ‰æ“‡ã€‚"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        äº”å¹´ä¿®è¡Œï¼Œä½ æ”œä¸€èº«çµ•æŠ€èˆ‡æ»¿å¿ƒè¿·æƒ˜ï¼Œè¸ä¸Šäº†æ­¸å®¶ä¹‹è·¯ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ  æ€¥åˆ‡åœ°æƒ³è¦å›åˆ°çˆ¶è¦ªèº«é‚Š",
                        description: "ï¼ˆäº”å¹´äº†ï¼Œæˆ‘å¤ªæƒ³å¿µå®¶äººäº†ï¼‰",
                        effects: { filialPiety: 25, tenderness: 15 },
                        learnedWords: [{ word: 'æ±', meaning: 'ä½ ' }],
                        nextScene: 'chapter3_return_home'
                    },
                    {
                        text: "ğŸ¤” æ€è€ƒå¦‚ä½•é‹ç”¨æ‰€å­¸çš„æ­¦è—",
                        description: "ï¼ˆæˆ‘è¦ç”¨é€™äº›æŠ€èƒ½åšæ­£ç¢ºçš„äº‹ï¼‰",
                        effects: { seekingDao: 20, loyalty: 10 },
                        nextScene: 'chapter3_return_home'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« ï¼šè¦ªæƒ…å›æ­¸
            chapter3_return_home: {
                title: " homecoming ",
                chapter: 3,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬ä¸‰ç« ï¼šæ­¸å®¶ Â· è¶åºœ Â· åäº”æ­²
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        å¾Œäº”å¹´ï¼Œå°¼é€ä½ æ­¸ï¼Œå‘Šé‹’æ›°ï¼šã€Œ${createWordTooltip('æ•™å·²æˆ', 'æ•™è‚²å·²å®Œæˆ')}çŸ£ï¼Œå­å»é ˜å–ã€‚ã€å°¼æ¬»äº¦ä¸è¦‹ã€‚ä¸€å®¶æ‚²å–œï¼Œå•å…¶æ‰€å­¸ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        ä½ ç«™åœ¨ç†Ÿæ‚‰çš„å®¶é–€å‰ï¼Œç©ºæ°£ä¸­æ˜¯åº­é™¢è£¡é‚£æ£µè€æ§æ¨¹ç†Ÿæ‚‰çš„å‘³é“ï¼Œæ··è‘—æ·¡æ·¡çš„ç‚Šç…™æ°£ã€‚äº”å¹´ï¼Œé•·å¾—è¶³å¤ ä¸€å€‹å¥³ç«¥æŠ½æ¢æˆå°‘å¥³ã€‚çˆ¶è¦ªçš„é¬¢è§’ï¼Œä¹Ÿå·²æŸ“ä¸Šäº†é¢¨éœœã€‚ä»–çœ‹è‘—ä½ ï¼Œçœ¼ç¥è£¡æœ‰ç‹‚å–œï¼Œæœ‰é›£ä»¥ç½®ä¿¡ï¼Œé‚„æœ‰ä¸€çµ²...ä½ è¯»ä¸æ‡‚çš„é™Œç”Ÿèˆ‡æ¢ç©¶ã€‚
                    </p>

                    <blockquote class="quote-text">
                        ä½ æ›°ï¼šã€Œåˆä½†è®€ç¶“å¿µå’’ï¼Œé¤˜ç„¡ä»–ä¹Ÿã€‚ã€é‹’ä¸ä¿¡ï¼Œ${createWordTooltip('æ‡‡è©°', 'å†ä¸‰å•')}ã€‚ä½ æ›°ï¼šã€ŒçœŸèªªåˆæä¸ä¿¡ï¼Œå¦‚ä½•ï¼Ÿã€é‹’æ›°ï¼šã€Œä½†çœŸèªªä¹‹ã€‚ã€
                    </blockquote>

                    <div class="bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 border-l-4 border-pink-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ’­ ä½ å¿ƒåº•çš„è²éŸ³ï¼Œæ­¤åˆ»éŸ¿æˆä¸€ç‰‡ï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-pink-600">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> <em>ã€Œçˆ¶è¦ªâ€¦â€¦æˆ‘å›ä¾†äº†ã€‚å¯æˆ‘è©²å¦‚ä½•å‘Šè¨´ä»–ï¼Œä»–çš„å¥³å…’ï¼Œé›™æ‰‹å·²ä¸å†æ½”ç™½ï¼Ÿã€</em></p>
                            <p><span class="font-semibold text-gray-600">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>ã€ŒçœŸç›¸æ˜¯åˆ©åˆƒï¼Œæœƒåˆºä¼¤æ‰€æœ‰é è¿‘çš„äººã€‚æ²‰é»˜æ˜¯æœ€å¥½çš„ä¿è­·ã€‚ã€</em></p>
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>ã€Œèª å¯¦ï¼Œæ˜¯é€šå¾€ç†è§£çš„ç¬¬ä¸€æ­¥ï¼Œä½†ä¹Ÿå¯èƒ½ï¼Œæ˜¯éš”é–¡çš„é–‹å§‹ã€‚ã€</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6">
                        é¢å°çˆ¶è¦ªæ€¥åˆ‡è€Œæ‹…å¿§çš„ç›®å…‰ï¼Œä½ å°‡å¦‚ä½•æ‹¼å‡‘é€™å¤±è½çš„äº”å¹´ï¼Ÿ
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ’ å®Œå…¨èª å¯¦åœ°å‘Šè¨´çˆ¶è¦ªä¸€åˆ‡",
                        description: "ï¼ˆçˆ¶è¦ªæœ‰æ¬ŠçŸ¥é“æˆ‘ç¶“æ­·äº†ä»€éº¼ï¼‰",
                        effects: { filialPiety: 20, seekingDao: 10, masterTraining: -10 },
                        learnedWords: [{ word: 'æ•™å·²æˆ', meaning: 'æ•™è‚²å·²å®Œæˆ' }, { word: 'æ‡‡è©°', meaning: 'å†ä¸‰å•' }],
                        nextScene: 'chapter3_tell_truth'
                    },
                    {
                        text: "ğŸ¤¥ éš±ççœŸç›¸ï¼Œä¿è­·çˆ¶è¦ª",
                        description: "ï¼ˆä»–çŸ¥é“äº†åªæœƒæ“”å¿ƒï¼Œé‚„æ˜¯ä¸èªªå§ï¼‰",
                        effects: { filialPiety: 10, masterTraining: 15, tenderness: 10 },
                        learnedWords: [{ word: 'æ‡‡è©°', meaning: 'å†ä¸‰å•' }],
                        nextScene: 'chapter3_hide_truth'
                    },
                    {
                        text: "âš–ï¸ é¸æ“‡æ€§åœ°èªªä¸€äº›çœŸè©±",
                        description: "ï¼ˆèªªä¸€éƒ¨åˆ†çœŸè©±ï¼Œä½†çœç•¥æœ€æ®˜é…·çš„éƒ¨åˆ†ï¼‰",
                        effects: { filialPiety: 15, seekingDao: 15 },
                        learnedWords: [{ word: 'æ•™å·²æˆ', meaning: 'æ•™è‚²å·²å®Œæˆ' }],
                        nextScene: 'chapter3_partial_truth'
                    }
                ]
            },

            chapter3_tell_truth: {
                title: "çœŸç›¸çš„é‡é‡",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ç‡­ç«æ–æ›³ï¼Œä½ é¸æ“‡äº†å¦èª ã€‚ä½ è¬›èµ·çŸ³ç©´çš„æ¸…å†·ï¼ŒåŠé‹’çš„å¯’å…‰ï¼ŒçŒ¿ç‹–çš„å“€é¸£ï¼Œä»¥åŠâ€¦â€¦ç¬¬ä¸€æ»´æ¿ºåœ¨æ‰‹èƒŒä¸Šçš„äººè¡€ã€‚ä½ çš„è²éŸ³å¾ˆå¹³éœï¼Œå½·å½¿åœ¨èªªåˆ¥äººçš„æ•…äº‹ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        çˆ¶è¦ªçš„è‡‰è‰²åœ¨ç‡­å…‰ä¸‹è®Šå¾—æ…˜ç™½ï¼Œå¾${createWordTooltip('é©šé§­', 'åƒé©šå®³æ€•')}åˆ°ææ‡¼ã€‚ä»–çœ‹è‘—ä½ ï¼Œåƒæ˜¯çœ‹è‘—ä¸€å€‹ç†Ÿæ‚‰çš„é™Œç”Ÿäººã€‚ä»–ä¸‹æ„è­˜åœ°å¾Œé€€äº†åŠæ­¥ï¼Œé€™å€‹ç´°å¾®çš„å‹•ä½œï¼Œåƒä¸€æ ¹é‡ï¼Œè¼•è¼•åˆºå…¥ä½ çš„å¿ƒã€‚
                    </p>

                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> 
                            <em>"çˆ¶è¦ªå®³æ€•æˆ‘äº†...æˆ‘æ˜¯ä¸æ˜¯ä¸æ‡‰è©²èªªå¯¦è©±ï¼Ÿ"</em>
                        </p>
                    </div>

                    <blockquote class="quote-text">
                        é‹’èèªï¼Œç”šæ‡¼ã€‚å¾Œé‡å¤œå³å¤±è¹¤ï¼ŒåŠæ˜è€Œè¿”ã€‚é‹’å·²ä¸æ•¢è©°ä¹‹ï¼Œ${createWordTooltip('å› èŒ²', 'å› æ­¤')}äº¦ä¸ç”šæ†æ„›ã€‚
                    </blockquote>
                    <p class="leading-relaxed mb-6">
                        ä¸€é“ç„¡å½¢çš„ç‰†ï¼Œåœ¨ä½ èˆ‡æœ€äº²è¿‘çš„äººä¹‹é—´ï¼Œæ‚„ç„¶ç­‘èµ·ã€‚ç©ºæ°£ä¸­å½Œæ¼«è‘—çˆ¶æ„›çš„é¤˜æº«ï¼Œä»¥åŠä¸€çµ²ç„¡æ³•è¨€èªªçš„ææ‡¼ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ˜¢ åŠªåŠ›ä¿®å¾©èˆ‡çˆ¶è¦ªçš„é—œä¿‚",
                        description: "ï¼ˆæˆ‘è¦è­‰æ˜æˆ‘é‚„æ˜¯ä»–çš„å¥³å…’ï¼‰",
                        effects: { filialPiety: 25, tenderness: 20, masterTraining: -15 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }, { word: 'å› èŒ²', meaning: 'å› æ­¤' }],
                        nextScene: 'chapter3_repair_relationship'
                    },
                    {
                        text: "ğŸ˜” æ¥å—çˆ¶è¦ªçš„ç–é ï¼Œç¨è‡ªæ‰¿å—ç—›è‹¦",
                        description: "ï¼ˆé€™æ˜¯æˆ‘é¸æ“‡çš„å¾Œæœï¼Œæˆ‘å¿…é ˆæ‰¿å—ï¼‰",
                        effects: { seekingDao: 20, filialPiety: -5 },
                        learnedWords: [{ word: 'å› èŒ²', meaning: 'å› æ­¤' }],
                        nextScene: 'chapter3_accept_distance'
                    },
                    {
                        text: "ğŸŒƒ é–‹å§‹å¤œé–“è¡Œå‹•ï¼Œé¿å…è®“çˆ¶è¦ªçœ‹åˆ°",
                        description: "ï¼ˆæˆ‘æœƒä¿è­·é€™å€‹å®¶ï¼Œä½†ä¸è®“ä»–çŸ¥é“ï¼‰",
                        effects: { loyalty: 15, masterTraining: 10 },
                        learnedWords: [{ word: 'é©šé§­', meaning: 'åƒé©šå®³æ€•' }],
                        nextScene: 'chapter3_night_activities'
                    }
                ]
            },

            chapter3_hide_truth: {
                title: "æº«æŸ”çš„è¬Šè¨€",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ é¸æ“‡äº†æ²‰é»˜èˆ‡å¾®ç¬‘ã€‚ä½ èªªå±±ä¸­æ­²æœˆæ¸…è‹¦ï¼Œä½†å¸«çˆ¶æ•™ä½ è®€æ›¸æ˜ç†ï¼Œæ—¥å­å€’ä¹Ÿå¹³éœã€‚çˆ¶è¦ªé¬†äº†ä¸€å£æ°£ï¼Œåºœé‚¸è£¡çš„æ°£æ°›é‡æ–°è®Šå¾—æº«æš–ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        ç„¶è€Œï¼Œæ¯ç•¶å¤œæ·±äººéœï¼Œè¬Šè¨€çš„é‡é‡ä¾¿å£“ä¸Šå¿ƒé ­ã€‚ä½ è§¸æ‘¸è‘—æŒ‡å°–çš„è–„ç¹­ï¼Œé‚£æ˜¯æ®åŠç•™ä¸‹çš„å°è¨˜ï¼›ä½ é–‰ä¸Šçœ¼ï¼Œé‚„èƒ½èåˆ°è¡€è…¥å‘³çš„å¹»è¦ºã€‚ä½ æ´»åœ¨å…©å€‹ä¸–ç•Œè£¡ï¼Œç™½æ—¥æ˜¯æº«é †çš„å¥³å…’ï¼Œå¤œæ™šæ˜¯æ²‰é»˜çš„åˆºå®¢ã€‚
                    </p>

                    <div class="bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">âš¡ å¸«é–€ä¹‹è¨“:</span> 
                            <em>"å¾ˆå¥½ï¼Œä¿æŒç§˜å¯†æ˜¯å¿…è¦çš„ã€‚æ™®é€šäººä¸æœƒç†è§£æˆ‘å€‘çš„ä½¿å‘½ã€‚"</em>
                        </p>
                        <p class="text-sm mt-2">
                            <span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> 
                            <em>"ä½†é€™æ¨£æ¬ºé¨™çˆ¶è¦ªè®“æˆ‘å¾ˆç—›è‹¦..."</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        å¤œæ·±äººéœæ™‚ï¼Œä½ å¸¸å·å·ç·´ç¿’æ­¦è—ï¼Œå»ç™¼ç¾è‡ªå·±æ„ˆç™¼é›£ä»¥èå…¥å°‹å¸¸å®¶å¸¸...
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ­ åŠªåŠ›æ‰®æ¼”æ­£å¸¸çš„å¥³å…’",
                        description: "ï¼ˆæˆ‘è¦åŠªåŠ›åšä¸€å€‹æ™®é€šçš„å¥½å¥³å…’ï¼‰",
                        effects: { filialPiety: 20, tenderness: 15, masterTraining: -10 },
                        nextScene: 'chapter3_pretend_normal'
                    },
                    {
                        text: "ğŸŒ™ ç¹¼çºŒç§˜å¯†è¨“ç·´ï¼Œæº–å‚™æœªä¾†",
                        description: "ï¼ˆæˆ‘ä¸èƒ½è’å»¢æ­¦è—ï¼Œå°‡ä¾†å¯èƒ½æœƒç”¨åˆ°ï¼‰",
                        effects: { masterTraining: 15, seekingDao: 10 },
                        nextScene: 'chapter3_secret_training'
                    },
                    {
                        text: "ğŸ’­ è€ƒæ…®è¦ä¸è¦èªªå‡ºéƒ¨åˆ†çœŸç›¸",
                        description: "ï¼ˆä¹Ÿè¨±æˆ‘æ‡‰è©²è®“çˆ¶è¦ªçŸ¥é“ä¸€äº›ï¼Œä½†ä¸æ˜¯å…¨éƒ¨ï¼‰",
                        effects: { filialPiety: 10, seekingDao: 15 },
                        nextScene: 'chapter3_consider_truth'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šé¸æ“‡æ€§èªªçœŸè©±
            chapter3_partial_truth: {
                title: "éš±è€Œä¸ç›¡",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ é¸æ“‡åªèªªä¸€éƒ¨åˆ†ã€‚ä½ æåˆ°å±±ä¸­æ¸…è‹¦ã€è®€ç¶“ç·´æ¯ï¼Œå»éš±å»æ®ºèˆ‡è¡€ã€‚çˆ¶è¦ªé»é ­ç¨±å–„ï¼Œå»ç¸½è¦ºä½ ç›®å…‰æ·±è™•å¦æœ‰æ³¢ç€¾ã€‚
                    </p>
                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>"æˆ‘ä¸é¡˜ä»–å› æˆ‘å—é©šã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ­ ç¶­æŒç¾ç‹€ï¼Œå…ä»–æ†‚å¿ƒ",
                        description: "ï¼ˆè­·ä»–äº¦è­·å·±ï¼‰",
                        effects: { tenderness: 10, filialPiety: 10 },
                        nextScene: 'chapter3_pretend_normal'
                    },
                    {
                        text: "ğŸ’¬ æ“‡æ™‚å†è«‡ï¼Œåœ–ä¸€æ—¥å¦èª ",
                        description: "ï¼ˆè¨€æœ‰å…ˆå¾Œï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter3_consider_truth'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šä¿®è£œçˆ¶å¥³é—œä¿‚ï¼ˆæ‰¿æ¥çœŸç›¸ä¹‹å¾Œï¼‰
            chapter3_repair_relationship: {
                title: "å¼­éš™å›æº«",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        çˆ¶è¦ªçš„ç›®å…‰ä»æœ‰é©šæ‡¼ã€‚ä½ æ”¾ä¸‹å…µåˆƒï¼Œé™ªä»–æ™¨èµ·å¤œåï¼Œèªªç«¥æ™‚å°äº‹ï¼Œè¨€ç¬‘å¦‚æ˜”ã€‚é©šå½±æ¼¸é€€ï¼Œè¦ªæƒ…å›æš–ã€‚
                    </p>
                    <div class="bg-pink-50 dark:bg-pink-900/20 border-l-4 border-pink-400 p-4 my-4">
                        <p class="text-sm"><span class="font-semibold">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> <em>"è¦ªåœ¨ï¼Œä¾¿æœ‰æ­¸è™•ã€‚"</em></p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ  å®‰çˆ¶ä¹‹å¿ƒï¼Œè­°å©šå®¶äº‹",
                        description: "ï¼ˆå®¶é–€æ¼¸å®šï¼‰",
                        effects: { filialPiety: 15, tenderness: 10 },
                        nextScene: 'chapter3_marriage_choice'
                    },
                    {
                        text: "ğŸ•¯ï¸ å¤œé–“å·¡è­·ï¼Œä¸æ“¾å…¶çœ ",
                        description: "ï¼ˆè­·ä¹‹æ–¼ç„¡å½¢ï¼‰",
                        effects: { loyalty: 10, masterTraining: 5 },
                        nextScene: 'chapter3_night_activities'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šæ¥å—ç–é ï¼ˆæ‰¿æ¥çœŸç›¸ä¹‹å¾Œï¼‰
            chapter3_accept_distance: {
                title: "å„å®ˆä¸€éš…",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ ä¸å†å¼·æ±‚è§£é‡‹ï¼Œåªåœ¨é™¢å¤–å®ˆè‘—ä»–çš„ç‡ˆã€‚é¢¨éç«¹å½±ï¼Œäººå„æœ‰å¿ƒã€‚ä½ æ˜ç™½ï¼Œæœ‰äº›å‚·éœ€è¦æ™‚é–“æ‰èƒ½å¹³ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸŒ™ è½‰è¡Œå¤œäº‹ï¼Œé¿å…¶æ‰€é©š",
                        description: "ï¼ˆä¸è¦‹ï¼Œäº¦æ˜¯æ„›ï¼‰",
                        effects: { loyalty: 10, seekingDao: 10 },
                        nextScene: 'chapter3_night_activities'
                    },
                    {
                        text: "ğŸ  è«‡å©šè«–å«ï¼Œå¯¬çˆ¶ä¹‹å¿ƒ",
                        description: "ï¼ˆä»¥å®¶äº‹é®å¿ƒäº‹ï¼‰",
                        effects: { filialPiety: 10 },
                        nextScene: 'chapter3_marriage_choice'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šå¤œé–“è¡Œå‹•ï¼ˆæ‰¿æ¥å¤šæ¢ç·šï¼‰
            chapter3_night_activities: {
                title: "å¤œè¡Œç„¡è²",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        å¤œæ·±ï¼Œä½ è¼•æ­¥è¶Šç‰†ï¼Œæ–¼å¸‚äº•å··é™Œè§£æ•¸æ¨å°æ‚£ï¼Œä¸ç•™å§“åã€‚å¤©å°‡æ˜æ™‚ï¼Œå›åˆ°é™¢ä¸­ï¼Œéœ²æ°´æœªä¹¾ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ›¡ï¸ å°ˆå®ˆå®¶åŸŸï¼Œæ–·å…¶å®µå°",
                        description: "ï¼ˆæ–½åŠ›æ–¼è¿‘ï¼‰",
                        effects: { loyalty: 10, masterTraining: 10 },
                        nextScene: 'chapter3_marriage_choice'
                    },
                    {
                        text: "ğŸ§­ æ¢è©¢æ™‚æ”¿ï¼Œè­˜äººé–“æ˜¯é",
                        description: "ï¼ˆè¦‹è­˜æ¼¸å»£ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter3_marriage_choice'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šæ‰®ä½œå°‹å¸¸ï¼ˆæ‰¿æ¥éš±ççœŸç›¸ï¼‰
            chapter3_pretend_normal: {
                title: "è‹¥ç„¡å…¶äº‹",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ç™½æ—¥é™ªçˆ¶ï¼Œè«‡æŸ´ç±³æ²¹é¹½ï¼›å¤œæ·±éœåï¼Œè½å¿ƒè·³èˆ‡é¢¨è²ã€‚ä½ å­¸è‘—æŠŠåˆ€æ„è—åœ¨å¾®ç¬‘è£¡ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ’• æ‡‰å…è¦ªäº‹ï¼Œæ±‚å®¶å¸¸å®‰ç©©",
                        description: "ï¼ˆå‡¡å¿ƒä¸€å¿µï¼‰",
                        effects: { tenderness: 15, filialPiety: 10 },
                        nextScene: 'chapter3_marriage_choice'
                    },
                    {
                        text: "ğŸ—¡ï¸ æš—è‡ªç·´åŠŸï¼Œä¸å»¢æ–¼è¡“",
                        description: "ï¼ˆé€²é€€å…©å…¨ï¼‰",
                        effects: { masterTraining: 10, seekingDao: 10 },
                        nextScene: 'chapter3_secret_training'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šç§˜å¯†ç·´ç¿’ï¼ˆæ‰¿æ¥éš±ççœŸç›¸ï¼‰
            chapter3_secret_training: {
                title: "ç‡ˆä¸‹è—é‹’",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ ä»¥æ°´ç´‹æ¸¬æ­¥ï¼Œä»¥ç‡­å½±æ ¡æ‰‹ï¼Œæ‹›å¼æ¼¸ç†Ÿï¼Œå¿ƒæ°£æ¼¸å¹³ã€‚å±‹å¤–çŠ¬å ä¸€è²ï¼Œä½ ä¾¿æ”¶åŠŸå¦‚åˆã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ  å›æ­¸å®¶å‹™ï¼Œæ‡‰å®¶ä¸­æ‰€éœ€",
                        description: "ï¼ˆæ”¶èˆ‡æ”¾ï¼‰",
                        effects: { filialPiety: 10 },
                        nextScene: 'chapter3_marriage_choice'
                    },
                    {
                        text: "ğŸ’¬ æ€åŠå¦èª ä¹‹æ™‚",
                        description: "ï¼ˆèª å¯è§£çµï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter3_consider_truth'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šæ¬Šè¡¡å¦èª ï¼ˆæ‰¿æ¥éš±ççœŸç›¸ï¼‰
            chapter3_consider_truth: {
                title: "è¨€èˆ‡ä¸è¨€",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ è¡¡é‡è¨€èªçš„è¼•é‡ï¼šè‹¥ç›¡è¨€ï¼Œæçˆ¶å¿ƒé©šï¼›è‹¥ä¸è¨€ï¼Œå‰‡å¿ƒæœ‰é–¡ã€‚ä½ æ±ºå®šå°‹ä¸€å€‹ä¸å‚·ä¹‹æ³•ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ•Šï¸ å…ˆè¨€å…¶è‹¦ï¼Œå¾Œéš±å…¶è¡€",
                        description: "ï¼ˆç·©æ­¥å…¥å¿ƒï¼‰",
                        effects: { tenderness: 10, seekingDao: 10 },
                        nextScene: 'chapter3_partial_truth'
                    },
                    {
                        text: "ğŸ—£ï¸ æ“‡è‰¯è¾°å¦ç™½",
                        description: "ï¼ˆçµ‚é ˆç›¸å‘Šï¼‰",
                        effects: { seekingDao: 10 },
                        nextScene: 'chapter3_tell_truth'
                    }
                ]
            },

            // ç¬¬ä¸‰ç« è£œå……ï¼šå©šäº‹èµ°å‘ï¼ˆæ‰¿æ¥å©šå§»æŠ‰æ“‡ï¼‰
            chapter3_true_love: {
                title: "çœŸå¿ƒå¦‚åˆ",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ ä»¥çœŸæ„ç›¸å¾…ï¼Œèˆ‡ç£¨é¡å°‘å¹´å…±ç†è–„é…Œæ¸…æ­¡ã€‚å¶æœ‰æ±Ÿæ¹–èˆŠè­˜ç›¸å°‹ï¼Œä½ æ·¡ç„¶å©‰æ‹’ï¼Œåªèªªï¼šã€Œæˆ‘å¿ƒæœ‰æ‰€å®ˆã€‚ã€
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ  ç¶“ç‡Ÿå°å®¶ï¼Œå®‰çˆ¶ä¹‹å¿ƒ",
                        description: "ï¼ˆæŸ”èƒ½å®šé¢¨ï¼‰",
                        effects: { tenderness: 20, filialPiety: 10 },
                        nextScene: 'chapter4_start'
                    }
                ]
            },

            chapter3_marriage_cover: {
                title: "å‡ä½œäººé–“",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ å°‡å©šå§»è¦–ç‚ºæ©è­·ï¼Œç¬‘èªæœ‰åº¦ï¼Œæƒ…ä¸å¤–éœ²ã€‚å°æ–¹é›–æ¨¸å¯¦å¤šæƒ…ï¼Œä½ å»è‡ªå®ˆå¦‚å†°ï¼Œå…å…¶ç‰½é€£ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ æš—ä¸­è¡Œäº‹ï¼Œè­·å…¶ç„¡çŸ¥",
                        description: "ï¼ˆæƒ…é›–ä¸è¿‘ï¼Œç¾©ä¸ç›¸è² ï¼‰",
                        effects: { masterTraining: 10, loyalty: 10 },
                        nextScene: 'chapter4_start'
                    }
                ]
            },

            chapter3_complex_marriage: {
                title: "åŠçœŸåŠç–‘",
                chapter: 3,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ å¸¶è‘—è©¦æ¢çš„å¿ƒæ­¥å…¥å©šå§»ã€‚æœ‰æ™‚æº«æŸ”ï¼Œæœ‰æ™‚ç–é›¢ï¼›ä½ åœ¨å‡¡ä¿—èˆ‡æ±Ÿæ¹–ä¹‹é–“ï¼Œå­¸è‘—æ”¾ä¸‹åˆæ‹¾èµ·ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ’• å˜—è©¦ä¿¡ä»»ï¼Œçµ¦äºˆçœŸå¿ƒ",
                        description: "ï¼ˆæƒ…æ·±å¯é®å¿ƒé­”ï¼‰",
                        effects: { tenderness: 15 },
                        nextScene: 'chapter3_true_love'
                    },
                    {
                        text: "ğŸ—¡ï¸ ä¿æŒè·é›¢ï¼Œä¸æ¶‰å…¶éšª",
                        description: "ï¼ˆä»¥é€€ç‚ºè­·ï¼‰",
                        effects: { masterTraining: 10, seekingDao: 10 },
                        nextScene: 'chapter3_marriage_cover'
                    }
                ]
            },

            // ç¬¬å››ç« è£œå……ï¼šé­åºœæ•ˆåŠ›çš„åˆ†è·¯
            chapter4_loyal_service: {
                title: "å—å‘½ä»¥è¡Œ",
                chapter: 4,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æŠ«ç”²å…¥åºœï¼ŒæŒ‰ä»¤è¡Œäº‹ã€‚æ–‡ç§»ä¹‹é–“ï¼Œå·²èè¨±å·è³¢åï¼›å…µå™¨ä¹‹å´ï¼Œäº¦è¦ºé¢¨é›²å°‡èµ·ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ æ•´è£èµ´ä»»ï¼Œå¾…å‘½è€Œè¡Œ",
                        description: "ï¼ˆèº«åœ¨å…¶ä½ï¼‰",
                        effects: { loyalty: 20, masterTraining: 10 },
                        nextScene: 'chapter5_mission'
                    }
                ]
            },

            chapter4_family_first: {
                title: "ä»¥å®¶ç‚ºé‡",
                chapter: 4,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ ä»¥å®¶åº­ç‚ºå…ˆï¼Œåªåœ¨åç¾©ä¸Šé ˜å·®ã€‚å¿ƒç¹«ç¶ä¸‹ç…™ï¼Œå¶æ–¼å¤œé–“è§£å°æ‚£ï¼Œç›¡å·±ä¹‹ç¾©è€Œä¸å¼µæšã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ›¡ï¸ å®ˆå°æˆ‘ï¼Œäº¦é—œå¤§å±€",
                        description: "ï¼ˆæ™‚å±€é›£æ–™ï¼‰",
                        effects: { tenderness: 15, filialPiety: 10 },
                        nextScene: 'chapter5_mission'
                    }
                ]
            },

            chapter4_cautious_approach: {
                title: "è§€å¾®çŸ¥è‘—",
                chapter: 4,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æŒ‰å…µä¸å‹•ï¼Œå…ˆè§€å…¶äººã€‚é­å¸¥è¨€è¾­é–“å¤šå¿Œåˆ»ï¼Œä½ å¿ƒä¸‹æš—è¨˜ï¼Œä¸ç‚ºæ‰€å½¹ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ•µï¸ ä»¥è§€ä»£è¡Œï¼Œæ±‚è­‰æ˜¯é",
                        description: "ï¼ˆæ…è€Œå¾Œå‹•ï¼‰",
                        effects: { seekingDao: 15 },
                        nextScene: 'chapter5_mission'
                    }
                ]
            },

            // ç¬¬äº”ç« è£œå……ï¼šä»»å‹™èµ°å‘
            chapter5_execute_mission: {
                title: "ä»¤ä¸‹å¦‚å±±",
                chapter: 5,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ”¶æ–‚å¿ƒç·’ï¼Œä¾ä»¤å•Ÿç¨‹ã€‚è¨±å·é“ä¸Šé¢¨æ­£æ¸…ï¼Œä½ å°‡åˆ€æ„éš±åœ¨è¡£ç¸«ï¼Œæ­¥ä¼å¦‚å¸¸ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ—¡ï¸ ç›´å…¥è¨±å·ï¼Œå°‹ä¾¿ä¸‹æ‰‹",
                        description: "ï¼ˆå¿ æ–¼å…¶è·ï¼‰",
                        effects: { loyalty: 20, masterTraining: 10 },
                        nextScene: 'chapter5_investigate'
                    }
                ]
            },

            chapter5_consider_refusal: {
                title: "é€²é€€å…©é›£",
                chapter: 5,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ€åŠä¸ˆå¤«èˆ‡å®¶ï¼Œå¿µåŠäººä¸»ä¹‹è‰¯è³¢ï¼›åˆ€åœ¨è…°é–“ï¼Œå¿ƒå»åœ¨è¡¡ã€‚æœ€çµ‚ï¼Œä½ æ±ºå®šå…ˆè¡Œæ¢äº‹ï¼Œå†ä½œæ–·èªã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ•µï¸ å…ˆå¯Ÿå…¶äººè€Œå¾Œå‹•",
                        description: "ï¼ˆä¸è² æ­¤ç”Ÿï¼‰",
                        effects: { seekingDao: 20, tenderness: 10 },
                        nextScene: 'chapter5_investigate'
                    }
                ]
            },

            chapter5_loyalty_question: {
                title: "å¿ æ‰€æ­¸è™•",
                chapter: 5,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ–¼åŠ‰åºœå¤–é è§€äººå¿ƒï¼Œæƒ³åˆ°ï¼šã€Œå¿ æˆ–ä¸åœ¨å…¶äººï¼Œåœ¨å…¶ç¾©ã€‚ã€å¿ƒå¿µä¸€èµ·ï¼Œè¶³ä¸‹ä¹‹è·¯ä¾¿æ˜äº†å¹¾åˆ†ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "âš–ï¸ å¯©ä¸»å¯©ç¾©ï¼Œæ“‡å…¶å¯å¾",
                        description: "ï¼ˆå¿ æ–¼æ›´å¤§çš„æ­£ç›´ï¼‰",
                        effects: { seekingDao: 20, loyalty: -5 },
                        nextScene: 'chapter5_impressed'
                    }
                ]
            },

            chapter5_neutrality: {
                title: "ä¸å±¬ä¹‹åœ°",
                chapter: 5,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ å¿ƒæ€è„«é›¢æ¬Šå‹¢ä¹‹çˆ­ï¼Œé¡˜ä»¥ä¸€å·±ä¹‹åŠ›ï¼Œåªè­·å€¼å¾—è­·ä¹‹äººã€‚åŠ‰æ˜Œè£”æœ›ä½ ä¸€çœ¼ï¼Œå¾®ç¬‘è€Œå…ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ›¡ï¸ å›å®ˆå…¶äººï¼Œä¸å•å…¶é»¨",
                        description: "ï¼ˆç¾©è‡ªåœ¨å¿ƒï¼‰",
                        effects: { seekingDao: 20, loyalty: 10 },
                        nextScene: 'chapter6_prepare_battle'
                    }
                ]
            },

            // ç¬¬å…­ç« è£œå……ï¼šæ­£é¢æ­»æˆ°ï¼ˆæ‰¿æ¥èˆ‡ç²¾ç²¾å…’å¾Œä¹‹åˆ†è·¯ï¼‰
            chapter6_direct_battle: {
                title: "åˆƒä¸Šèé“",
                chapter: 6,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ é¸æ“‡æ­£é¢ç›¸æã€‚å…µåˆƒäº¤é³´ä¹‹éš›ï¼Œå¿ƒå¿½ç„¶ç©ºæ˜ï¼šç”Ÿæ­»ä¸€ç¬ï¼Œæ‰€è­·ä¹‹äººä¾¿æ˜¯ä½ ä¹‹é“ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ§˜ ä»¥å¿ƒåˆ¶å‹ï¼Œå›æ­¸éœå®š",
                        description: "ï¼ˆå‹ä¸çŸœï¼Œæ•—ä¸å±ˆï¼‰",
                        effects: { seekingDao: 20, loyalty: 15 },
                        nextScene: 'chapter6_battle_kongkong'
                    }
                ]
            },

            // ç¬¬ä¸ƒç« è£œå……ï¼šæ›´æ·±çš„éš¨ä¾ï¼ˆæ‰¿æ¥åŒ–èº«è ›è “ä¹‹å¾Œï¼‰
            chapter7_deeper_loyalty: {
                title: "ç¾©æ·±å¦‚åˆ",
                chapter: 7,
                content: `
                    <p class="leading-relaxed mb-4">
                        è‡ªæ­¤ä¹‹å¾Œï¼Œä½ å°åŠ‰å…¬ä¹‹è­·æ›´è¬¹ã€‚ä½ çŸ¥ä»–æœ‰åº¦ï¼Œä½ äº¦è‡ªæœ‰æŒã€‚å¿ éåªšä¸Šï¼Œæ˜¯å®ˆä¸€ä»½æ˜äº®ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ ä»¥é€€ç‚ºé€²ï¼Œä¸æˆ€æ¬Šå ´",
                        description: "ï¼ˆå¿ƒæ­¸å±±æ°´ï¼‰",
                        effects: { seekingDao: 20 },
                        nextScene: 'chapter7_enlightenment'
                    }
                ]
            },

            // ç¬¬ä¸ƒç« è£œå……ï¼šæœ€çµ‚æŠ‰æ“‡ï¼ˆæ‰¿æ¥è¦ºæ‚Ÿï¼‰
            chapter7_final_choice: {
                title: "æœ€å¾Œä¹‹å•",
                chapter: 7,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ éœçœ‹äººé–“è¬è±¡ï¼ŒçŸ¥å¯ç•™ã€å¯èµ°ã€å¯å®ˆã€å¯æ”¾ã€‚æ­¤åˆ»çš„ä¸€å¿µï¼Œå°‡æˆç‚ºä½ æ­¤ç”Ÿçš„æ­¸è™•ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸŒŠ å°‹å±±æ°´ï¼Œè¨ªè‡³äºº",
                        description: "ï¼ˆæ­¸æ–¼è‡ªåœ¨ï¼‰",
                        effects: { seekingDao: 30 },
                        nextScene: 'ending_transcendence'
                    }
                ]
            },
            // ç¬¬ä¸‰ç« çš„é—œéµè½‰æŠ˜ - é¸æ“‡ä¸ˆå¤«
            chapter3_marriage_choice: {
                title: "äººç”Ÿçš„ç¬¬äºŒå€‹é‡å¤§é¸æ“‡",
                chapter: 3,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-purple-500 text-white px-4 py-2 rounded-full text-sm mb-4">
                            äººç”Ÿè½‰æŠ˜é»
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        å¿½å€¼ç£¨é¡å°‘å¹´åŠé–€ï¼Œå¥³æ›°ï¼šã€Œæ­¤äººå¯èˆ‡æˆ‘ç‚ºå¤«ã€‚ã€ç™½çˆ¶ï¼Œçˆ¶ä¸æ•¢ä¸å¾ï¼Œé‚å«ä¹‹ã€‚å…¶å¤«ä½†èƒ½æ·¬é¡ï¼Œé¤˜ç„¡ä»–èƒ½ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        é‚£å¤©ï¼Œä¸€åç£¨é¡å°‘å¹´ä¾†åˆ°åºœå‰ã€‚ä»–è¡£è¡«æ¨¸ç´ ï¼Œçœ¼ç¥å°ˆæ³¨è€Œæ¸…æ¾ˆï¼Œæ‰“ç£¨éŠ…é¡çš„å‹•ä½œä¸€çµ²ä¸è‹Ÿã€‚é™½å…‰ç‘åœ¨ä»–å°ˆæ³¨çš„å´è‡‰ä¸Šï¼Œä½ å¿½ç„¶æ„Ÿåˆ°ä¸€ç¨®ä¹…é•çš„å¹³éœã€‚ä½ å°çˆ¶è¦ªèªªï¼Œå°±æ˜¯ä»–äº†ã€‚
                    </p>

                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-l-4 border-purple-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ’­ ç‚ºä½•é¸æ“‡ä»–ï¼Ÿä½ å¿ƒåº•çš„è²éŸ³å€‘æœ‰è‘—ä¸åŒçš„è§£è®€ï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-purple-600">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>ã€Œæˆ–è¨±â€¦â€¦æˆ‘åªæ˜¯æ¸´æœ›ä¸€ä»½ç°¡å–®çš„ã€ä¸è¢«å¹²æ“¾çš„æº«æš–ã€‚ã€</em></p>
                            <p><span class="font-semibold text-gray-600">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>ã€Œä¸€å€‹æ™®é€šäººï¼Œæ˜¯æœ€å¥½çš„æ©è­·ã€‚ä»–ä¸æœƒå¯Ÿè¦ºä½ çš„ç§˜å¯†ï¼Œä¹Ÿä¸æœƒæˆç‚ºä½ çš„å¼±é»ã€‚ã€</em></p>
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>ã€Œä»–çš„å°ˆæ³¨ï¼Œè¿‘ä¹æ–¼é“ã€‚åœ¨ä»–èº«é‚Šï¼Œæˆ–è¨±èƒ½æ‰¾åˆ°å¦ä¸€ç¨®ä¿®è¡Œçš„æ–¹å¼ã€‚ã€</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6">
                        é€™æ®µçªå¦‚å…¶ä¾†çš„å©šå§»ï¼Œå°ä½ è€Œè¨€ï¼Œç©¶ç«Ÿæ„å‘³è‘—ä»€éº¼ï¼Ÿ
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ’• çœŸå¿ƒæ„›ä¸Šé€™å€‹ç´”æ¨¸çš„ç”·å­",
                        description: "ï¼ˆæˆ‘æƒ³è¦é«”é©—çœŸæ­£çš„æ„›æƒ…å’Œå®¶åº­å¹¸ç¦ï¼‰",
                        effects: { tenderness: 30, filialPiety: 15, masterTraining: -15 },
                        nextScene: 'chapter3_true_love'
                    },
                    {
                        text: "ğŸ­ å°‡å©šå§»è¦–ç‚ºæ©è­·èº«ä»½çš„å·¥å…·",
                        description: "ï¼ˆé€™æ˜¯ä¸€å€‹å®Œç¾çš„å½è£ï¼Œæ²’äººæœƒæ‡·ç–‘å®¶åº­ä¸»å©¦ï¼‰",
                        effects: { masterTraining: 20, seekingDao: 10, tenderness: -5 },
                        nextScene: 'chapter3_marriage_cover'
                    },
                    {
                        text: "ğŸ¤” å¸¶è‘—è¤‡é›œçš„å¿ƒæƒ…æ¥å—å©šå§»",
                        description: "ï¼ˆæˆ‘ä¸ç¢ºå®šè‡ªå·±æƒ³è¦ä»€éº¼ï¼Œä½†é¡˜æ„å˜—è©¦ï¼‰",
                        effects: { tenderness: 15, filialPiety: 10, seekingDao: 10 },
                        nextScene: 'chapter3_complex_marriage'
                    }
                ]
            },

            // ç¬¬å››ç« ï¼šä¸–ä¿—æ·é–ï¼ˆçˆ¶è¦ªå»ä¸–ï¼Œæ•ˆåŠ›é­å¸¥ï¼‰
            chapter4_start: {
                title: "å°˜ä¸–çš„é”š",
                chapter: 4,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬å››ç« ï¼šå°˜ä¸–ç¼°é” Â· é­åšå†›åºœ Â· æˆå¹´
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        æ•¸å¹´å¾Œï¼Œçˆ¶å’ã€‚é­å¸¥ç¨çŸ¥å…¶ç•°ï¼Œé‚ä»¥é‡‘å¸›ç½²ç‚ºå·¦å³åã€‚å¦‚æ­¤åˆæ•¸å¹´ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        çˆ¶äº²çš„ç¦»å»ï¼Œåƒæ˜¯æ–©æ–­äº†ä½ ä¸è¿™çº¢å°˜æœ€åçš„ã€ä¹Ÿæ˜¯æœ€æ¸©æš–çš„ä¸€æ ¹è”ç³»ã€‚çµå ‚çš„çƒ›ç«ç‡ƒå°½ï¼Œä½ æ„Ÿåˆ°å‰æ‰€æœªæœ‰çš„å­¤å•ï¼Œä»¿ä½›ç«‹äºæ—·é‡ï¼Œå››é¡¾èŒ«ç„¶ã€‚ä½ ä¸ˆå¤«çš„é™ªä¼´ï¼Œæ˜¯ä½ æ­¤åˆ»å”¯ä¸€çš„æ…°è—‰ã€‚
                    </p>
                    
                    <p class="leading-relaxed mb-4">
                        ä½ çš„ä¸å‡¡ï¼Œç»ˆç©¶éš¾ä»¥é•¿ä¹…éšè—ã€‚é­å¸…å¬é—»ä½ çš„äº‹è¿¹ï¼Œé€æ¥é‡‘å¸›ä¸å®˜èŒï¼Œé‚€ä½ å…¥åºœä¸ºä»–æ•ˆåŠ›ã€‚è¿™ä»½ã€Œèµè¯†ã€ï¼Œæ›´åƒä¸€é“æ–°çš„æ·é”ã€‚
                    </p>

                    <div class="bg-gradient-to-r from-gray-50 to-blue-50 dark:from-gray-900/20 dark:to-blue-900/20 border-l-4 border-gray-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ’­ ä½ å¿ƒåº•çš„è²éŸ³ï¼Œè½»å£°è®®è®ºï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-pink-600">ğŸ’ å­å¥³ä¹‹å¿ƒ:</span> <em>ã€Œçˆ¶äº²ä¸åœ¨äº†ï¼Œæˆ‘å½“æ‰¿å…¶é—å¿—ï¼ŒæŠ¤æŒå®¶é—¨ã€‚ã€</em></p>
                            <p><span class="font-semibold text-red-600">âš”ï¸ å¿ ç¾©ä¹‹å¿µ:</span> <em>ã€Œé­å¸…äºæˆ‘å®¶æœ‰æ©ï¼Œé£Ÿå›ä¹‹ç¦„ï¼Œå½“å¿ å›ä¹‹äº‹ã€‚ã€</em></p>
                            <p><span class="font-semibold text-purple-600">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>ã€Œæˆ‘åªæƒ³å’Œå¤«å›ç£¨é•œä¸ºç”Ÿï¼Œè¿‡æœ€å¯»å¸¸çš„æ—¥å­â€¦â€¦ã€</em></p>
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>ã€Œå…¥ä¸–ï¼Œè¿˜æ˜¯å‡ºä¸–ï¼Ÿæˆ–è®¸ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ä¿®è¡Œã€‚ã€</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6">
                        çˆ¶äº²ä¸ºä½ æŒ¡å¼€çš„å°˜ä¸–ï¼Œç»ˆç©¶è¿˜æ˜¯è¿é¢è€Œæ¥ã€‚ä½ å¦‚ä½•é€‰æ‹©ï¼Ÿ
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ å…¨å¿ƒå…¨æ„ç‚ºé­å¸¥æ•ˆåŠ›",
                        description: "ï¼ˆé€™æ˜¯å ±ç­”æ©æƒ…å’Œå±•ç¾èƒ½åŠ›çš„æ©Ÿæœƒï¼‰",
                        effects: { loyalty: 25, masterTraining: 15, filialPiety: 10 },
                        nextScene: 'chapter4_loyal_service'
                    },
                    {
                        text: "ğŸ  ä»¥å®¶åº­ç‚ºé‡ï¼Œåªæ˜¯å½¢å¼ä¸Šæ¥å—",
                        description: "ï¼ˆæˆ‘çš„é‡å¿ƒé‚„æ˜¯åœ¨å®¶åº­ï¼Œå·¥ä½œåªæ˜¯è¬€ç”Ÿæ‰‹æ®µï¼‰",
                        effects: { tenderness: 20, filialPiety: 15, loyalty: 5 },
                        nextScene: 'chapter4_family_first'
                    },
                    {
                        text: "ğŸ¤” ä¿æŒè­¦æƒ•ï¼Œè§€å¯Ÿé­å¸¥çš„çœŸå¯¦æ„åœ–",
                        description: "ï¼ˆå…ˆçœ‹çœ‹ä»–åˆ°åº•æƒ³è¦æˆ‘åšä»€éº¼ï¼‰",
                        effects: { seekingDao: 20, loyalty: 5, masterTraining: 5 },
                        nextScene: 'chapter4_cautious_approach'
                    }
                ]
            },

            // ç¬¬äº”ç« ï¼šå¿ èª è€ƒé©—ï¼ˆåˆºæ®ºåŠ‰æ˜Œè£”ï¼‰
            chapter5_mission: {
                title: "å¥‰å‘½ä¹‹åˆƒ",
                chapter: 5,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬äº”ç« ï¼šå¿ ç¾©çš„è£‚ç—• Â· è¨±å·é“ä¸Š
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        è‡³å…ƒå’Œé–“ï¼Œé­å¸¥èˆ‡é™³è¨±ç¯€åº¦ä½¿åŠ‰æ˜Œè£”ä¸å”ï¼Œä½¿ä½ è³Šå…¶é¦–ã€‚ä½ è¾­å¸¥ä¹‹è¨±ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        è¿™ä¸€å¤©è¿˜æ˜¯æ¥äº†ã€‚é­å¸…å¬ä½ å…¥å†…ï¼Œå±é€€å·¦å³ï¼Œå‘½ä»¤ä½ å»è®¸å·ï¼Œå–åˆ˜æ˜Œè£”é¦–çº§ã€‚åˆ˜æ˜Œè£”ï¼Œå½“ä»£åè‡£ï¼Œä»¥è´¤å¾·é—»åäºä¸–ã€‚è¿™ä¸ªåå­—ï¼Œè®©ä½ è…°é—´çš„åŒ•é¦–æ„Ÿåˆ°ä¸€ä¸å†°å†·çš„è®½åˆºã€‚
                    </p>

                    <div class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ’­ ä½ çš„å†…å¿ƒï¼Œæ€èµ·æ»”å¤©å·¨æµªï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-red-600">âš”ï¸ å¿ ç¾©ä¹‹å¿µ:</span> <em>ã€Œä¸»å…¬ä¹‹å‘½ï¼Œä¸å¯ä¸ä»ã€‚è¿™æ˜¯ä¸ºè‡£ä¹‹çº²å¸¸ã€‚ã€</em></p>
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>ã€Œè‹¥å¿ å³ä¸ºä¸ä¹‰ï¼Œè¿™'å¿ 'ï¼Œè¿˜å€¼å¾—å®ˆæŠ¤å—ï¼Ÿã€</em></p>
                            <p><span class="font-semibold text-gray-600">âš¡ å¸«é–€ä¹‹è¨“:</span> <em>ã€Œæ€è€ƒï¼Œæ˜¯å¤šä½™çš„ã€‚æ‰§è¡Œï¼Œæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚ã€</em></p>
                            <p><span class="font-semibold text-purple-600">ğŸ’• æŸ”æƒ…ä¹‹æ„:</span> <em>ã€Œæ­¤è¡Œå‡¶é™©ï¼Œè‹¥æˆ‘ä¸€å»ä¸è¿”ï¼Œå¤«å›è¯¥å¦‚ä½•è‡ªå¤„â€¦â€¦ã€</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6">
                        å‰å¾€è®¸å·çš„è·¯ä¸Šï¼Œè¹„å£°å•è°ƒï¼Œä½ çš„å¿ƒå´ä¹±å¦‚å¥”é©¬ã€‚ä½ æ¡ç€ç¼°ç»³çš„æ‰‹ï¼Œç¬¬ä¸€æ¬¡æ„Ÿåˆ°äº†è¿Ÿç–‘ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ å …æ±ºåŸ·è¡Œä»»å‹™ï¼Œå¿ æ–¼é­å¸¥",
                        description: "ï¼ˆæ—¢ç„¶æ¥å—äº†ä»»å‹™ï¼Œå°±è¦å®Œæˆåˆ°åº•ï¼‰",
                        effects: { loyalty: 30, masterTraining: 15, seekingDao: -15 },
                        nextScene: 'chapter5_execute_mission'
                    },
                    {
                        text: "ğŸ•µï¸ å…ˆæš—ä¸­èª¿æŸ¥åŠ‰æ˜Œè£”çš„ç‚ºäºº",
                        description: "ï¼ˆæˆ‘è¦ç¢ºèªä»–æ˜¯å¦çœŸçš„è©²æ­»ï¼‰",
                        effects: { seekingDao: 25, loyalty: 5 },
                        nextScene: 'chapter5_investigate'
                    },
                    {
                        text: "ğŸ’­ å…§å¿ƒæ™æ‰ï¼Œè€ƒæ…®æ‹’çµ•ä»»å‹™",
                        description: "ï¼ˆä¹Ÿè¨±æˆ‘æ‡‰è©²æ‰¾å€‹è—‰å£ä¸åŸ·è¡Œé€™å€‹ä»»å‹™ï¼‰",
                        effects: { seekingDao: 20, tenderness: 10, loyalty: -10 },
                        nextScene: 'chapter5_consider_refusal'
                    }
                ]
            },

            chapter5_investigate: {
                title: "è®¸å·åŸä¸‹",
                chapter: 5,
                content: `
                    <p class="leading-relaxed mb-4">
                        ä½ æ²¡æœ‰æ€¥äºåŠ¨æ‰‹ã€‚ç™½æ—¥ï¼Œä½ ä½œå¯»å¸¸å¦‡äººæ‰“æ‰®ï¼Œè¡Œèµ°äºè®¸å·è¡—å¸‚ã€‚ä½ å¬è§çš„æ˜¯ç™¾å§“å¯¹åˆ˜æ˜Œè£”çš„ç§°é¢‚ï¼Œçœ‹åˆ°çš„æ˜¯å¸‚äº•çš„å®‰ä¹ç¥¥å’Œã€‚è¿™ä¸€åˆ‡ï¼Œéƒ½ä¸é­å¸…å£ä¸­çš„ã€Œä¹±è‡£è´¼å­ã€æˆªç„¶ä¸åŒã€‚
                    </p>

                    <blockquote class="quote-text">
                        åˆ˜èƒ½ç¥ç®—ï¼Œå·²çŸ¥å…¶æ¥ã€‚å¬è¡™å°†ï¼Œä»¤æ¥æ—¥æ—©è‡³åŸåŒ—ï¼Œå€™ä¸€ä¸ˆå¤«ã€ä¸€å¥³å­ï¼Œå„è·¨ç™½é»‘å«è‡³é—¨ã€‚é‡æœ‰é¹Šå‰å™ªï¼Œä¸ˆå¤«ä»¥å¼“å¼¹ä¹‹ï¼Œä¸ä¸­ï¼Œå¦»å¤ºå¤«å¼¹ï¼Œä¸€ä¸¸è€Œæ¯™é¹Šè€…...
                    </blockquote>

                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"ä»–ç«Ÿç„¶æ—©å°±çŸ¥é“æˆ‘æœƒä¾†...é€™å€‹äººç¢ºå¯¦ä¸ç°¡å–®ã€‚"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        æ¬¡æ—¥ï¼ŒåŸé—¨ä¹‹ä¸‹ï¼Œå½“ä½ çš„ä¸ˆå¤«ä¸¾å¼¹å°„é¹Šä¸ä¸­ï¼Œä½ æ¥è¿‡å¼¹å¼“ï¼Œä¸€å‡»è€Œä¸‹æ—¶ï¼Œä½ çœ‹åˆ°äº†è¿œå¤„å®˜å°†çœ¼ä¸­äº†ç„¶çš„ç¥æƒ…ã€‚é‚£ä¸€åˆ»ï¼Œä½ å¦‚å å†°çªŸâ€”â€”ä»–ç«Ÿç®—åˆ°å¦‚æ­¤åœ°æ­¥ï¼
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ˜± è¢«åŠ‰æ˜Œè£”çš„æ™ºæ…§éœ‡æ’¼",
                        description: "ï¼ˆé€™æ¨£çš„äººæ€éº¼èƒ½æ®ºæ­»ï¼Ÿï¼‰",
                        effects: { seekingDao: 25, loyalty: -15 },
                        nextScene: 'chapter5_impressed'
                    },
                    {
                        text: "âš–ï¸ é‡æ–°æ€è€ƒå¿ èª çš„æ„ç¾©",
                        description: "ï¼ˆçœŸæ­£çš„å¿ èª æ˜¯å¿ æ–¼æ­£ç¾©ï¼Œé‚„æ˜¯å¿ æ–¼ä¸»äººï¼Ÿï¼‰",
                        effects: { seekingDao: 20, loyalty: -5 },
                        nextScene: 'chapter5_loyalty_question'
                    }
                ]
            },

            chapter5_impressed: {
                title: "ç¥äººä¹‹åº¦",
                chapter: 5,
                content: `
                    <blockquote class="quote-text">
                        æ–ä¹‹äº‘ï¼šã€Œå¾æ¬²ç›¸è¦‹ï¼Œæ•…é ç›¸ç¥—è¿ä¹Ÿã€‚ã€è¡™å°‡å—ç´„æŸï¼Œé‡ä¹‹ã€‚ä½ èˆ‡ä¸ˆå¤«æ›°ï¼šã€ŒåŠ‰åƒ•å°„æœç¥äººã€‚ä¸ç„¶è€…ï¼Œä½•ä»¥æ´å¾ä¹Ÿã€‚é¡˜è¦‹åŠ‰å…¬ã€‚ã€
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        ä½ ä¸ä¸ˆå¤«è¢«æ­æ•¬åœ°è¯·å…¥åºœå†…ã€‚åˆ˜æ˜Œè£”ç«¯åå ‚ä¸Šï¼Œæ¸©è¨€å¦‚æ˜¥é£ï¼šã€ŒäºŒä½è¿œé“è€Œæ¥ï¼Œä¸å¿…æ‹˜ç¤¼ã€‚ã€ä»–ä¸æ¯«æ²¡æœ‰æåŠåˆºæ€ä¹‹äº‹ï¼Œå½·ä½›ä½ ä»¬åªæ˜¯ä¹…åˆ«é‡é€¢çš„æ•…äººã€‚
                    </p>
                    
                    <blockquote class="quote-text">
                        åŠ‰å‹ä¹‹ã€‚ä½ èˆ‡ä¸ˆå¤«æ‹œæ›°ï¼šã€Œåˆè² åƒ•å°„è¬æ­»ã€‚ã€åŠ‰æ›°ï¼šã€Œä¸ç„¶ï¼Œå„è¦ªå…¶ä¸»ï¼Œäººä¹‹å¸¸äº‹ã€‚é­ä»Šèˆ‡è¨±ä½•ç•°ï¼Ÿé¡˜è«‹ç•™æ­¤ï¼Œå‹¿ç›¸ç–‘ä¹Ÿã€‚ã€
                    </blockquote>

                    <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"ä»–ä¸ä½†ä¸æ€ªç½ªæˆ‘ï¼Œé‚„ç†è§£æˆ‘çš„è™•å¢ƒ...é€™å°±æ˜¯çœŸæ­£çš„å¤§åº¦ã€‚"</em>
                        </p>
                        <p class="text-sm mt-2">
                            <span class="font-semibold text-red-600">âš”ï¸ å¿ ç¾©ä¹‹å¿µ:</span> 
                            <em>"é€™æ¨£çš„äººæ‰å€¼å¾—æˆ‘æ•ˆå¿ ï¼"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        ä½ è¬æ›°ï¼šã€Œåƒ•å°„å·¦å³ç„¡äººï¼Œé¡˜èˆå½¼è€Œå°±æ­¤ï¼Œæœå…¬ç¥æ˜ä¹Ÿã€‚ã€çŸ¥é­å¸¥ä¹‹ä¸åŠåŠ‰ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ™ æ­£å¼èƒŒå›é­å¸¥ï¼ŒæŠ•é åŠ‰æ˜Œè£”",
                        description: "ï¼ˆçœŸæ­£çš„å¿ èª æ‡‰è©²ç»çµ¦å€¼å¾—çš„äººï¼‰",
                        effects: { loyalty: 20, seekingDao: 25, masterTraining: -10 },
                        nextScene: 'chapter5_switch_loyalty'
                    },
                    {
                        text: "âš–ï¸ æå‡ºä¸­ç«‹ï¼Œä¸å†åƒèˆ‡æ”¿æ²»é¬¥çˆ­",
                        description: "ï¼ˆæˆ‘ä¸æƒ³å†ç‚ºä»»ä½•äººçš„é‡å¿ƒæ®ºæˆ®ï¼‰",
                        effects: { seekingDao: 30, loyalty: -20 },
                        nextScene: 'chapter5_neutrality'
                    }
                ]
            },

            chapter5_switch_loyalty: {
                title: "æ˜“ä¸»ä¹‹èª“",
                chapter: 5,
                content: `
                    <blockquote class="quote-text">
                        åŠ‰å•å…¶æ‰€é ˆï¼Œæ›°ï¼šã€Œæ¯æ—¥åªè¦éŒ¢äºŒç™¾æ–‡è¶³çŸ£ã€‚ã€ä¹ƒä¾æ‰€è«‹ã€‚å¿½ä¸è¦‹äºŒè¡›æ‰€ä¹‹ã€‚åŠ‰ä½¿äººå°‹ä¹‹ï¼Œä¸çŸ¥æ‰€å‘ã€‚å¾Œæ½›æœå¸ƒå›Šä¸­ï¼Œè¦‹äºŒç´™è¡›ï¼Œä¸€é»‘ä¸€ç™½ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        ä½ æ­£å¼æŠ•é åŠ‰æ˜Œè£”ã€‚ä½ çš„è¦æ±‚ç°¡å–®åˆ°è®“ä»–é©šè¨ï¼šæ¯æ—¥äºŒç™¾æ–‡éŒ¢ï¼Œåƒ…å¤ å®¶ç”¨ã€‚ä½ é‚£å…©åŒ¹ç¥é§¿çš„åé¨ä¹Ÿæ‚„ç„¶æ¶ˆå¤±ï¼Œåªåœ¨ä»–æ´¾äººé€ä¾†çš„è¡Œå›Šä¸­ï¼Œè®Šç‚ºå…©å¼µå‰ªç´™ï¼Œä¸€é»‘ä¸€ç™½ã€‚
                    </p>

                    <div class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold text-red-600">âš”ï¸ å¿ ç¾©ä¹‹å¿µ:</span> 
                            <em>"å¾ä»Šä»¥å¾Œï¼Œæˆ‘çš„åŠåªç‚ºæ­£ç¾©è€Œèˆï¼"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        ç„¶è€Œï¼ŒèƒŒå›çš„ä»£åƒ¹ï¼Œå¾ˆå¿«ä¾¿æœƒæ‰¾ä¸Šé–€ä¾†ã€‚ä½ æœ›å‘åŒ—æ–¹çš„å¤©ç©ºï¼Œå¹³éœåœ°å°åŠ‰æ˜Œè£”èªªï¼šã€Œé­å¸¥ä¸æœƒå–„ç½·ç”˜ä¼‘ã€‚ä»–çš„ä¸‹ä¸€å€‹åˆºå®¢ï¼Œå·²åœ¨è·¯ä¸Šã€‚ã€
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ ä¸»å‹•è¿æˆ°å³å°‡åˆ°ä¾†çš„åˆºå®¢",
                        description: "ï¼ˆæ—¢ç„¶é¸æ“‡äº†é€™æ¢è·¯ï¼Œå°±è¦æ‰¿æ“”å¾Œæœï¼‰",
                        effects: { loyalty: 25, masterTraining: 20 },
                        nextScene: 'chapter6_prepare_battle'
                    },
                    {
                        text: "ğŸ›¡ï¸ å°ˆæ³¨æ–¼ä¿è­·åŠ‰æ˜Œè£”",
                        description: "ï¼ˆæˆ‘çš„ä½¿å‘½æ˜¯ä¿è­·å€¼å¾—ä¿è­·çš„äººï¼‰",
                        effects: { loyalty: 30, tenderness: 10 },
                        nextScene: 'chapter6_prepare_battle'
                    }
                ]
            },

            // ç¬¬å…­ç« ï¼šè­·ä¸»æ±ºæˆ°
            chapter6_prepare_battle: {
                title: "ç´…ç¶ƒä¹‹èª“",
                chapter: 6,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬å…­ç« ï¼šæ­»ç”Ÿä¹‹å†³ Â· è¨±å·åºœé‚¸ Â· ä¸€ç·šä¹‹é–“
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        ã€Œä»Šå®µè«‹å‰ªé«®ï¼Œç¹«ä¹‹ä»¥ç´…ç¶ƒï¼Œé€æ–¼é­å¸¥æ•å‰ï¼Œä»¥è¡¨ä¸å›ã€‚ã€åŠ‰è½ä¹‹ã€‚è‡³å››æ›´ï¼Œå»è¿”ï¼Œæ›°ï¼šã€Œé€å…¶ä¿¡äº†ã€‚å¾Œå¤œå¿…ä½¿ç²¾ç²¾å…’ä¾†æ®ºæŸåŠè³Šåƒ•å°„ä¹‹é¦–ã€‚æ­¤æ™‚äº¦è¬è¨ˆæ®ºä¹‹ï¼Œä¹ä¸æ†‚è€³ã€‚ã€
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        ä½ å‰ªä¸‹ä¸€ç¼•é’ä¸ï¼Œç”¨çº¢ç»¡ç³»å¥½ã€‚é€™ä¸åƒ…æ˜¯èˆ‡éå»çš„è¯€åˆ¥ï¼Œä¹Ÿæ˜¯è³­ä¸Šæ€§å‘½çš„èª“è¨€ã€‚åŠ‰æ˜Œè£”çœ‹è‘—ç‡­ç«ä¸‹ä½ æ±ºçµ•çš„å´è‡‰ï¼Œå¿ƒä¸­å†ç„¡åŠåˆ†ç–‘æ…®ï¼Œå”¯æœ‰å…¨ç„¶çš„ä¿¡ä»»ã€‚
                    </p>

                    <div class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">âš”ï¸ å¿ ç¾©ä¹‹å¿µ:</span> 
                            <em>"ç‚ºäº†ä¿è­·å€¼å¾—ä¿è­·çš„äººï¼Œæˆ‘é¡˜æ„èˆ‡ä¸–ç•Œç‚ºæ•µï¼"</em>
                        </p>
                        <p class="text-sm mt-2">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"é€™ä¸€æˆ°ï¼Œå°‡æ±ºå®šæˆ‘çš„é“è·¯æ˜¯å¦æ­£ç¢ºã€‚"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        åŠ‰æ˜Œè£”å¾å®¹ä¾èˆŠï¼Œè±é”ç„¡ç•ã€‚èƒ½é‡æ­¤ä¸»ï¼Œå¤«å¾©ä½•æ±‚ã€‚
                    </p>
                `,
                choices: [
                    {
                        text: "âš”ï¸ åšå¥½æˆ°é¬¥çš„ä¸€åˆ‡æº–å‚™",
                        description: "ï¼ˆæˆ‘è¦ç”¨ç›¡å…¨åŠ›ä¿è­·åŠ‰å…¬ï¼‰",
                        effects: { loyalty: 25, masterTraining: 15 },
                        nextScene: 'chapter6_battle_jjing'
                    },
                    {
                        text: "ğŸ§˜ ä¿æŒå…§å¿ƒå¹³éœï¼Œä»¥ä¸è®Šæ‡‰è¬è®Š",
                        description: "ï¼ˆçœŸæ­£çš„é«˜æ‰‹åœ¨æ–¼å¿ƒå¢ƒçš„å¹³å’Œï¼‰",
                        effects: { seekingDao: 20, loyalty: 15 },
                        nextScene: 'chapter6_battle_jjing'
                    }
                ]
            },

            chapter6_battle_jjing: {
                title: "å¹»å½±ä¹‹æ–—",
                chapter: 6,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-red-500 text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç”Ÿæ­»ä¸€ç¬
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        æ˜¯å¤œæ˜ç‡­ï¼ŒåŠå®µä¹‹å¾Œï¼Œæœæœ‰äºŒå¹¡å­ï¼Œä¸€ç´…ä¸€ç™½ï¼Œé£„é£„ç„¶å¦‚ç›¸æ“Šæ–¼åºŠå››éš…ã€‚è‰¯ä¹…ï¼Œè¦‹ä¸€äººè‡ªç©ºè€Œè¸£ï¼Œèº«é¦–ç•°è™•ã€‚ä½ äº¦å‡ºæ›°ï¼šã€Œç²¾ç²¾å…’å·²æ–ƒã€‚ã€
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        æˆ°é¬¥æ¿€çƒˆè€ŒçŸ­æš«ã€‚ä½ æ†‘è—‰å¤šå¹´çš„è¨“ç·´èˆ‡å …å®šä¹‹å¿µï¼ŒæˆåŠŸæ“Šæ•—ç²¾ç²¾å…’ï¼›ä½ ä¹Ÿæ˜ç™½ï¼Œæ›´å¤§çš„æŒ‘æˆ°å°šåœ¨å¾Œé ­ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        æ‹½å‡ºæ–¼å ‚ä¹‹ä¸‹ï¼Œä»¥è—¥åŒ–ä¹‹ç‚ºæ°´ï¼Œæ¯›é«®ä¸å­˜çŸ£ã€‚ä½ æ›°ï¼šã€Œå¾Œå¤œç•¶ä½¿å¦™æ‰‹ç©ºç©ºå…’ç¹¼è‡³ã€‚ç©ºç©ºå…’ä¹‹ç¥è¡“ï¼Œäººè«èƒ½çªºå…¶ç”¨ï¼Œé¬¼è«èƒ½èº¡å…¶è¹¤â€¦â€¦æˆ‘ä¹‹è—ï¼Œæ•…ä¸èƒ½é€ å…¶å¢ƒã€‚ã€
                    </p>

                    <div class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 my-4">
                        <p class="text-sm">
                            <span class="font-semibold">ğŸŒŠ å±±æ°´æ±‚é“:</span> 
                            <em>"ç©ºç©ºå…’çš„å¢ƒç•Œæ¯”æˆ‘é«˜...ä½†ç‚ºäº†ä¿è­·åŠ‰å…¬ï¼Œæˆ‘å¿…é ˆè¶…è¶Šè‡ªå·±çš„æ¥µé™ã€‚"</em>
                        </p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        é¢å°æ›´å¼·å¤§çš„å°æ‰‹ï¼Œä½ å¿…é ˆæƒ³å‡ºéå¸¸æ‰‹æ®µ...
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸ› åŒ–èº«è ›è “ï¼Œæ½›å…¥åŠ‰å…¬é«”å…§ä¿è­·",
                        description: "ï¼ˆåªæœ‰é€™æ¨£æ‰èƒ½é˜»æ­¢ç©ºç©ºå…’ï¼‰",
                        effects: { loyalty: 30, seekingDao: 25 },
                        nextScene: 'chapter6_battle_kongkong'
                    },
                    {
                        text: "âš”ï¸ æ­£é¢è¿æˆ°ï¼Œä»¥å‘½ç›¸æ",
                        description: "ï¼ˆå³ä½¿æ˜çŸ¥ä¸æ•µï¼Œä¹Ÿè¦å ‚å ‚æ­£æ­£ä¸€æˆ°ï¼‰",
                        effects: { loyalty: 35, masterTraining: 20 },
                        nextScene: 'chapter6_direct_battle'
                    }
                ]
            },

            chapter6_battle_kongkong: {
                title: "è™›ç©ºä¹‹é˜²",
                chapter: 6,
                content: `
                    <blockquote class="quote-text">
                        ã€Œä½†ä»¥äºé—ç‰å‘¨å…¶é ¸ï¼Œæ“ä»¥è¡¾ï¼Œæ±ç•¶åŒ–ç‚ºè ›è “ï¼Œæ½›å…¥åƒ•å°„è…¸ä¸­è½ä¼ºï¼Œå…¶é¤˜ç„¡é€ƒé¿è™•ã€‚ã€åŠ‰å¦‚è¨€ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        é€™æ˜¯ä½ å¾æœªå˜—è©¦éçš„å¢ƒç•Œã€‚ä½ å°‡è‡ªå·±åŒ–ç‚ºæœ€å¾®å°çš„å­˜åœ¨ï¼Œæ½›å…¥åŠ‰æ˜Œè£”é«”å…§ï¼Œä»¥æœ€è¦ªå¯†çš„æ–¹å¼è­·ä»–ã€‚æ­¤åˆ»ï¼Œä½ æ„Ÿå—å‰æ‰€æœªæœ‰çš„è¶…è„«ã€‚
                    </p>

                    <p class="leading-relaxed mb-4">
                        è‡³ä¸‰æ›´ï¼Œç‘ç›®æœªç†Ÿï¼Œæœèé ¸ä¸Šé—ç„¶ï¼Œè²ç”šå²ã€‚ä½ è‡ªå£ä¸­èºå‡ºï¼Œè³€æ›°ï¼šã€Œåƒ•å°„ç„¡æ‚£çŸ£ã€‚æ­¤äººå¦‚ä¿Šé¶»ï¼Œä¸€æä¸ä¸­ï¼Œå³ç¿©ç„¶é é€ï¼Œæ¥å…¶ä¸ä¸­ã€‚æ‰æœªé€¾ä¸€æ›´ï¼Œå·²åƒé‡ŒçŸ£ã€‚ã€
                    </p>

                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸŒŸ ç²¾ç¥å¢ƒç•Œçš„æ˜‡è¯ï¼š</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold text-blue-600">ğŸŒŠ å±±æ°´æ±‚é“:</span> <em>"æˆ‘é«”é©—åˆ°äº†èˆ‡ä»–äººç”Ÿå‘½å®Œå…¨èåˆçš„å¢ƒç•Œ...é€™å°±æ˜¯è¶…è„«å—ï¼Ÿ"</em></p>
                            <p><span class="font-semibold text-red-600">âš”ï¸ å¿ ç¾©ä¹‹å¿µ:</span> <em>"çœŸæ­£çš„å¿ èª å°±æ˜¯é¡˜æ„ç‚ºå°æ–¹çŠ§ç‰²ä¸€åˆ‡ï¼ŒåŒ…æ‹¬è‡ªæˆ‘ã€‚"</em></p>
                        </div>
                    </div>

                    <p class="leading-relaxed mb-6">
                        å¾Œè¦–å…¶ç‰ï¼Œæœæœ‰åŒ•é¦–åŠƒè™•ï¼Œç—•é€¾æ•¸åˆ†ã€‚è‡ªæ­¤åŠ‰è½‰åšç¦®ä¹‹ã€‚ä½ åœ¨æ­¤æ¬¡æˆ°é¬¥ä¸­ä¸åƒ…è­·äº†åŠ‰å…¬ï¼Œæ›´é‡è¦è€…ï¼Œä½ æ‰¾åˆ°äº†æ–°çš„ç²¾ç¥å¢ƒç•Œ...
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸŒŸ ç‚ºè‡ªå·±çš„å¢ƒç•Œæå‡æ„Ÿåˆ°å–œæ‚…",
                        description: "ï¼ˆæˆ‘æ‰¾åˆ°äº†æ–°çš„äººç”Ÿæ„ç¾©ï¼‰",
                        effects: { seekingDao: 35, loyalty: 20 },
                        nextScene: 'chapter7_enlightenment'
                    },
                    {
                        text: "ğŸ¤ æ›´åŠ å …å®šå°åŠ‰å…¬çš„å¿ èª ",
                        description: "ï¼ˆé€™æ¨£çš„ä¸»å›å€¼å¾—æˆ‘çµ‚ç”Ÿæ•ˆå¿ ï¼‰",
                        effects: { loyalty: 40, seekingDao: 15 },
                        nextScene: 'chapter7_deeper_loyalty'
                    }
                ]
            },

            // ç¬¬ä¸ƒç« ï¼šçµ‚æ¥µé¸æ“‡
            chapter7_enlightenment: {
                title: "é“ä¹‹æ‰€åœ¨",
                chapter: 7,
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-ancient-gold text-white px-4 py-2 rounded-full text-sm mb-4">
                            ç¬¬ä¸ƒç« ï¼šæŠ‰æ‹© Â· å°˜ä¸–ä¹‹å¤–
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        è‡ªå…ƒå’Œå…«å¹´ï¼ŒåŠ‰è‡ªè¨±å…¥è¦²ï¼Œä½ ä¸é¡˜å¾ç„‰ã€‚äº‘ï¼šã€Œè‡ªæ­¤å°‹å±±æ°´ï¼Œè¨ªè‡³äººï¼Œä½†ä¹ä¸€è™›çµ¦èˆ‡å…¶å¤«ã€‚ã€åŠ‰å¦‚ç´„ã€‚
                    </blockquote>

                    <p class="leading-relaxed mb-4">
                        åŠ‰æ˜Œè£”å¥‰è©”å…¥äº¬ï¼Œå‰é€”ç„¡é‡ï¼Œä»–ç››æƒ…é‚€ä½ åŒå¾€ã€‚ä½ å»æ–äº†æ–é ­ã€‚é‚£å ´åŒ–èº«è ›è “çš„ç¶“æ­·ï¼Œè®“ä½ çªºè¦‹äº†å¦ä¸€ç‰‡å¤©åœ°ã€‚åŠŸååˆ©ç¥¿ï¼Œæ–¼ä½ å·²æ˜¯éçœ¼é›²ç…™ã€‚
                    </p>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-6 my-6">
                        <h4 class="font-bold text-lg mb-3">ğŸŒŠ å±±æ°´æ±‚é“çš„æœ€çµ‚è¦ºé†’</h4>
                        <p class="text-sm mb-2">åœ¨èˆ‡ç©ºç©ºå…’çš„æˆ°é¬¥ä¸­ï¼Œä½ é«”é©—åˆ°äº†åŒ–èº«è ›è “çš„è¶…è„«å¢ƒç•Œã€‚</p>
                        <p class="text-sm mb-2">ä½ æ„è­˜åˆ°çœŸæ­£çš„è‡ªç”±ä¸æ˜¯ç‚ºä»»ä½•äººè€Œæ´»ï¼Œè€Œæ˜¯è¶…è¶Šæ‰€æœ‰ä¸–ä¿—çš„æŸç¸›ã€‚</p>
                        <p class="text-sm">å°‹å±±æ°´ã€è¨ªè‡³äººï¼Œè¿½æ±‚æ›´é«˜çš„ç²¾ç¥å¢ƒç•Œï¼Œé€™æ‰æ˜¯ä½ çš„çµ‚æ¥µç›®æ¨™ã€‚</p>
                    </div>

                    <p class="leading-relaxed mb-6">
                        é€™å€‹é¸æ“‡è®“åŠ‰æ˜Œè£”æ—¢ç†è§£åˆæ„Ÿæ…¨ã€‚ä»–çŸ¥é“ï¼ŒçœŸæ­£çš„é«˜äººæœ€çµ‚éƒ½æœƒé¸æ“‡è¶…è„«...
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸŒŠ è¸ä¸Šå°‹å±±æ°´è¨ªè‡³äººçš„é“è·¯",
                        description: "ï¼ˆæˆ‘çµ‚æ–¼æ‰¾åˆ°äº†äººç”Ÿçš„çœŸæ­£æ„ç¾©ï¼‰",
                        effects: { seekingDao: 50 },
                        nextScene: 'ending_transcendence'
                    },
                    {
                        text: "ğŸ¤” å†æ¬¡è€ƒæ…®æ˜¯å¦è¦å®Œå…¨è¶…è„«",
                        description: "ï¼ˆä¹Ÿè¨±æˆ‘é‚„æœ‰ä¸€äº›ä¸–ä¿—çš„ç‰½æ›æ²’æœ‰æ”¾ä¸‹ï¼‰",
                        effects: { seekingDao: 30, tenderness: 10 },
                        nextScene: 'chapter7_final_choice'
                    }
                ]
            },

            // æœ€çµ‚çµå±€ï¼šè¶…è„«è–è€…
            ending_transcendence: {
                title: "ä¸çŸ¥æ‰€ä¹‹",
                chapter: 7,
                isEnding: true,
                endingId: 'transcendence_sage',
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-full text-xl font-bold ending-badge">
                            ğŸŒŠ æœ€çµ‚çµå±€ï¼šä¸çŸ¥æ‰€ä¹‹
                        </div>
                    </div>

                    <blockquote class="quote-text">
                        å¾Œæ¼¸ä¸çŸ¥æ‰€ä¹‹ã€‚åŠåŠ‰è–¨æ–¼çµ±è»ï¼Œä½ äº¦é­é©¢è€Œä¸€è‡³äº¬å¸«ï¼ŒæŸ©å‰æ…Ÿå“­è€Œå»ã€‚
                    </blockquote>
                    
                    <p class="leading-relaxed mb-4">
                        ä½ è¾­åˆ¥äº†åŠ‰æ˜Œè£”ï¼Œèˆ‡ä¸ˆå¤«ä¸€åŒæ­¸éš±ã€‚ä¸–é–“å†ç„¡äººçŸ¥ä½ çš„è¸ªè·¡ã€‚ç›´åˆ°æ•¸å¹´å¾Œï¼ŒåŠ‰æ˜Œè£”æ–¼ä»»ä¸Šç—…æ•…ï¼Œä½ ç¨è‡ªä¸€äººï¼Œé¨è‘—é‚£é ­ç¥å¦™çš„ç™½é©¢ï¼Œä¾†åˆ°äº¬å¸«çš„éˆæŸ©å‰ï¼Œå¤§å“­ä¸€å ´ï¼Œè€Œå¾Œå†æ¬¡æ¶ˆå¤±æ–¼äººæµ·ã€‚
                    </p>

                    <blockquote class="quote-text">
                        é–‹æˆå¹´ï¼Œæ˜Œè£”å­ç¸±é™¤é™µå·åˆºå²ï¼Œè‡³èœ€æ£§é“ï¼Œé‡ä½ ï¼Œè²Œè‹¥ç•¶æ™‚ã€‚ç”šå–œç›¸è¦‹ï¼Œä¾å‰è·¨ç™½è¡›å¦‚æ•…ã€‚ä½ èªç¸±æ›°ï¼šã€Œéƒå›å¤§ç½ï¼Œä¸åˆé©æ­¤ã€‚ã€å‡ºè—¥ä¸€ç²’ï¼Œä»¤ç¸±åä¹‹ã€‚åˆäº‘ï¼šã€Œä¾†å¹´ç«æ€¥æ‹‹å®˜æ­¸æ´›ï¼Œæ–¹è„«æ­¤ç¦ã€‚å¾è—¥åŠ›åªä¿ä¸€å¹´æ‚£è€³ã€‚ã€
                    </blockquote>
                    
                    <blockquote class="quote-text">
                        ç¸±äº¦ä¸ç”šä¿¡ã€‚éºå…¶ç¹’å½©ï¼Œä½ ä¸€ç„¡æ‰€å—ï¼Œä½†æ²‰é†‰è€Œå»ã€‚å¾Œä¸€å¹´ï¼Œç¸±ä¸ä¼‘å®˜ï¼Œæœå’æ–¼é™µå·ã€‚è‡ªæ­¤ç„¡å¾©æœ‰äººè¦‹ä½ çŸ£ã€‚
                    </blockquote>

                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-l-4 border-blue-400 p-6 my-6">
                        <h4 class="font-bold text-lg mb-3">ğŸŒŸ ä½ çš„æœ€çµ‚å½¢è±¡</h4>
                        <p class="mb-2"><strong>ğŸŒŠ å±±æ°´æ±‚é“é”åˆ°æ¥µè‡´</strong> - å®Œå…¨è¶…è„«äº†ä¸–ä¿—çš„ä¸€åˆ‡æŸç¸›</p>
                        <p class="mb-2"><strong>ğŸ”® é çŸ¥æœªä¾†çš„èƒ½åŠ›</strong> - èƒ½å¤ çœ‹ç ´ç”Ÿæ­»ï¼Œæ´å¯Ÿå‘½é‹</p>
                        <p class="mb-2"><strong>ğŸ’¨ ä¾†å»å¦‚é¢¨çš„å­˜åœ¨</strong> - å¦‚ç¥ä»™èˆ¬é£„æ¸ºï¼Œä¸å—ä»»ä½•æ‹˜æŸ</p>
                        <p class="mb-2"><strong>ğŸ­ ä¿æŒäººæ€§é—œæ‡·</strong> - é›–ç„¶è¶…è„«ä½†ä»é—œå¿ƒæ•…äºº</p>
                        <p><strong>â™¾ï¸ æ°¸æ†çš„è‡ªç”±</strong> - é”åˆ°äº†é“å®¶ç†æƒ³ä¸­çš„è‡³é«˜å¢ƒç•Œ</p>
                    </div>

                    <div id="finalStats" class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸ“Š æœ€çµ‚æ•¸å€¼çµ±è¨ˆ</h4>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div>ğŸŒŠ å±±æ°´æ±‚é“: <span class="font-bold text-blue-600" id="finalSeekingDao">--/100</span></div>
                            <div>âš”ï¸ å¿ ç¾©ä¹‹å¿µ: <span class="font-bold text-red-600" id="finalLoyalty">--/100</span></div>
                            <div>ğŸ’ å­å¥³ä¹‹å¿ƒ: <span class="font-bold text-pink-600" id="finalFilialPiety">--/100</span></div>
                            <div>ğŸ’• æŸ”æƒ…ä¹‹æ„: <span class="font-bold text-purple-600" id="finalTenderness">--/100</span></div>
                            <div>âš¡ å¸«é–€ä¹‹è¨“: <span class="font-bold text-gray-600" id="finalMasterTraining">--/100</span></div>
                        </div>
                    </div>

                    <div class="text-center mt-8">
                        <p class="text-xl font-bold mb-4">ğŸ‰ æ­å–œå®ŒæˆéŠæˆ²ï¼</p>
                        <p class="text-lg mb-4">ä½ é«”é©—äº†è‡ªå·±å¾å®¶æ—å¥³å…’åˆ°è¶…è„«è–è€…çš„å®Œæ•´äººç”Ÿè»Œè·¡</p>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">
                            é€™æ˜¯åŸæ–‡çš„ç¶“å…¸çµå±€ï¼Œé«”ç¾äº†é“å®¶ã€Œè¶…è„«å¡µä¸–ã€è¿½æ±‚çœŸæˆ‘ã€çš„å“²å­¸æ€æƒ³
                        </p>
                    </div>
                `,
                choices: [
                    {
                        text: "ğŸ”„ é–‹å§‹æ–°çš„äººç”Ÿè»Œè·¡",
                        description: "ï¼ˆé«”é©—ä¸åŒçš„é¸æ“‡ï¼Œæ¢ç´¢å…¶ä»–çµå±€ï¼‰",
                        effects: {},
                        nextScene: 'restart_plus'
                    },
                    {
                        text: "ğŸ“– æŸ¥çœ‹çµå±€åœ–é‘‘",
                        description: "ï¼ˆçœ‹çœ‹é‚„æœ‰å“ªäº›çµå±€æ²’æœ‰è§£é–ï¼‰",
                        effects: {},
                        nextScene: 'show_endings'
                    }
                ]
            },

            // æ–°éŠæˆ²+ é–‹å§‹
            restart_plus: {
                title: "æ–°çš„è¼ªè¿´",
                content: `
                    <div class="text-center mb-6">
                        <div class="inline-block bg-gradient-to-r from-purple-500 to-blue-500 text-white px-6 py-3 rounded-full text-lg font-bold">
                            ğŸ”„ æ–°éŠæˆ²+ æ¨¡å¼
                        </div>
                    </div>

                    <p class="text-lg leading-relaxed mb-4">
                        æ™‚å…‰å€’æµï¼Œå›åˆ°é‚£å€‹æ±ºå®šå‘½é‹çš„åˆå¾Œ...
                    </p>

                    <p class="leading-relaxed mb-4">
                        ä½†é€™ä¸€æ¬¡ï¼Œä½ çš„éˆé­‚æ·±è™•ä¼¼ä¹ä¿ç•™è‘—å‰ä¸–çš„ä¸€äº›è¨˜æ†¶ç¢ç‰‡ã€‚ä½ èƒ½éš±ç´„æ„ŸçŸ¥åˆ°ä¸åŒé¸æ“‡å¯èƒ½å¸¶ä¾†çš„å¾Œæœ...
                    </p>

                    <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 p-4 my-6">
                        <h4 class="font-semibold mb-2">ğŸŒŸ æ–°éŠæˆ²+ ç‰¹è‰²</h4>
                        <ul class="text-sm space-y-1">
                            <li>â€¢ ä¿ç•™å·²è§£é–çš„çµå±€å’Œæˆå°±</li>
                            <li>â€¢ æŸäº›é—œéµé¸æ“‡æœƒé¡¯ç¤ºã€Œä¼¼æ›¾ç›¸è­˜ã€çš„æ„Ÿè¦º</li>
                            <li>â€¢ å¯ä»¥æ›´å®¹æ˜“åœ°æ¢ç´¢ä¹‹å‰æ²’æœ‰å˜—è©¦éçš„è·¯ç·š</li>
                            <li>â€¢ éš±è—é¸é …å¯èƒ½æœƒå‡ºç¾</li>
                        </ul>
                    </div>

                    <p class="leading-relaxed mb-6">
                        é€™ä¸€æ¬¡ï¼Œä½ æœƒé¸æ“‡æ€æ¨£çš„äººç”Ÿé“è·¯å‘¢ï¼Ÿ
                    </p>
                `,
                choices: [
                    {
                        text: "ğŸŒŸ é–‹å§‹å…¨æ–°çš„äººç”Ÿé«”é©—",
                        description: "ï¼ˆå¸¶è‘—å‰ä¸–çš„æ™ºæ…§ï¼Œæ¢ç´¢æ–°çš„å¯èƒ½ï¼‰",
                        effects: {},
                        nextScene: 'intro'
                    }
                ]
            }
        };

        // æ¸¸æˆå®ä¾‹
        let game = new GameState();
        let typingSkipRequested = false; // æ‰“å­—æ©Ÿè·³éè«‹æ±‚æ¨™èªŒ

        //ï¼ˆå·²æ”¹ç‚ºé€æ®µäººå·¥æ”¹å¯«ç¬¬äºŒäººç¨±ï¼Œç§»é™¤æ©Ÿæ¢°è½‰æ›ï¼‰

        // æ˜¾ç¤ºæ•…äº‹åœºæ™¯
        function showScene(sceneName) {
            const scene = storyScenes[sceneName];
            if (!scene) return;

            game.currentScene = sceneName;
            
            // é‡ç½®æ‰“å­—æ©Ÿè·³éæ¨™èªŒï¼Œç¢ºä¿æ–°å ´æ™¯è‡ªå‹•é–‹å§‹
            typingSkipRequested = false;
            
            // æ›´æ–°ç« èŠ‚ä¿¡æ¯
            if (scene.chapter && scene.chapter !== game.currentChapter) {
                game.updateChapter(scene.chapter, game.getChapterTitle(scene.chapter));
            }
            
                        // å…ˆéš±è—é¸é …
            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';
            choicesContainer.classList.add('hidden');

            // è¨­ç½®æ•…äº‹å†…å®¹åˆ°éš±è—ç‹€æ…‹ï¼Œç„¶å¾Œé–‹å§‹æ‰“å­—æ©Ÿæ•ˆæœ
            const storyContainer = document.getElementById('storyContent');
            storyContainer.innerHTML = scene.content;
            storyContainer.style.visibility = 'hidden'; // å…ˆå®Œå…¨éš±è—ï¼Œç›´åˆ°æ‰“å­—é–‹å§‹

            applyStoryTypewriter(() => {
                const handledInnerVoices = applyInnerVoiceTypewriterIfPresent(() => {
                    renderChoicesForScene(scene);
                });
                if (!handledInnerVoices) {
                    renderChoicesForScene(scene);
                }
            });

            // å¤„ç†ç»“å±€
            if (scene.isEnding && scene.endingId) {
                game.unlockEnding(scene.endingId, scene.title, scene.content.substring(0, 100) + '...');
                
                // æ›´æ–°æœ€ç»ˆæ•°å€¼æ˜¾ç¤º
                if (sceneName === 'ending_transcendence') {
                    setTimeout(() => {
                        updateFinalStats();
                    }, 100);
                }
            }

            // æ·»åŠ å­¦åˆ°çš„è¯æ±‡
            if (scene.learnedWords) {
                scene.learnedWords.forEach(word => {
                    game.addLearnedWord(word.word, word.meaning);
                });
            }

            // æ›´æ–°è¿›åº¦
            updateSceneProgress(sceneName);
        }

        // æ¸²æŸ“ç•¶å‰å ´æ™¯çš„é¸é …
        function renderChoicesForScene(scene) {
            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';
            if (scene.choices && scene.choices.length > 0) {
                scene.choices.forEach((choice, index) => {
                    const choiceElement = document.createElement('div');
                    
                    let borderColor = 'border-gray-200 dark:border-gray-600';
                    if (choice.effects) {
                        const maxEffect = Math.max(...Object.values(choice.effects).map(Math.abs));
                        if (maxEffect >= 25) {
                            borderColor = 'border-primary';
                        } else if (maxEffect >= 15) {
                            borderColor = 'border-blue-300 dark:border-blue-600';
                        }
                    }
                    
                    choiceElement.className = `choice-hover ${borderColor} rounded-lg p-4 cursor-pointer transition-all duration-300 hover:border-primary hover:shadow-lg`;
                    
                    const choiceText = choice.text;
                    const choiceDesc = choice.description;
                    choiceElement.innerHTML = `
                        <div class="flex items-start space-x-3">
                            <span class="text-2xl font-bold text-primary">${index + 1}</span>
                            <div class="flex-1">
                                <p class="font-semibold text-gray-800 dark:text-gray-200 mb-1">${choiceText}</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400 italic">${choiceDesc}</p>
                                ${choice.effects ? `<div class="mt-2 text-xs text-primary">${getEffectDescription(choice.effects)}</div>` : ''}
                            </div>
                        </div>
                    `;
                    
                    choiceElement.addEventListener('click', () => makeChoice(choice));
                    choicesContainer.appendChild(choiceElement);
                });
                
                // é¡¯ç¤ºé¸é …å®¹å™¨
                choicesContainer.classList.remove('hidden');
            }
        }

        // å…§å¿ƒè²éŸ³ï¼šç§»é™¤æ¨™é¡Œä¸¦é€æ¢æ‰“å­—é¡¯ç¤ºï¼Œå®Œæˆå¾Œå†é¡¯ç¤ºé¸é …
        function applyInnerVoiceTypewriterIfPresent(onComplete) {
            const storyRoot = document.getElementById('storyContent');
            if (!storyRoot) return false;

            const choicesContainer = document.getElementById('choicesContainer');

            // 1) å…ˆå°‹æ‰¾å¸¶æœ‰æ¨™é¡Œã€Œä½ å¿ƒåº•çš„è²éŸ³ã€çš„å€å¡Š
            const headers = Array.from(storyRoot.querySelectorAll('h4'))
                .filter(h => h.textContent && h.textContent.includes('ä½ å¿ƒåº•çš„è²éŸ³'));

            const voiceLines = [];
            if (headers.length > 0) {
                headers.forEach(h => {
                    const parent = h.parentElement;
                    if (parent) {
                        parent.removeChild(h); // å»æ‰æ¨™é¡Œ
                        const list = parent.querySelector('.space-y-2, .space-y-2.text-sm');
                        if (list) {
                            voiceLines.push(...Array.from(list.querySelectorAll('p')));
                        }
                    }
                });
            }

            // 2) è‹¥æ²’æœ‰æ¨™é¡Œæ¨£å¼ï¼Œå‰‡é€šç”¨æœå°‹ï¼šåŒ¹é…å«æœ‰è²éŸ³æ¨™ç±¤ + <em> çš„æ®µè½
            if (voiceLines.length === 0) {
                const labelKeywords = ['å­å¥³ä¹‹å¿ƒ', 'å¸«é–€ä¹‹è¨“', 'æŸ”æƒ…ä¹‹æ„', 'å¿ ç¾©ä¹‹å¿µ', 'å±±æ°´æ±‚é“'];
                const paragraphs = Array.from(storyRoot.querySelectorAll('p'));
                paragraphs.forEach(p => {
                    const spans = Array.from(p.querySelectorAll('span'));
                    const hasLabel = spans.some(s => labelKeywords.some(k => (s.textContent || '').includes(k)));
                    const hasEm = !!p.querySelector('em');
                    if (hasLabel && hasEm) {
                        voiceLines.push(p);
                    }
                });
            }

            if (voiceLines.length === 0) return false; // æœ¬å ´æ™¯æ²’æœ‰å¯æ‰“å­—çš„å…§å¿ƒè²éŸ³

            // éš±è—é¸é …ç›´åˆ°æ‰“å­—å®Œæˆ
            if (choicesContainer) {
                choicesContainer.classList.add('hidden');
            }

            // æ‰“å­—ä¸­ç‹€æ…‹ï¼Œæ”¯æ´è·³é
            document.body.dataset.typingActive = '1';

            // å‚™ä»½å…§å¿ƒè²éŸ³è¡Œçš„åŸå§‹å…§å®¹ï¼Œä¸¦éš±è—å…¶å¤–å±¤æ¨£å¼æ¡†ï¼ˆé¿å…ç©ºæ¡†å…ˆå‡ºç¾ï¼‰
            const originalVoiceContents = new Map();
            const voiceBoxByP = new Map();
            voiceLines.forEach(p => {
                // æå–é—œéµä¿¡æ¯
                const labelKeywords = ['å­å¥³ä¹‹å¿ƒ', 'å¸«é–€ä¹‹è¨“', 'æŸ”æƒ…ä¹‹æ„', 'å¿ ç¾©ä¹‹å¿µ', 'å±±æ°´æ±‚é“'];
                const labelSpan = Array.from(p.querySelectorAll('span')).find(s => labelKeywords.some(k => (s.textContent || '').includes(k))) || p.querySelector('span');
                const em = p.querySelector('em');
                const text = em ? em.textContent : (p.textContent || '');
                
                originalVoiceContents.set(p, { labelSpan: labelSpan ? labelSpan.cloneNode(true) : null, text, hasEm: !!em });
                p.innerHTML = ''; // ç«‹å³æ¸…ç©ºé¿å…é–ƒçˆ
                p.style.visibility = 'hidden';

                // æ‰¾åˆ°å¯èƒ½çš„å¤–å±¤æ¨£å¼æ¡†ï¼ˆèƒŒæ™¯/é‚Šæ¡†å®¹å™¨ï¼‰ï¼Œå…ˆéš±è—ï¼Œå¾…æ‰“å­—æ™‚å†é¡¯ç¤º
                let box = p.closest('div');
                while (box && box !== storyRoot) {
                    const className = box.className || '';
                    if (className.includes('border-l-4') || className.includes('bg-') || className.includes('bg-gradient')) {
                        voiceBoxByP.set(p, { box, originalDisplay: box.style.display });
                        box.style.display = 'none';
                        break;
                    }
                    box = box.parentElement;
                }
            });

            // æ‰“å­—å‡½å¼ï¼šä½¿ç”¨å‚™ä»½çš„å…§å®¹é€²è¡Œæ‰“å­—
            const typeLine = (p, done) => {
                // é¡¯ç¤ºå¤–å±¤æ¨£å¼æ¡†
                const boxInfo = voiceBoxByP.get(p);
                if (boxInfo && boxInfo.box) {
                    const restore = boxInfo.originalDisplay || boxInfo.box.dataset.voiceBoxOriginalDisplay || '';
                    boxInfo.box.style.display = restore;
                }

                p.style.visibility = 'visible';
                const backup = originalVoiceContents.get(p);
                if (!backup) { done(); return; }

                if (backup.labelSpan) {
                    p.appendChild(backup.labelSpan);
                    p.appendChild(document.createTextNode(' '));
                }
                const target = document.createElement(backup.hasEm ? 'em' : 'span');
                p.appendChild(target);

                // è‹¥å·²è«‹æ±‚è·³éï¼Œç›´æ¥å¡«å……
                if (typingSkipRequested) {
                    target.textContent = backup.text;
                    done();
                    return;
                }

                let i = 0;
                const speed = 60; // æ¯å­—æ¯«ç§’ï¼ˆä¾¿æ–¼é–±è®€ï¼‰
                const timer = setInterval(() => {
                    if (typingSkipRequested) {
                        clearInterval(timer);
                        target.textContent = backup.text;
                        done();
                        return;
                    }
                    target.textContent += backup.text.charAt(i);
                    i++;
                    if (i >= backup.text.length) {
                        clearInterval(timer);
                        setTimeout(done, 900); // æ¯è¡ŒçµæŸåœé “
                    }
                }, speed);
            };

            // å°‡å‰©é¤˜æ‰€æœ‰è¡Œç«‹å³å±•é–‹ï¼ˆç”¨æ–¼è·³éï¼‰
            const revealAllRemaining = (startIndex) => {
                for (let k = startIndex; k < voiceLines.length; k++) {
                    const p = voiceLines[k];
                    const backup = originalVoiceContents.get(p);
                    if (!backup) continue;
                    
                    const boxInfo = voiceBoxByP.get(p);
                    if (boxInfo && boxInfo.box) {
                        const restore = boxInfo.originalDisplay || boxInfo.box.dataset.voiceBoxOriginalDisplay || '';
                        boxInfo.box.style.display = restore;
                    }

                    p.style.visibility = 'visible';
                    p.innerHTML = '';
                    if (backup.labelSpan) {
                        p.appendChild(backup.labelSpan.cloneNode(true));
                        p.appendChild(document.createTextNode(' '));
                    }
                    const target = document.createElement(backup.hasEm ? 'em' : 'span');
                    target.textContent = backup.text;
                    p.appendChild(target);
                }
            };

            let idx = 0;
            const next = () => {
                if (idx >= voiceLines.length) {
                    delete document.body.dataset.typingActive;
                    if (typeof onComplete === 'function') onComplete();
                    if (choicesContainer) choicesContainer.classList.remove('hidden');
                    return;
                }
                if (typingSkipRequested) {
                    revealAllRemaining(idx);
                    delete document.body.dataset.typingActive;
                    if (typeof onComplete === 'function') onComplete();
                    if (choicesContainer) choicesContainer.classList.remove('hidden');
                    return;
                }
                typeLine(voiceLines[idx], () => {
                    idx++;
                    next();
                });
            };

            setTimeout(next, 150);
            return true;
        }

        // åˆ¤æ–·æ®µè½æ˜¯å¦ç‚ºã€Œå…§å¿ƒè²éŸ³ã€å°ˆç”¨ï¼ˆå«æ¨™ç±¤ï¼‹emï¼‰
        function isVoiceParagraph(p) {
            const labelKeywords = ['å­å¥³ä¹‹å¿ƒ', 'å¸«é–€ä¹‹è¨“', 'æŸ”æƒ…ä¹‹æ„', 'å¿ ç¾©ä¹‹å¿µ', 'å±±æ°´æ±‚é“'];
            const spans = Array.from(p.querySelectorAll('span'));
            const hasLabel = spans.some(s => labelKeywords.some(k => (s.textContent || '').includes(k)));
            return hasLabel && !!p.querySelector('em');
        }

        // åŠ‡æƒ…æ–‡å­—æ‰“å­—æ©Ÿï¼ˆå°ä¸€èˆ¬æ®µè½èˆ‡å¼•æ–‡ï¼Œä¿ç•™åŸæœ‰æ¨™ç±¤çµæ§‹ï¼‰
        function applyStoryTypewriter(onComplete) {
            const storyRoot = document.getElementById('storyContent');
            if (!storyRoot) { if (typeof onComplete === 'function') onComplete(); return; }

            // æ‰¾åˆ°æ‰€æœ‰å…§å¿ƒè²éŸ³æ®µè½ï¼ˆpï¼‰
            const allParagraphs = Array.from(storyRoot.querySelectorAll('p'));
            const voiceParagraphs = allParagraphs.filter(isVoiceParagraph);

            // éœ€è¦æ‰“å­—çš„æ™®é€šç¯€é»ï¼ˆæ’é™¤å…§å¿ƒè²éŸ³ï¼‰ï¼›åƒ…è™•ç† p å’Œ blockquoteï¼Œé¿å…èª¤è™•ç†åŒ…å«å…§å¿ƒè²éŸ³çš„å®¹å™¨ div
            const nodes = Array.from(storyRoot.querySelectorAll('p, blockquote'))
                .filter(el => !isVoiceParagraph(el));

            if (nodes.length === 0) { if (typeof onComplete === 'function') onComplete(); return; }

            document.body.dataset.typingActive = '1';
            typingSkipRequested = false;

            // å…ˆéš±è—æ‰€æœ‰æ™®é€šç¯€é»èˆ‡å…§å¿ƒè²éŸ³æ®µè½ï¼Œé¿å…åœ¨å®¹å™¨é¡¯ç¤ºæ™‚é–ƒç¾
            nodes.forEach(node => { node.style.visibility = 'hidden'; });
            voiceParagraphs.forEach(p => {
                p.style.visibility = 'hidden';
                // åŒæ­¥éš±è—å…§å¿ƒè²éŸ³çš„å¤–å±¤æ¨£å¼å®¹å™¨ï¼Œä¸¦ä¿å­˜åŸdisplayä¾›ç¨å¾Œæ¢å¾©
                let box = p.closest('div');
                while (box && box !== storyRoot) {
                    const className = box.className || '';
                    if (className.includes('border-l-4') || className.includes('bg-') || className.includes('bg-gradient')) {
                        if (!box.dataset.voiceBoxOriginalDisplay) {
                            box.dataset.voiceBoxOriginalDisplay = box.style.display || '';
                        }
                        box.style.display = 'none';
                        break;
                    }
                    box = box.parentElement;
                }
            });

            // æœ€å¾Œå†é¡¯ç¤ºå®¹å™¨
            storyRoot.style.visibility = 'visible';

            // é€šç”¨éè¿´æ‰“å­—ï¼šé€ç¯€é»ï¼ˆæ–‡å­—/å…ƒç´ ï¼‰è¼¸å‡º
            function typeNodeChildrenSequential(childNodes, parent, done) {
                let i = 0;
                const next = () => {
                    if (i >= childNodes.length) { done(); return; }
                    const child = childNodes[i++];
                    if (child.nodeType === Node.TEXT_NODE) {
                        const text = child.textContent || '';
                        const span = document.createElement('span');
                        parent.appendChild(span);
                        const speed = typingSkipRequested ? 0 : 40;
                        if (speed === 0) {
                            span.textContent = text;
                            next();
                        } else {
                            let j = 0;
                            const timer = setInterval(() => {
                                if (typingSkipRequested) {
                                    clearInterval(timer);
                                    span.textContent = text;
                                    next();
                                    return;
                                }
                                span.textContent += text.charAt(j++);
                                if (j >= text.length) {
                                    clearInterval(timer);
                                    next();
                                }
                            }, speed);
                        }
                    } else if (child.nodeType === Node.ELEMENT_NODE) {
                        const clone = child.cloneNode(false);
                        parent.appendChild(clone);
                        typeNodeChildrenSequential(Array.from(child.childNodes), clone, next);
                    } else {
                        next();
                    }
                };
                next();
            }

            // å‚™ä»½æ‰€æœ‰ç¯€é»çš„åŸå§‹å…§å®¹ï¼Œç„¶å¾Œæ¸…ç©ºï¼ˆåƒ…æ™®é€šç¯€é»ï¼‰
            const originalContents = new Map();
            nodes.forEach(el => {
                originalContents.set(el, Array.from(el.childNodes));
                el.innerHTML = ''; // ç«‹å³æ¸…ç©ºï¼Œé¿å…é–ƒçˆ
            });

            // é †åºè™•ç†æ¯å€‹æ®µè½/å¼•æ–‡
            let idx = 0;
            const renderNext = () => {
                if (idx >= nodes.length) {
                    delete document.body.dataset.typingActive;
                    if (typeof onComplete === 'function') onComplete();
                    return;
                }
                const el = nodes[idx++];
                const originalChildren = originalContents.get(el) || [];
                el.style.visibility = 'visible';
                typeNodeChildrenSequential(originalChildren, el, () => {
                    const pause = typingSkipRequested ? 0 : 200; // æ®µè½é–“çŸ­æš«åœé “
                    setTimeout(renderNext, pause);
                });
            };

            setTimeout(renderNext, 150);
        }

        // æ›´æ–°åœºæ™¯è¿›åº¦
        function updateSceneProgress(sceneName) {
            const progressMap = {
                // ç¬¬ä¸€ç« 
                'intro': { chapter: 10, global: 5 },
                'curiosity': { chapter: 25, global: 8 },
                'hideByFather': { chapter: 25, global: 8 },
                'braveFace': { chapter: 25, global: 8 },
                'deepThinking': { chapter: 40, global: 12 },
                'worryForFather': { chapter: 40, global: 12 },
                'finalChoice': { chapter: 75, global: 15 },
                'chapter1_stayHome': { chapter: 100, global: 20 },
                'chapter1_postpone': { chapter: 100, global: 20 },
                
                // ç¬¬äºŒç« 
                'chapter2_start': { chapter: 15, global: 25 },
                'chapter2_alternative': { chapter: 15, global: 25 },
                'chapter2_thinking': { chapter: 15, global: 25 },
                'chapter2_homesick': { chapter: 30, global: 30 },
                'chapter2_adapt': { chapter: 30, global: 30 },
                'chapter2_observe': { chapter: 30, global: 30 },
                'chapter2_training1': { chapter: 45, global: 33 },
                'chapter2_write_letter': { chapter: 35, global: 31 },
                'chapter2_moral_doubt': { chapter: 45, global: 33 },
                'chapter2_reluctant_killer': { chapter: 45, global: 33 },
                'chapter2_regret': { chapter: 35, global: 31 },
                'chapter2_family_focused': { chapter: 35, global: 31 },
                'chapter2_self_study': { chapter: 40, global: 32 },
                'chapter2_compromise': { chapter: 25, global: 27 },
                'chapter2_conditional': { chapter: 25, global: 27 },
                'chapter2_still_confused': { chapter: 20, global: 26 },
                'chapter2_hidden_thoughts': { chapter: 40, global: 32 },
                'chapter2_connect_sisters': { chapter: 40, global: 32 },
                'chapter2_surrender_to_master': { chapter: 40, global: 32 },
                'chapter2_first_mission': { chapter: 60, global: 35 },
                'chapter2_hesitate': { chapter: 75, global: 38 },
                'chapter2_cold_killer': { chapter: 80, global: 38 },
                'chapter2_hardened_heart': { chapter: 90, global: 39 },
                'chapter2_hidden_resistance': { chapter: 90, global: 39 },
                'chapter2_moral_awakening': { chapter: 100, global: 40 },
                
                // ç¬¬ä¸‰ç« 
                'chapter3_return_home': { chapter: 20, global: 45 },
                'chapter3_tell_truth': { chapter: 50, global: 50 },
                'chapter3_hide_truth': { chapter: 50, global: 50 },
                'chapter3_marriage_choice': { chapter: 80, global: 55 },
                'chapter3_true_love': { chapter: 100, global: 60 },
                'chapter3_partial_truth': { chapter: 55, global: 50 },
                'chapter3_repair_relationship': { chapter: 60, global: 52 },
                'chapter3_accept_distance': { chapter: 60, global: 52 },
                'chapter3_night_activities': { chapter: 65, global: 53 },
                'chapter3_pretend_normal': { chapter: 65, global: 53 },
                'chapter3_secret_training': { chapter: 65, global: 53 },
                'chapter3_consider_truth': { chapter: 55, global: 50 },
                'chapter3_marriage_cover': { chapter: 100, global: 60 },
                'chapter3_complex_marriage': { chapter: 90, global: 58 },
                
                // ç¬¬å››ç« 
                'chapter4_start': { chapter: 25, global: 65 },
                'chapter4_loyal_service': { chapter: 100, global: 70 },
                'chapter4_family_first': { chapter: 80, global: 68 },
                'chapter4_cautious_approach': { chapter: 60, global: 67 },
                
                // ç¬¬äº”ç« 
                'chapter5_mission': { chapter: 20, global: 75 },
                'chapter5_investigate': { chapter: 50, global: 78 },
                'chapter5_impressed': { chapter: 80, global: 82 },
                'chapter5_switch_loyalty': { chapter: 100, global: 85 },
                'chapter5_execute_mission': { chapter: 40, global: 77 },
                'chapter5_consider_refusal': { chapter: 35, global: 76 },
                'chapter5_loyalty_question': { chapter: 65, global: 80 },
                'chapter5_neutrality': { chapter: 85, global: 84 },
                
                // ç¬¬å…­ç« 
                'chapter6_prepare_battle': { chapter: 30, global: 88 },
                'chapter6_battle_jjing': { chapter: 60, global: 92 },
                'chapter6_battle_kongkong': { chapter: 100, global: 95 },
                'chapter6_direct_battle': { chapter: 80, global: 94 },
                
                // ç¬¬ä¸ƒç« 
                'chapter7_enlightenment': { chapter: 50, global: 98 },
                'chapter7_deeper_loyalty': { chapter: 70, global: 98 },
                'chapter7_final_choice': { chapter: 90, global: 99 },
                'ending_transcendence': { chapter: 100, global: 100 }
            };
            
            const progress = progressMap[sceneName];
            if (progress) {
                game.updateProgress(progress.chapter, progress.global);
            }
        }

        // å¤„ç†é€‰æ‹©
        function makeChoice(choice) {
            // åº”ç”¨æ•ˆæœ
            if (choice.effects) {
                Object.keys(choice.effects).forEach(voiceName => {
                    game.updateVoice(voiceName, choice.effects[voiceName]);
                });
            }

            // æ·»åŠ å­¦åˆ°çš„è¯æ±‡
            if (choice.learnedWords) {
                choice.learnedWords.forEach(word => {
                    game.addLearnedWord(word.word, word.meaning);
                });
            }

            // æ˜¾ç¤ºå£°éŸ³å¯¹è¯
            if (choice.effects && Object.keys(choice.effects).length > 0) {
                showVoiceReactions(choice.effects);
            }

            // å»¶è¿Ÿè·³è½¬åˆ°ä¸‹ä¸€ä¸ªåœºæ™¯ï¼ˆç¸®çŸ­ç­‰å¾…æ™‚é–“ï¼Œæå‡æµæš¢åº¦ï¼‰
            setTimeout(() => {
                if (choice.nextScene === 'restart') {
                    restartGame();
                } else if (choice.nextScene === 'restart_plus') {
                    restartGamePlus();
                } else if (choice.nextScene === 'show_endings') {
                    showEndingsModal();
                } else {
                    showScene(choice.nextScene);
                }
            }, choice.effects ? 300 : 150);
        }

        // æ˜¾ç¤ºå£°éŸ³ååº”
        function showVoiceReactions(effects) {
            const dialogue = document.getElementById('voiceDialogue');
            const messages = document.getElementById('voiceMessages');
            
            dialogue.classList.remove('hidden');
            messages.innerHTML = '';

            const voiceNames = {
                filialPiety: { icon: 'ğŸ’', name: 'å­å¥³ä¹‹å¿ƒ', color: 'text-pink-600' },
                masterTraining: { icon: 'âš¡', name: 'å¸«é–€ä¹‹è¨“', color: 'text-gray-600' },
                tenderness: { icon: 'ğŸ’•', name: 'æŸ”æƒ…ä¹‹æ„', color: 'text-purple-600' },
                loyalty: { icon: 'âš”ï¸', name: 'å¿ ç¾©ä¹‹å¿µ', color: 'text-red-600' },
                seekingDao: { icon: 'ğŸŒŠ', name: 'å±±æ°´æ±‚é“', color: 'text-blue-600' }
            };

            Object.keys(effects).forEach(voiceName => {
                const change = effects[voiceName];
                const voice = voiceNames[voiceName];
                if (voice && Math.abs(change) >= 10) {
                    const message = document.createElement('div');
                    message.className = `p-3 rounded-lg ${change > 0 ? 'bg-green-50 dark:bg-green-900/20' : 'bg-red-50 dark:bg-red-900/20'}`;
                    message.innerHTML = `
                        <span class="font-semibold ${voice.color}">${voice.icon} ${voice.name}:</span>
                        <span class="ml-2 italic text-sm">${getVoiceReaction(voiceName, change)}</span>
                    `;
                    messages.appendChild(message);
                }
            });

            // ç¸®çŸ­æç¤ºé¡¯ç¤ºæ™‚é•·ï¼Œé¿å…é®æ“‹æ–°å ´æ™¯
            setTimeout(() => {
                dialogue.classList.add('hidden');
            }, 1500);
        }

        // è·å–å£°éŸ³ååº”æ–‡æœ¬
        function getVoiceReaction(voiceName, change) {
            const reactions = {
                filialPiety: {
                    positive: ["å®¶äººæ°¸é æ˜¯æœ€é‡è¦çš„...", "è¡€æ¿ƒæ–¼æ°´çš„è¦ªæƒ…è®“æˆ‘å®‰å¿ƒ...", "æˆ‘è¦åšå€‹å¥½å¥³å…’...", "å®¶æ—çš„æ¦®è­½ä¸èƒ½ä¸Ÿ...", "çˆ¶è¦ªçš„æœŸæœ›å°±æ˜¯æˆ‘çš„ä½¿å‘½..."],
                    negative: ["é›¢é–‹å®¶æ—è®“æˆ‘å¿ƒç—›...", "é€™æ¨£åšå°å¾—èµ·çˆ¶è¦ªå—ï¼Ÿ", "å®¶æ—çš„æœŸæœ›åœ¨å¿ƒä¸­è¿´éŸ¿...", "æˆ‘èƒŒå›äº†çˆ¶è¦ªçš„ä¿¡ä»»...", "å®¶äººæœƒæ€éº¼çœ‹æˆ‘ï¼Ÿ"]
                },
                masterTraining: {
                    positive: ["æœå¾æ˜¯ç”Ÿå­˜çš„ç¬¬ä¸€æ³•å‰‡...", "å¸«çˆ¶çš„æ•™å°æ·±æ·±å°åœ¨å¿ƒä¸­...", "ç´€å¾‹è®“æˆ‘è®Šå¾—æ›´å¼·...", "æ„Ÿæƒ…åªæœƒè®“åˆ€é‹’é²éˆ...", "æˆ‘å°±æ˜¯å¸«çˆ¶æ‰“é€ çš„æ­¦å™¨..."],
                    negative: ["è³ªç–‘æ¬Šå¨çš„æƒ³æ³•åœ¨èŒèŠ½...", "ä¹Ÿè¨±ç›²å¾ä¸æ˜¯æ­£ç¢ºçš„...", "æˆ‘é–‹å§‹æœ‰è‡ªå·±çš„æƒ³æ³•...", "å¸«çˆ¶çš„è©±çœŸçš„éƒ½å°å—ï¼Ÿ", "æˆ‘ä¸åªæ˜¯ä¸€ä»¶æ­¦å™¨..."]
                },
                tenderness: {
                    positive: ["æº«æš–çš„æƒ…æ„Ÿå……æ»¿å¿ƒæˆ¿...", "æ„›è®“ä¸–ç•Œè®Šå¾—ç¾å¥½...", "æˆ‘æƒ³è¦ä¿è­·æ‰€æ„›çš„äºº...", "æº«æŸ”ä¹Ÿæ˜¯ä¸€ç¨®åŠ›é‡...", "æ„›æƒ…è®“æˆ‘æ„Ÿåˆ°å®Œæ•´..."],
                    negative: ["å¿ƒè®Šå¾—è¶Šä¾†è¶Šå†·ç¡¬...", "æƒ…æ„Ÿæœƒè®“æˆ‘è®Šå¾—è„†å¼±å—ï¼Ÿ", "æˆ‘åœ¨é é›¢æº«æš–...", "æ®ºæˆ®è®“æˆ‘å¤±å»äº†ä»€éº¼...", "æˆ‘é‚„èƒ½æ„Ÿå—åˆ°æ„›å—ï¼Ÿ"]
                },
                loyalty: {
                    positive: ["å¿ ç¾©æ˜¯æˆ‘çš„ä¿¡å¿µ...", "æˆ‘è¦å°å¾—èµ·åˆ¥äººçš„ä¿¡ä»»...", "è²¬ä»»é‡æ–¼æ³°å±±...", "å›è‡£ä¹‹ç¾©ä¸å¯é•...", "ç‚ºä¸»å›èµ´æ¹¯è¹ˆç«åœ¨æ‰€ä¸è¾­..."],
                    negative: ["å¿ èª çš„æ„ç¾©é–‹å§‹æ¨¡ç³Š...", "ç‚ºä»€éº¼è¦ç„¡æ¢ä»¶æœå¾ï¼Ÿ", "æˆ‘çš„å¿ å¿ƒåœ¨å‹•æ–...", "çœŸæ­£çš„å¿ èª æ˜¯ä»€éº¼ï¼Ÿ", "å„è¦ªå…¶ä¸»çœŸçš„å°å—ï¼Ÿ"]
                },
                seekingDao: {
                    positive: ["æ›´å»£é—Šçš„ä¸–ç•Œåœ¨å¬å–šæˆ‘...", "çœŸç†å°±åœ¨å‰æ–¹...", "è¶…è„«ä¸–ä¿—çš„æ™ºæ…§åœ¨è¦ºé†’...", "å±±ä¸­æœ‰çœŸæ„...", "è‡ªç”±çš„éˆé­‚ä¸å—æŸç¸›..."],
                    negative: ["ä¸–ä¿—çš„ç‰½çµ†è¶Šä¾†è¶Šé‡...", "ä¹Ÿè¨±å¹³å‡¡ä¹Ÿæ˜¯ä¸€ç¨®å¹¸ç¦...", "æˆ‘åœ¨é é›¢çœŸæ­£çš„è‡ªç”±...", "åŸ·è‘—è®“æˆ‘è¿·å¤±æ–¹å‘...", "è¶…è„«ç‚ºä½•å¦‚æ­¤å›°é›£ï¼Ÿ"]
                }
            };

            const voiceReactions = reactions[voiceName];
            if (!voiceReactions) return "";
            
            const reactionArray = change > 0 ? voiceReactions.positive : voiceReactions.negative;
            return reactionArray[Math.floor(Math.random() * reactionArray.length)];
        }

        // è·å–æ•ˆæœæè¿°
        function getEffectDescription(effects) {
            const descriptions = [];
            Object.keys(effects).forEach(voiceName => {
                const change = effects[voiceName];
                if (Math.abs(change) >= 5) {
                    const voiceNames = {
                        filialPiety: 'å­å¥³ä¹‹å¿ƒ',
                        masterTraining: 'å¸«é–€ä¹‹è¨“',
                        tenderness: 'æŸ”æƒ…ä¹‹æ„',
                        loyalty: 'å¿ ç¾©ä¹‹å¿µ',
                        seekingDao: 'å±±æ°´æ±‚é“'
                    };
                    descriptions.push(`${voiceNames[voiceName]} ${change > 0 ? '+' : ''}${change}`);
                }
            });
            return descriptions.join(', ');
        }

        // é‡å¯æ¸¸æˆ
        function restartGame() {
            game = new GameState();
            game.updateVoiceDisplay();
            game.updateLearnedWordsDisplay();
            game.updateAchievementsDisplay();
            game.updateEndingsDisplay();
            showScene('intro');
        }

        // æ–°æ¸¸æˆ+ é‡å¯
        function restartGamePlus() {
            const oldEndings = [...game.unlockedEndings];
            const oldAchievements = [...game.achievements];
            
            game = new GameState();
            game.unlockedEndings = oldEndings;
            game.achievements = oldAchievements;
            
            game.updateVoiceDisplay();
            game.updateLearnedWordsDisplay();
            game.updateAchievementsDisplay();
            game.updateEndingsDisplay();
            showScene('intro');
        }

        // æ˜¾ç¤ºç»“å±€å›¾é‰´æ¨¡æ€æ¡†
        function showEndingsModal() {
            const modal = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            title.textContent = 'çµå±€åœ–é‘‘';
            
            const allEndings = [
                { id: 'transcendence_sage', name: 'è¶…è„«è–è€…', description: 'é”åˆ°é“å®¶ç†æƒ³å¢ƒç•Œçš„åŸæ–‡çµå±€' },
                { id: 'family_warmth', name: 'æº«æš–çš„å®¶', description: 'é¸æ“‡å®¶åº­çš„ç¬¬ä¸€ç« çµå±€' },
                { id: 'wise_delay', name: 'æ™ºæ…§çš„å»¶é²', description: 'æ·±æ€ç†Ÿæ…®çš„ç¬¬ä¸€ç« çµå±€' },
                { id: 'loyal_minister', name: 'ä¸€ä»£åè‡£', description: 'å¿ ç¾©ä¹‹å¿µä¸»å°çš„çµå±€' },
                { id: 'happy_family', name: 'å¹³å‡¡å¹¸ç¦', description: 'æŸ”æƒ…ä¹‹æ„ä¸»å°çš„çµå±€' },
                { id: 'clan_revival', name: 'è¶æ°ä¸­èˆˆ', description: 'å­å¥³ä¹‹å¿ƒä¸»å°çš„çµå±€' },
                { id: 'cold_weapon', name: 'ç„¡æƒ…æ®ºå™¨', description: 'å¸«é–€ä¹‹è¨“ä¸»å°çš„æ‚²åŠ‡çµå±€' },
                // æ›´å¤šçµå±€...
            ];
            
            const unlockedIds = game.unlockedEndings.map(e => e.id);
            
            const endingsHtml = `
                <div class="space-y-4">
                    <p class="text-gray-600 dark:text-gray-300 mb-4">
                        å·²è§£é– ${game.unlockedEndings.length}/${allEndings.length} å€‹çµå±€
                    </p>
                    <div class="grid gap-3">
                        ${allEndings.map(ending => {
                            const unlocked = unlockedIds.includes(ending.id);
                            return `
                                <div class="border rounded-lg p-3 ${unlocked ? 'border-green-300 bg-green-50 dark:bg-green-900/20' : 'border-gray-300 bg-gray-50 dark:bg-gray-700'}">
                                    <div class="flex items-center justify-between">
                                        <h4 class="font-semibold ${unlocked ? 'text-green-800 dark:text-green-200' : 'text-gray-500'}">${unlocked ? ending.name : '???'}</h4>
                                        <span class="text-sm ${unlocked ? 'text-green-600' : 'text-gray-400'}">${unlocked ? 'âœ“ å·²è§£é–' : 'ğŸ”’ æœªè§£é–'}</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">${unlocked ? ending.description : 'å®Œæˆç‰¹å®šé¸æ“‡è·¯ç·šå¾Œè§£é–'}</p>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div class="mt-6 pt-4 border-t">
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            ğŸ’¡ æç¤ºï¼šå˜—è©¦ä¸åŒçš„é¸æ“‡çµ„åˆå¯ä»¥è§£é–æ›´å¤šçµå±€
                        </p>
                    </div>
                </div>
            `;
            content.innerHTML = endingsHtml;
            
            modal.classList.remove('hidden');
        }

        // æ˜¾ç¤ºå¸®åŠ©æ¨¡æ€æ¡†
        function showHelpModal() {
            const modal = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            title.textContent = 'éŠæˆ²èªªæ˜';
            const helpHtml = `
                <div class="space-y-4 text-gray-600 dark:text-gray-300">
                    <div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">ğŸ® éŠæˆ²ç©æ³•</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>é€šéé¸æ“‡ä¸åŒçš„é¸é …ä¾†å½±éŸ¿ä½ çš„æ€§æ ¼ç™¼å±•</li>
                            <li>æ¯å€‹é¸æ“‡æœƒå½±éŸ¿äº”ç¨®å…§å¿ƒè²éŸ³çš„å¼·å¼±</li>
                            <li>ä¸åŒçš„è²éŸ³çµ„åˆæœƒå°è‡´ä¸åŒçš„çµå±€</li>
                            <li>ä¸€å…±æœ‰18ç¨®ä¸åŒçš„çµå±€ç­‰ä½ æ¢ç´¢</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">ğŸ’­ æ€æƒ³å…§é–£ç³»çµ±</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>ğŸ’ å­å¥³ä¹‹å¿ƒï¼šå®¶æ—è²¬ä»»æ„Ÿå’Œå‚³çµ±å¥³æ€§ç¾å¾·</li>
                            <li>âš¡ å¸«é–€ä¹‹è¨“ï¼šå¸«çˆ¶çš„æ§åˆ¶å’Œå†·é…·çš„æ®ºæ‰‹è¨“ç·´</li>
                            <li>ğŸ’• æŸ”æƒ…ä¹‹æ„ï¼šå°æ„›æƒ…å’Œè¦ªå¯†é—œä¿‚çš„æ¸´æœ›</li>
                            <li>âš”ï¸ å¿ ç¾©ä¹‹å¿µï¼šå°ä¸»å›å’Œç¾©ç†çš„å …æŒ</li>
                            <li>ğŸŒŠ å±±æ°´æ±‚é“ï¼šå°è¶…è„«ä¸–ä¿—çš„ç²¾ç¥è¿½æ±‚</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">ğŸ“š å­¸ç¿’åŠŸèƒ½</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>é¼ æ¨™æ‡¸åœåœ¨è—è‰²è©å½™ä¸Šå¯æŸ¥çœ‹é‡‹ç¾©</li>
                            <li>æ¯å€‹ç« ç¯€æœƒå­¸ç¿’åˆ°ç›¸é—œçš„æ–‡è¨€æ–‡è©å½™</li>
                            <li>å®Œæˆç‰¹å®šæ¢ä»¶å¯ä»¥ç²å¾—æˆå°±çå‹µ</li>
                            <li>è©å½™ç­†è¨˜æœƒè¨˜éŒ„æ‰€æœ‰å­¸éçš„è©å½™</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">ğŸ† é€²éšåŠŸèƒ½</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>å¯ä»¥å„²å­˜å’Œè¼‰å…¥éŠæˆ²é€²åº¦</li>
                            <li>æ–°éŠæˆ²+æ¨¡å¼ä¿ç•™å·²è§£é–å…§å®¹</li>
                            <li>çµå±€åœ–é‘‘è¿½è¹¤è§£é–é€²åº¦</li>
                            <li>æˆå°±ç³»çµ±è¨˜éŒ„éŠæˆ²é‡Œç¨‹ç¢‘</li>
                        </ul>
                    </div>
                </div>
            `;
            content.innerHTML = helpHtml;
            
            modal.classList.remove('hidden');
        }

        // äº‹ä»¶ç›£è½å™¨
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–éŠæˆ²
            game.updateVoiceDisplay();
            showScene('intro');
            
            // é»æ“Šç©ºç™½è™•è·³éæ‰€æœ‰æ‰“å­—æ©Ÿå‹•ç•«
            document.addEventListener('click', (e) => {
                // åƒ…ç•¶é»æ“ŠéæŒ‰éˆ•/éé¸é …/éé€£çµå€åŸŸæ™‚ç”Ÿæ•ˆ
                const target = e.target;
                const isInteractive = target.closest('button, a, #choicesContainer, .choice-hover');
                if (!isInteractive) {
                    if (document.body.dataset.typingActive === '1') {
                        typingSkipRequested = true;
                    }
                }
            });
            
            // æŒ‰éˆ•äº‹ä»¶
            document.getElementById('saveGameBtn').addEventListener('click', () => game.saveGame());
            document.getElementById('loadGameBtn').addEventListener('click', () => {
                if (game.loadGame()) {
                    showScene(game.currentScene);
                } else {
                    game.createFloatingMessage('âŒ æ²’æœ‰æ‰¾åˆ°å­˜æª”');
                }
            });
            document.getElementById('restartBtn').addEventListener('click', () => {
                if (confirm('ç¢ºå®šè¦é‡æ–°é–‹å§‹éŠæˆ²å—ï¼Ÿç•¶å‰é€²åº¦å°‡æœƒä¸Ÿå¤±ã€‚')) {
                    restartGame();
                }
            });
            document.getElementById('endingsBtn').addEventListener('click', showEndingsModal);
            document.getElementById('helpBtn').addEventListener('click', showHelpModal);
            
            // æ¨¡æ…‹æ¡†é—œé–‰
            document.getElementById('closeModal').addEventListener('click', () => {
                document.getElementById('modalOverlay').classList.add('hidden');
            });
            
            document.getElementById('modalOverlay').addEventListener('click', (e) => {
                if (e.target === document.getElementById('modalOverlay')) {
                    document.getElementById('modalOverlay').classList.add('hidden');
                }
            });
        });

        // æ›´æ–°æœ€çµ‚æ•¸å€¼é¡¯ç¤º
        function updateFinalStats() {
            const finalSeekingDao = document.getElementById('finalSeekingDao');
            const finalLoyalty = document.getElementById('finalLoyalty');
            const finalFilialPiety = document.getElementById('finalFilialPiety');
            const finalTenderness = document.getElementById('finalTenderness');
            const finalMasterTraining = document.getElementById('finalMasterTraining');
            
            if (finalSeekingDao) finalSeekingDao.textContent = `${game.voices.seekingDao}/100`;
            if (finalLoyalty) finalLoyalty.textContent = `${game.voices.loyalty}/100`;
            if (finalFilialPiety) finalFilialPiety.textContent = `${game.voices.filialPiety}/100`;
            if (finalTenderness) finalTenderness.textContent = `${game.voices.tenderness}/100`;
            if (finalMasterTraining) finalMasterTraining.textContent = `${game.voices.masterTraining}/100`;
        }

        // è‡ªå®šç¾©ç¢ºèªå°è©±æ¡†ï¼ˆæ›¿ä»£è¢«ç¦ç”¨çš„confirmï¼‰
        function showConfirmDialog(message, onConfirm) {
            const modal = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            title.textContent = 'ç¢ºèª';
            content.innerHTML = `
                <div class="text-center">
                    <p class="text-gray-700 dark:text-gray-300 mb-6">${message}</p>
                    <div class="flex justify-center space-x-4">
                        <button id="cancelBtn" class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">å–æ¶ˆ</button>
                        <button id="confirmBtn" class="px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">ç¢ºèª</button>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            
            document.getElementById('cancelBtn').onclick = () => {
                modal.classList.add('hidden');
            };
            
            document.getElementById('confirmBtn').onclick = () => {
                modal.classList.add('hidden');
                onConfirm();
            };
        }
    </script>
</body>
</html>