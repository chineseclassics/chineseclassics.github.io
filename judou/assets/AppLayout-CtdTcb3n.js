import{d as U,u as T,c,r as x,w as q,o as W,a,b as e,e as r,n as v,f as d,t as l,g as M,h as J,F as y,i as g,j as K,k,l as A,m as V,p as Q,q as t,_ as z,s as B}from"./index-C7hxU-Ak.js";import{u as X}from"./userStatsStore-BRfD0V_O.js";import{u as Y}from"./assignmentStore-BI2xaJLY.js";const Z={class:"sidebar-shell edamame-glass"},ee=["src","alt"],se={key:1},te={key:2,class:"level-badge"},ae={class:"brand-info"},ne={class:"brand-title"},oe={key:0,class:"brand-stats"},le={class:"beans-display"},ie={class:"level-display"},re={key:0,class:"streak-display"},ce={key:1,class:"brand-subtitle"},de={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ue={key:0,class:"user-menu-dropdown"},pe={class:"sidebar-section"},_e={key:0,class:"item-icon"},ve={class:"item-title"},he={key:0,class:"badge"},me={key:1,class:"edamame-sidebar-item disabled"},be={key:0,class:"item-icon"},fe={class:"item-title"},ye={key:1,class:"sidebar-section"},ge={class:"item-title"},ke={key:1,class:"edamame-sidebar-item disabled"},Ae={class:"item-title"},Se={key:2,class:"sidebar-section super-admin-section"},Ce={class:"item-title"},we={key:1,class:"edamame-sidebar-item disabled"},Ne={class:"item-title"},xe=U({__name:"SidebarMenu",setup(L){const n=T(),p=X(),u=Y(),P=K(),$=[{label:"é¦–é ",icon:"ðŸ ",to:{name:"home"}},{label:"å¥è±†",icon:"ðŸ«˜",to:{name:"practice"},description:"ç·´ç¿’"},{label:"å“è±†",icon:"ðŸ“–",to:{name:"reading-list"},description:"é–±è®€"},{label:"é¬¥è±†",icon:"âš”ï¸",to:{name:"arena"},description:"å°æˆ°"},{label:"è±†è·¡",icon:"ðŸ‘£",to:{name:"history"},description:"æ­·å²"},{label:"è±†èŽ¢",icon:"ðŸ«›",to:{name:"my-classes"},description:"ç­ç´š"},{label:"è‡ªè¨‚ç·´ç¿’",icon:"âœï¸",to:{name:"my-texts"},teacherOnly:!0}],j=[{label:"ç·´ç¿’æ–‡åº«",to:{name:"admin-texts"}},{label:"é–±è®€æ–‡åº«",to:{name:"admin-reading"}}],F=[{label:"ç”¨æˆ¶ç®¡ç†",to:{name:"admin-users"}}],H=c(()=>$.filter(i=>!i.teacherOnly||n.isTeacher)),S=c(()=>!n.isAuthenticated||!n.isAdmin?[]:j),C=c(()=>!n.isAuthenticated||!n.isSuperAdmin?[]:F),D=Q(),h=i=>i.to?D.name===i.to.name:!1,m=c(()=>n.isAuthenticated?n.displayName||"è±†å‹":"è¨ªå®¢"),E=c(()=>m.value.charAt(0)),G=c(()=>p.profile?.total_beans??0),w=c(()=>p.level),N=c(()=>p.profile?.streak_days??0),b=x(!1);async function I(){await n.loginWithGoogle()}function O(){n.isAuthenticated?P.push({name:"profile"}):b.value=!b.value}const _=x(0);q(()=>n.isAuthenticated,i=>{i?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥ Profile"),p.fetchProfile(),n.isStudent&&u.fetchStudentAssignments().then(()=>{u.getPendingCount().then(o=>{_.value=o})})):_.value=0},{immediate:!0}),W(()=>{n.isAuthenticated&&n.isStudent&&u.fetchStudentAssignments().then(()=>{u.getPendingCount().then(i=>{_.value=i})})});const R="/judou/images/judou-logo.jpg";return(i,o)=>{const f=V("router-link");return t(),a("aside",Z,[e("div",{class:"sidebar-brand",onClick:O},[e("div",{class:v(["brand-avatar",{"has-avatar":d(n).avatarUrl}])},[d(n).avatarUrl?(t(),a("img",{key:0,src:d(n).avatarUrl,alt:m.value},null,8,ee)):(t(),a("span",se,l(E.value),1)),d(n).isAuthenticated?(t(),a("div",te,l(w.value),1)):r("",!0)],2),e("div",ae,[e("p",ne,l(m.value),1),d(n).isAuthenticated?(t(),a("p",oe,[e("span",le,[o[0]||(o[0]=e("span",{class:"bean-dot"},null,-1)),M(" "+l(G.value),1)]),e("span",ie,"Lv."+l(w.value),1),N.value>0?(t(),a("span",re,"ðŸ”¥ "+l(N.value)+"å¤©",1)):r("",!0)])):(t(),a("p",ce,"é»žæ“Šç™»å…¥"))]),d(n).isAuthenticated?(t(),a("svg",de,[...o[1]||(o[1]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):r("",!0)]),b.value&&!d(n).isAuthenticated?(t(),a("div",ue,[e("button",{class:"login-btn",onClick:I},[...o[2]||(o[2]=[J('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-3816893a><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-3816893a></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-3816893a></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-3816893a></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-3816893a></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):r("",!0),e("nav",pe,[o[3]||(o[3]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(t(!0),a(y,null,g(H.value,s=>(t(),a("li",{key:s.label},[s.to&&!s.disabled?(t(),k(f,{key:0,class:v(["edamame-sidebar-item",{active:h(s)}]),to:s.to},{default:A(()=>[s.icon?(t(),a("span",_e,l(s.icon),1)):r("",!0),e("p",ve,[M(l(s.label)+" ",1),s.label==="è±†èŽ¢"&&d(n).isStudent&&_.value>0?(t(),a("span",he,l(_.value),1)):r("",!0)])]),_:2},1032,["class","to"])):(t(),a("div",me,[s.icon?(t(),a("span",be,l(s.icon),1)):r("",!0),e("p",fe,l(s.label),1)]))]))),128))])]),S.value.length>0?(t(),a("nav",ye,[o[4]||(o[4]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(t(!0),a(y,null,g(S.value,s=>(t(),a("li",{key:s.label},[s.to&&!s.disabled?(t(),k(f,{key:0,class:v(["edamame-sidebar-item",{active:h(s)}]),to:s.to},{default:A(()=>[e("p",ge,l(s.label),1)]),_:2},1032,["class","to"])):(t(),a("div",ke,[e("p",Ae,l(s.label),1)]))]))),128))])])):r("",!0),C.value.length>0?(t(),a("nav",Se,[o[5]||(o[5]=e("p",{class:"section-label"},"è¶…ç´šç®¡ç†",-1)),e("ul",null,[(t(!0),a(y,null,g(C.value,s=>(t(),a("li",{key:s.label},[s.to&&!s.disabled?(t(),k(f,{key:0,class:v(["edamame-sidebar-item super-admin-item",{active:h(s)}]),to:s.to},{default:A(()=>[e("p",Ce,l(s.label),1)]),_:2},1032,["class","to"])):(t(),a("div",we,[e("p",Ne,l(s.label),1)]))]))),128))])])):r("",!0),e("div",{class:"sidebar-footer"},[e("div",{class:"footer-brand"},[e("img",{src:R,alt:"å¥è±†",class:"footer-logo"}),o[6]||(o[6]=e("span",{class:"footer-title"},"å¥è±† 2.0",-1))]),o[7]||(o[7]=e("div",{class:"footer-credits"},[e("p",null,"é–‹ç™¼ï¼šæ±ªæ¶µå±¹ã€å¼µè€å¸«"),e("p",null,"ç¾Žè¡“ï¼šä¸å¥•è¾°ã€å¾æšæ´‹")],-1))])])}}}),Me=z(xe,[["__scopeId","data-v-3816893a"]]),Be={class:"app-layout"},Ue={class:"app-main"},Ve={class:"app-content"},ze=U({__name:"AppLayout",setup(L){return(n,p)=>{const u=V("router-view");return t(),a("div",Be,[B(Me),e("section",Ue,[e("div",Ve,[B(u)])])])}}}),je=z(ze,[["__scopeId","data-v-a70dcd22"]]);export{je as default};
