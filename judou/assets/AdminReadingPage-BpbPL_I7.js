import{d as Ie,u as $e,r as f,K as P,c as R,f as Ae,a as s,h as g,m as W,F as C,g as t,i as K,s as S,j as $,H as x,I as h,L as F,t as i,e as q,p as Q,T as X,M as Y,b as le,G as E,J as ae,o as a,_ as Ve}from"./index-kveOurqA.js";import{u as De}from"./readingStore-BUsjYn_U.js";import"./useSupabase-BKUpOif9.js";const Re={class:"admin-reading-page"},Se={class:"admin-header"},Fe={class:"header-actions"},Me=["disabled"],Ue=["disabled"],Ee={class:"admin-layout"},Le={class:"category-sidebar edamame-glass"},Be={class:"sidebar-header"},Ne={key:0,class:"sidebar-loading"},Oe={key:1,class:"sidebar-empty"},Pe={key:2,class:"category-tree"},Ke={key:0,class:"tree-item editing"},je=["onClick"],He={class:"tree-label"},ze={class:"tree-count"},Ge={class:"tree-actions"},Je=["onClick"],We=["onClick"],qe={key:3,class:"add-category-inline"},Qe={class:"add-category-actions"},Xe={class:"content-panel edamame-glass"},Ye={key:0,class:"content-empty"},Ze={class:"category-info"},et={class:"category-meta"},tt={class:"text-list-section"},nt={key:0,class:"text-empty"},lt={key:1},at=["onClick"],st={class:"text-title"},ot={class:"text-preview"},it={class:"text-meta edamame-glass"},dt={class:"detail-title"},rt={class:"meta-row"},ut={key:0,class:"meta-item"},ct={key:1,class:"meta-item"},vt={class:"meta-item"},mt={key:2,class:"meta-item"},gt={class:"category-tags inline"},pt={key:0,class:"selection-toolbar"},ft={class:"selected-text"},yt={key:1,class:"annotations-section edamame-glass"},bt={class:"section-title"},xt={class:"annotation-list"},kt={class:"annotation-term"},_t={class:"annotation-content"},Ct=["onClick"],ht={class:"modal-card edamame-glass large-modal"},wt={class:"modal-body"},Tt={class:"form-row"},It={class:"flex-2"},$t={class:"form-row"},At={class:"category-picker"},Vt=["onClick"],Dt={key:0,class:"tag-check"},Rt={key:0,class:"new-category-inline"},St={key:0,class:"feedback"},Ft=["disabled"],Mt={class:"modal-card edamame-glass"},Ut={class:"modal-body"},Et={class:"selected-preview"},Lt={class:"preview-content"},Bt={class:"preview-info"},Nt={class:"form-row"},Ot=["value"],Pt={class:"extract-note"},Kt={key:0,class:"feedback"},jt=["disabled"],Ht={class:"modal-card edamame-glass"},zt={class:"modal-body"},Gt={class:"selected-preview"},Jt={class:"preview-content annotation-term-preview"},Wt={key:0,class:"feedback"},qt=["disabled"],Qt=Ie({__name:"AdminReadingPage",setup(Xt){const r=De(),se=$e(),L=f("list"),d=f(null),k=f(null),w=f(!1),A=f(!1),V=f(!1),y=f(!1),c=f(null),M=f(null),o=P({title:"",author:"",source:"",summary:"",content:"",reading_category_ids:[]}),_=f(!1),b=f(""),U=f(null),D=f(""),u=P({selectedText:"",startIndex:0,endIndex:0,title:"",category_id:null,difficulty:2}),p=P({selectedText:"",startIndex:0,endIndex:0,annotation:""}),I=R(()=>r.readingCategories),j=R(()=>k.value&&r.readingCategories.find(l=>l.id===k.value)||null),H=R(()=>k.value?r.readingTexts.filter(l=>l.reading_categories?.some(e=>e.id===k.value)):[]);function Z(l){return r.readingTexts.filter(e=>e.reading_categories?.some(n=>n.id===l)).length}function oe(l){k.value=l}function ie(l){U.value=l.id,D.value=l.name}function B(){U.value=null,D.value=""}async function ee(){if(!U.value||!D.value.trim()){B();return}try{await r.updateReadingCategory(U.value,{name:D.value.trim()}),B()}catch(l){alert(l?.message||"æ›´æ–°æ–‡é›†å¤±æ•—")}}async function de(l){const e=Z(l.id);if(e>0){alert(`ç„¡æ³•åˆªé™¤ã€Œ${l.name}ã€ï¼šæ­¤æ–‡é›†ä¸‹é‚„æœ‰ ${e} ç¯‡æ–‡ç« ã€‚è«‹å…ˆç§»é™¤æ–‡ç« å¾Œå†åˆªé™¤æ–‡é›†ã€‚`);return}if(confirm(`ç¢ºå®šè¦åˆªé™¤æ–‡é›†ã€Œ${l.name}ã€å—ï¼Ÿ`))try{await r.deleteReadingCategory(l.id),k.value===l.id&&(k.value=null)}catch(n){alert(n?.message||"åˆªé™¤æ–‡é›†å¤±æ•—")}}const re=R(()=>d.value?d.value.content.replace(/\|/g,""):""),ue=R(()=>{const l=r.currentText||d.value;return l?l.content.split("||").map(e=>e.replace(/\|/g,"")):[]}),z=R(()=>r.currentText?.annotations||[]);async function ce(l){d.value=l,L.value="detail",await r.fetchTextDetail(l.id)}function ve(){L.value="list",d.value=null,r.clearCurrentText()}function te(){M.value=null,o.title="",o.author="",o.source="",o.summary="",o.content="",o.reading_category_ids=[],c.value=null,w.value=!0}function me(){const l=r.currentText||d.value;l&&(M.value=l,o.title=l.title,o.author=l.author||"",o.source=l.source||"",o.summary=l.summary||"",o.content=l.content,o.reading_category_ids=l.reading_categories?.map(e=>e.id)||[],c.value=null,w.value=!0)}async function ge(){if(!o.title.trim()||!o.content.trim()){c.value="æ¨™é¡Œå’Œå…§å®¹ç‚ºå¿…å¡«";return}try{y.value=!0;const l=he(o.content);if(!l){c.value="å…§å®¹è™•ç†å¾Œç‚ºç©ºï¼Œè«‹æª¢æŸ¥è¼¸å…¥";return}M.value?(await r.updateTextCategories(M.value.id,o.reading_category_ids),w.value=!1):(await r.createReadingText({title:o.title.trim(),author:o.author.trim()||null,source:o.source.trim()||null,summary:o.summary.trim()||null,content:l,category_id:null,reading_category_ids:o.reading_category_ids},se.isAdmin),w.value=!1)}catch(l){c.value=l?.message||"å„²å­˜å¤±æ•—"}finally{y.value=!1}}function pe(){const l=window.getSelection();if(!l||l.isCollapsed)return;const e=l.toString().trim();if(!e||e.length===0)return;const v=re.value.indexOf(e);v>=0&&fe(e,v,v+e.length)}const m=P({show:!1,text:"",startIndex:0,endIndex:0});function fe(l,e,n){m.text=l,m.startIndex=e,m.endIndex=n,m.show=!0}function G(){m.show=!1}function ye(){d.value&&(u.selectedText=m.text,u.startIndex=m.startIndex,u.endIndex=m.endIndex,u.title=`${d.value.title}ï¼ˆç¯€é¸ï¼‰`,u.category_id=d.value.category_id||null,u.difficulty=2,c.value=null,G(),A.value=!0)}function be(){p.selectedText=m.text,p.startIndex=m.startIndex,p.endIndex=m.endIndex,p.annotation="",c.value=null,G(),V.value=!0}async function xe(){if(!d.value||!u.selectedText){c.value="è«‹é¸å–è¦æå–çš„æ–‡å­—";return}if(!u.title.trim()){c.value="è«‹è¼¸å…¥æ¨™é¡Œ";return}try{y.value=!0;const l=d.value.content;let e="",n=0;for(let v=0;v<l.length;v++){const O=l[v];O==="|"?n>u.startIndex&&n<=u.endIndex&&(e+=O):(n>=u.startIndex&&n<u.endIndex&&(e+=O),n++)}await r.extractPracticeFragment(d.value.id,u.startIndex,u.endIndex,e,{title:u.title.trim(),category_id:u.category_id,difficulty:u.difficulty}),A.value=!1,alert("ç·´ç¿’ç´ ææå–æˆåŠŸï¼")}catch(l){c.value=l?.message||"æå–å¤±æ•—"}finally{y.value=!1}}async function ke(){if(!d.value||!p.selectedText){c.value="è«‹é¸å–è¦è¨»é‡‹çš„æ–‡å­—";return}if(!p.annotation.trim()){c.value="è«‹è¼¸å…¥è¨»é‡‹å…§å®¹";return}try{y.value=!0,await r.addAnnotation({text_id:d.value.id,start_index:p.startIndex,end_index:p.endIndex,term:p.selectedText,annotation:p.annotation.trim()}),V.value=!1,alert("è¨»é‡‹æ·»åŠ æˆåŠŸï¼"),await r.fetchTextDetail(d.value.id)}catch(l){c.value=l?.message||"æ·»åŠ è¨»é‡‹å¤±æ•—"}finally{y.value=!1}}async function _e(l){if(confirm(`ç¢ºå®šè¦åˆªé™¤ã€Œ${l.term}ã€çš„è¨»é‡‹å—ï¼Ÿ`))try{await r.deleteAnnotation(l.id),d.value&&await r.fetchTextDetail(d.value.id)}catch(e){alert(e?.message||"åˆªé™¤å¤±æ•—")}}function Ce(l){const e=l.content.replace(/\|/g,"");return e.length>80?e.slice(0,80)+"...":e}function he(l){const e=/[ã€‚ï¼Œã€ï¼›ï¼šï¼ï¼Ÿ,.;:!?]/g,n=/[ã€Œã€ã€ã€""''ï¼ˆï¼‰()ã€ã€‘\[\]ã€Šã€‹<>Â·â€”â€¦ï½\-]/g;return l.split(/\n+/).map(J=>{let T=J.trim();return T?(T=T.replace(n,""),T=T.replace(e,"|"),T=T.replace(/\|+/g,"|").replace(/^\|/,"").replace(/\|$/,""),T):""}).filter(J=>J.length>0).join("||")}function we(l){return l?new Date(l).toLocaleDateString():"--"}function ne(l){return l.content.replace(/\|/g,"").length}function Te(l){const e=o.reading_category_ids.indexOf(l);e>-1?o.reading_category_ids.splice(e,1):o.reading_category_ids.push(l)}async function N(){if(b.value.trim())try{const l=await r.createReadingCategory(b.value.trim());l&&o.reading_category_ids.push(l.id),b.value="",_.value=!1}catch(l){alert(l?.message||"æ–°å¢åˆ†é¡å¤±æ•—")}}return Ae(async()=>{await Promise.all([r.fetchReadingCategories(),r.fetchReadingTexts()]),I.value.length>0&&!k.value&&I.value[0]&&(k.value=I.value[0].id)}),(l,e)=>(a(),s("div",Re,[L.value==="list"?(a(),s(C,{key:0},[t("header",Se,[e[28]||(e[28]=t("div",null,[t("p",{class:"edamame-text-level-detail"},"ç®¡ç†é–±è®€æ–‡ç« å’Œæå–ç·´ç¿’ç‰‡æ®µ"),t("h1",{class:"edamame-heading-gradient"},"é–±è®€æ–‡åº«")],-1)),t("div",Fe,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[0]||(e[0]=n=>{K(r).fetchReadingTexts(),K(r).fetchReadingCategories()}),disabled:K(r).isLoading}," é‡æ–°æ•´ç† ",8,Me),t("button",{class:"edamame-btn edamame-btn-primary",onClick:te,disabled:!j.value}," æ–°å¢é–±è®€æ–‡ç«  ",8,Ue)])]),t("div",Ee,[t("aside",Le,[t("div",Be,[e[30]||(e[30]=t("span",{class:"sidebar-title"},"æ–‡é›†å°èˆª",-1)),t("button",{class:"icon-btn",onClick:e[1]||(e[1]=n=>{_.value=!0,b.value=""}),title:"æ–°å¢æ–‡é›†"},[...e[29]||(e[29]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)])])]),K(r).isLoading?(a(),s("div",Ne,"è¼‰å…¥ä¸­â‹¯")):I.value.length?(a(),s("nav",Pe,[(a(!0),s(C,null,$(I.value,n=>(a(),s("div",{key:n.id,class:"tree-node"},[U.value===n.id?(a(),s("div",Ke,[x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=v=>D.value=v),type:"text",class:"edit-input",onKeyup:[F(ee,["enter"]),F(B,["escape"])],ref_for:!0,ref:"editInput"},null,544),[[h,D.value]]),t("div",{class:"edit-actions"},[t("button",{class:"action-btn",onClick:ee,title:"ç¢ºèª"},"âœ“"),t("button",{class:"action-btn",onClick:B,title:"å–æ¶ˆ"},"Ã—")])])):(a(),s("div",{key:1,class:le(["tree-item",{selected:k.value===n.id}]),onClick:v=>oe(n.id)},[t("span",He,i(n.name),1),t("span",ze,i(Z(n.id)),1),t("div",Ge,[t("button",{class:"action-btn",onClick:E(v=>ie(n),["stop"]),title:"ç·¨è¼¯"},"âœ",8,Je),t("button",{class:"action-btn danger",onClick:E(v=>de(n),["stop"]),title:"åˆªé™¤"},"Ã—",8,We)])],10,je))]))),128))])):(a(),s("div",Oe,[e[31]||(e[31]=S(" å°šç„¡æ–‡é›† ",-1)),t("button",{class:"link-btn",onClick:e[2]||(e[2]=n=>{_.value=!0,b.value=""})},"å»ºç«‹ç¬¬ä¸€å€‹æ–‡é›†")])),_.value?(a(),s("div",qe,[x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>b.value=n),type:"text",placeholder:"è¼¸å…¥æ–‡é›†åç¨±...",class:"category-input",onKeyup:[F(N,["enter"]),e[5]||(e[5]=F(n=>_.value=!1,["escape"]))]},null,544),[[h,b.value]]),t("div",Qe,[t("button",{class:"action-btn",onClick:N,title:"ç¢ºèª"},"âœ“"),t("button",{class:"action-btn",onClick:e[6]||(e[6]=n=>_.value=!1),title:"å–æ¶ˆ"},"Ã—")])])):g("",!0)]),t("main",Xe,[j.value?(a(),s(C,{key:1},[t("div",Ze,[t("h2",null,i(j.value.name),1),t("p",et,i(H.value.length)+" ç¯‡æ–‡ç« ",1)]),t("div",tt,[H.value.length?(a(),s("table",lt,[e[34]||(e[34]=t("thead",null,[t("tr",null,[t("th",null,"æ¨™é¡Œ"),t("th",null,"ä½œè€…"),t("th",null,"å­—æ•¸"),t("th",null,"å»ºç«‹æ—¥æœŸ")])],-1)),t("tbody",null,[(a(!0),s(C,null,$(H.value,n=>(a(),s("tr",{key:n.id,class:"text-row",onClick:v=>ce(n)},[t("td",null,[t("p",st,i(n.title),1),t("p",ot,i(Ce(n)),1)]),t("td",null,i(n.author||"ä½šå"),1),t("td",null,i(ne(n)),1),t("td",null,i(we(n.created_at)),1)],8,at))),128))])])):(a(),s("div",nt,[e[33]||(e[33]=t("p",null,"æ­¤æ–‡é›†å°šç„¡æ–‡ç« ",-1)),t("button",{class:"edamame-btn edamame-btn-primary",onClick:te},"æ–°å¢ç¬¬ä¸€ç¯‡æ–‡ç« ")]))])],64)):(a(),s("div",Ye,[...e[32]||(e[32]=[t("p",null,"è«‹å¾å·¦å´é¸æ“‡ä¸€å€‹æ–‡é›†",-1)])]))])])],64)):L.value==="detail"&&d.value?(a(),s(C,{key:1},[t("header",{class:"detail-header"},[t("button",{class:"back-btn",onClick:ve},[...e[35]||(e[35]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),S(" è¿”å›åˆ—è¡¨ ",-1)])]),t("div",{class:"detail-actions"},[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:me}," ç·¨è¼¯æ–‡ç«  ")])]),t("div",it,[t("h1",dt,i(d.value.title),1),t("div",rt,[d.value.author?(a(),s("span",ut,[e[36]||(e[36]=t("strong",null,"ä½œè€…ï¼š",-1)),S(i(d.value.author),1)])):g("",!0),d.value.source?(a(),s("span",ct,[e[37]||(e[37]=t("strong",null,"ä¾†æºï¼š",-1)),S(i(d.value.source),1)])):g("",!0),t("span",vt,[e[38]||(e[38]=t("strong",null,"å­—æ•¸ï¼š",-1)),S(i(ne(d.value)),1)]),d.value.reading_categories?.length?(a(),s("span",mt,[e[39]||(e[39]=t("strong",null,"æ–‡é›†ï¼š",-1)),t("span",gt,[(a(!0),s(C,null,$(d.value.reading_categories,n=>(a(),s("span",{key:n.id,class:"category-tag"},i(n.name),1))),128))])])):g("",!0)])]),e[40]||(e[40]=t("div",{class:"action-hint"}," ğŸ’¡ é¸å–æ–‡å­—å¾Œå¯ä»¥ã€Œæå–ç‚ºç·´ç¿’ã€æˆ–ã€Œæ·»åŠ è¨»é‡‹ã€ ",-1)),m.show?(a(),s("div",pt,[t("span",ft,"ã€Œ"+i(m.text.slice(0,20))+i(m.text.length>20?"...":"")+"ã€",1),t("button",{class:"toolbar-btn extract",onClick:ye}," ğŸ“¤ æå–ç‚ºç·´ç¿’ "),t("button",{class:"toolbar-btn annotate",onClick:be}," ğŸ“ æ·»åŠ è¨»é‡‹ "),t("button",{class:"toolbar-btn cancel",onClick:G}," âœ• ")])):g("",!0),t("div",{class:"text-content edamame-glass",onMouseup:pe},[(a(!0),s(C,null,$(ue.value,(n,v)=>(a(),s("div",{key:v,class:"paragraph"},i(n),1))),128))],32),z.value.length>0?(a(),s("div",yt,[t("h3",bt,"ğŸ“ å·²æ·»åŠ çš„è¨»é‡‹ ("+i(z.value.length)+")",1),t("div",xt,[(a(!0),s(C,null,$(z.value,n=>(a(),s("div",{key:n.id,class:"annotation-item"},[t("div",kt,i(n.term),1),t("div",_t,i(n.annotation),1),t("button",{class:"delete-btn",onClick:v=>_e(n),title:"åˆªé™¤"}," âœ• ",8,Ct)]))),128))])])):g("",!0)],64)):g("",!0),(a(),W(Y,{to:"body"},[q(X,{name:"fade"},{default:Q(()=>[w.value?(a(),s("div",{key:0,class:"modal-backdrop",onClick:e[17]||(e[17]=E(n=>w.value=!1,["self"]))},[t("div",ht,[t("header",null,[t("h3",null,i(M.value?"ç·¨è¼¯é–±è®€æ–‡ç« ":"æ–°å¢é–±è®€æ–‡ç« "),1),t("button",{class:"close-btn",onClick:e[7]||(e[7]=n=>w.value=!1)},"Ã—")]),t("div",wt,[t("div",Tt,[t("label",It,[e[41]||(e[41]=t("span",null,"æ¨™é¡Œ *",-1)),x(t("input",{"onUpdate:modelValue":e[8]||(e[8]=n=>o.title=n),type:"text",placeholder:"æ–‡ç« æ¨™é¡Œ"},null,512),[[h,o.title]])])]),t("div",$t,[t("label",null,[e[42]||(e[42]=t("span",null,"ä½œè€…",-1)),x(t("input",{"onUpdate:modelValue":e[9]||(e[9]=n=>o.author=n),type:"text",placeholder:"ä¾‹å¦‚ï¼šé™¶æ·µæ˜"},null,512),[[h,o.author]])]),t("label",null,[e[43]||(e[43]=t("span",null,"ä¾†æº",-1)),x(t("input",{"onUpdate:modelValue":e[10]||(e[10]=n=>o.source=n),type:"text",placeholder:"ä¾‹å¦‚ï¼šå¤æ–‡è§€æ­¢"},null,512),[[h,o.source]])])]),t("label",null,[e[44]||(e[44]=t("span",null,"æ–‡é›†ï¼ˆé»æ“Šé¸æ“‡ï¼‰",-1)),t("div",At,[(a(!0),s(C,null,$(I.value,n=>(a(),s("button",{key:n.id,type:"button",class:le(["category-tag-btn",{selected:o.reading_category_ids.includes(n.id)}]),onClick:v=>Te(n.id)},[o.reading_category_ids.includes(n.id)?(a(),s("span",Dt,"âœ“")):g("",!0),S(" "+i(n.name),1)],10,Vt))),128)),_.value?(a(),s("div",Rt,[x(t("input",{"onUpdate:modelValue":e[11]||(e[11]=n=>b.value=n),type:"text",class:"new-category-input-inline",onKeyup:[F(N,["enter"]),e[12]||(e[12]=F(n=>{_.value=!1,b.value=""},["escape"]))]},null,544),[[h,b.value]]),t("button",{type:"button",class:"inline-action confirm",onClick:N},"âœ“"),t("button",{type:"button",class:"inline-action cancel",onClick:e[13]||(e[13]=n=>{_.value=!1,b.value=""})},"Ã—")])):(a(),s("button",{key:1,type:"button",class:"category-tag-btn add-new",onClick:e[14]||(e[14]=n=>{_.value=!0,b.value=""})}," + æ–°å¢æ–‡é›† "))])]),t("label",null,[e[45]||(e[45]=t("span",null,"å…§å®¹ï¼ˆå¯ç›´æ¥ç²˜è²¼å¸¶æ¨™é»çš„åŸæ–‡ï¼‰",-1)),x(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=n=>o.content=n),rows:"10",placeholder:`ç›´æ¥ç²˜è²¼å¤æ–‡åŸæ–‡å³å¯ï¼Œç³»çµ±æœƒè‡ªå‹•è™•ç†æ¨™é»ç¬¦è™Ÿã€‚

ä¾‹å¦‚ï¼š
æ™‰å¤ªåŸä¸­ï¼Œæ­¦é™µäººæ•é­šç‚ºæ¥­ã€‚ç·£æºªè¡Œï¼Œå¿˜è·¯ä¹‹é è¿‘ã€‚

æ®µè½ä¹‹é–“ç”¨ç©ºè¡Œåˆ†éš”ã€‚`},null,512),[[h,o.content]])]),c.value?(a(),s("p",St,i(c.value),1)):g("",!0)]),t("footer",null,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[16]||(e[16]=n=>w.value=!1)}," å–æ¶ˆ "),t("button",{class:"edamame-btn edamame-btn-primary",disabled:y.value,onClick:ge},i(y.value?"å„²å­˜ä¸­...":"å„²å­˜"),9,Ft)])])])):g("",!0)]),_:1})])),(a(),W(Y,{to:"body"},[q(X,{name:"fade"},{default:Q(()=>[A.value?(a(),s("div",{key:0,class:"modal-backdrop",onClick:e[23]||(e[23]=E(n=>A.value=!1,["self"]))},[t("div",Mt,[t("header",null,[e[46]||(e[46]=t("h3",null,"ğŸ“¤ æå–ç‚ºç·´ç¿’ç´ æ",-1)),t("button",{class:"close-btn",onClick:e[18]||(e[18]=n=>A.value=!1)},"Ã—")]),t("div",Ut,[t("div",Et,[e[47]||(e[47]=t("p",{class:"preview-label"},"é¸å–çš„ç‰‡æ®µï¼š",-1)),t("p",Lt,i(u.selectedText),1),t("p",Bt," å…± "+i(u.selectedText.length)+" å­— ",1)]),t("label",null,[e[48]||(e[48]=t("span",null,"ç·´ç¿’æ¨™é¡Œ *",-1)),x(t("input",{"onUpdate:modelValue":e[19]||(e[19]=n=>u.title=n),type:"text",placeholder:"ä¾‹å¦‚ï¼šæ¡ƒèŠ±æºè¨˜ï¼ˆç¯€é¸ä¸€ï¼‰"},null,512),[[h,u.title]])]),t("div",Nt,[t("label",null,[e[50]||(e[50]=t("span",null,"åˆ†é¡",-1)),x(t("select",{"onUpdate:modelValue":e[20]||(e[20]=n=>u.category_id=n)},[e[49]||(e[49]=t("option",{value:null},"ä¸åˆ†é¡",-1)),(a(!0),s(C,null,$(I.value,n=>(a(),s("option",{key:n.id,value:n.id},i(n.name),9,Ot))),128))],512),[[ae,u.category_id]])]),t("label",null,[e[52]||(e[52]=t("span",null,"é›£åº¦",-1)),x(t("select",{"onUpdate:modelValue":e[21]||(e[21]=n=>u.difficulty=n)},[...e[51]||(e[51]=[t("option",{value:1},"åˆç´š",-1),t("option",{value:2},"ä¸­ç´š",-1),t("option",{value:3},"é«˜ç´š",-1)])],512),[[ae,u.difficulty]])])]),t("p",Pt," æå–å¾Œçš„ç·´ç¿’ç´ æå°‡é—œè¯åˆ°åŸæ–‡ç« ï¼Œå­¸ç”Ÿç·´ç¿’æ™‚å¯ä»¥çœ‹åˆ°ã€Œä¾†è‡ªã€Š"+i(d.value?.title)+"ã€‹ã€ ",1),c.value?(a(),s("p",Kt,i(c.value),1)):g("",!0)]),t("footer",null,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[22]||(e[22]=n=>A.value=!1)}," å–æ¶ˆ "),t("button",{class:"edamame-btn edamame-btn-primary",disabled:y.value,onClick:xe},i(y.value?"æå–ä¸­...":"ç¢ºèªæå–"),9,jt)])])])):g("",!0)]),_:1})])),(a(),W(Y,{to:"body"},[q(X,{name:"fade"},{default:Q(()=>[V.value?(a(),s("div",{key:0,class:"modal-backdrop",onClick:e[27]||(e[27]=E(n=>V.value=!1,["self"]))},[t("div",Ht,[t("header",null,[e[53]||(e[53]=t("h3",null,"ğŸ“ æ·»åŠ è¨»é‡‹",-1)),t("button",{class:"close-btn",onClick:e[24]||(e[24]=n=>V.value=!1)},"Ã—")]),t("div",zt,[t("div",Gt,[e[54]||(e[54]=t("p",{class:"preview-label"},"é¸å–çš„å­—è©ï¼š",-1)),t("p",Jt,i(p.selectedText),1)]),t("label",null,[e[55]||(e[55]=t("span",null,"è¨»é‡‹å…§å®¹ *",-1)),x(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=n=>p.annotation=n),rows:"4",placeholder:"è¼¸å…¥å°é€™å€‹å­—è©çš„è§£é‡‹..."},null,512),[[h,p.annotation]])]),c.value?(a(),s("p",Wt,i(c.value),1)):g("",!0)]),t("footer",null,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[26]||(e[26]=n=>V.value=!1)}," å–æ¶ˆ "),t("button",{class:"edamame-btn edamame-btn-primary",disabled:y.value,onClick:ke},i(y.value?"æ·»åŠ ä¸­...":"ç¢ºèªæ·»åŠ "),9,qt)])])])):g("",!0)]),_:1})]))]))}}),tn=Ve(Qt,[["__scopeId","data-v-e2599608"]]);export{tn as default};
