import{T as k}from"./TeamBadge-DPBHoi_H.js";import{d as A,m as g,c as i,a as s,f as d,b as B,F as _,p as f,q as x,n as M,s as S,t,l as n,_ as C}from"./index-0RstLS6o.js";const F={class:"race-track-container"},V={class:"racer-rank-badge"},I={class:"racer-score-label"},w={class:"racer-tooltip"},N={class:"tooltip-name"},$={class:"tooltip-score"},q={key:0,class:"tooltip-members"},D={key:0,class:"rankings-info"},E={class:"ranking-number"},L={class:"ranking-name"},P={class:"ranking-score"},X=A({__name:"RaceTrack",props:{teams:{},maxScore:{default:void 0},height:{default:120},racerSize:{default:48},showRankings:{type:Boolean,default:!1}},setup(p){const r=p,c=g(()=>[...r.teams].sort((e,o)=>o.displayAvg-e.displayAvg)),m=g(()=>{if(r.maxScore!==void 0&&r.maxScore>0)return r.maxScore;const e=r.teams.map(a=>a.displayAvg);return Math.max(...e,1)}),b=g(()=>({height:typeof r.height=="number"?`${r.height}px`:r.height}));function T(e){let l;if(m.value<=0||c.value.length===0){const u=c.value.findIndex(h=>h.id===e.id);l=8+77/Math.max(1,c.value.length-1)*u}else{const u=e.displayAvg/m.value,R=8+Math.pow(u,.7)*77;l=Math.min(R,85);const y=c.value.filter(v=>Math.abs(v.displayAvg-e.displayAvg)<.01);if(y.length>1){const v=y.findIndex(z=>z.id===e.id);l+=v*.5}}return l=Math.max(8,Math.min(85,l)),{left:`${l}%`,top:"50%",transform:"translateX(-50%) translateY(-50%)"}}return(e,o)=>(n(),i("div",F,[s("div",{class:"race-track",style:x(b.value)},[o[0]||(o[0]=B('<div class="track-start" data-v-890c3e22><span class="start-label" data-v-890c3e22>起點</span></div><div class="track-finish" data-v-890c3e22><span class="finish-label" data-v-890c3e22>終點</span><div class="finish-line" data-v-890c3e22></div></div>',2)),(n(!0),i(_,null,f(c.value,a=>(n(),i("div",{key:a.id,class:M(["team-racer",{"my-team":a.isMyTeam,"is-first":a.rank===1}]),style:x(T(a))},[a.productType?(n(),S(k,{key:0,"product-type":a.productType,size:p.racerSize,class:"racer-badge"},null,8,["product-type","size"])):d("",!0),s("div",V,t(a.rank),1),s("div",I,t(a.displayAvg.toFixed(1)),1),s("div",w,[s("div",N,t(a.name),1),s("div",$,"平均分: "+t(a.displayAvg.toFixed(2)),1),a.memberCount?(n(),i("div",q,t(a.completedCount)+"/"+t(a.memberCount)+" 完成 ",1)):d("",!0)])],6))),128))],4),p.showRankings?(n(),i("div",D,[(n(!0),i(_,null,f(c.value,a=>(n(),i("div",{key:a.id,class:M(["ranking-item",{"my-team":a.isMyTeam}])},[s("span",E,"#"+t(a.rank),1),a.productType?(n(),S(k,{key:0,"product-type":a.productType,size:54,class:"ranking-badge"},null,8,["product-type"])):d("",!0),s("span",L,t(a.name),1),s("span",P,t(a.displayAvg.toFixed(2)),1)],2))),128))])):d("",!0)]))}}),H=C(X,[["__scopeId","data-v-890c3e22"]]);export{H as R};
