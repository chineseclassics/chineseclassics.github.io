import{d as Ae,u as Se,r as f,K as N,c as $,f as Ve,a as s,h as g,m as W,F as C,g as t,i as K,s as F,j as A,H as x,I as h,L as M,t as i,e as q,p as Q,T as X,M as Y,b as ae,G as L,J as se,o as a,_ as Re}from"./index-BxyGBI2a.js";import{u as De}from"./readingStore-BaC-ZNQz.js";import{u as Fe}from"./practiceLibraryStore-EAAsV1l4.js";import"./useSupabase-B92su9yC.js";const Me={class:"admin-reading-page"},Ue={class:"admin-header"},Le={class:"header-actions"},Ee=["disabled"],Be=["disabled"],Oe={class:"admin-layout"},Pe={class:"category-sidebar edamame-glass"},Ne={class:"sidebar-header"},Ke={key:0,class:"sidebar-loading"},je={key:1,class:"sidebar-empty"},He={key:2,class:"category-tree"},ze={key:0,class:"tree-item editing"},Ge=["onClick"],Je={class:"tree-label"},We={class:"tree-count"},qe={class:"tree-actions"},Qe=["onClick"],Xe=["onClick"],Ye={key:3,class:"add-category-inline"},Ze={class:"add-category-actions"},et={class:"content-panel edamame-glass"},tt={key:0,class:"content-empty"},nt={class:"category-info"},lt={class:"category-meta"},at={class:"text-list-section"},st={key:0,class:"text-empty"},ot={key:1},it=["onClick"],rt={class:"text-title"},dt={class:"text-preview"},ut={class:"text-meta edamame-glass"},ct={class:"detail-title"},vt={class:"meta-row"},mt={key:0,class:"meta-item"},gt={key:1,class:"meta-item"},pt={class:"meta-item"},ft={key:2,class:"meta-item"},yt={class:"category-tags inline"},bt={key:0,class:"selection-toolbar"},xt={class:"selected-text"},_t={key:1,class:"annotations-section edamame-glass"},kt={class:"section-title"},Ct={class:"annotation-list"},ht={class:"annotation-term"},wt={class:"annotation-content"},Tt=["onClick"],It={class:"modal-card edamame-glass large-modal"},$t={class:"modal-body"},At={class:"form-row"},St={class:"flex-2"},Vt={class:"form-row"},Rt={class:"category-picker"},Dt=["onClick"],Ft={key:0,class:"tag-check"},Mt={key:0,class:"new-category-inline"},Ut={key:0,class:"feedback"},Lt=["disabled"],Et={class:"modal-card edamame-glass"},Bt={class:"modal-body"},Ot={class:"selected-preview"},Pt={class:"preview-content"},Nt={class:"preview-info"},Kt={class:"form-row"},jt=["value"],Ht={class:"extract-note"},zt={key:0,class:"feedback"},Gt=["disabled"],Jt={class:"modal-card edamame-glass"},Wt={class:"modal-body"},qt={class:"selected-preview"},Qt={class:"preview-content annotation-term-preview"},Xt={key:0,class:"feedback"},Yt=["disabled"],Zt=Ae({__name:"AdminReadingPage",setup(en){const d=De(),Z=Fe(),oe=Se(),E=f("list"),r=f(null),_=f(null),w=f(!1),S=f(!1),V=f(!1),y=f(!1),v=f(null),T=f(null),o=N({title:"",author:"",source:"",summary:"",content:"",reading_category_ids:[]}),k=f(!1),b=f(""),U=f(null),R=f(""),u=N({selectedText:"",startIndex:0,endIndex:0,title:"",category_id:null,difficulty:2}),p=N({selectedText:"",startIndex:0,endIndex:0,annotation:""}),D=$(()=>d.readingCategories),ie=$(()=>Z.state.categories.filter(l=>l.level===1).sort((l,e)=>l.order_index-e.order_index)),j=$(()=>_.value&&d.readingCategories.find(l=>l.id===_.value)||null),H=$(()=>_.value?d.readingTexts.filter(l=>l.reading_categories?.some(e=>e.id===_.value)):[]);function ee(l){return d.readingTexts.filter(e=>e.reading_categories?.some(n=>n.id===l)).length}function re(l){_.value=l}function de(l){U.value=l.id,R.value=l.name}function B(){U.value=null,R.value=""}async function te(){if(!U.value||!R.value.trim()){B();return}try{await d.updateReadingCategory(U.value,{name:R.value.trim()}),B()}catch(l){alert(l?.message||"æ›´æ–°æ–‡é›†å¤±æ•—")}}async function ue(l){const e=ee(l.id);if(e>0){alert(`ç„¡æ³•åˆªé™¤ã€Œ${l.name}ã€ï¼šæ­¤æ–‡é›†ä¸‹é‚„æœ‰ ${e} ç¯‡æ–‡ç« ã€‚è«‹å…ˆç§»é™¤æ–‡ç« å¾Œå†åˆªé™¤æ–‡é›†ã€‚`);return}if(confirm(`ç¢ºå®šè¦åˆªé™¤æ–‡é›†ã€Œ${l.name}ã€å—ï¼Ÿ`))try{await d.deleteReadingCategory(l.id),_.value===l.id&&(_.value=null)}catch(n){alert(n?.message||"åˆªé™¤æ–‡é›†å¤±æ•—")}}const ce=$(()=>{const l=d.currentText||r.value;return l?l.content.replace(/\|/g,""):""}),ve=$(()=>{const l=d.currentText||r.value;return l?l.content.split("||").map(e=>e.replace(/\|/g,"")):[]}),z=$(()=>d.currentText?.annotations||[]);async function me(l){r.value=l,E.value="detail",await d.fetchTextDetail(l.id)}function ge(){E.value="list",r.value=null,d.clearCurrentText()}function ne(){T.value=null,o.title="",o.author="",o.source="",o.summary="",o.content="",o.reading_category_ids=[],v.value=null,w.value=!0}function pe(){const l=d.currentText||r.value;l&&(T.value=l,o.title=l.title,o.author=l.author||"",o.source=l.source||"",o.summary=l.summary||"",o.content=l.content,o.reading_category_ids=l.reading_categories?.map(e=>e.id)||[],v.value=null,w.value=!0)}async function fe(){if(!o.title.trim()||!o.content.trim()){v.value="æ¨™é¡Œå’Œå…§å®¹ç‚ºå¿…å¡«";return}try{y.value=!0;const l=Te(o.content);if(!l){v.value="å…§å®¹è™•ç†å¾Œç‚ºç©ºï¼Œè«‹æª¢æŸ¥è¼¸å…¥";return}if(T.value){if(await d.updateReadingText(T.value.id,{title:o.title.trim(),author:o.author.trim()||null,source:o.source.trim()||null,summary:o.summary.trim()||null,category_id:null,content:l,reading_category_ids:o.reading_category_ids}),T.value&&r.value?.id===T.value.id){const e=d.readingTexts.find(n=>n.id===T.value.id);e&&(r.value=e)}w.value=!1}else await d.createReadingText({title:o.title.trim(),author:o.author.trim()||null,source:o.source.trim()||null,summary:o.summary.trim()||null,content:l,category_id:null,reading_category_ids:o.reading_category_ids},oe.isAdmin),w.value=!1}catch(l){v.value=l?.message||"å„²å­˜å¤±æ•—"}finally{y.value=!1}}function ye(){const l=window.getSelection();if(!l||l.isCollapsed)return;const e=l.toString().trim();if(!e||e.length===0)return;const c=ce.value.indexOf(e);c>=0&&be(e,c,c+e.length)}const m=N({show:!1,text:"",startIndex:0,endIndex:0});function be(l,e,n){m.text=l,m.startIndex=e,m.endIndex=n,m.show=!0}function G(){m.show=!1}function xe(){r.value&&(u.selectedText=m.text,u.startIndex=m.startIndex,u.endIndex=m.endIndex,u.title=`${r.value.title}ï¼ˆç¯€é¸ï¼‰`,u.category_id=r.value.category_id||null,u.difficulty=2,v.value=null,G(),S.value=!0)}function _e(){p.selectedText=m.text,p.startIndex=m.startIndex,p.endIndex=m.endIndex,p.annotation="",v.value=null,G(),V.value=!0}async function ke(){if(!r.value||!u.selectedText){v.value="è«‹é¸å–è¦æå–çš„æ–‡å­—";return}if(!u.title.trim()){v.value="è«‹è¼¸å…¥æ¨™é¡Œ";return}try{y.value=!0;const l=r.value.content;let e="",n=0;for(let c=0;c<l.length;c++){const P=l[c];P==="|"?n>u.startIndex&&n<=u.endIndex&&(e+=P):(n>=u.startIndex&&n<u.endIndex&&(e+=P),n++)}await d.extractPracticeFragment(r.value.id,u.startIndex,u.endIndex,e,{title:u.title.trim(),category_id:u.category_id,difficulty:u.difficulty}),S.value=!1,alert("ç·´ç¿’ç´ ææå–æˆåŠŸï¼")}catch(l){v.value=l?.message||"æå–å¤±æ•—"}finally{y.value=!1}}async function Ce(){if(!r.value||!p.selectedText){v.value="è«‹é¸å–è¦è¨»é‡‹çš„æ–‡å­—";return}if(!p.annotation.trim()){v.value="è«‹è¼¸å…¥è¨»é‡‹å…§å®¹";return}try{y.value=!0,await d.addAnnotation({text_id:r.value.id,start_index:p.startIndex,end_index:p.endIndex,term:p.selectedText,annotation:p.annotation.trim()}),V.value=!1,alert("è¨»é‡‹æ·»åŠ æˆåŠŸï¼"),await d.fetchTextDetail(r.value.id)}catch(l){v.value=l?.message||"æ·»åŠ è¨»é‡‹å¤±æ•—"}finally{y.value=!1}}async function he(l){if(confirm(`ç¢ºå®šè¦åˆªé™¤ã€Œ${l.term}ã€çš„è¨»é‡‹å—ï¼Ÿ`))try{await d.deleteAnnotation(l.id),r.value&&await d.fetchTextDetail(r.value.id)}catch(e){alert(e?.message||"åˆªé™¤å¤±æ•—")}}function we(l){const e=l.content.replace(/\|/g,"");return e.length>80?e.slice(0,80)+"...":e}function Te(l){const e=/[ã€‚ï¼Œã€ï¼›ï¼šï¼ï¼Ÿ,.;:!?]/g,n=/[ã€Œã€ã€ã€""''ï¼ˆï¼‰()ã€ã€‘\[\]ã€Šã€‹<>Â·â€”â€¦ï½\-]/g;let c;return l.includes("||")?c=l.split("||"):c=l.split(/\n+/),c.map(J=>{let I=J.trim();return I?(I=I.replace(n,""),I=I.replace(e,"|"),I=I.replace(/\|+/g,"|").replace(/^\|/,"").replace(/\|$/,""),I):""}).filter(J=>J.length>0).join("||")}function Ie(l){return l?new Date(l).toLocaleDateString():"--"}function le(l){return l.content.replace(/\|/g,"").length}function $e(l){const e=o.reading_category_ids.indexOf(l);e>-1?o.reading_category_ids.splice(e,1):o.reading_category_ids.push(l)}async function O(){if(b.value.trim())try{const l=await d.createReadingCategory(b.value.trim());l&&o.reading_category_ids.push(l.id),b.value="",k.value=!1}catch(l){alert(l?.message||"æ–°å¢åˆ†é¡å¤±æ•—")}}return Ve(async()=>{await Promise.all([d.fetchReadingCategories(),d.fetchReadingTexts(),Z.fetchLibrary()]),D.value.length>0&&!_.value&&D.value[0]&&(_.value=D.value[0].id)}),(l,e)=>(a(),s("div",Me,[E.value==="list"?(a(),s(C,{key:0},[t("header",Ue,[e[28]||(e[28]=t("div",null,[t("p",{class:"edamame-text-level-detail"},"ç®¡ç†é–±è®€æ–‡ç« å’Œæå–ç·´ç¿’ç‰‡æ®µ"),t("h1",{class:"edamame-heading-gradient"},"é–±è®€æ–‡åº«")],-1)),t("div",Le,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[0]||(e[0]=n=>{K(d).fetchReadingTexts(),K(d).fetchReadingCategories()}),disabled:K(d).isLoading}," é‡æ–°æ•´ç† ",8,Ee),t("button",{class:"edamame-btn edamame-btn-primary",onClick:ne,disabled:!j.value}," æ–°å¢é–±è®€æ–‡ç«  ",8,Be)])]),t("div",Oe,[t("aside",Pe,[t("div",Ne,[e[30]||(e[30]=t("span",{class:"sidebar-title"},"æ–‡é›†å°èˆª",-1)),t("button",{class:"icon-btn",onClick:e[1]||(e[1]=n=>{k.value=!0,b.value=""}),title:"æ–°å¢æ–‡é›†"},[...e[29]||(e[29]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 5v14M5 12h14"})],-1)])])]),K(d).isLoading?(a(),s("div",Ke,"è¼‰å…¥ä¸­â‹¯")):D.value.length?(a(),s("nav",He,[(a(!0),s(C,null,A(D.value,n=>(a(),s("div",{key:n.id,class:"tree-node"},[U.value===n.id?(a(),s("div",ze,[x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>R.value=c),type:"text",class:"edit-input",onKeyup:[M(te,["enter"]),M(B,["escape"])],ref_for:!0,ref:"editInput"},null,544),[[h,R.value]]),t("div",{class:"edit-actions"},[t("button",{class:"action-btn",onClick:te,title:"ç¢ºèª"},"âœ“"),t("button",{class:"action-btn",onClick:B,title:"å–æ¶ˆ"},"Ã—")])])):(a(),s("div",{key:1,class:ae(["tree-item",{selected:_.value===n.id}]),onClick:c=>re(n.id)},[t("span",Je,i(n.name),1),t("span",We,i(ee(n.id)),1),t("div",qe,[t("button",{class:"action-btn",onClick:L(c=>de(n),["stop"]),title:"ç·¨è¼¯"},"âœ",8,Qe),t("button",{class:"action-btn danger",onClick:L(c=>ue(n),["stop"]),title:"åˆªé™¤"},"Ã—",8,Xe)])],10,Ge))]))),128))])):(a(),s("div",je,[e[31]||(e[31]=F(" å°šç„¡æ–‡é›† ",-1)),t("button",{class:"link-btn",onClick:e[2]||(e[2]=n=>{k.value=!0,b.value=""})},"å»ºç«‹ç¬¬ä¸€å€‹æ–‡é›†")])),k.value?(a(),s("div",Ye,[x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>b.value=n),type:"text",placeholder:"è¼¸å…¥æ–‡é›†åç¨±...",class:"category-input",onKeyup:[M(O,["enter"]),e[5]||(e[5]=M(n=>k.value=!1,["escape"]))]},null,544),[[h,b.value]]),t("div",Ze,[t("button",{class:"action-btn",onClick:O,title:"ç¢ºèª"},"âœ“"),t("button",{class:"action-btn",onClick:e[6]||(e[6]=n=>k.value=!1),title:"å–æ¶ˆ"},"Ã—")])])):g("",!0)]),t("main",et,[j.value?(a(),s(C,{key:1},[t("div",nt,[t("h2",null,i(j.value.name),1),t("p",lt,i(H.value.length)+" ç¯‡æ–‡ç« ",1)]),t("div",at,[H.value.length?(a(),s("table",ot,[e[34]||(e[34]=t("thead",null,[t("tr",null,[t("th",null,"æ¨™é¡Œ"),t("th",null,"ä½œè€…"),t("th",null,"å­—æ•¸"),t("th",null,"å»ºç«‹æ—¥æœŸ")])],-1)),t("tbody",null,[(a(!0),s(C,null,A(H.value,n=>(a(),s("tr",{key:n.id,class:"text-row",onClick:c=>me(n)},[t("td",null,[t("p",rt,i(n.title),1),t("p",dt,i(we(n)),1)]),t("td",null,i(n.author||"ä½šå"),1),t("td",null,i(le(n)),1),t("td",null,i(Ie(n.created_at)),1)],8,it))),128))])])):(a(),s("div",st,[e[33]||(e[33]=t("p",null,"æ­¤æ–‡é›†å°šç„¡æ–‡ç« ",-1)),t("button",{class:"edamame-btn edamame-btn-primary",onClick:ne},"æ–°å¢ç¬¬ä¸€ç¯‡æ–‡ç« ")]))])],64)):(a(),s("div",tt,[...e[32]||(e[32]=[t("p",null,"è«‹å¾å·¦å´é¸æ“‡ä¸€å€‹æ–‡é›†",-1)])]))])])],64)):E.value==="detail"&&r.value?(a(),s(C,{key:1},[t("header",{class:"detail-header"},[t("button",{class:"back-btn",onClick:ge},[...e[35]||(e[35]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),F(" è¿”å›åˆ—è¡¨ ",-1)])]),t("div",{class:"detail-actions"},[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:pe}," ç·¨è¼¯æ–‡ç«  ")])]),t("div",ut,[t("h1",ct,i(r.value.title),1),t("div",vt,[r.value.author?(a(),s("span",mt,[e[36]||(e[36]=t("strong",null,"ä½œè€…ï¼š",-1)),F(i(r.value.author),1)])):g("",!0),r.value.source?(a(),s("span",gt,[e[37]||(e[37]=t("strong",null,"ä¾†æºï¼š",-1)),F(i(r.value.source),1)])):g("",!0),t("span",pt,[e[38]||(e[38]=t("strong",null,"å­—æ•¸ï¼š",-1)),F(i(le(r.value)),1)]),r.value.reading_categories?.length?(a(),s("span",ft,[e[39]||(e[39]=t("strong",null,"æ–‡é›†ï¼š",-1)),t("span",yt,[(a(!0),s(C,null,A(r.value.reading_categories,n=>(a(),s("span",{key:n.id,class:"category-tag"},i(n.name),1))),128))])])):g("",!0)])]),e[40]||(e[40]=t("div",{class:"action-hint"}," ğŸ’¡ é¸å–æ–‡å­—å¾Œå¯ä»¥ã€Œæå–ç‚ºç·´ç¿’ã€æˆ–ã€Œæ·»åŠ è¨»é‡‹ã€ ",-1)),m.show?(a(),s("div",bt,[t("span",xt,"ã€Œ"+i(m.text.slice(0,20))+i(m.text.length>20?"...":"")+"ã€",1),t("button",{class:"toolbar-btn extract",onClick:xe}," ğŸ“¤ æå–ç‚ºç·´ç¿’ "),t("button",{class:"toolbar-btn annotate",onClick:_e}," ğŸ“ æ·»åŠ è¨»é‡‹ "),t("button",{class:"toolbar-btn cancel",onClick:G}," âœ• ")])):g("",!0),t("div",{class:"text-content edamame-glass",onMouseup:ye},[(a(!0),s(C,null,A(ve.value,(n,c)=>(a(),s("div",{key:c,class:"paragraph"},i(n),1))),128))],32),z.value.length>0?(a(),s("div",_t,[t("h3",kt,"ğŸ“ å·²æ·»åŠ çš„è¨»é‡‹ ("+i(z.value.length)+")",1),t("div",Ct,[(a(!0),s(C,null,A(z.value,n=>(a(),s("div",{key:n.id,class:"annotation-item"},[t("div",ht,i(n.term),1),t("div",wt,i(n.annotation),1),t("button",{class:"delete-btn",onClick:c=>he(n),title:"åˆªé™¤"}," âœ• ",8,Tt)]))),128))])])):g("",!0)],64)):g("",!0),(a(),W(Y,{to:"body"},[q(X,{name:"fade"},{default:Q(()=>[w.value?(a(),s("div",{key:0,class:"modal-backdrop",onClick:e[17]||(e[17]=L(n=>w.value=!1,["self"]))},[t("div",It,[t("header",null,[t("h3",null,i(T.value?"ç·¨è¼¯é–±è®€æ–‡ç« ":"æ–°å¢é–±è®€æ–‡ç« "),1),t("button",{class:"close-btn",onClick:e[7]||(e[7]=n=>w.value=!1)},"Ã—")]),t("div",$t,[t("div",At,[t("label",St,[e[41]||(e[41]=t("span",null,"æ¨™é¡Œ *",-1)),x(t("input",{"onUpdate:modelValue":e[8]||(e[8]=n=>o.title=n),type:"text",placeholder:"æ–‡ç« æ¨™é¡Œ"},null,512),[[h,o.title]])])]),t("div",Vt,[t("label",null,[e[42]||(e[42]=t("span",null,"ä½œè€…",-1)),x(t("input",{"onUpdate:modelValue":e[9]||(e[9]=n=>o.author=n),type:"text",placeholder:"ä¾‹å¦‚ï¼šé™¶æ·µæ˜"},null,512),[[h,o.author]])]),t("label",null,[e[43]||(e[43]=t("span",null,"ä¾†æº",-1)),x(t("input",{"onUpdate:modelValue":e[10]||(e[10]=n=>o.source=n),type:"text",placeholder:"ä¾‹å¦‚ï¼šå¤æ–‡è§€æ­¢"},null,512),[[h,o.source]])])]),t("label",null,[e[44]||(e[44]=t("span",null,"æ–‡é›†ï¼ˆé»æ“Šé¸æ“‡ï¼‰",-1)),t("div",Rt,[(a(!0),s(C,null,A(D.value,n=>(a(),s("button",{key:n.id,type:"button",class:ae(["category-tag-btn",{selected:o.reading_category_ids.includes(n.id)}]),onClick:c=>$e(n.id)},[o.reading_category_ids.includes(n.id)?(a(),s("span",Ft,"âœ“")):g("",!0),F(" "+i(n.name),1)],10,Dt))),128)),k.value?(a(),s("div",Mt,[x(t("input",{"onUpdate:modelValue":e[11]||(e[11]=n=>b.value=n),type:"text",class:"new-category-input-inline",onKeyup:[M(O,["enter"]),e[12]||(e[12]=M(n=>{k.value=!1,b.value=""},["escape"]))]},null,544),[[h,b.value]]),t("button",{type:"button",class:"inline-action confirm",onClick:O},"âœ“"),t("button",{type:"button",class:"inline-action cancel",onClick:e[13]||(e[13]=n=>{k.value=!1,b.value=""})},"Ã—")])):(a(),s("button",{key:1,type:"button",class:"category-tag-btn add-new",onClick:e[14]||(e[14]=n=>{k.value=!0,b.value=""})}," + æ–°å¢æ–‡é›† "))])]),t("label",null,[e[45]||(e[45]=t("span",null,"å…§å®¹ï¼ˆå¯ç›´æ¥ç²˜è²¼å¸¶æ¨™é»çš„åŸæ–‡ï¼‰",-1)),x(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=n=>o.content=n),rows:"10",placeholder:`ç›´æ¥ç²˜è²¼å¤æ–‡åŸæ–‡å³å¯ï¼Œç³»çµ±æœƒè‡ªå‹•è™•ç†æ¨™é»ç¬¦è™Ÿã€‚

ä¾‹å¦‚ï¼š
æ™‰å¤ªåŸä¸­ï¼Œæ­¦é™µäººæ•é­šç‚ºæ¥­ã€‚ç·£æºªè¡Œï¼Œå¿˜è·¯ä¹‹é è¿‘ã€‚

æ®µè½ä¹‹é–“ç”¨ç©ºè¡Œåˆ†éš”ã€‚`},null,512),[[h,o.content]])]),v.value?(a(),s("p",Ut,i(v.value),1)):g("",!0)]),t("footer",null,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[16]||(e[16]=n=>w.value=!1)}," å–æ¶ˆ "),t("button",{class:"edamame-btn edamame-btn-primary",disabled:y.value,onClick:fe},i(y.value?"å„²å­˜ä¸­...":"å„²å­˜"),9,Lt)])])])):g("",!0)]),_:1})])),(a(),W(Y,{to:"body"},[q(X,{name:"fade"},{default:Q(()=>[S.value?(a(),s("div",{key:0,class:"modal-backdrop",onClick:e[23]||(e[23]=L(n=>S.value=!1,["self"]))},[t("div",Et,[t("header",null,[e[46]||(e[46]=t("h3",null,"ğŸ“¤ æå–ç‚ºç·´ç¿’ç´ æ",-1)),t("button",{class:"close-btn",onClick:e[18]||(e[18]=n=>S.value=!1)},"Ã—")]),t("div",Bt,[t("div",Ot,[e[47]||(e[47]=t("p",{class:"preview-label"},"é¸å–çš„ç‰‡æ®µï¼š",-1)),t("p",Pt,i(u.selectedText),1),t("p",Nt," å…± "+i(u.selectedText.length)+" å­— ",1)]),t("label",null,[e[48]||(e[48]=t("span",null,"ç·´ç¿’æ¨™é¡Œ *",-1)),x(t("input",{"onUpdate:modelValue":e[19]||(e[19]=n=>u.title=n),type:"text",placeholder:"ä¾‹å¦‚ï¼šæ¡ƒèŠ±æºè¨˜ï¼ˆç¯€é¸ä¸€ï¼‰"},null,512),[[h,u.title]])]),t("div",Kt,[t("label",null,[e[50]||(e[50]=t("span",null,"åˆ†é¡",-1)),x(t("select",{"onUpdate:modelValue":e[20]||(e[20]=n=>u.category_id=n)},[e[49]||(e[49]=t("option",{value:null},"ä¸åˆ†é¡",-1)),(a(!0),s(C,null,A(ie.value,n=>(a(),s("option",{key:n.id,value:n.id},i(n.name),9,jt))),128))],512),[[se,u.category_id]])]),t("label",null,[e[52]||(e[52]=t("span",null,"é›£åº¦",-1)),x(t("select",{"onUpdate:modelValue":e[21]||(e[21]=n=>u.difficulty=n)},[...e[51]||(e[51]=[t("option",{value:1},"åˆç´š",-1),t("option",{value:2},"ä¸­ç´š",-1),t("option",{value:3},"é«˜ç´š",-1)])],512),[[se,u.difficulty]])])]),t("p",Ht," æå–å¾Œçš„ç·´ç¿’ç´ æå°‡é—œè¯åˆ°åŸæ–‡ç« ï¼Œå­¸ç”Ÿç·´ç¿’æ™‚å¯ä»¥çœ‹åˆ°ã€Œä¾†è‡ªã€Š"+i(r.value?.title)+"ã€‹ã€ ",1),v.value?(a(),s("p",zt,i(v.value),1)):g("",!0)]),t("footer",null,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[22]||(e[22]=n=>S.value=!1)}," å–æ¶ˆ "),t("button",{class:"edamame-btn edamame-btn-primary",disabled:y.value,onClick:ke},i(y.value?"æå–ä¸­...":"ç¢ºèªæå–"),9,Gt)])])])):g("",!0)]),_:1})])),(a(),W(Y,{to:"body"},[q(X,{name:"fade"},{default:Q(()=>[V.value?(a(),s("div",{key:0,class:"modal-backdrop",onClick:e[27]||(e[27]=L(n=>V.value=!1,["self"]))},[t("div",Jt,[t("header",null,[e[53]||(e[53]=t("h3",null,"ğŸ“ æ·»åŠ è¨»é‡‹",-1)),t("button",{class:"close-btn",onClick:e[24]||(e[24]=n=>V.value=!1)},"Ã—")]),t("div",Wt,[t("div",qt,[e[54]||(e[54]=t("p",{class:"preview-label"},"é¸å–çš„å­—è©ï¼š",-1)),t("p",Qt,i(p.selectedText),1)]),t("label",null,[e[55]||(e[55]=t("span",null,"è¨»é‡‹å…§å®¹ *",-1)),x(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=n=>p.annotation=n),rows:"4",placeholder:"è¼¸å…¥å°é€™å€‹å­—è©çš„è§£é‡‹..."},null,512),[[h,p.annotation]])]),v.value?(a(),s("p",Xt,i(v.value),1)):g("",!0)]),t("footer",null,[t("button",{class:"edamame-btn edamame-btn-secondary",onClick:e[26]||(e[26]=n=>V.value=!1)}," å–æ¶ˆ "),t("button",{class:"edamame-btn edamame-btn-primary",disabled:y.value,onClick:Ce},i(y.value?"æ·»åŠ ä¸­...":"ç¢ºèªæ·»åŠ "),9,Yt)])])])):g("",!0)]),_:1})]))]))}}),sn=Re(Zt,[["__scopeId","data-v-341413bc"]]);export{sn as default};
