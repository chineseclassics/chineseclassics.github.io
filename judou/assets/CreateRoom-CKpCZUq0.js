import{d as O,r as u,c as I,a as l,b as s,e as c,f as d,i as P,m as h,t as o,F as f,g as k,v as V,n as S,s as a,_ as D}from"./index-D0Viv-TB.js";import{u as Y,S as p,b as L,E as U}from"./gameStore-Dccbd30l.js";import{u as z}from"./userStatsStore-0w96_6q0.js";import{T as G}from"./TextSelector-XTLHBj4n.js";const j={class:"create-room-page"},q={class:"balance-card"},H={class:"balance-value"},J={class:"steps-indicator"},K={key:0},Q={key:1},W={class:"step-content"},X={key:0,class:"step-panel"},Z={key:1,class:"step-panel"},ss={class:"form-section"},es={class:"player-options"},ts=["onClick"],ls={class:"form-section"},os={class:"time-options"},as=["onClick"],ns={class:"option-label"},is={class:"option-desc"},rs={class:"form-section"},us={class:"fee-options"},ds=["disabled","onClick"],cs={key:0,class:"fee-info"},vs={class:"safety-notice"},ps={class:"notice-text"},_s={class:"confirm-card"},ms={class:"confirm-row texts-row"},bs={class:"confirm-texts"},fs={class:"text-order"},ks={class:"text-name"},ys={class:"confirm-row"},xs={class:"confirm-value"},Cs={class:"confirm-row"},Ss={class:"confirm-value"},Is={class:"confirm-row"},hs={class:"confirm-value"},Ns={key:0,class:"error-message"},Es={class:"nav-buttons"},gs=["disabled"],Ts=["disabled"],As=["disabled"],N=2,Ls=O({__name:"CreateRoom",setup(Ms){const E=P(),g=Y(),M=z(),n=u(1),_=u([]),v=u(2),y=u(180),i=u(0),m=u(!1),r=u(""),T=u(null),x=I(()=>M.profile?.total_beans??0),A=I(()=>i.value===0?!0:x.value-i.value>=p.MIN_BALANCE),B=I(()=>T.value?.selectedTexts||[]);function F(b){_.value=b}function w(){if(n.value===1&&_.value.length===0){r.value="è«‹è‡³å°‘é¸æ“‡ä¸€ç¯‡æ–‡æœ¬";return}r.value="",n.value++}function $(){r.value="",n.value--}async function R(){if(_.value.length===0){r.value="è«‹é¸æ“‡æ–‡æœ¬";return}if(!A.value){r.value=`è±†å­ä¸è¶³ï¼Œè³¬æˆ¶éœ€ä¿ç•™è‡³å°‘ ${p.MIN_BALANCE} è±†`;return}m.value=!0,r.value="";const b=await g.createRoom({hostType:"student",gameMode:"pvp",textIds:_.value,timeLimit:y.value,maxPlayers:v.value,entryFee:i.value});b?E.push({name:"arena-lobby",params:{roomId:b.id}}):r.value=g.error||"å‰µå»ºå¤±æ•—",m.value=!1}return(b,e)=>(a(),l("div",j,[s("button",{class:"back-btn",onClick:e[0]||(e[0]=t=>d(E).push({name:"arena"}))}," â† è¿”å›žé¬¥è±† "),e[18]||(e[18]=s("header",{class:"page-header"},[s("h1",null,[s("span",{class:"title-icon"},"âž•"),h(" å‰µå»ºé¬¥è±†å ´ ")]),s("p",{class:"subtitle"},"é‚€è«‹åŒå­¸åŠ å…¥ï¼Œè´å–è±†å­ï¼")],-1)),s("div",q,[e[1]||(e[1]=s("span",{class:"balance-icon"},"ðŸ«˜",-1)),s("span",H,o(x.value),1),e[2]||(e[2]=s("span",{class:"balance-label"},"æˆ‘çš„è±†å­",-1))]),s("div",J,[(a(),l(f,null,k(N,t=>s("div",{key:t,class:S(["step-dot",{active:n.value===t,completed:n.value>t}])},[n.value>t?(a(),l("span",K,"âœ“")):(a(),l("span",Q,o(t),1))],2)),64))]),s("div",W,[n.value===1?(a(),l("div",X,[e[3]||(e[3]=s("h2",null,"é¸æ“‡æ¯”è³½æ–‡æœ¬",-1)),e[4]||(e[4]=s("p",{class:"step-hint"},"å¯é¸æ“‡å¤šç¯‡æ–‡ç« ï¼Œå°æˆ°æ™‚æŒ‰é †åºå®Œæˆ",-1)),V(G,{ref_key:"textSelector",ref:T,"show-custom-texts":!1,"onUpdate:selectedIds":F},null,512)])):c("",!0),n.value===2?(a(),l("div",Z,[e[16]||(e[16]=s("h2",null,"æ¯”è³½è¨­ç½®",-1)),e[17]||(e[17]=s("p",{class:"step-hint"},"è¨­ç½®å°æˆ°äººæ•¸ã€æ™‚é–“å’Œå…¥å ´è²»",-1)),s("div",ss,[e[5]||(e[5]=s("label",{class:"section-label"},"å°æˆ°äººæ•¸",-1)),s("div",es,[(a(),l(f,null,k([2,3,4],t=>s("button",{key:t,class:S(["option-btn",{selected:v.value===t}]),onClick:C=>v.value=t},o(t)+" äºº ",11,ts)),64))])]),s("div",ls,[e[6]||(e[6]=s("label",{class:"section-label"},"æ™‚é–“é™åˆ¶",-1)),s("div",os,[(a(!0),l(f,null,k(d(L),t=>(a(),l("button",{key:t.value,class:S(["option-btn time-btn",{selected:y.value===t.value}]),onClick:C=>y.value=t.value},[s("span",ns,o(t.label),1),s("span",is,o(t.description),1)],10,as))),128))])]),s("div",rs,[e[10]||(e[10]=s("label",{class:"section-label"},"å…¥å ´è²»",-1)),s("div",us,[(a(!0),l(f,null,k(d(U),t=>(a(),l("button",{key:t,class:S(["fee-btn",{selected:i.value===t,disabled:t>0&&x.value-t<d(p).MIN_BALANCE}]),disabled:t>0&&x.value-t<d(p).MIN_BALANCE,onClick:C=>i.value=t},o(t===0?"å…è²»":`${t} è±†`),11,ds))),128))]),i.value>0?(a(),l("div",cs,[s("p",null,[e[7]||(e[7]=h(" å…¥å ´è²»ï¼š",-1)),s("strong",null,o(i.value)+" è±†",1),h(" Ã— "+o(v.value)+" äºº = çŽæ±  ",1),s("strong",null,o(i.value*v.value)+" è±†",1)]),e[8]||(e[8]=s("p",{class:"fee-note"},"ç²å‹è€…æ”¶è±†ï¼",-1))])):c("",!0),s("div",vs,[e[9]||(e[9]=s("span",{class:"notice-icon"},"ðŸ›¡ï¸",-1)),s("span",ps," æ¯æ—¥å…¥å ´è²»ä¸Šé™ "+o(d(p).DAILY_FEE_LIMIT)+" è±† Â· è³¬æˆ¶ä¿ç•™ "+o(d(p).MIN_BALANCE)+" è±† ",1)])]),s("div",_s,[e[15]||(e[15]=s("h3",null,"ç¢ºèªä¿¡æ¯",-1)),s("div",ms,[e[11]||(e[11]=s("span",{class:"confirm-label"},"æ–‡æœ¬",-1)),s("div",bs,[(a(!0),l(f,null,k(B.value,(t,C)=>(a(),l("div",{key:t.id,class:"confirm-text-item"},[s("span",fs,o(C+1)+".",1),s("span",ks,o(t.title),1)]))),128))])]),s("div",ys,[e[12]||(e[12]=s("span",{class:"confirm-label"},"äººæ•¸",-1)),s("span",xs,o(v.value)+" äºº",1)]),s("div",Cs,[e[13]||(e[13]=s("span",{class:"confirm-label"},"æ™‚é–“",-1)),s("span",Ss,o(d(L).find(t=>t.value===y.value)?.description),1)]),s("div",Is,[e[14]||(e[14]=s("span",{class:"confirm-label"},"å…¥å ´è²»",-1)),s("span",hs,o(i.value===0?"å…è²»":`${i.value} è±†`),1)])])])):c("",!0)]),r.value?(a(),l("p",Ns,o(r.value),1)):c("",!0),s("div",Es,[n.value>1?(a(),l("button",{key:0,class:"btn-secondary",onClick:$,disabled:m.value}," ä¸Šä¸€æ­¥ ",8,gs)):c("",!0),n.value<N?(a(),l("button",{key:1,class:"btn-primary",onClick:w,disabled:_.value.length===0}," ä¸‹ä¸€æ­¥ ",8,Ts)):c("",!0),n.value===N?(a(),l("button",{key:2,class:"btn-primary",onClick:R,disabled:m.value||!A.value},o(m.value?"å‰µå»ºä¸­...":"å‰µå»ºé¬¥è±†å ´"),9,As)):c("",!0)])]))}}),Rs=D(Ls,[["__scopeId","data-v-1f4536db"]]);export{Rs as default};
