import{d as P,u as V,c as r,r as b,w as z,o as X,a,b as e,e as c,n as m,f as d,t as i,F as h,g as f,h as Z,i as ee,j as se,k as w,l as N,m as te,p as j,q as ae,s as t,_ as D,v as $}from"./index-YTGOSa5D.js";import{u as ne}from"./userStatsStore-0mpho1ao.js";import{u as oe}from"./assignmentStore-Dd3AfP1T.js";const le={class:"sidebar-shell edamame-glass"},ie=["src","alt"],re={key:1},ce={key:2,class:"level-badge"},de={class:"brand-info"},ue={class:"brand-title"},ve={key:0,class:"brand-stats-wrapper"},pe={class:"beans-roller"},_e={class:"secondary-stats"},be={key:0,class:"streak-display"},me={key:1,class:"brand-subtitle"},he={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},fe={key:0,class:"user-menu-dropdown"},ge={class:"sidebar-section"},ye={key:0,class:"item-icon"},ke={class:"item-title"},Ae={key:0,class:"badge"},Se={key:1,class:"edamame-sidebar-item disabled"},Ce={key:0,class:"item-icon"},we={class:"item-title"},Ne={key:1,class:"sidebar-section"},xe={class:"item-title"},Be={key:1,class:"edamame-sidebar-item disabled"},Me={class:"item-title"},Ue={key:2,class:"sidebar-section super-admin-section"},ze={class:"item-title"},$e={key:1,class:"edamame-sidebar-item disabled"},Pe={class:"item-title"},je=P({__name:"SidebarMenu",setup(F){const o=V(),v=ne(),u=oe(),L=ee(),H=[{label:"é¦–é ",icon:"ðŸ ",to:{name:"home"}},{label:"å¥è±†",icon:"ðŸ«˜",to:{name:"practice"},description:"ç·´ç¿’"},{label:"å“è±†",icon:"ðŸ“–",to:{name:"reading-list"},description:"é–±è®€"},{label:"é¬¥è±†",icon:"âš”ï¸",to:{name:"arena"},description:"å°æˆ°"},{label:"è±†è·¡",icon:"ðŸ‘£",to:{name:"history"},description:"æ­·å²"},{label:"è±†èŽ¢",icon:"ðŸ«›",to:{name:"my-classes"},description:"ç­ç´š"},{label:"è‡ªè¨‚ç·´ç¿’",icon:"âœï¸",to:{name:"my-texts"},teacherOnly:!0}],I=[{label:"ç·´ç¿’æ–‡åº«",to:{name:"admin-texts"}},{label:"é–±è®€æ–‡åº«",to:{name:"admin-reading"}}],T=[{label:"ç”¨æˆ¶ç®¡ç†",to:{name:"admin-users"}}],E=r(()=>H.filter(l=>!l.teacherOnly||o.isTeacher)),x=r(()=>!o.isAuthenticated||!o.isAdmin?[]:I),B=r(()=>!o.isAuthenticated||!o.isSuperAdmin?[]:T),G=ae(),y=l=>l.to?G.name===l.to.name:!1,k=r(()=>o.isAuthenticated?o.displayName||"è±†å‹":"è¨ªå®¢"),O=r(()=>k.value.charAt(0)),R=r(()=>v.profile?.total_beans??0),q=r(()=>v.level),M=r(()=>v.profile?.streak_days??0),A=b(0),S=b(!1),g=b(null),W=r(()=>A.value.toString().split("").map(n=>parseInt(n)));z(R,(l,n)=>{if(n===void 0||n===0){A.value=l;return}if(l===n)return;const _=l-n;g.value=_>0?"up":"down",S.value=!0,A.value=l,setTimeout(()=>{S.value=!1,g.value=null},800)},{immediate:!0});const C=b(!1);async function Y(){await o.loginWithGoogle()}function J(){o.isAuthenticated?L.push({name:"profile"}):C.value=!C.value}const p=b(0);z(()=>o.isAuthenticated,l=>{l?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥ Profile"),v.fetchProfile(),o.isStudent&&u.fetchStudentAssignments().then(()=>{u.getPendingCount().then(n=>{p.value=n})})):p.value=0},{immediate:!0}),X(()=>{o.isAuthenticated&&o.isStudent&&u.fetchStudentAssignments().then(()=>{u.getPendingCount().then(l=>{p.value=l})})});const K="/judou/images/judou-logo.jpg";return(l,n)=>{const _=j("router-link");return t(),a("aside",le,[e("div",{class:"sidebar-brand",onClick:J},[e("div",{class:m(["brand-avatar",{"has-avatar":d(o).avatarUrl}])},[d(o).avatarUrl?(t(),a("img",{key:0,src:d(o).avatarUrl,alt:k.value},null,8,ie)):(t(),a("span",re,i(O.value),1)),d(o).isAuthenticated?(t(),a("div",ce,i(q.value),1)):c("",!0)],2),e("div",de,[e("p",ue,i(k.value),1),d(o).isAuthenticated?(t(),a("div",ve,[e("div",{class:m(["beans-card",{"beans-animating":S.value,"beans-up":g.value==="up","beans-down":g.value==="down"}])},[n[0]||(n[0]=e("div",{class:"beans-icon"},[e("span",{class:"bean-pod"},"ðŸ«›")],-1)),e("div",pe,[(t(!0),a(h,null,f(W.value,(s,Q)=>(t(),a("div",{key:Q,class:"digit-slot"},[e("div",{class:"digit-roller",style:se({transform:`translateY(-${s*10}%)`})},[(t(),a(h,null,f(10,U=>e("span",{key:U,class:"digit"},i(U-1),1)),64))],4)]))),128))])],2),e("div",_e,[M.value>0?(t(),a("span",be,"ðŸ”¥ "+i(M.value)+"å¤©",1)):c("",!0)])])):(t(),a("p",me,"é»žæ“Šç™»å…¥"))]),d(o).isAuthenticated?(t(),a("svg",he,[...n[1]||(n[1]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):c("",!0)]),C.value&&!d(o).isAuthenticated?(t(),a("div",fe,[e("button",{class:"login-btn",onClick:Y},[...n[2]||(n[2]=[Z('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-01e9e8b0><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-01e9e8b0></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-01e9e8b0></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-01e9e8b0></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-01e9e8b0></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):c("",!0),e("nav",ge,[n[3]||(n[3]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(t(!0),a(h,null,f(E.value,s=>(t(),a("li",{key:s.label},[s.to&&!s.disabled?(t(),w(_,{key:0,class:m(["edamame-sidebar-item",{active:y(s)}]),to:s.to},{default:N(()=>[s.icon?(t(),a("span",ye,i(s.icon),1)):c("",!0),e("p",ke,[te(i(s.label)+" ",1),s.label==="è±†èŽ¢"&&d(o).isStudent&&p.value>0?(t(),a("span",Ae,i(p.value),1)):c("",!0)])]),_:2},1032,["class","to"])):(t(),a("div",Se,[s.icon?(t(),a("span",Ce,i(s.icon),1)):c("",!0),e("p",we,i(s.label),1)]))]))),128))])]),x.value.length>0?(t(),a("nav",Ne,[n[4]||(n[4]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(t(!0),a(h,null,f(x.value,s=>(t(),a("li",{key:s.label},[s.to&&!s.disabled?(t(),w(_,{key:0,class:m(["edamame-sidebar-item",{active:y(s)}]),to:s.to},{default:N(()=>[e("p",xe,i(s.label),1)]),_:2},1032,["class","to"])):(t(),a("div",Be,[e("p",Me,i(s.label),1)]))]))),128))])])):c("",!0),B.value.length>0?(t(),a("nav",Ue,[n[5]||(n[5]=e("p",{class:"section-label"},"è¶…ç´šç®¡ç†",-1)),e("ul",null,[(t(!0),a(h,null,f(B.value,s=>(t(),a("li",{key:s.label},[s.to&&!s.disabled?(t(),w(_,{key:0,class:m(["edamame-sidebar-item super-admin-item",{active:y(s)}]),to:s.to},{default:N(()=>[e("p",ze,i(s.label),1)]),_:2},1032,["class","to"])):(t(),a("div",$e,[e("p",Pe,i(s.label),1)]))]))),128))])])):c("",!0),e("div",{class:"sidebar-footer"},[e("div",{class:"footer-brand"},[e("img",{src:K,alt:"å¥è±†",class:"footer-logo"}),n[6]||(n[6]=e("span",{class:"footer-title"},"å¥è±† 2.0",-1))]),n[7]||(n[7]=e("div",{class:"footer-credits"},[e("p",null,"é–‹ç™¼ï¼šæ±ªæ¶µå±¹ã€å¼µè€å¸«"),e("p",null,"ç¾Žè¡“ï¼šä¸å¥•è¾°ã€å¾æšæ´‹")],-1))])])}}}),De=D(je,[["__scopeId","data-v-01e9e8b0"]]),Fe={class:"app-layout"},Le={class:"app-main"},He={class:"app-content"},Ie=P({__name:"AppLayout",setup(F){return(o,v)=>{const u=j("router-view");return t(),a("div",Fe,[$(De),e("section",Le,[e("div",He,[$(u)])])])}}}),Oe=D(Ie,[["__scopeId","data-v-a70dcd22"]]);export{Oe as default};
