import{d as Ie,m as b,s as ce,e as Y,J as nt,x as Ve,K as it,c as o,f as d,a,H as K,n as y,q as Pe,g as Re,l,i as S,t as u,_ as ze,u as rt,r as c,A as ut,w as Ae,o as ct,L as dt,h as vt,v as mt,F as _,p as E,y as ft,j as Q}from"./index-CvCMB_4W.js";import{u as pt}from"./textsStore-Bc3PdHQ_.js";import{u as ht}from"./practiceLibraryStore-DAo_1_gL.js";import{u as _t}from"./assignmentStore-BNQMJ3Lq.js";import{u as yt}from"./userStatsStore-DNxnv8la.js";import{u as kt}from"./classStore-DSKIWBHF.js";import{u as gt}from"./avatarStore-DWjejMWt.js";import{S as bt,V as Tt,c as St,a as xt,b as wt,R as Ct}from"./ReadingDetailPage-Bnj_CzOL.js";import{u as $t}from"./useSupabase-CGWqDo0K.js";import{C as Bt}from"./clock-D_ittw1B.js";import{c as At}from"./createLucideIcon-DAHcjnFf.js";import"./readingStore-D1GtYhKZ.js";const It=At("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Vt={key:0,class:"judou-modal-header"},Pt={class:"judou-modal-title"},Rt={key:0,class:"title-icon"},zt={key:1,class:"judou-modal-stats"},Mt={key:2,class:"judou-modal-footer"},Nt=Ie({__name:"BaseModal",props:{modelValue:{type:Boolean},title:{default:""},icon:{default:""},size:{default:"md"},closable:{type:Boolean,default:!0},closeOnOverlay:{type:Boolean,default:!0},bottomSheet:{type:Boolean,default:!1},noPadding:{type:Boolean,default:!1},maxWidth:{},maxHeight:{}},emits:["update:modelValue","close"],setup(x,{expose:U,emit:D}){const f=x,R=D,Z=b(()=>`size-${f.size}`),p=b(()=>({maxWidth:f.maxWidth||void 0,maxHeight:f.maxHeight||void 0}));function A(){R("update:modelValue",!1),R("close")}function H(){f.closeOnOverlay&&A()}return U({close:A}),(w,ee)=>(l(),ce(it,{to:"body"},[Y(nt,{name:"judou-modal"},{default:Ve(()=>[x.modelValue?(l(),o("div",{key:0,class:"judou-modal-overlay",onClick:Re(H,["self"])},[a("div",{class:y(["judou-modal-content",[Z.value,{"bottom-sheet":x.bottomSheet}]]),style:Pe(p.value)},[x.title||w.$slots.header?(l(),o("div",Vt,[K(w.$slots,"header",{},()=>[a("h2",Pt,[x.icon?(l(),o("span",Rt,u(x.icon),1)):d("",!0),S(" "+u(x.title),1)])],!0),x.closable?(l(),o("button",{key:0,class:"judou-modal-close",onClick:A,"aria-label":"é—œé–‰"}," Ã— ")):d("",!0)])):d("",!0),w.$slots.stats?(l(),o("div",zt,[K(w.$slots,"stats",{},void 0,!0)])):d("",!0),a("div",{class:y(["judou-modal-body",{"no-padding":x.noPadding}])},[K(w.$slots,"default",{},void 0,!0)],2),w.$slots.footer?(l(),o("div",Mt,[K(w.$slots,"footer",{},void 0,!0)])):d("",!0)],6)])):d("",!0)]),_:3})]))}}),Lt=ze(Nt,[["__scopeId","data-v-ff9fdf78"]]),jt={class:"practice-shell"},qt={class:"picker-section edamame-glass"},Ot={class:"picker-current"},Et={class:"picker-info"},Ut={class:"picker-breadcrumb"},Dt={key:0,class:"picker-meta"},Ht={key:0},Wt={key:0,class:"picker-panel"},Gt={class:"picker-search"},Xt={key:0,class:"picker-results"},Jt={key:0,class:"picker-empty"},Ft=["onClick"],Kt={class:"item-main"},Qt={class:"item-title"},Yt={class:"item-author"},Zt={class:"item-preview"},es={key:1,class:"picker-cascade"},ts={class:"grade-filter-section"},ss={class:"grade-tags"},as=["onClick"],ls={class:"picker-list"},os={key:0,class:"picker-empty"},ns={key:1,class:"picker-empty"},is=["onClick"],rs={class:"item-main"},us={class:"item-title"},cs={class:"item-author"},ds={class:"item-preview"},vs={class:"hero-actions"},ms=["disabled"],fs={class:"board-card edamame-glass"},ps={key:0,class:"practice-board"},hs={class:"board-header"},_s={key:1,class:"board-hint"},ys={class:"board-header-right"},ks={key:1,class:"timer-badge"},gs={key:0,class:"practice-line"},bs=["onPointerdown","aria-label"],Ts={key:0,class:"bean"},Ss={key:1,class:"state-info"},xs={class:"board-actions"},ws=["disabled"],Cs={key:1,class:"board-empty"},$s={class:"results-grid"},Bs={class:"result-card edamame-glass"},As={class:"result-desc"},Is={class:"result-card edamame-glass"},Vs={class:"result-desc"},Ps={class:"result-card edamame-glass"},Rs={class:"result-desc"},zs={class:"result-card edamame-glass"},Ms={class:"result-desc"},Ns={key:0,class:"new-record"},Ls={key:1},js={key:2},qs=Ie({__name:"PracticePage",setup(x){const U=ut(),D=$t(),f=pt(),R=ht(),Z=_t(),p=rt(),A=yt(),H=kt(),w=gt(),ee=c(new Set),de=b(()=>U.query.assignmentId),ve=b(()=>U.query.textId),r=c(null),T=c([]),$=c(new Set),h=c(new Set),i=c(null),N=c(0),m=c(null),te=c(!1),se=c(0),me=c(0),fe=c(0),ae=c(!1),le=c(!1),pe=b(()=>!!r.value?.source_text?.id),he=b(()=>$.value.size),Me=b(()=>h.value.size),_e=b(()=>Math.max(0,he.value-Me.value)),ye=b(()=>_e.value>0),L=c(!1),C=c(null),I=c(""),Ne=c(localStorage.getItem("judou_username")||"guest"),Le=c(localStorage.getItem("judou_display_name")||"è¨ªå®¢å­¸å“¡"),V=c(!1),W=c(!1),G=c(null);let j=null;const B=c(null);function ke(){B.value||(B.value=new(window.AudioContext||window.webkitAudioContext))}function oe(t){if(B.value||ke(),!B.value)return;const e=B.value,s=e.createOscillator(),n=e.createGain();s.connect(n),n.connect(e.destination),t==="add"?(s.frequency.setValueAtTime(400,e.currentTime),s.frequency.exponentialRampToValueAtTime(200,e.currentTime+.1),n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),s.start(e.currentTime),s.stop(e.currentTime+.1)):(s.frequency.setValueAtTime(300,e.currentTime),s.frequency.exponentialRampToValueAtTime(150,e.currentTime+.08),n.gain.setValueAtTime(.2,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.08),s.start(e.currentTime),s.stop(e.currentTime+.08))}function ge(t=10){navigator.vibrate&&navigator.vibrate(t)}const ne=b(()=>R.state.categories.filter(t=>t.level!==1?!1:t.is_system===!0).sort((t,e)=>t.order_index-e.order_index));function ie(t){return!!(t.is_system===!0||t.created_by===p.user?.id||p.isStudent&&t.created_by&&ee.value.has(t.created_by))}const be=b(()=>C.value?f.texts.filter(t=>t.practice_categories?.some(s=>s.id===C.value)||t.category_id===C.value?ie(t):!1).sort((t,e)=>t.title.localeCompare(e.title)):[]),Te=b(()=>{if(!I.value.trim())return[];const t=I.value.toLowerCase();return f.texts.filter(e=>ie(e)?e.title.toLowerCase().includes(t)||e.author&&e.author.toLowerCase().includes(t)||e.source&&e.source.toLowerCase().includes(t):!1).slice(0,10)}),je=b(()=>{if(!r.value)return"å°šæœªé¸æ“‡ç·´ç¿’ç´ æ";const t=[];return r.value.category?.name&&t.push(r.value.category.name),t.push(r.value.title),t.join(" â€º ")});async function qe(){if(!p.isStudent||!p.isAuthenticated)return;await H.fetchStudentClasses();const t=new Set;for(const e of H.classes)e.teacher_id&&t.add(e.teacher_id);ee.value=t}function Oe(t){const e=[],s=new Set;let n=0;const v=t.replace(/[\|\s]+$/,"");for(const k of v)k==="|"?n>0&&s.add(n-1):k!==`
`&&k!=="\r"&&(e.push(k),n++);return{chars:e,breaks:s}}function Ee(){X(),N.value=0,j=window.setInterval(()=>{N.value+=1},1e3)}function X(){j&&(clearInterval(j),j=null)}function re(t){const{chars:e,breaks:s}=Oe(t.content);T.value=e,$.value=s,h.value=new Set,i.value=null,m.value=null,X(),N.value=0,se.value=0,me.value=0,fe.value=0,ae.value=!1}function J(t){r.value=t,re(t),L.value=!1,I.value="",t.category_id&&(C.value=t.category_id),xe(t)}function Se(){const t=f.texts.filter(k=>k.text_type==="practice"&&ie(k));if(!t.length){m.value="å°šæœªæœ‰å¯ç·´ç¿’çš„æ–‡ç« ï¼Œè«‹å…ˆåˆ°ç®¡ç†å“¡é é¢æ–°å¢ã€‚";return}const e=r.value?.id,s=t.filter(k=>k.id!==e);if(!s.length){m.value="ç›®å‰åªæœ‰ä¸€ç¯‡æ–‡ç« å¯ç·´ç¿’";return}const n=Math.floor(Math.random()*s.length),v=s[n];v&&J(v)}async function Ue(){const t=[];if(f.texts.length||t.push(f.fetchTexts()),R.state.categories.length||t.push(R.fetchLibrary()),p.isStudent&&p.isAuthenticated&&t.push(qe()),await Promise.all(t),ve.value){const e=f.texts.find(s=>s.id===ve.value);if(e){J(e);return}}if(!r.value&&f.texts.length&&Se(),!C.value&&ne.value.length){const e=ne.value[0];e&&(C.value=e.id)}}function De(){const t=r.value?.source_text?.id;t&&(G.value=t,W.value=!0)}function He(){W.value=!1,G.value=null}Ae(()=>({textId:r.value?.id,sourceId:r.value?.source_text?.id,sourceTitle:r.value?.source_text?.title}),t=>{const e={...t,hasSourceLink:pe.value,source_text_id:r.value?.source_text_id,source_text_raw:r.value?.source_text,source_text_type:Array.isArray(r.value?.source_text)?"array":typeof r.value?.source_text};console.log("PracticePage èª¿è©¦ï¼šä¾†æºæŒ‰éˆ•ç‹€æ…‹",JSON.stringify(e,null,2))},{immediate:!0});async function xe(t){if(!D||!t.source_text_id||t.source_text)return;const{data:e,error:s}=await D.from("practice_texts").select("id, title, is_system, text_type").eq("id",t.source_text_id).maybeSingle();if(s){console.warn("è£œæŠ“ä¾†æºæ–‡ç« å¤±æ•—",{error:s,source_text_id:t.source_text_id});return}if(e){const n={...t,source_text:{id:e.id,title:e.title}};r.value=n;const v=f.texts.findIndex(k=>k.id===t.id);v!==-1&&(f.texts[v]=n),console.log("PracticePage èª¿è©¦ï¼šè£œæŠ“ä¾†æºæ–‡ç« æˆåŠŸ",JSON.stringify({textId:n.id,sourceId:n.source_text?.id,sourceTitle:n.source_text?.title,source_text:n.source_text},null,2))}}Ae(()=>r.value?.source_text_id,t=>{const e=r.value;!e||!t||e.source_text||xe(e)});function We(t){if(i.value){m.value="å·²æäº¤ï¼å¦‚è¦å†æ¬¡å˜—è©¦è«‹é»æ“Šã€Œé‡æ–°æŒ‘æˆ°ã€";return}const e=new Set(h.value),s=e.has(t);if(!s&&!ye.value){Ge(),m.value="å¥è±†ç”¨å®Œäº†ï¼è«‹å…ˆç§»é™¤å¤šé¤˜çš„æ–·å¥ã€‚";return}h.value.size===0&&!j&&!ae.value&&Ee(),s?(e.delete(t),oe("remove")):(e.add(t),oe("add"),ge(10)),h.value=e,m.value=null}function Ge(){le.value=!0,oe("remove"),ge(50),setTimeout(()=>{le.value=!1},400)}function Xe(t){if(!i.value){const e=t>0&&h.value.has(t-1),s=h.value.has(t);if(e&&s)return"translateX(0)";if(e)return"translateX(4px)";if(s)return"translateX(-4px)"}return"translateX(0)"}function Je(t){const e=[],s=h.value.has(t);if(s&&e.push("has-bean"),i.value&&s){const n=i.value.statuses.find(v=>v.index===t);n&&(n.state==="correct"||n.state==="extra")&&e.push(n.state)}return e}function Fe(t){return`${t} è±†`}function Ke(t){return`${Math.round(t*100)}%`}function we(t){return t.content.replace(/\|/g,"").slice(0,30)+"..."}function Qe(t,e){return A.calculateScore({correctCount:t,totalBreaks:$.value.size,charCount:T.value.length,elapsedSeconds:e})}async function Ye(){if(!r.value)return;if(!h.value.size){m.value="è‡³å°‘è¨­å®šä¸€å€‹æ–·å¥ä½ç½®å†æäº¤å”·ï¼";return}se.value++;const t=[];let e=0,s=0,n=0;for(let g=0;g<=T.value.length;g++){const O=h.value.has(g),M=$.value.has(g);O&&M?(t.push({index:g,state:"correct"}),e++):!O&&M?(t.push({index:g,state:"missed"}),s++):O&&!M?(t.push({index:g,state:"extra"}),n++):t.push({index:g,state:"pending"})}const v=$.value.size?e/$.value.size:h.value.size?0:1,k=s===0&&n===0;X(),ae.value=!0;const F=N.value;se.value===1&&(me.value=v,fe.value=F);const{score:z,breakdown:ue}=Qe(e,F);if(i.value={statuses:t,accuracy:v,elapsed:F,score:z,isComplete:k,breakdown:ue},k){et();const g=ue.speedBonus>0?` + é€Ÿåº¦çå‹µ ${ue.speedBonus}`:"";m.value=`ğŸ‰ å…¨å°ï¼æ­£ç¢º ${e} è±†${g} = ${z} è±†`}else m.value=`æ­£ç¢º ${e} å€‹ï¼Œéºæ¼ ${s} å€‹ï¼Œå¤šé¤˜ ${n} å€‹ â†’ ç²å¾— ${z} è±†`;try{te.value=!0;const g=p.isAuthenticated?p.user?.email?.split("@")[0]||"user":Ne.value,O=p.isAuthenticated?p.displayName:Le.value,M=await f.recordPracticeResult({text_id:r.value.id,score:z,accuracy:v,elapsed_seconds:F,user_breaks:h.value.size,correct_breaks:$.value.size,username:g,display_name:O,user_id:p.user?.id||null});if(p.isAuthenticated){const P=await A.recordPracticeScore({textId:r.value.id,score:z,textTitle:r.value.title});if(i.value&&(i.value.beansEarned=P.beansEarned,i.value.isNewRecord=P.isNewRecord),P.beansEarned>0){const lt=P.isNewRecord?" (æ–°ç´€éŒ„!)":"";m.value=`${m.value}${lt} å¯¦å¾— +${P.beansEarned} è±†`;const Be=await w.checkAndUnlockAvatars(A.level);Be.length>0&&setTimeout(()=>{m.value=`ğŸ‰ è§£é–æ–°é ­åƒï¼š${Be.map(ot=>ot.name).join("ã€")}`},2e3)}else P.beansEarned===0&&!P.isNewRecord&&(m.value=`${m.value}ï¼ˆæœªè¶…éå€‹äººæœ€é«˜è¨˜éŒ„ï¼Œä¸åŠ åˆ†ï¼‰`)}de.value&&p.isAuthenticated&&M&&await Z.recordCompletion(de.value,M,z,v*100)}catch(g){console.warn("è¨˜éŒ„ç·´ç¿’çµæœå¤±æ•—",g)}finally{te.value=!1}}function Ze(){r.value&&re(r.value)}function et(){if(B.value||ke(),!B.value)return;const t=B.value,e=t.createOscillator(),s=t.createGain();e.connect(s),s.connect(t.destination),e.frequency.setValueAtTime(400,t.currentTime),e.frequency.exponentialRampToValueAtTime(600,t.currentTime+.1),e.frequency.exponentialRampToValueAtTime(800,t.currentTime+.2),s.gain.setValueAtTime(.3,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),e.start(t.currentTime),e.stop(t.currentTime+.3)}function tt(){if(!T.value.length)return[];const t=[];let e="",s=-1;for(let n=0;n<T.value.length;n++)if(e+=T.value[n],$.value.has(n)){const v=n-s;s=n,v>=8?(e+="ã€‚",t.push(e),e=""):v>=4?e+="ï¼Œ":e+="ã€"}return e.trim()&&(!e.endsWith("ã€‚")&&!e.endsWith("ï¼Œ")&&!e.endsWith("ã€")&&(e+="ã€‚"),t.push(e)),t.length===0&&T.value.length>0?[T.value.join("")+"ã€‚"]:t}let q=!1;function Ce(){q=!0,St(),V.value=!1}const $e={voice:"zh-CN-XiaoxiaoNeural",rate:.75};async function st(){if(!T.value.length)return;if(V.value){Ce();return}V.value=!0,q=!1;const t=tt();try{for(let e=0;e<t.length&&!q;e++){const s=t[e+1];s&&xt(s,$e);const n=t[e];n&&await wt(n,$e)}}catch(e){console.error("TTS æ’­æ”¾å¤±æ•—:",e),q||alert("èªéŸ³æœ—è®€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{V.value=!1,q=!1}}function at(){r.value&&re(r.value)}return ct(()=>{Ue()}),dt(()=>{X(),Ce()}),(t,e)=>(l(),o("div",jt,[a("section",qt,[a("div",{class:"picker-header",onClick:e[0]||(e[0]=s=>L.value=!L.value)},[a("div",Ot,[e[3]||(e[3]=a("span",{class:"picker-icon"},"ğŸ“–",-1)),a("div",Et,[a("span",Ut,u(je.value),1),r.value?(l(),o("span",Dt,[S(u(r.value.author||"ä½šå")+" ",1),r.value.source?(l(),o("span",Ht," Â· "+u(r.value.source),1)):d("",!0)])):d("",!0)])]),a("button",{class:y(["picker-toggle",{expanded:L.value}])},[...e[4]||(e[4]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M6 9l6 6 6-6"})],-1)])],2)]),L.value?(l(),o("div",Wt,[a("div",Gt,[vt(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>I.value=s),type:"text",placeholder:"æœç´¢æ–‡ç« æ¨™é¡Œã€ä½œè€…...",class:"search-input"},null,512),[[mt,I.value]])]),I.value.trim()?(l(),o("div",Xt,[Te.value.length?d("",!0):(l(),o("div",Jt," æ‰¾ä¸åˆ°ç¬¦åˆã€Œ"+u(I.value)+"ã€çš„æ–‡ç«  ",1)),(l(!0),o(_,null,E(Te.value,s=>(l(),o("div",{key:s.id,class:"picker-item",onClick:n=>J(s)},[a("div",Kt,[a("span",Qt,u(s.title),1),a("span",Yt,u(s.author||"ä½šå"),1)]),a("span",Zt,u(we(s)),1)],8,Ft))),128))])):(l(),o("div",es,[a("div",ts,[e[5]||(e[5]=a("label",{class:"grade-filter-label"},"åˆ†é¡",-1)),a("div",ss,[(l(!0),o(_,null,E(ne.value,s=>(l(),o("button",{key:s.id,class:y(["grade-tag",{active:C.value===s.id}]),onClick:n=>C.value=s.id},u(s.name),11,as))),128))])]),a("div",ls,[C.value?be.value.length?d("",!0):(l(),o("div",ns," æ­¤åˆ†é¡å°šç„¡æ–‡ç«  ")):(l(),o("div",os," è«‹é¸æ“‡åˆ†é¡ä»¥æŸ¥çœ‹æ–‡ç«  ")),(l(!0),o(_,null,E(be.value,s=>(l(),o("div",{key:s.id,class:y(["picker-item",{active:r.value?.id===s.id}]),onClick:n=>J(s)},[a("div",rs,[a("span",us,u(s.title),1),a("span",cs,u(s.author||"ä½šå"),1),a("span",{class:y(["item-difficulty",`diff-${s.difficulty}`])},u(s.difficulty===1?"åˆç´š":s.difficulty===2?"ä¸­ç´š":"é«˜ç´š"),3)]),a("span",ds,u(we(s)),1)],10,is))),128))])]))])):d("",!0)]),a("div",vs,[a("button",{class:"edamame-btn edamame-btn-secondary",onClick:at,disabled:!r.value}," é‡æ–°é–‹å§‹ ",8,ms),a("button",{class:"edamame-btn edamame-btn-primary",onClick:Se}," éš¨æ©Ÿä¸€ç¯‡ ")]),a("section",fs,[r.value?(l(),o("div",ps,[a("div",hs,[pe.value?(l(),o("button",{key:0,class:"board-hint source-link-button",type:"button",onClick:De}," é–±è®€å®Œæ•´åŸæ–‡ ")):(l(),o("p",_s,"é»æ“Šå­—é–“ç©ºéš™ç¨®ä¸‹å¥è±†ä¾†æ–·å¥")),a("div",ys,[i.value?.isComplete?(l(),o("button",{key:0,class:y(["tts-btn-small",{playing:V.value}]),onClick:st},[(l(),ce(ft(V.value?Q(bt):Q(Tt)),{size:16,"stroke-width":1.5})),a("span",null,u(V.value?" åœæ­¢":" æœ—è®€"),1)],2)):d("",!0),a("div",{class:y(["bean-inventory",{shake:le.value,empty:!ye.value}])},[(l(!0),o(_,null,E(he.value,s=>(l(),o("span",{key:s,class:y(["inventory-bean",{used:s>_e.value}])},null,2))),128))],2),h.value.size>0||i.value?(l(),o("span",ks,[Y(Q(Bt),{size:14,"stroke-width":1.5}),a("span",null,u(N.value)+" ç§’",1)])):d("",!0)])]),T.value.length?(l(),o("div",gs,[(l(!0),o(_,null,E(T.value,(s,n)=>(l(),o("span",{key:n,class:"char-unit"},[a("span",{class:"char",style:Pe({transform:Xe(n)})},u(s),5),n<T.value.length-1?(l(),o("button",{key:0,class:y(["bean-slot",Je(n)]),onPointerdown:Re(v=>We(n),["prevent"]),"aria-label":`åœ¨ã€Œ${s}ã€å¾Œ${h.value.has(n)?"ç§»é™¤":"æ·»åŠ "}æ–·å¥`},[h.value.has(n)?(l(),o("span",Ts)):d("",!0),e[6]||(e[6]=a("span",{class:"bean-hint"},null,-1))],42,bs)):d("",!0)]))),128))])):(l(),o("div",Ss,"å°šç„¡å¯é¡¯ç¤ºçš„æ–‡å­—å…§å®¹ã€‚")),a("div",xs,[i.value?(l(),o("button",{key:1,class:"edamame-btn edamame-btn-lg edamame-btn-secondary",onClick:Ze},[Y(Q(It),{size:18,"stroke-width":1.5}),e[7]||(e[7]=a("span",null," é‡æ–°æŒ‘æˆ°",-1))])):(l(),o("button",{key:0,class:"edamame-btn edamame-btn-lg edamame-btn-primary",disabled:te.value,onClick:Ye}," æäº¤ç­”æ¡ˆ ",8,ws))]),m.value?(l(),o("p",{key:2,class:y(["toast",{success:i.value?.isComplete}])},u(m.value),3)):d("",!0)])):(l(),o("div",Cs,[...e[8]||(e[8]=[a("p",null,"è«‹å¾ä¸Šæ–¹é¸æ“‡ç·´ç¿’ç´ æï¼Œæˆ–é»æ“Šã€Œéš¨æ©Ÿä¸€ç¯‡ã€é–‹å§‹ç·´ç¿’",-1)])]))]),a("section",$s,[a("article",Bs,[e[9]||(e[9]=a("p",{class:"result-label"},"æœ¬æ¬¡å¾—åˆ†",-1)),a("p",{class:y(["result-value",{placeholder:!i.value}])},u(i.value?Fe(i.value.score):"--"),3),a("p",As,[i.value?.breakdown?(l(),o(_,{key:0},[S(" æ­£ç¢º "+u(i.value.breakdown.baseScore)+" è±† ",1),i.value.breakdown.speedBonus>0?(l(),o(_,{key:0},[S(" + é€Ÿåº¦ "+u(i.value.breakdown.speedBonus)+" è±† ",1)],64)):d("",!0)],64)):(l(),o(_,{key:1},[S(" å°å¹¾å€‹å¾—å¹¾è±† ")],64))])]),a("article",Is,[e[10]||(e[10]=a("p",{class:"result-label"},"æ­£ç¢ºç‡",-1)),a("p",{class:y(["result-value",{placeholder:!i.value}])},u(i.value?Ke(i.value.accuracy):"--"),3),a("p",Vs,[i.value?(l(),o(_,{key:0},[S(u(i.value.isComplete?"ğŸ‰ å…¨å°ï¼":"ç¹¼çºŒåŠ æ²¹"),1)],64)):(l(),o(_,{key:1},[S(" æ­£ç¢ºæ•¸ Ã· ç¸½æ–·å¥æ•¸ ")],64))])]),a("article",Ps,[e[11]||(e[11]=a("p",{class:"result-label"},"ç”¨æ™‚",-1)),a("p",{class:y(["result-value",{placeholder:!i.value}])},u(i.value?`${i.value.elapsed} ç§’`:"--"),3),a("p",Rs,[i.value?.breakdown?(l(),o(_,{key:0},[S(" åŸºæº– "+u(i.value.breakdown.baseTime)+" ç§’ ",1),i.value.breakdown.speedBonus>0?(l(),o(_,{key:0},[S(" Â· ç¯€çœ "+u(i.value.breakdown.baseTime-i.value.elapsed)+" ç§’ ",1)],64)):d("",!0)],64)):(l(),o(_,{key:1},[S(" å…¨å°æ‰æœ‰é€Ÿåº¦çå‹µ ")],64))])]),a("article",zs,[e[12]||(e[12]=a("p",{class:"result-label"},"å¯¦å¾—å¥è±†",-1)),a("p",{class:y(["result-value",{placeholder:!i.value||i.value.beansEarned===void 0}])},u(i.value?.beansEarned!==void 0?`+${i.value.beansEarned}`:"--"),3),a("p",Ms,[i.value?.beansEarned!==void 0?(l(),o(_,{key:0},[i.value.isNewRecord?(l(),o("span",Ns,"ğŸ† æ–°ç´€éŒ„ï¼")):i.value.beansEarned===0?(l(),o("span",Ls,"æœªè¶…éå€‹äººæœ€é«˜è¨˜éŒ„")):(l(),o("span",js,"å¢é‡åŠ åˆ†"))],64)):(l(),o(_,{key:1},[S(" ç™»å…¥å¾Œè¨˜éŒ„ ")],64))])])]),Y(Lt,{modelValue:W.value,"onUpdate:modelValue":e[2]||(e[2]=s=>W.value=s),title:r.value?.source_text?.title||"è¼‰å…¥ä¸­...",icon:"ğŸ“–",size:"full","no-padding":!0,onClose:He},{default:Ve(()=>[G.value?(l(),ce(Ct,{key:0,"text-id-prop":G.value,"hide-back-button":!0},null,8,["text-id-prop"])):d("",!0)]),_:1},8,["modelValue","title"])]))}}),Ys=ze(qs,[["__scopeId","data-v-3047cd68"]]);export{Ys as default};
