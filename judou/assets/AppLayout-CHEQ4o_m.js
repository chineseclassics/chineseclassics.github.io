import{d as x,u as G,c as u,r as S,w as I,o as O,a as l,b as e,e as _,n as b,f as d,t as o,g as T,F as m,h as f,i as W,j as C,k as w,l as j,m as M,p as q,q as a,_ as B,s as N}from"./index-Bakowwg8.js";import{u as D}from"./userStatsStore-EzcMxeqH.js";import{u as J}from"./assignmentStore-D2tPs3GS.js";const K={class:"sidebar-shell edamame-glass"},Q=["src","alt"],X={key:1},Y={key:2,class:"level-badge"},Z={class:"brand-info"},ee={class:"brand-title"},te={key:0,class:"brand-stats"},se={class:"beans-display"},ae={class:"level-display"},le={key:1,class:"brand-subtitle"},ne={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},oe={key:0,class:"user-menu-dropdown"},ie={class:"sidebar-section"},de={class:"item-title"},ce={key:0,class:"badge"},re={key:1,class:"edamame-sidebar-item disabled"},ue={class:"item-title"},_e={key:1,class:"sidebar-section"},he={class:"item-title"},pe={key:1,class:"edamame-sidebar-item disabled"},ve={class:"item-title"},be={class:"sidebar-section"},me={class:"edamame-sidebar-item disabled"},fe={class:"item-title"},ye=x({__name:"SidebarMenu",setup(V){const t=G(),h=D(),c=J(),U=W(),z=[{label:"ä¸»é ",to:{name:"home"}},{label:"ç·´ç¿’",to:{name:"practice"}},{label:"æˆ‘çš„ç­ç´š",to:{name:"my-classes"}},{label:"æŽ’è¡Œæ¦œ",to:{name:"leaderboard"}},{label:"æ­·å²ç´€éŒ„",to:{name:"history"}}],L=[{label:"è¨­å®š",disabled:!0},{label:"åé¥‹",disabled:!0}],F=[{label:"æ–‡ç« ç®¡ç†",to:{name:"admin-texts"},teacherOnly:!0}],y=u(()=>t.isAuthenticated?F.filter(i=>!i.teacherOnly||t.isTeacher):[]),$=q(),g=i=>i.to?$.name===i.to.name:!1,p=u(()=>t.isAuthenticated?t.displayName||"è±†å‹":"è¨ªå®¢"),H=u(()=>p.value.charAt(0)),P=u(()=>h.stats?.beans??0),k=u(()=>h.level),v=S(!1);async function R(){await t.loginWithGoogle()}function E(){t.isAuthenticated?U.push({name:"profile"}):v.value=!v.value}const r=S(0);return I(()=>t.isAuthenticated,i=>{i?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥çµ±è¨ˆ"),h.fetchStats(),t.isStudent&&c.fetchStudentAssignments().then(()=>{c.getPendingCount().then(n=>{r.value=n})})):r.value=0},{immediate:!0}),O(()=>{t.isAuthenticated&&t.isStudent&&c.fetchStudentAssignments().then(()=>{c.getPendingCount().then(i=>{r.value=i})})}),(i,n)=>{const A=M("router-link");return a(),l("aside",K,[e("div",{class:"sidebar-brand",onClick:E},[e("div",{class:b(["brand-avatar",{"has-avatar":d(t).avatarUrl}])},[d(t).avatarUrl?(a(),l("img",{key:0,src:d(t).avatarUrl,alt:p.value},null,8,Q)):(a(),l("span",X,o(H.value),1)),d(t).isAuthenticated?(a(),l("div",Y,o(k.value),1)):_("",!0)],2),e("div",Z,[e("p",ee,o(p.value),1),d(t).isAuthenticated?(a(),l("p",te,[e("span",se,"ðŸ«˜ "+o(P.value),1),e("span",ae,"Lv."+o(k.value),1)])):(a(),l("p",le,"é»žæ“Šç™»å…¥"))]),d(t).isAuthenticated?(a(),l("svg",ne,[...n[0]||(n[0]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):_("",!0)]),v.value&&!d(t).isAuthenticated?(a(),l("div",oe,[e("button",{class:"login-btn",onClick:R},[...n[1]||(n[1]=[T('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-0185eff0><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-0185eff0></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-0185eff0></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-0185eff0></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-0185eff0></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):_("",!0),e("nav",ie,[n[2]||(n[2]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(a(),l(m,null,f(z,s=>e("li",{key:s.label},[s.to&&!s.disabled?(a(),C(A,{key:0,class:b(["edamame-sidebar-item",{active:g(s)}]),to:s.to},{default:w(()=>[e("p",de,[j(o(s.label)+" ",1),s.label==="æˆ‘çš„ç­ç´š"&&d(t).isStudent&&r.value>0?(a(),l("span",ce,o(r.value),1)):_("",!0)])]),_:2},1032,["class","to"])):(a(),l("div",re,[e("p",ue,o(s.label),1)]))])),64))])]),y.value.length>0?(a(),l("nav",_e,[n[3]||(n[3]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(a(!0),l(m,null,f(y.value,s=>(a(),l("li",{key:s.label},[s.to&&!s.disabled?(a(),C(A,{key:0,class:b(["edamame-sidebar-item",{active:g(s)}]),to:s.to},{default:w(()=>[e("p",he,o(s.label),1)]),_:2},1032,["class","to"])):(a(),l("div",pe,[e("p",ve,o(s.label),1)]))]))),128))])])):_("",!0),e("nav",be,[n[4]||(n[4]=e("p",{class:"section-label"},"æ›´å¤š",-1)),e("ul",null,[(a(),l(m,null,f(L,s=>e("li",{key:s.label},[e("div",me,[e("p",fe,o(s.label),1)])])),64))])]),n[5]||(n[5]=e("div",{class:"sidebar-footer"},[e("p",null,"ç‰ˆæœ¬ 2.0 Vue"),e("p",{class:"item-desc"},"Supabase + PWA Ready")],-1))])}}}),ge=B(ye,[["__scopeId","data-v-0185eff0"]]),ke={class:"app-layout"},Ae={class:"app-main"},Se={class:"app-content"},Ce=x({__name:"AppLayout",setup(V){return(t,h)=>{const c=M("router-view");return a(),l("div",ke,[N(ge),e("section",Ae,[e("div",Se,[N(c)])])])}}}),Me=B(Ce,[["__scopeId","data-v-a70dcd22"]]);export{Me as default};
