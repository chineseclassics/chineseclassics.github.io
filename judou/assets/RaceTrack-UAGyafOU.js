import{T as v}from"./TeamBadge-Bi2iT5zQ.js";import{d as S,c as l,a as c,g as s,h as i,k as T,F as h,j as m,n as y,b as g,m as k,t,o as r,_ as A}from"./index-58xMK0we.js";const z={class:"race-track-container"},C={class:"racer-rank-badge"},B={class:"racer-score-label"},M={class:"racer-tooltip"},R={class:"tooltip-name"},F={class:"tooltip-score"},V={key:0,class:"tooltip-members"},N={key:0,class:"rankings-info"},$={class:"ranking-number"},w={class:"ranking-name"},j={class:"ranking-score"},D=S({__name:"RaceTrack",props:{teams:{},maxScore:{default:void 0},height:{default:120},racerSize:{default:48},showRankings:{type:Boolean,default:!1}},setup(d){const o=d,p=l(()=>[...o.teams].sort((a,n)=>n.displayAvg-a.displayAvg)),u=l(()=>{if(o.maxScore!==void 0&&o.maxScore>0)return o.maxScore;const a=o.teams.map(e=>e.displayAvg);return Math.max(...a,1)}),_=l(()=>({height:typeof o.height=="number"?`${o.height}px`:o.height}));function b(a){const n=u.value>0?Math.max(5,Math.min(95,a.displayAvg/u.value*90+5)):5,e=(a.rank-1)*.3,f=n+e,x=(a.id.charCodeAt(0)%3-1)*4;return{left:`${f}%`,transform:`translate(-50%, calc(-50% + ${x}px))`}}return(a,n)=>(r(),c("div",z,[s("div",{class:"race-track",style:y(_.value)},[n[0]||(n[0]=T('<div class="track-start" data-v-54a05b0b><span class="start-label" data-v-54a05b0b>起點</span></div><div class="track-finish" data-v-54a05b0b><span class="finish-label" data-v-54a05b0b>終點</span><div class="finish-line" data-v-54a05b0b></div></div>',2)),(r(!0),c(h,null,m(p.value,e=>(r(),c("div",{key:e.id,class:g(["team-racer",{"my-team":e.isMyTeam,"is-first":e.rank===1}]),style:y(b(e))},[e.productType?(r(),k(v,{key:0,"product-type":e.productType,size:d.racerSize,class:"racer-badge"},null,8,["product-type","size"])):i("",!0),s("div",C,t(e.rank),1),s("div",B,t(e.displayAvg.toFixed(1)),1),s("div",M,[s("div",R,t(e.name),1),s("div",F,"平均分: "+t(e.displayAvg.toFixed(2)),1),e.memberCount?(r(),c("div",V,t(e.completedCount)+"/"+t(e.memberCount)+" 完成 ",1)):i("",!0)])],6))),128))],4),d.showRankings?(r(),c("div",N,[(r(!0),c(h,null,m(p.value,e=>(r(),c("div",{key:e.id,class:g(["ranking-item",{"my-team":e.isMyTeam}])},[s("span",$,"#"+t(e.rank),1),e.productType?(r(),k(v,{key:0,"product-type":e.productType,size:24,class:"ranking-badge"},null,8,["product-type"])):i("",!0),s("span",w,t(e.name),1),s("span",j,t(e.displayAvg.toFixed(2)),1)],2))),128))])):i("",!0)]))}}),L=A(D,[["__scopeId","data-v-54a05b0b"]]);export{L as R};
