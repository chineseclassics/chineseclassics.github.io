import{d as E,u as N,r as u,o as U,w as A,c as f,a,b as M,e as r,f as C,t as p,n as V,g as R,h as _,i as h,j as y,v as k,k as S,l as g,_ as H}from"./index-CvCMB_4W.js";import{B as b}from"./BeanIcon-CIeFoDXi.js";import{c as w}from"./createLucideIcon-DAHcjnFf.js";const I=w("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const T=w("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);const W=w("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),G={class:"login-page edamame-bg"},j={class:"login-layout"},D={class:"login-left sprout-up"},F={class:"intro-card edamame-glass"},P={class:"intro-features"},$={class:"feature-item"},J={class:"feature-item"},K={class:"feature-item"},O={class:"feature-item"},Q={class:"login-right sprout-up",style:{"animation-delay":"0.1s"}},X={class:"auth-card edamame-glass"},Y={class:"auth-header"},Z={class:"auth-title"},ee={class:"auth-subtitle"},ae=["disabled"],se={key:0,class:"form-group"},te={class:"form-label"},le=["disabled"],oe={class:"form-group"},ie={class:"form-label"},ne=["disabled"],de={class:"form-group"},ue={class:"form-label"},re=["disabled"],ce=["disabled"],ve={key:0},pe={key:1},me={class:"auth-footer"},fe=["disabled"],ge=E({__name:"LoginPage",setup(he){const c=S(),i=N(),L="/judou/images/bean-icon.png",t=u(!0),n=u(""),d=u(""),m=u(""),l=u(!1),s=u("");function x(){t.value=!t.value,s.value="",n.value="",d.value="",m.value=""}async function B(){l.value=!0,s.value="";try{!await i.loginWithGoogle()&&i.error&&(s.value=i.error)}catch(v){s.value=v.message||"登入失敗，請稍後再試"}finally{l.value=!1}}async function q(){if(!n.value||!d.value){s.value="請填寫所有必填欄位";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value)){s.value="請輸入有效的郵箱地址";return}if(d.value.length<6){s.value="密碼長度至少需要 6 個字符";return}if(!t.value&&!m.value.trim()){s.value="請輸入顯示名稱";return}l.value=!0,s.value="";try{let e;if(t.value?e=await i.signInWithEmail(n.value,d.value):e=await i.signUpWithEmail(n.value,d.value,m.value),e.success){if(!t.value&&e.needsEmailConfirmation){s.value="✅ "+(e.message||"請檢查您的郵箱以確認註冊"),setTimeout(()=>{x()},3e3);return}const o=c.currentRoute.value.query.redirect;o?c.push(o):c.push({name:"home"})}else s.value=e.error||"操作失敗，請稍後再試"}catch(e){s.value=e.message||"操作失敗，請稍後再試"}finally{l.value=!1}}const z=u(!1);return U(()=>{setTimeout(()=>{z.value=!0},100)}),A(()=>i.isAuthenticated,v=>{if(v&&!i.loading){const e=c.currentRoute.value.query.redirect;e?c.push(e):c.push({name:"home"})}},{immediate:!0}),(v,e)=>(g(),f("div",G,[a("div",{class:V(["login-container",{loaded:z.value}])},[a("div",j,[a("div",D,[a("div",{class:"logo-section"},[a("div",{class:"logo-wrapper"},[a("img",{src:L,alt:"句豆",class:"logo-icon"})]),e[3]||(e[3]=a("h1",{class:"app-title"},"句豆",-1)),e[4]||(e[4]=a("p",{class:"app-subtitle"},"古文閱讀與斷句練習",-1))]),a("div",F,[e[9]||(e[9]=a("h2",{class:"intro-title"},"用句讀的方式學習古文",-1)),e[10]||(e[10]=a("p",{class:"intro-text"}," 句豆是一個古文學習平臺，用游戲化的方式，結合傳統的句讀方法， 提供斷句練習與古文閱讀功能，幫助您深入理解古文的語義和結構，提升閱讀能力。 ",-1)),a("div",P,[a("div",$,[r(b,{size:18}),e[5]||(e[5]=a("span",null,"斷句練習",-1))]),a("div",J,[r(b,{size:18}),e[6]||(e[6]=a("span",null,"閱讀模式",-1))]),a("div",K,[r(b,{size:18}),e[7]||(e[7]=a("span",null,"班級對戰",-1))]),a("div",O,[r(b,{size:18}),e[8]||(e[8]=a("span",null,"進度追蹤",-1))])])])]),a("div",Q,[a("div",X,[a("div",Y,[a("h2",Z,p(t.value?"登入":"註冊"),1),a("p",ee,p(t.value?"歡迎回來":"開始您的學習之旅"),1)]),s.value?(g(),f("div",{key:0,class:V(["error-message",{success:s.value.startsWith("✅")}])},p(s.value),3)):C("",!0),a("button",{onClick:B,disabled:l.value,class:"auth-btn google-btn edamame-btn edamame-btn-primary"},[...e[11]||(e[11]=[M('<svg class="google-icon" viewBox="0 0 24 24" width="20" height="20" data-v-defac805><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-defac805></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-defac805></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-defac805></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-defac805></path></svg><span data-v-defac805>使用 Google 登入</span>',2)])],8,ae),e[15]||(e[15]=a("div",{class:"divider"},[a("span",null,"或")],-1)),a("form",{onSubmit:R(q,["prevent"]),class:"email-form"},[t.value?C("",!0):(g(),f("div",se,[a("label",te,[r(y(W),{class:"label-icon",size:18}),e[12]||(e[12]=h(" 顯示名稱 ",-1))]),_(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),type:"text",class:"edamame-input",placeholder:"請輸入您的顯示名稱",disabled:l.value},null,8,le),[[k,m.value]])])),a("div",oe,[a("label",ie,[r(y(T),{class:"label-icon",size:18}),e[13]||(e[13]=h(" 郵箱 ",-1))]),_(a("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),type:"email",class:"edamame-input",placeholder:"請輸入您的郵箱",disabled:l.value,required:""},null,8,ne),[[k,n.value]])]),a("div",de,[a("label",ue,[r(y(I),{class:"label-icon",size:18}),e[14]||(e[14]=h(" 密碼 ",-1))]),_(a("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),type:"password",class:"edamame-input",placeholder:"請輸入您的密碼（至少 6 個字符）",disabled:l.value,required:""},null,8,re),[[k,d.value]])]),a("button",{type:"submit",disabled:l.value,class:"auth-btn submit-btn edamame-btn edamame-btn-primary"},[l.value?(g(),f("span",pe,"處理中...")):(g(),f("span",ve,p(t.value?"登入":"註冊"),1))],8,ce)],32),a("div",me,[a("p",null,[h(p(t.value?"還沒有帳號？":"已經有帳號？")+" ",1),a("button",{onClick:x,class:"toggle-btn",disabled:l.value},p(t.value?"立即註冊":"立即登入"),9,fe)])])])])])],2),e[16]||(e[16]=M('<div class="login-footer" data-v-defac805><p class="footer-text" data-v-defac805><span data-v-defac805>© 2025 太虛幻境</span><span class="footer-separator" data-v-defac805>·</span><span data-v-defac805>開發：汪涵屹、張老師</span><span class="footer-separator" data-v-defac805>·</span><span data-v-defac805>美術：丁奕辰、徐揚洋</span><span class="footer-separator" data-v-defac805>·</span><span data-v-defac805>書院中文經典</span></p></div>',1))]))}}),ke=H(ge,[["__scopeId","data-v-defac805"]]);export{ke as default};
