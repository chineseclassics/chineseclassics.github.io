import{d as x,u as E,c as u,r as k,w as G,o as I,a as n,b as e,e as h,n as b,f as c,t as l,g as O,F as A,h as S,i as T,j as C,k as w,l as W,m as M,p as j,q as s,_ as B,s as N}from"./index-goaX2Wav.js";import{u as q}from"./userStatsStore-D-RddQc4.js";import{u as D}from"./assignmentStore-Xi1wuKJm.js";const J={class:"sidebar-shell edamame-glass"},K=["src","alt"],Q={key:1},X={key:2,class:"level-badge"},Y={class:"brand-info"},Z={class:"brand-title"},ee={key:0,class:"brand-stats"},te={class:"beans-display"},se={class:"level-display"},ae={key:1,class:"brand-subtitle"},ne={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},oe={key:0,class:"user-menu-dropdown"},le={class:"sidebar-section"},ie={class:"item-title"},ce={key:0,class:"badge"},de={key:1,class:"edamame-sidebar-item disabled"},re={class:"item-title"},ue={key:1,class:"sidebar-section"},he={class:"item-title"},_e={key:1,class:"edamame-sidebar-item disabled"},pe={class:"item-title"},ve=x({__name:"SidebarMenu",setup(V){const t=E(),_=q(),d=D(),U=T(),z=[{label:"ä¸»é ",to:{name:"home"}},{label:"ç·´ç¿’",to:{name:"practice"}},{label:"æˆ‘çš„ç­ç´š",to:{name:"my-classes"}},{label:"æ­·å²ç´€éŒ„",to:{name:"history"}}],L=[{label:"æ–‡ç« ç®¡ç†",to:{name:"admin-texts"},teacherOnly:!0}],m=u(()=>t.isAuthenticated?L.filter(i=>!i.teacherOnly||t.isTeacher):[]),F=j(),f=i=>i.to?F.name===i.to.name:!1,p=u(()=>t.isAuthenticated?t.displayName||"è±†å‹":"è¨ªå®¢"),$=u(()=>p.value.charAt(0)),H=u(()=>_.stats?.beans??0),g=u(()=>_.level),v=k(!1);async function P(){await t.loginWithGoogle()}function R(){t.isAuthenticated?U.push({name:"profile"}):v.value=!v.value}const r=k(0);return G(()=>t.isAuthenticated,i=>{i?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥çµ±è¨ˆ"),_.fetchStats(),t.isStudent&&d.fetchStudentAssignments().then(()=>{d.getPendingCount().then(o=>{r.value=o})})):r.value=0},{immediate:!0}),I(()=>{t.isAuthenticated&&t.isStudent&&d.fetchStudentAssignments().then(()=>{d.getPendingCount().then(i=>{r.value=i})})}),(i,o)=>{const y=M("router-link");return s(),n("aside",J,[e("div",{class:"sidebar-brand",onClick:R},[e("div",{class:b(["brand-avatar",{"has-avatar":c(t).avatarUrl}])},[c(t).avatarUrl?(s(),n("img",{key:0,src:c(t).avatarUrl,alt:p.value},null,8,K)):(s(),n("span",Q,l($.value),1)),c(t).isAuthenticated?(s(),n("div",X,l(g.value),1)):h("",!0)],2),e("div",Y,[e("p",Z,l(p.value),1),c(t).isAuthenticated?(s(),n("p",ee,[e("span",te,"ðŸ«˜ "+l(H.value),1),e("span",se,"Lv."+l(g.value),1)])):(s(),n("p",ae,"é»žæ“Šç™»å…¥"))]),c(t).isAuthenticated?(s(),n("svg",ne,[...o[0]||(o[0]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):h("",!0)]),v.value&&!c(t).isAuthenticated?(s(),n("div",oe,[e("button",{class:"login-btn",onClick:P},[...o[1]||(o[1]=[O('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-5cf863be><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-5cf863be></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-5cf863be></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-5cf863be></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-5cf863be></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):h("",!0),e("nav",le,[o[2]||(o[2]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(s(),n(A,null,S(z,a=>e("li",{key:a.label},[a.to&&!a.disabled?(s(),C(y,{key:0,class:b(["edamame-sidebar-item",{active:f(a)}]),to:a.to},{default:w(()=>[e("p",ie,[W(l(a.label)+" ",1),a.label==="æˆ‘çš„ç­ç´š"&&c(t).isStudent&&r.value>0?(s(),n("span",ce,l(r.value),1)):h("",!0)])]),_:2},1032,["class","to"])):(s(),n("div",de,[e("p",re,l(a.label),1)]))])),64))])]),m.value.length>0?(s(),n("nav",ue,[o[3]||(o[3]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(s(!0),n(A,null,S(m.value,a=>(s(),n("li",{key:a.label},[a.to&&!a.disabled?(s(),C(y,{key:0,class:b(["edamame-sidebar-item",{active:f(a)}]),to:a.to},{default:w(()=>[e("p",he,l(a.label),1)]),_:2},1032,["class","to"])):(s(),n("div",_e,[e("p",pe,l(a.label),1)]))]))),128))])])):h("",!0),o[4]||(o[4]=e("div",{class:"sidebar-footer"},[e("p",null,"ç‰ˆæœ¬ 2.0 Vue"),e("p",{class:"item-desc"},"Supabase + PWA Ready")],-1))])}}}),be=B(ve,[["__scopeId","data-v-5cf863be"]]),me={class:"app-layout"},fe={class:"app-main"},ge={class:"app-content"},ye=x({__name:"AppLayout",setup(V){return(t,_)=>{const d=M("router-view");return s(),n("div",me,[N(be),e("section",fe,[e("div",ge,[N(d)])])])}}}),Ce=B(ye,[["__scopeId","data-v-a70dcd22"]]);export{Ce as default};
