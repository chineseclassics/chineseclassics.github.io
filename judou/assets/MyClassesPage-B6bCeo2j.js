import{v as re,u as ne,r as _,c as se,H as v,d as ue,x as te,o as oe,a as r,e as p,F as U,b as t,t as c,f as m,z as W,A as K,h as O,n as G,G as ae,l as le,B as de,i as ce,q as u,_ as ve}from"./index-Bakowwg8.js";import{u as me}from"./assignmentStore-D2tPs3GS.js";import{u as fe}from"./textsStore-ByfLE4oa.js";import"./useSupabase-DAGhbXvW.js";const _e=re("class",()=>{const h=ne(),o=_([]),k=_(null),b=_([]),$=_([]),g=_(!1),i=_(null),Q=/^[a-zA-Z0-9._-]+@student\.isf\.edu\.hk$/i,X=se(()=>o.value),Y=se(()=>o.value.filter(l=>l.is_active));async function z(l,a){if(!v||!h.user)return i.value="è«‹å…ˆç™»å…¥",null;if(!h.isTeacher)return i.value="åªæœ‰è€å¸«å¯ä»¥å‰µå»ºç­ç´š",null;g.value=!0,i.value=null;try{const{data:n,error:f}=await v.from("classes").insert({teacher_id:h.user.id,class_name:l,description:a||null}).select().single();return f?(i.value=f.message,null):(o.value.push(n),n)}catch(n){return i.value=n.message,null}finally{g.value=!1}}async function H(){if(!(!v||!h.user)){g.value=!0,i.value=null;try{const{data:l,error:a}=await v.from("classes").select(`
          *,
          member_count:class_members(count)
        `).eq("teacher_id",h.user.id).order("created_at",{ascending:!1});if(a){i.value=a.message;return}o.value=(l||[]).map(n=>({...n,member_count:n.member_count?.[0]?.count||0}))}catch(l){i.value=l.message}finally{g.value=!1}}}async function M(l){if(v){g.value=!0,i.value=null;try{const{data:a,error:n}=await v.from("class_members").select(`
          *,
          student:users!class_members_student_id_fkey (
            id,
            email,
            display_name,
            avatar_url
          )
        `).eq("class_id",l).order("added_at",{ascending:!1});if(n){i.value=n.message;return}b.value=a||[]}catch(a){i.value=a.message}finally{g.value=!1}}}async function y(l,a){if(!v||!h.isTeacher)return i.value="ç„¡æ¬Šé™",!1;g.value=!0,i.value=null;try{const{data:n,error:f}=await v.from("users").select("id").eq("email",a).single();if(f||!n)return i.value="æ‰¾ä¸åˆ°è©²å­¸ç”Ÿï¼Œè«‹ç¢ºèªéƒµç®±æ­£ç¢ºä¸”å­¸ç”Ÿå·²ç™»å…¥é",!1;const{error:T}=await v.from("class_members").insert({class_id:l,student_id:n.id,added_by:h.user?.id});return T?(T.code==="23505"?i.value="è©²å­¸ç”Ÿå·²åœ¨ç­ç´šä¸­":i.value=T.message,!1):(await M(l),!0)}catch(n){return i.value=n.message,!1}finally{g.value=!1}}async function C(l,a){if(!v||!h.isTeacher)return i.value="ç„¡æ¬Šé™",!1;g.value=!0,i.value=null;try{const{error:n}=await v.from("class_members").delete().eq("class_id",l).eq("student_id",a);return n?(i.value=n.message,!1):(b.value=b.value.filter(f=>!(f.class_id===l&&f.student_id===a)),!0)}catch(n){return i.value=n.message,!1}finally{g.value=!1}}function q(l){return l?l.split(/[\n,;]/).map(a=>a.trim().toLowerCase()).filter(a=>a!==""):[]}function S(l){const a=[],n=[];return l.forEach(f=>{Q.test(f)?a.push(f):n.push(f)}),{validEmails:a,invalidEmails:n}}async function L(l,a){if(!v||!h.isTeacher||!h.user)throw new Error("ç„¡æ¬Šé™");const n=q(a),{validEmails:f,invalidEmails:T}=S(n);if(f.length===0)throw new Error("æ²’æœ‰æœ‰æ•ˆçš„å­¸ç”Ÿéƒµç®±åœ°å€ã€‚è«‹ä½¿ç”¨ @student.isf.edu.hk æ ¼å¼");const{data:F}=await v.from("class_members").select("student:users!class_members_student_id_fkey(email)").eq("class_id",l),{data:I}=await v.from("pending_students").select("email").eq("class_id",l),Z=new Set([...F?.map(w=>w.student?.email).filter(Boolean)||[],...I?.map(w=>w.email)||[]]),ee=f.filter(w=>Z.has(w)),j=f.filter(w=>!Z.has(w));let J=0;for(const w of j)try{const{error:D}=await v.from("pending_students").insert({class_id:l,email:w,added_by:h.user.id});if(D){D.code==="23505"?console.log(`éƒµç®± ${w} å·²åœ¨å¾…åŠ å…¥åˆ—è¡¨ä¸­`):console.warn(`æ·»åŠ éƒµç®± ${w} å¤±æ•—:`,D);continue}J++}catch(D){console.warn(`è™•ç†éƒµç®± ${w} æ™‚å‡ºéŒ¯:`,D)}return{validEmails:f.length,invalidEmails:T.length,duplicates:ee.length,added:J,invalidList:T}}async function N(l){if(v)try{const{data:a,error:n}=await v.from("pending_students").select("*").eq("class_id",l).order("added_at",{ascending:!1});if(n){console.error("ç²å–å¾…æ¿€æ´»å­¸ç”Ÿå¤±æ•—:",n);return}$.value=a||[]}catch(a){console.error("ç²å–å¾…æ¿€æ´»å­¸ç”Ÿå¤±æ•—:",a)}}async function V(l){if(!v||!h.isTeacher)return i.value="ç„¡æ¬Šé™",!1;try{const{error:a}=await v.from("pending_students").delete().eq("id",l);return a?(i.value=a.message,!1):($.value=$.value.filter(n=>n.id!==l),!0)}catch(a){return i.value=a.message,!1}}async function E(l,a){if(!v||!h.isTeacher)return i.value="ç„¡æ¬Šé™",!1;g.value=!0,i.value=null;try{const{error:n}=await v.from("classes").update(a).eq("id",l).eq("teacher_id",h.user?.id);if(n)return i.value=n.message,!1;const f=o.value.findIndex(T=>T.id===l);return f!==-1&&(o.value[f]={...o.value[f],...a}),!0}catch(n){return i.value=n.message,!1}finally{g.value=!1}}async function B(l){if(!v||!h.isTeacher)return i.value="ç„¡æ¬Šé™",!1;g.value=!0,i.value=null;try{const{error:a}=await v.from("classes").delete().eq("id",l).eq("teacher_id",h.user?.id);return a?(i.value=a.message,!1):(o.value=o.value.filter(n=>n.id!==l),!0)}catch(a){return i.value=a.message,!1}finally{g.value=!1}}async function A(){if(!(!v||!h.user)){g.value=!0,i.value=null;try{const{data:l,error:a}=await v.from("class_members").select(`
          class:classes (
            id,
            class_name,
            description,
            created_at,
            is_active,
            teacher:users!classes_teacher_id_fkey (
              display_name
            )
          )
        `).eq("student_id",h.user.id);if(a){i.value=a.message;return}o.value=(l||[]).map(n=>n.class).filter(n=>n!==null)}catch(l){i.value=l.message}finally{g.value=!1}}}async function P(){h.isTeacher?await H():await A()}function x(){o.value=[],k.value=null,b.value=[],i.value=null}return{classes:o,currentClass:k,classMembers:b,pendingStudents:$,loading:g,error:i,myClasses:X,activeClasses:Y,createClass:z,fetchMyClasses:H,fetchClassMembers:M,addStudentByEmail:y,removeStudent:C,updateClass:E,deleteClass:B,batchAddStudents:L,fetchPendingStudents:N,removePendingStudent:V,fetchStudentClasses:A,fetchClasses:P,reset:x}}),he={class:"my-classes-container"},ge={class:"page-header"},pe={class:"page-subtitle"},ye={key:0,class:"create-form edamame-glass"},be={class:"form-group"},ke={class:"form-group"},Ce={class:"form-actions"},we=["disabled"],Te={key:1,class:"loading"},Se={key:2,class:"classes-grid"},Ee=["onClick"],Ae={class:"class-header"},xe={class:"class-name"},$e={class:"member-count"},Me={key:0,class:"class-desc"},qe={class:"class-footer"},Pe={class:"class-date"},De={key:3,class:"empty-state edamame-glass"},Le={key:0},Ne={key:1},Ve={class:"page-header"},Be={class:"header-with-back"},Ue={class:"page-title"},ze={class:"page-subtitle"},Fe={key:0,class:"tabs"},Re={key:1,class:"tab-content"},We={class:"section-header"},Ge={key:0,class:"empty-members edamame-glass"},He={key:1,class:"members-list"},Ze={class:"member-info"},je={class:"member-details"},Je={class:"member-name"},Ke={class:"member-email"},Oe={class:"member-actions"},Qe=["onClick"],Xe={key:2,class:"tab-content"},Ye={key:0,class:"loading"},Ie={key:1,class:"empty-assignments edamame-glass"},es={key:2,class:"assignments-list"},ss={class:"assignment-info"},ts={class:"assignment-title"},as={class:"assignment-meta"},ls={class:"assignment-date"},ns={class:"assignment-actions"},is={key:0,class:"completed-badge"},rs=["onClick"],us=["onClick"],os={key:3,class:"tab-content"},ds={class:"modal-content edamame-glass"},cs={key:0,class:"add-students-error"},vs={key:1,class:"add-students-success"},ms={class:"modal-actions"},fs=["disabled"],_s={class:"modal-content edamame-glass"},hs={class:"form-group"},gs=["value"],ps={class:"form-group"},ys={class:"modal-actions"},bs=["disabled"],ks=ue({__name:"MyClassesPage",setup(h){const o=ne(),k=_e(),b=me(),$=fe(),g=ce(),{classes:i,classMembers:Q,pendingStudents:X,loading:Y}=te(k),{assignments:z,loading:H}=te(b),M=_("list"),y=_(null),C=_("members"),q=_(!1),S=_(""),L=_(""),N=_(!1),V=_(!1),E=_(""),B=_(!1),A=_(null),P=_(null),x=_(!1),l=_(null),a=_(""),n=_(!1),f=se(()=>{const d=Q.value.map(s=>({id:s.id,email:s.student?.email||"æœªçŸ¥",displayName:s.student?.display_name||s.student?.email?.split("@")[0]||"æœªçŸ¥",status:"active",addedAt:s.added_at,student_id:s.student_id})),e=X.value.map(s=>({id:s.id,email:s.email,displayName:s.email.split("@")[0]||"æœªçŸ¥",status:"pending",addedAt:s.added_at,student_id:void 0}));return[...d,...e].sort((s,R)=>new Date(R.addedAt).getTime()-new Date(s.addedAt).getTime())});async function T(){if(S.value.trim()){N.value=!0;try{await k.createClass(S.value.trim(),L.value.trim()),S.value="",L.value="",q.value=!1}catch(d){console.error("å‰µå»ºç­ç´šå¤±æ•—:",d)}finally{N.value=!1}}}const F=_(new Map);async function I(d){if(y.value=d,M.value="detail",C.value=o.isTeacher?"members":"assignments",o.isTeacher)await Promise.all([k.fetchClassMembers(d.id),k.fetchPendingStudents(d.id),b.fetchClassAssignments(d.id)]);else if(await b.fetchClassAssignments(d.id),o.isStudent)for(const e of z.value){const s=await b.checkAssignmentCompletion(e.id);F.value.set(e.id,s)}}function Z(){M.value="list",y.value=null}async function ee(){if(!(!y.value||!E.value.trim())){B.value=!0,A.value=null,P.value=null;try{const d=await k.batchAddStudents(y.value.id,E.value);let e=`æˆåŠŸæ·»åŠ  ${d.added} åå­¸ç”Ÿ`;d.duplicates>0&&(e+=`ï¼Œ${d.duplicates} å€‹éƒµç®±å·²åœ¨ç­ç´šä¸­`),d.invalidEmails>0&&(e+=`ï¼Œ${d.invalidEmails} å€‹ç„¡æ•ˆéƒµç®±ï¼ˆéœ€ä½¿ç”¨ @student.isf.edu.hk æ ¼å¼ï¼‰`),P.value=e,await k.fetchPendingStudents(y.value.id),await k.fetchClassMembers(y.value.id),d.invalidEmails===0&&(E.value="")}catch(d){console.error("æ‰¹é‡æ·»åŠ å¤±æ•—:",d),A.value=d.message}finally{B.value=!1}}}function j(){V.value=!1,A.value=null,P.value=null}async function J(d){if(!y.value)return;const e=d.status==="pending"?"ç¢ºå®šè¦ç§»é™¤é€™å€‹å¾…æ¿€æ´»çš„å­¸ç”Ÿå—ï¼Ÿ":"ç¢ºå®šè¦å°‡æ­¤å­¸ç”Ÿå¾ç­ç´šä¸­ç§»é™¤å—ï¼Ÿ";confirm(e)&&(d.status==="pending"?await k.removePendingStudent(d.id):d.student_id&&await k.removeStudent(y.value.id,d.student_id))}async function w(){if(!(!y.value||!l.value)){n.value=!0;try{await b.createAssignment(y.value.id,l.value,a.value||void 0),l.value=null,a.value="",x.value=!1,await b.fetchClassAssignments(y.value.id)}catch(d){console.error("å¸ƒç½®ä½œæ¥­å¤±æ•—:",d)}finally{n.value=!1}}}async function D(d){confirm("ç¢ºå®šè¦åˆªé™¤é€™å€‹ä½œæ¥­å—ï¼Ÿ")&&(await b.deleteAssignment(d),y.value&&await b.fetchClassAssignments(y.value.id))}function ie(d){g.push({name:"practice",query:{textId:d.text_id,assignmentId:d.id}})}return oe(async()=>{o.isAuthenticated&&(o.isTeacher?await Promise.all([k.fetchMyClasses(),$.fetchTexts()]):await Promise.all([k.fetchStudentClasses(),b.fetchStudentAssignments()]))}),(d,e)=>(u(),r("main",he,[M.value==="list"?(u(),r(U,{key:0},[t("header",ge,[t("div",null,[e[17]||(e[17]=t("h1",{class:"page-title"},"æˆ‘çš„ç­ç´š",-1)),t("p",pe,c(m(o).isTeacher?"å‰µå»ºå’Œç®¡ç†ä½ çš„ç­ç´š":"æŸ¥çœ‹ç­ç´šå’Œä½œæ¥­"),1)]),m(o).isTeacher?(u(),r("button",{key:0,class:"create-btn",onClick:e[0]||(e[0]=s=>q.value=!0)}," + æ–°å»ºç­ç´š ")):p("",!0)]),q.value&&m(o).isTeacher?(u(),r("section",ye,[e[20]||(e[20]=t("h2",null,"æ–°å»ºç­ç´š",-1)),t("div",be,[e[18]||(e[18]=t("label",null,"ç­ç´šåç¨± *",-1)),W(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>S.value=s),type:"text",placeholder:"ä¾‹å¦‚ï¼šä¸ƒå¹´ç´šAç­",class:"form-input"},null,512),[[K,S.value]])]),t("div",ke,[e[19]||(e[19]=t("label",null,"ç­ç´šæè¿°",-1)),W(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>L.value=s),placeholder:"é¸å¡«ï¼Œç°¡å–®æè¿°é€™å€‹ç­ç´š",class:"form-textarea",rows:"2"},null,512),[[K,L.value]])]),t("div",Ce,[t("button",{class:"cancel-btn",onClick:e[3]||(e[3]=s=>q.value=!1)},"å–æ¶ˆ"),t("button",{class:"submit-btn",onClick:T,disabled:!S.value.trim()||N.value},c(N.value?"å‰µå»ºä¸­...":"å‰µå»ºç­ç´š"),9,we)])])):p("",!0),m(Y)?(u(),r("div",Te,"è¼‰å…¥ä¸­...")):m(i).length>0?(u(),r("section",Se,[(u(!0),r(U,null,O(m(i),s=>(u(),r("article",{key:s.id,class:"class-card edamame-glass",onClick:R=>I(s)},[t("div",Ae,[t("h3",xe,c(s.class_name),1),t("span",$e,c(m(o).isTeacher?`${s.member_count||0} åå­¸ç”Ÿ`:"æŸ¥çœ‹ä½œæ¥­"),1)]),s.description?(u(),r("p",Me,c(s.description),1)):p("",!0),t("div",qe,[t("span",Pe,c(m(o).isTeacher?"å‰µå»ºæ–¼":"åŠ å…¥æ–¼")+" "+c(new Date(s.created_at).toLocaleDateString("zh-TW")),1)])],8,Ee))),128))])):(u(),r("section",De,[e[21]||(e[21]=t("div",{class:"empty-icon"},"ğŸ“š",-1)),t("h2",null,c(m(o).isTeacher?"é‚„æ²’æœ‰ç­ç´š":"é‚„æ²’æœ‰åŠ å…¥ä»»ä½•ç­ç´š"),1),m(o).isTeacher?(u(),r("p",Le," é»æ“Šã€Œæ–°å»ºç­ç´šã€é–‹å§‹å‰µå»ºä½ çš„ç¬¬ä¸€å€‹ç­ç´š ")):(u(),r("p",Ne," ç­‰å¾…è€å¸«å°‡ä½ æ·»åŠ åˆ°ç­ç´šä¸­ ")),m(o).isTeacher?(u(),r("button",{key:2,class:"create-btn",onClick:e[4]||(e[4]=s=>q.value=!0)}," + æ–°å»ºç­ç´š ")):p("",!0)]))],64)):M.value==="detail"&&y.value?(u(),r(U,{key:1},[t("header",Ve,[t("div",Be,[t("button",{class:"back-btn",onClick:Z},"â† è¿”å›"),t("div",null,[t("h1",Ue,c(y.value.class_name),1),t("p",ze,c(y.value.description||""),1)])]),m(o).isTeacher&&C.value==="assignments"?(u(),r("button",{key:0,class:"create-btn",onClick:e[5]||(e[5]=s=>x.value=!0)}," + å¸ƒç½®ä½œæ¥­ ")):p("",!0),m(o).isTeacher&&C.value==="members"?(u(),r("button",{key:1,class:"create-btn",onClick:e[6]||(e[6]=s=>V.value=!0)}," + æ·»åŠ å­¸ç”Ÿ ")):p("",!0)]),m(o).isTeacher?(u(),r("div",Fe,[t("button",{class:G(["tab-btn",{active:C.value==="members"}]),onClick:e[7]||(e[7]=s=>C.value="members")}," æˆå“¡ ",2),t("button",{class:G(["tab-btn",{active:C.value==="assignments"}]),onClick:e[8]||(e[8]=s=>C.value="assignments")}," ä½œæ¥­ ",2),t("button",{class:G(["tab-btn",{active:C.value==="progress"}]),onClick:e[9]||(e[9]=s=>C.value="progress")}," é€²åº¦ ",2)])):p("",!0),m(o).isTeacher&&C.value==="members"?(u(),r("section",Re,[t("div",We,[t("h2",null,"ç­ç´šæˆå“¡ ("+c(f.value.length)+")",1)]),f.value.length===0?(u(),r("div",Ge,[e[22]||(e[22]=t("p",null,"ç­ç´šä¸­é‚„æ²’æœ‰å­¸ç”Ÿ",-1)),t("button",{class:"create-btn",onClick:e[10]||(e[10]=s=>V.value=!0)}," + æ·»åŠ å­¸ç”Ÿ ")])):(u(),r("div",He,[(u(!0),r(U,null,O(f.value,s=>(u(),r("div",{key:s.id,class:"member-card edamame-glass"},[t("div",Ze,[t("div",{class:G(["member-avatar",{pending:s.status==="pending"}])},c((s.displayName||"?").charAt(0).toUpperCase()),3),t("div",je,[t("p",Je,c(s.displayName||"æœªçŸ¥"),1),t("p",Ke,c(s.email),1)])]),t("div",Oe,[t("span",{class:G(["status-badge",s.status==="pending"?"pending":"active"])},c(s.status==="pending"?"å¾…æ¿€æ´»":"å·²æ¿€æ´»"),3),t("button",{class:"remove-btn",onClick:R=>J(s),title:"ç§»é™¤"}," âœ• ",8,Qe)])]))),128))]))])):p("",!0),C.value==="assignments"?(u(),r("section",Xe,[m(H)?(u(),r("div",Ye,"è¼‰å…¥ä¸­...")):m(z).length===0?(u(),r("div",Ie,[t("p",null,c(m(o).isTeacher?"é‚„æ²’æœ‰å¸ƒç½®ä½œæ¥­":"é‚„æ²’æœ‰ä½œæ¥­"),1),m(o).isTeacher?(u(),r("button",{key:0,class:"create-btn",onClick:e[11]||(e[11]=s=>x.value=!0)}," + å¸ƒç½®ä½œæ¥­ ")):p("",!0)])):(u(),r("div",es,[(u(!0),r(U,null,O(m(z),s=>(u(),r("div",{key:s.id,class:"assignment-card edamame-glass"},[t("div",ss,[t("h3",ts,c(s.title||s.text?.title||"æœªå‘½åä½œæ¥­"),1),t("p",as,c(s.text?.author||"ä½šå")+" Â· é›£åº¦ï¼š"+c(s.text?.difficulty===1?"åˆç´š":s.text?.difficulty===2?"ä¸­ç´š":"é«˜ç´š"),1),t("p",ls," å¸ƒç½®æ–¼ "+c(new Date(s.assigned_at).toLocaleDateString("zh-TW")),1)]),t("div",ns,[m(o).isStudent&&F.value.get(s.id)?(u(),r("span",is," å·²å®Œæˆ ")):p("",!0),m(o).isStudent&&!F.value.get(s.id)?(u(),r("button",{key:1,class:"start-btn",onClick:R=>ie(s)}," é–‹å§‹ä½œæ¥­ ",8,rs)):p("",!0),m(o).isTeacher?(u(),r("button",{key:2,class:"delete-btn",onClick:R=>D(s.id)}," åˆªé™¤ ",8,us)):p("",!0)])]))),128))]))])):p("",!0),m(o).isTeacher&&C.value==="progress"?(u(),r("section",os,[...e[23]||(e[23]=[t("div",{class:"progress-placeholder edamame-glass"},[t("p",null,"é€²åº¦çµ±è¨ˆåŠŸèƒ½é–‹ç™¼ä¸­...")],-1)])])):p("",!0)],64)):p("",!0),V.value?(u(),r("div",{key:2,class:"modal-overlay",onClick:ae(j,["self"])},[t("div",ds,[e[24]||(e[24]=t("h2",null,"æ‰¹é‡æ·»åŠ å­¸ç”Ÿ",-1)),e[25]||(e[25]=t("p",{class:"modal-hint"},[le(" è«‹è¼¸å…¥å­¸ç”Ÿéƒµç®±åœ°å€ï¼Œæ¯è¡Œä¸€å€‹æˆ–ç”¨é€—è™Ÿ/åˆ†è™Ÿåˆ†éš”ã€‚åƒ…æ”¯æŒ "),t("code",null,"xxxx@student.isf.edu.hk"),le(" æ ¼å¼ã€‚ ")],-1)),A.value?(u(),r("div",cs," âŒ "+c(A.value),1)):p("",!0),P.value?(u(),r("div",vs," âœ… "+c(P.value),1)):p("",!0),W(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>E.value=s),placeholder:`ä¾‹å¦‚ï¼š
student1@student.isf.edu.hk
student2@student.isf.edu.hk`,class:"form-textarea",rows:"10"},null,512),[[K,E.value]]),t("div",ms,[t("button",{class:"cancel-btn",onClick:j},"å–æ¶ˆ"),t("button",{class:"submit-btn",onClick:ee,disabled:!E.value.trim()||B.value},c(B.value?"æ·»åŠ ä¸­...":"æ·»åŠ å­¸ç”Ÿ"),9,fs)])])])):p("",!0),x.value?(u(),r("div",{key:3,class:"modal-overlay",onClick:e[16]||(e[16]=ae(s=>x.value=!1,["self"]))},[t("div",_s,[e[29]||(e[29]=t("h2",null,"å¸ƒç½®ä½œæ¥­",-1)),t("div",hs,[e[27]||(e[27]=t("label",null,"é¸æ“‡æ–‡ç« ",-1)),W(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>l.value=s),class:"form-input"},[e[26]||(e[26]=t("option",{value:""},"è«‹é¸æ“‡æ–‡ç« ",-1)),(u(!0),r(U,null,O(m($).texts,s=>(u(),r("option",{key:s.id,value:s.id},c(s.title)+" ("+c(s.author||"ä½šå")+") ",9,gs))),128))],512),[[de,l.value]])]),t("div",ps,[e[28]||(e[28]=t("label",null,"ä½œæ¥­æ¨™é¡Œï¼ˆå¯é¸ï¼‰",-1)),W(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>a.value=s),type:"text",placeholder:"ä¾‹å¦‚ï¼šé€±æœ«ç·´ç¿’",class:"form-input"},null,512),[[K,a.value]])]),t("div",ys,[t("button",{class:"cancel-btn",onClick:e[15]||(e[15]=s=>x.value=!1)},"å–æ¶ˆ"),t("button",{class:"submit-btn",onClick:w,disabled:!l.value||n.value},c(n.value?"å¸ƒç½®ä¸­...":"å¸ƒç½®ä½œæ¥­"),9,bs)])])])):p("",!0)]))}}),Es=ve(ks,[["__scopeId","data-v-ee5f1cac"]]);export{Es as default};
