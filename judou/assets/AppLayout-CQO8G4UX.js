import{d as x,u as E,c as u,r as S,w as G,o as I,a as n,b as e,e as p,n as b,f as d,t as l,g as O,F as m,h as f,i as W,j as C,k as w,l as j,m as M,p as q,q as a,_ as B,s as N}from"./index-DtHEPrxc.js";import{u as D}from"./userStatsStore-qDOjWf3B.js";import{u as J}from"./assignmentStore-C67cB5i9.js";const K={class:"sidebar-shell edamame-glass"},Q=["src","alt"],X={key:1},Y={key:2,class:"level-badge"},Z={class:"brand-info"},ee={class:"brand-title"},se={key:0,class:"brand-stats"},te={class:"beans-display"},ae={class:"level-display"},ne={key:1,class:"brand-subtitle"},le={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},oe={key:0,class:"user-menu-dropdown"},ie={class:"sidebar-section"},de={class:"item-title"},ce={key:0,class:"badge"},re={class:"item-desc"},ue={key:1,class:"edamame-sidebar-item disabled"},pe={class:"item-title"},_e={class:"item-desc"},he={key:1,class:"sidebar-section"},ve={class:"item-title"},be={class:"item-desc"},me={key:1,class:"edamame-sidebar-item disabled"},fe={class:"item-title"},ye={class:"item-desc"},ge={class:"sidebar-section"},ke={class:"edamame-sidebar-item disabled"},Ae={class:"item-title"},Se={class:"item-desc"},Ce=x({__name:"SidebarMenu",setup(V){const t=E(),_=D(),c=J(),U=W(),z=[{label:"ä¸»é ",description:"æœ€æ–°è³‡è¨Š",to:{name:"home"}},{label:"ç·´ç¿’",description:"è‡ªä¸»ç·´ç¿’",to:{name:"practice"}},{label:"æˆ‘çš„ç­ç´š",description:t.isTeacher?"ç®¡ç†ç­ç´š":"æŸ¥çœ‹ä½œæ¥­",to:{name:"my-classes"}},{label:"æŽ’è¡Œæ¦œ",description:"è±†é»žæŽ’å",to:{name:"leaderboard"}},{label:"æ­·å²ç´€éŒ„",description:"ç·´ç¿’è¶³è·¡",to:{name:"history"}}],L=[{label:"è¨­å®š",description:"æ•¬è«‹æœŸå¾…",disabled:!0},{label:"åé¥‹",description:"æ•¬è«‹æœŸå¾…",disabled:!0}],F=[{label:"æ–‡ç« ç®¡ç†",description:"å»ºç«‹/ç·¨è¼¯ç·´ç¿’",to:{name:"admin-texts"},teacherOnly:!0}],y=u(()=>t.isAuthenticated?F.filter(i=>!i.teacherOnly||t.isTeacher):[]),$=q(),g=i=>i.to?$.name===i.to.name:!1,h=u(()=>t.isAuthenticated?t.displayName||"è±†å‹":"è¨ªå®¢"),H=u(()=>h.value.charAt(0)),P=u(()=>_.stats?.beans??0),k=u(()=>_.level),v=S(!1);async function R(){await t.loginWithGoogle()}function T(){t.isAuthenticated?U.push({name:"profile"}):v.value=!v.value}const r=S(0);return G(()=>t.isAuthenticated,i=>{i?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥çµ±è¨ˆ"),_.fetchStats(),t.isStudent&&c.fetchStudentAssignments().then(()=>{c.getPendingCount().then(o=>{r.value=o})})):r.value=0},{immediate:!0}),I(()=>{t.isAuthenticated&&t.isStudent&&c.fetchStudentAssignments().then(()=>{c.getPendingCount().then(i=>{r.value=i})})}),(i,o)=>{const A=M("router-link");return a(),n("aside",K,[e("div",{class:"sidebar-brand",onClick:T},[e("div",{class:b(["brand-avatar",{"has-avatar":d(t).avatarUrl}])},[d(t).avatarUrl?(a(),n("img",{key:0,src:d(t).avatarUrl,alt:h.value},null,8,Q)):(a(),n("span",X,l(H.value),1)),d(t).isAuthenticated?(a(),n("div",Y,l(k.value),1)):p("",!0)],2),e("div",Z,[e("p",ee,l(h.value),1),d(t).isAuthenticated?(a(),n("p",se,[e("span",te,"ðŸ«˜ "+l(P.value),1),e("span",ae,"Lv."+l(k.value),1)])):(a(),n("p",ne,"é»žæ“Šç™»å…¥"))]),d(t).isAuthenticated?(a(),n("svg",le,[...o[0]||(o[0]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):p("",!0)]),v.value&&!d(t).isAuthenticated?(a(),n("div",oe,[e("button",{class:"login-btn",onClick:R},[...o[1]||(o[1]=[O('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-486e0188><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-486e0188></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-486e0188></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-486e0188></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-486e0188></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):p("",!0),e("nav",ie,[o[2]||(o[2]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(a(),n(m,null,f(z,s=>e("li",{key:s.label},[s.to&&!s.disabled?(a(),C(A,{key:0,class:b(["edamame-sidebar-item",{active:g(s)}]),to:s.to},{default:w(()=>[e("div",null,[e("p",de,[j(l(s.label)+" ",1),s.label==="æˆ‘çš„ç­ç´š"&&d(t).isStudent&&r.value>0?(a(),n("span",ce,l(r.value),1)):p("",!0)]),e("p",re,l(s.description),1)])]),_:2},1032,["class","to"])):(a(),n("div",ue,[e("div",null,[e("p",pe,l(s.label),1),e("p",_e,l(s.description),1)])]))])),64))])]),y.value.length>0?(a(),n("nav",he,[o[3]||(o[3]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(a(!0),n(m,null,f(y.value,s=>(a(),n("li",{key:s.label},[s.to&&!s.disabled?(a(),C(A,{key:0,class:b(["edamame-sidebar-item",{active:g(s)}]),to:s.to},{default:w(()=>[e("div",null,[e("p",ve,l(s.label),1),e("p",be,l(s.description),1)])]),_:2},1032,["class","to"])):(a(),n("div",me,[e("div",null,[e("p",fe,l(s.label),1),e("p",ye,l(s.description),1)])]))]))),128))])])):p("",!0),e("nav",ge,[o[4]||(o[4]=e("p",{class:"section-label"},"æ›´å¤š",-1)),e("ul",null,[(a(),n(m,null,f(L,s=>e("li",{key:s.label},[e("div",ke,[e("div",null,[e("p",Ae,l(s.label),1),e("p",Se,l(s.description),1)])])])),64))])]),o[5]||(o[5]=e("div",{class:"sidebar-footer"},[e("p",null,"ç‰ˆæœ¬ 2.0 Vue"),e("p",{class:"item-desc"},"Supabase + PWA Ready")],-1))])}}}),we=B(Ce,[["__scopeId","data-v-486e0188"]]),Ne={class:"app-layout"},xe={class:"app-main"},Me={class:"app-content"},Be=x({__name:"AppLayout",setup(V){return(t,_)=>{const c=M("router-view");return a(),n("div",Ne,[N(we),e("section",xe,[e("div",Me,[N(c)])])])}}}),Le=B(Be,[["__scopeId","data-v-a70dcd22"]]);export{Le as default};
