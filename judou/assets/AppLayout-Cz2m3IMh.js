import{d as T,u as K,c,r as m,w as U,o as Q,a,b as s,e as r,n as p,f as d,t as o,g as N,T as X,h as f,i as Y,F as g,j as y,k as Z,l as w,m as ee,p as z,q as se,s as t,_ as L}from"./index-Cojk5RsG.js";import{u as te}from"./userStatsStore-QlninCA5.js";import{u as ae}from"./assignmentStore-DBK9TRZ6.js";const ne={class:"sidebar-shell edamame-glass"},ie=["src","alt"],oe={key:1},le={key:2,class:"level-badge"},re={class:"brand-info"},ce={class:"brand-title"},de={key:0,class:"brand-stats-wrapper"},ue={class:"beans-value"},ve={class:"secondary-stats"},pe={key:0,class:"streak-display"},_e={key:1,class:"brand-subtitle"},be={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},he={key:0,class:"user-menu-dropdown"},me={class:"sidebar-section"},fe={key:0,class:"item-icon"},ge={class:"item-title"},ye={key:0,class:"badge"},ke={key:1,class:"edamame-sidebar-item disabled"},Ae={key:0,class:"item-icon"},Se={class:"item-title"},Ce={key:1,class:"sidebar-section"},we={class:"item-title"},Ne={key:1,class:"edamame-sidebar-item disabled"},xe={class:"item-title"},Me={key:2,class:"sidebar-section super-admin-section"},Be={class:"item-title"},Pe={key:1,class:"edamame-sidebar-item disabled"},Ue={class:"item-title"},Te=T({__name:"SidebarMenu",setup($){const i=K(),_=te(),v=ae(),j=Z(),F=[{label:"é¦–é ",icon:"ðŸ ",to:{name:"home"}},{label:"å¥è±†",icon:"ðŸ«˜",to:{name:"practice"},description:"ç·´ç¿’"},{label:"å“è±†",icon:"ðŸ“–",to:{name:"reading-list"},description:"é–±è®€"},{label:"é¬¥è±†",icon:"âš”ï¸",to:{name:"arena"},description:"å°æˆ°"},{label:"è±†è·¡",icon:"ðŸ‘£",to:{name:"history"},description:"æ­·å²"},{label:"è±†èŽ¢",icon:"ðŸ«›",to:{name:"my-classes"},description:"ç­ç´š"},{label:"è‡ªè¨‚ç·´ç¿’",icon:"âœï¸",to:{name:"my-texts"},teacherOnly:!0}],G=[{label:"ç·´ç¿’æ–‡åº«",to:{name:"admin-texts"}},{label:"é–±è®€æ–‡åº«",to:{name:"admin-reading"}}],H=[{label:"ç”¨æˆ¶ç®¡ç†",to:{name:"admin-users"}}],I=c(()=>F.filter(l=>!l.teacherOnly||i.isTeacher)),x=c(()=>!i.isAuthenticated||!i.isAdmin?[]:G),M=c(()=>!i.isAuthenticated||!i.isSuperAdmin?[]:H),D=se(),k=l=>l.to?D.name===l.to.name:!1,A=c(()=>i.isAuthenticated?i.displayName||"è±†å‹":"è¨ªå®¢"),E=c(()=>A.value.charAt(0)),B=c(()=>_.profile?.total_beans??0),O=c(()=>_.level),P=c(()=>_.profile?.streak_days??0),h=m([]);let R=0;const S=m(!1);U(B,(l,n)=>{if(n===void 0||n===0||l===n)return;const u=l-n;if(u===0)return;S.value=!0;const e={id:++R,amount:Math.abs(u),isPositive:u>0};h.value.push(e),setTimeout(()=>{h.value=h.value.filter(J=>J.id!==e.id)},1500),setTimeout(()=>{S.value=!1},600)});const C=m(!1);async function V(){await i.loginWithGoogle()}function q(){i.isAuthenticated?j.push({name:"profile"}):C.value=!C.value}const b=m(0);U(()=>i.isAuthenticated,l=>{l?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥ Profile"),_.fetchProfile(),i.isStudent&&v.fetchStudentAssignments().then(()=>{v.getPendingCount().then(n=>{b.value=n})})):b.value=0},{immediate:!0}),Q(()=>{i.isAuthenticated&&i.isStudent&&v.fetchStudentAssignments().then(()=>{v.getPendingCount().then(l=>{b.value=l})})});const W="/judou/images/judou-logo.jpg";return(l,n)=>{const u=z("router-link");return t(),a("aside",ne,[s("div",{class:"sidebar-brand",onClick:q},[s("div",{class:p(["brand-avatar",{"has-avatar":d(i).avatarUrl}])},[d(i).avatarUrl?(t(),a("img",{key:0,src:d(i).avatarUrl,alt:A.value},null,8,ie)):(t(),a("span",oe,o(E.value),1)),d(i).isAuthenticated?(t(),a("div",le,o(O.value),1)):r("",!0)],2),s("div",re,[s("p",ce,o(A.value),1),d(i).isAuthenticated?(t(),a("div",de,[s("div",{class:p(["beans-card",{"beans-animating":S.value}])},[n[0]||(n[0]=s("div",{class:"beans-icon"},[s("span",{class:"bean-pod"},"ðŸ«›")],-1)),s("span",ue,o(B.value.toLocaleString()),1),N(X,{name:"bean-change",tag:"div",class:"bean-changes"},{default:f(()=>[(t(!0),a(g,null,y(h.value,e=>(t(),a("div",{key:e.id,class:p(["bean-change-item",e.isPositive?"positive":"negative"])},o(e.isPositive?"+":"-")+o(e.amount),3))),128))]),_:1})],2),s("div",ve,[P.value>0?(t(),a("span",pe,"ðŸ”¥ "+o(P.value)+"å¤©",1)):r("",!0)])])):(t(),a("p",_e,"é»žæ“Šç™»å…¥"))]),d(i).isAuthenticated?(t(),a("svg",be,[...n[1]||(n[1]=[s("path",{d:"M9 18l6-6-6-6"},null,-1)])])):r("",!0)]),C.value&&!d(i).isAuthenticated?(t(),a("div",he,[s("button",{class:"login-btn",onClick:V},[...n[2]||(n[2]=[Y('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-6a7819b7><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-6a7819b7></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-6a7819b7></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-6a7819b7></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-6a7819b7></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):r("",!0),s("nav",me,[n[3]||(n[3]=s("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),s("ul",null,[(t(!0),a(g,null,y(I.value,e=>(t(),a("li",{key:e.label},[e.to&&!e.disabled?(t(),w(u,{key:0,class:p(["edamame-sidebar-item",{active:k(e)}]),to:e.to},{default:f(()=>[e.icon?(t(),a("span",fe,o(e.icon),1)):r("",!0),s("p",ge,[ee(o(e.label)+" ",1),e.label==="è±†èŽ¢"&&d(i).isStudent&&b.value>0?(t(),a("span",ye,o(b.value),1)):r("",!0)])]),_:2},1032,["class","to"])):(t(),a("div",ke,[e.icon?(t(),a("span",Ae,o(e.icon),1)):r("",!0),s("p",Se,o(e.label),1)]))]))),128))])]),x.value.length>0?(t(),a("nav",Ce,[n[4]||(n[4]=s("p",{class:"section-label"},"ç®¡ç†",-1)),s("ul",null,[(t(!0),a(g,null,y(x.value,e=>(t(),a("li",{key:e.label},[e.to&&!e.disabled?(t(),w(u,{key:0,class:p(["edamame-sidebar-item",{active:k(e)}]),to:e.to},{default:f(()=>[s("p",we,o(e.label),1)]),_:2},1032,["class","to"])):(t(),a("div",Ne,[s("p",xe,o(e.label),1)]))]))),128))])])):r("",!0),M.value.length>0?(t(),a("nav",Me,[n[5]||(n[5]=s("p",{class:"section-label"},"è¶…ç´šç®¡ç†",-1)),s("ul",null,[(t(!0),a(g,null,y(M.value,e=>(t(),a("li",{key:e.label},[e.to&&!e.disabled?(t(),w(u,{key:0,class:p(["edamame-sidebar-item super-admin-item",{active:k(e)}]),to:e.to},{default:f(()=>[s("p",Be,o(e.label),1)]),_:2},1032,["class","to"])):(t(),a("div",Pe,[s("p",Ue,o(e.label),1)]))]))),128))])])):r("",!0),s("div",{class:"sidebar-footer"},[s("div",{class:"footer-brand"},[s("img",{src:W,alt:"å¥è±†",class:"footer-logo"}),n[6]||(n[6]=s("span",{class:"footer-title"},"å¥è±† 2.0",-1))]),n[7]||(n[7]=s("div",{class:"footer-credits"},[s("p",null,"é–‹ç™¼ï¼šæ±ªæ¶µå±¹ã€å¼µè€å¸«"),s("p",null,"ç¾Žè¡“ï¼šä¸å¥•è¾°ã€å¾æšæ´‹")],-1))])])}}}),ze=L(Te,[["__scopeId","data-v-6a7819b7"]]),Le={class:"app-layout"},$e={class:"app-main"},je={class:"app-content"},Fe=T({__name:"AppLayout",setup($){return(i,_)=>{const v=z("router-view");return t(),a("div",Le,[N(ze),s("section",$e,[s("div",je,[N(v)])])])}}}),De=L(Fe,[["__scopeId","data-v-a70dcd22"]]);export{De as default};
