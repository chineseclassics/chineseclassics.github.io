import{d as U,u as T,c as r,r as x,w as q,o as W,a as l,b as e,e as c,n as _,f as d,t as o,g as M,h as J,F as g,i as y,j as K,k,l as A,m as V,p as Q,q as s,_ as z,s as B}from"./index-D1vDqMgZ.js";import{u as X}from"./userStatsStore-RkemdDot.js";import{u as Y}from"./assignmentStore-NTm6kYw3.js";const Z={class:"sidebar-shell edamame-glass"},ee=["src","alt"],se={key:1},te={key:2,class:"level-badge"},ae={class:"brand-info"},le={class:"brand-title"},ne={key:0,class:"brand-stats"},oe={class:"beans-display"},ie={class:"level-display"},re={key:0,class:"streak-display"},de={key:1,class:"brand-subtitle"},ce={key:0,class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ue={key:0,class:"user-menu-dropdown"},pe={class:"sidebar-section"},ve={class:"item-title"},_e={key:0,class:"badge"},he={key:1,class:"edamame-sidebar-item disabled"},me={class:"item-title"},be={key:1,class:"sidebar-section"},fe={class:"item-title"},ge={key:1,class:"edamame-sidebar-item disabled"},ye={class:"item-title"},ke={key:2,class:"sidebar-section super-admin-section"},Ae={class:"item-title"},Se={key:1,class:"edamame-sidebar-item disabled"},Ce={class:"item-title"},we=U({__name:"SidebarMenu",setup(L){const a=T(),p=X(),u=Y(),P=K(),$=[{label:"ä¸»é ",to:{name:"home"}},{label:"ç·´ç¿’",to:{name:"practice"}},{label:"é–±è®€",to:{name:"reading-list"}},{label:"æˆ‘çš„ç­ç´š",to:{name:"my-classes"}},{label:"æ­·å²ç´€éŒ„",to:{name:"history"}},{label:"è‡ªè¨‚ç·´ç¿’",to:{name:"my-texts"},teacherOnly:!0}],j=[{label:"ç·´ç¿’æ–‡åº«",to:{name:"admin-texts"}},{label:"é–±è®€æ–‡åº«",to:{name:"admin-reading"}}],F=[{label:"ç”¨æˆ¶ç®¡ç†",to:{name:"admin-users"}}],H=r(()=>$.filter(i=>!i.teacherOnly||a.isTeacher)),S=r(()=>!a.isAuthenticated||!a.isAdmin?[]:j),C=r(()=>!a.isAuthenticated||!a.isSuperAdmin?[]:F),D=Q(),h=i=>i.to?D.name===i.to.name:!1,m=r(()=>a.isAuthenticated?a.displayName||"è±†å‹":"è¨ªå®¢"),E=r(()=>m.value.charAt(0)),G=r(()=>p.profile?.total_beans??0),w=r(()=>p.level),N=r(()=>p.profile?.streak_days??0),b=x(!1);async function I(){await a.loginWithGoogle()}function O(){a.isAuthenticated?P.push({name:"profile"}):b.value=!b.value}const v=x(0);q(()=>a.isAuthenticated,i=>{i?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥ Profile"),p.fetchProfile(),a.isStudent&&u.fetchStudentAssignments().then(()=>{u.getPendingCount().then(n=>{v.value=n})})):v.value=0},{immediate:!0}),W(()=>{a.isAuthenticated&&a.isStudent&&u.fetchStudentAssignments().then(()=>{u.getPendingCount().then(i=>{v.value=i})})});const R="/judou/images/judou-logo.jpg";return(i,n)=>{const f=V("router-link");return s(),l("aside",Z,[e("div",{class:"sidebar-brand",onClick:O},[e("div",{class:_(["brand-avatar",{"has-avatar":d(a).avatarUrl}])},[d(a).avatarUrl?(s(),l("img",{key:0,src:d(a).avatarUrl,alt:m.value},null,8,ee)):(s(),l("span",se,o(E.value),1)),d(a).isAuthenticated?(s(),l("div",te,o(w.value),1)):c("",!0)],2),e("div",ae,[e("p",le,o(m.value),1),d(a).isAuthenticated?(s(),l("p",ne,[e("span",oe,[n[0]||(n[0]=e("span",{class:"bean-dot"},null,-1)),M(" "+o(G.value),1)]),e("span",ie,"Lv."+o(w.value),1),N.value>0?(s(),l("span",re,"ðŸ”¥ "+o(N.value)+"å¤©",1)):c("",!0)])):(s(),l("p",de,"é»žæ“Šç™»å…¥"))]),d(a).isAuthenticated?(s(),l("svg",ce,[...n[1]||(n[1]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)])])):c("",!0)]),b.value&&!d(a).isAuthenticated?(s(),l("div",ue,[e("button",{class:"login-btn",onClick:I},[...n[2]||(n[2]=[J('<svg class="google-icon" viewBox="0 0 24 24" width="16" height="16" data-v-64ac008c><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-64ac008c></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-64ac008c></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-64ac008c></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-64ac008c></path></svg> ä½¿ç”¨ Google ç™»å…¥ ',2)])])])):c("",!0),e("nav",pe,[n[3]||(n[3]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(s(!0),l(g,null,y(H.value,t=>(s(),l("li",{key:t.label},[t.to&&!t.disabled?(s(),k(f,{key:0,class:_(["edamame-sidebar-item",{active:h(t)}]),to:t.to},{default:A(()=>[e("p",ve,[M(o(t.label)+" ",1),t.label==="æˆ‘çš„ç­ç´š"&&d(a).isStudent&&v.value>0?(s(),l("span",_e,o(v.value),1)):c("",!0)])]),_:2},1032,["class","to"])):(s(),l("div",he,[e("p",me,o(t.label),1)]))]))),128))])]),S.value.length>0?(s(),l("nav",be,[n[4]||(n[4]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(s(!0),l(g,null,y(S.value,t=>(s(),l("li",{key:t.label},[t.to&&!t.disabled?(s(),k(f,{key:0,class:_(["edamame-sidebar-item",{active:h(t)}]),to:t.to},{default:A(()=>[e("p",fe,o(t.label),1)]),_:2},1032,["class","to"])):(s(),l("div",ge,[e("p",ye,o(t.label),1)]))]))),128))])])):c("",!0),C.value.length>0?(s(),l("nav",ke,[n[5]||(n[5]=e("p",{class:"section-label"},"è¶…ç´šç®¡ç†",-1)),e("ul",null,[(s(!0),l(g,null,y(C.value,t=>(s(),l("li",{key:t.label},[t.to&&!t.disabled?(s(),k(f,{key:0,class:_(["edamame-sidebar-item super-admin-item",{active:h(t)}]),to:t.to},{default:A(()=>[e("p",Ae,o(t.label),1)]),_:2},1032,["class","to"])):(s(),l("div",Se,[e("p",Ce,o(t.label),1)]))]))),128))])])):c("",!0),e("div",{class:"sidebar-footer"},[e("div",{class:"footer-brand"},[e("img",{src:R,alt:"å¥è±†",class:"footer-logo"}),n[6]||(n[6]=e("span",{class:"footer-title"},"å¥è±† 2.0",-1))]),n[7]||(n[7]=e("div",{class:"footer-credits"},[e("p",null,"é–‹ç™¼ï¼šæ±ªæ¶µå±¹ã€å¼µè€å¸«"),e("p",null,"ç¾Žè¡“ï¼šä¸å¥•è¾°ã€å¾æšæ´‹")],-1))])])}}}),Ne=z(we,[["__scopeId","data-v-64ac008c"]]),xe={class:"app-layout"},Me={class:"app-main"},Be={class:"app-content"},Ue=U({__name:"AppLayout",setup(L){return(a,p)=>{const u=V("router-view");return s(),l("div",xe,[B(Ne),e("section",Me,[e("div",Be,[B(u)])])])}}}),Pe=z(Ue,[["__scopeId","data-v-a70dcd22"]]);export{Pe as default};
