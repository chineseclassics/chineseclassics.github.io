import{d as $,u as Q,c as r,r as g,w as z,o as V,a as n,b as e,e as c,f as m,t as i,n as _,F as b,g as h,h as X,i as Z,j as ee,k as S,l as C,m as se,p as P,q as te,s as a,_ as j,v as U}from"./index-CTD8rdEU.js";import{u as ae}from"./userStatsStore-DZBifqLI.js";import{u as ne}from"./assignmentStore-D5Qw7Kzf.js";const oe={class:"sidebar-shell edamame-glass"},le=["src","alt"],ie={key:1},re={class:"level-badge"},de={class:"brand-info"},ce={class:"beans-roller"},ue={key:0,class:"secondary-stats"},pe={class:"streak-display"},ve={key:1,class:"login-section"},me={class:"sidebar-section"},_e={key:0,class:"item-icon"},be={class:"item-title"},he={key:0,class:"badge"},fe={key:1,class:"edamame-sidebar-item disabled"},ge={key:0,class:"item-icon"},ye={class:"item-title"},ke={key:2,class:"sidebar-section"},Ae={class:"item-title"},Se={key:1,class:"edamame-sidebar-item disabled"},Ce={class:"item-title"},Ne={key:3,class:"sidebar-section super-admin-section"},we={class:"item-title"},xe={key:1,class:"edamame-sidebar-item disabled"},Be={class:"item-title"},Me=$({__name:"SidebarMenu",setup(D){const o=Q(),u=ae(),d=ne(),F=Z(),L=[{label:"é¦–é ",icon:"ðŸ ",to:{name:"home"}},{label:"å¥è±†",icon:"ðŸ«˜",to:{name:"practice"},description:"ç·´ç¿’"},{label:"å“è±†",icon:"ðŸ“–",to:{name:"reading-list"},description:"é–±è®€"},{label:"é¬¥è±†",icon:"âš”ï¸",to:{name:"arena"},description:"å°æˆ°"},{label:"è±†è·¡",icon:"ðŸ‘£",to:{name:"history"},description:"æ­·å²"},{label:"è±†èŽ¢",icon:"ðŸ«›",to:{name:"my-classes"},description:"ç­ç´š"},{label:"è‡ªè¨‚ç·´ç¿’",icon:"âœï¸",to:{name:"my-texts"},teacherOnly:!0}],H=[{label:"ç·´ç¿’æ–‡åº«",to:{name:"admin-texts"}},{label:"é–±è®€æ–‡åº«",to:{name:"admin-reading"}}],I=[{label:"ç”¨æˆ¶ç®¡ç†",to:{name:"admin-users"}}],T=r(()=>L.filter(l=>!l.teacherOnly||o.isTeacher)),N=r(()=>!o.isAuthenticated||!o.isAdmin?[]:H),w=r(()=>!o.isAuthenticated||!o.isSuperAdmin?[]:I),E=te(),y=l=>l.to?E.name===l.to.name:!1,x=r(()=>o.isAuthenticated?o.displayName||"è±†å‹":"è¨ªå®¢"),G=r(()=>x.value.charAt(0)),O=r(()=>u.profile?.total_beans??0),R=r(()=>u.level),B=r(()=>u.profile?.streak_days??0),k=g(0),A=g(!1),f=g(null),q=r(()=>k.value.toString().split("").map(t=>parseInt(t)));z(O,(l,t)=>{if(t===void 0||t===0){k.value=l;return}if(l===t)return;const v=l-t;f.value=v>0?"up":"down",A.value=!0,k.value=l,setTimeout(()=>{A.value=!1,f.value=null},800)},{immediate:!0});async function W(){await o.loginWithGoogle()}function Y(){F.push({name:"profile"})}const p=g(0);z(()=>o.isAuthenticated,l=>{l?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥ Profile"),u.fetchProfile(),o.isStudent&&d.fetchStudentAssignments().then(()=>{d.getPendingCount().then(t=>{p.value=t})})):p.value=0},{immediate:!0}),V(()=>{o.isAuthenticated&&o.isStudent&&d.fetchStudentAssignments().then(()=>{d.getPendingCount().then(l=>{p.value=l})})});const J="/judou/images/judou-logo.jpg";return(l,t)=>{const v=P("router-link");return a(),n("aside",oe,[m(o).isAuthenticated?(a(),n("div",{key:0,class:"sidebar-brand",onClick:Y},[e("div",{class:_(["brand-avatar",{"has-avatar":m(o).avatarUrl}])},[m(o).avatarUrl?(a(),n("img",{key:0,src:m(o).avatarUrl,alt:x.value},null,8,le)):(a(),n("span",ie,i(G.value),1)),e("div",re,i(R.value),1)],2),e("div",de,[e("div",{class:_(["beans-card",{"beans-animating":A.value,"beans-up":f.value==="up","beans-down":f.value==="down"}])},[t[0]||(t[0]=e("div",{class:"beans-icon"},[e("span",{class:"bean-pod"},"ðŸ«›")],-1)),e("div",ce,[(a(!0),n(b,null,h(q.value,(s,K)=>(a(),n("div",{key:K,class:"digit-slot"},[e("div",{class:"digit-roller",style:ee({transform:`translateY(-${s*10}%)`})},[(a(),n(b,null,h(10,M=>e("span",{key:M,class:"digit"},i(M-1),1)),64))],4)]))),128))])],2),B.value>0?(a(),n("div",ue,[e("span",pe,"ðŸ”¥ "+i(B.value)+"å¤©",1)])):c("",!0)]),t[1]||(t[1]=e("svg",{class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 18l6-6-6-6"})],-1))])):(a(),n("div",ve,[e("button",{class:"google-login-btn",onClick:W},[...t[2]||(t[2]=[X('<svg class="google-icon" viewBox="0 0 24 24" width="18" height="18" data-v-3d89906d><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-3d89906d></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-3d89906d></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-3d89906d></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-3d89906d></path></svg><span data-v-3d89906d>ä½¿ç”¨ Google ç™»å…¥</span>',2)])]),t[3]||(t[3]=e("p",{class:"login-hint"},"ç™»å…¥å¾Œå¯ä¿å­˜å­¸ç¿’é€²åº¦",-1))])),e("nav",me,[t[4]||(t[4]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(a(!0),n(b,null,h(T.value,s=>(a(),n("li",{key:s.label},[s.to&&!s.disabled?(a(),S(v,{key:0,class:_(["edamame-sidebar-item",{active:y(s)}]),to:s.to},{default:C(()=>[s.icon?(a(),n("span",_e,i(s.icon),1)):c("",!0),e("p",be,[se(i(s.label)+" ",1),s.label==="è±†èŽ¢"&&m(o).isStudent&&p.value>0?(a(),n("span",he,i(p.value),1)):c("",!0)])]),_:2},1032,["class","to"])):(a(),n("div",fe,[s.icon?(a(),n("span",ge,i(s.icon),1)):c("",!0),e("p",ye,i(s.label),1)]))]))),128))])]),N.value.length>0?(a(),n("nav",ke,[t[5]||(t[5]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(a(!0),n(b,null,h(N.value,s=>(a(),n("li",{key:s.label},[s.to&&!s.disabled?(a(),S(v,{key:0,class:_(["edamame-sidebar-item",{active:y(s)}]),to:s.to},{default:C(()=>[e("p",Ae,i(s.label),1)]),_:2},1032,["class","to"])):(a(),n("div",Se,[e("p",Ce,i(s.label),1)]))]))),128))])])):c("",!0),w.value.length>0?(a(),n("nav",Ne,[t[6]||(t[6]=e("p",{class:"section-label"},"è¶…ç´šç®¡ç†",-1)),e("ul",null,[(a(!0),n(b,null,h(w.value,s=>(a(),n("li",{key:s.label},[s.to&&!s.disabled?(a(),S(v,{key:0,class:_(["edamame-sidebar-item super-admin-item",{active:y(s)}]),to:s.to},{default:C(()=>[e("p",we,i(s.label),1)]),_:2},1032,["class","to"])):(a(),n("div",xe,[e("p",Be,i(s.label),1)]))]))),128))])])):c("",!0),e("div",{class:"sidebar-footer"},[e("div",{class:"footer-brand"},[e("img",{src:J,alt:"å¥è±†",class:"footer-logo"}),t[7]||(t[7]=e("span",{class:"footer-title"},"å¥è±† 2.0",-1))]),t[8]||(t[8]=e("div",{class:"footer-credits"},[e("p",null,"é–‹ç™¼ï¼šæ±ªæ¶µå±¹ã€å¼µè€å¸«"),e("p",null,"ç¾Žè¡“ï¼šä¸å¥•è¾°ã€å¾æšæ´‹")],-1))])])}}}),ze=j(Me,[["__scopeId","data-v-3d89906d"]]),Ue={class:"app-layout"},$e={class:"app-main"},Pe={class:"app-content"},je=$({__name:"AppLayout",setup(D){return(o,u)=>{const d=P("router-view");return a(),n("div",Ue,[U(ze),e("section",$e,[e("div",Pe,[U(d)])])])}}}),He=j(je,[["__scopeId","data-v-a70dcd22"]]);export{He as default};
