import{d as j,u as Z,c as r,r as y,w as $,o as ee,a as n,b as e,e as u,f as m,t as i,n as _,F as c,g as h,h as se,i as te,j as ae,k as f,l as C,m as N,p as D,q as ne,s as t,_ as F,v as I}from"./index-CQji2S90.js";import{u as oe}from"./userStatsStore-DdVjZYJR.js";import{u as le}from"./assignmentStore-ELBE7V5v.js";import{B as P}from"./BeanIcon-BV5W4FYa.js";const ie={class:"sidebar-shell edamame-glass"},re=["src","alt"],ce={key:1},de={class:"level-badge"},ue={class:"brand-info"},pe={class:"beans-roller"},ve={key:0,class:"secondary-stats"},be={class:"streak-display"},me={key:1,class:"login-section"},_e={class:"sidebar-section"},he={key:0,class:"item-icon"},fe={class:"item-title"},ge={key:0,class:"badge"},ye={key:1,class:"edamame-sidebar-item disabled"},ke={key:0,class:"item-icon"},Ae={class:"item-title"},Se={key:2,class:"sidebar-section"},Ce={class:"item-title"},Ne={key:1,class:"edamame-sidebar-item disabled"},Be={class:"item-title"},we={key:3,class:"sidebar-section super-admin-section"},xe={class:"item-title"},ze={key:1,class:"edamame-sidebar-item disabled"},Me={class:"item-title"},B="bean",Ue=j({__name:"SidebarMenu",setup(L){const o=Z(),p=oe(),d=le(),E=te(),H=[{label:"é¦–é ",icon:"ðŸ ",to:{name:"home"}},{label:"å¥è±†",icon:B,to:{name:"practice"},description:"ç·´ç¿’"},{label:"å“è±†",icon:"ðŸ“–",to:{name:"reading-list"},description:"é–±è®€"},{label:"é¬¥è±†",icon:"âš”ï¸",to:{name:"arena"},description:"å°æˆ°"},{label:"è±†è·¡",icon:"ðŸ‘£",to:{name:"history"},description:"æ­·å²"},{label:"è±†èŽ¢",icon:"ðŸ«›",to:{name:"my-classes"},description:"ç­ç´š"},{label:"è‡ªè¨‚ç·´ç¿’",icon:"âœï¸",to:{name:"my-texts"},teacherOnly:!0}],O=[{label:"ç·´ç¿’æ–‡åº«",to:{name:"admin-texts"}},{label:"é–±è®€æ–‡åº«",to:{name:"admin-reading"}}],T=[{label:"ç”¨æˆ¶ç®¡ç†",to:{name:"admin-users"}}],G=r(()=>H.filter(l=>!l.teacherOnly||o.isTeacher)),w=r(()=>!o.isAuthenticated||!o.isAdmin?[]:O),x=r(()=>!o.isAuthenticated||!o.isSuperAdmin?[]:T),R=ne(),k=l=>l.to?R.name===l.to.name:!1,z=r(()=>o.isAuthenticated?o.displayName||"è±†å‹":"è¨ªå®¢"),q=r(()=>z.value.charAt(0)),W=r(()=>p.profile?.total_beans??0),Y=r(()=>p.level),M=r(()=>p.profile?.streak_days??0),A=y(0),S=y(!1),g=y(null),J=r(()=>A.value.toString().split("").map(a=>parseInt(a)));$(W,(l,a)=>{if(a===void 0||a===0){A.value=l;return}if(l===a)return;const b=l-a;g.value=b>0?"up":"down",S.value=!0,A.value=l,setTimeout(()=>{S.value=!1,g.value=null},800)},{immediate:!0});async function K(){await o.loginWithGoogle()}function Q(){E.push({name:"profile"})}const v=y(0);$(()=>o.isAuthenticated,l=>{l?(console.log("[Sidebar] ç”¨æˆ¶å·²ç™»å…¥ï¼Œè¼‰å…¥ Profile"),p.fetchProfile(),o.isStudent&&d.fetchStudentAssignments().then(()=>{d.getPendingCount().then(a=>{v.value=a})})):v.value=0},{immediate:!0}),ee(()=>{o.isAuthenticated&&o.isStudent&&d.fetchStudentAssignments().then(()=>{d.getPendingCount().then(l=>{v.value=l})})});const V="/judou/images/judou-logo.jpg";return(l,a)=>{const b=D("router-link");return t(),n("aside",ie,[m(o).isAuthenticated?(t(),n("div",{key:0,class:"sidebar-brand",onClick:Q},[e("div",{class:_(["brand-avatar",{"has-avatar":m(o).avatarUrl}])},[m(o).avatarUrl?(t(),n("img",{key:0,src:m(o).avatarUrl,alt:z.value},null,8,re)):(t(),n("span",ce,i(q.value),1)),e("div",de,i(Y.value),1)],2),e("div",ue,[e("div",{class:_(["beans-card",{"beans-animating":S.value,"beans-up":g.value==="up","beans-down":g.value==="down"}])},[a[0]||(a[0]=e("div",{class:"beans-icon"},[e("span",{class:"bean-pod"},"ðŸ«›")],-1)),e("div",pe,[(t(!0),n(c,null,h(J.value,(s,X)=>(t(),n("div",{key:X,class:"digit-slot"},[e("div",{class:"digit-roller",style:ae({transform:`translateY(-${s*10}%)`})},[(t(),n(c,null,h(10,U=>e("span",{key:U,class:"digit"},i(U-1),1)),64))],4)]))),128))])],2),M.value>0?(t(),n("div",ve,[e("span",be,"ðŸ”¥ "+i(M.value)+"å¤©",1)])):u("",!0)]),a[1]||(a[1]=e("svg",{class:"arrow-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 18l6-6-6-6"})],-1))])):(t(),n("div",me,[e("button",{class:"google-login-btn",onClick:K},[...a[2]||(a[2]=[se('<svg class="google-icon" viewBox="0 0 24 24" width="18" height="18" data-v-dab007c6><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-dab007c6></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-dab007c6></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-dab007c6></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-dab007c6></path></svg><span data-v-dab007c6>ä½¿ç”¨ Google ç™»å…¥</span>',2)])]),a[3]||(a[3]=e("p",{class:"login-hint"},"ç™»å…¥å¾Œå¯ä¿å­˜å­¸ç¿’é€²åº¦",-1))])),e("nav",_e,[a[4]||(a[4]=e("p",{class:"section-label"},"å¸¸ç”¨åŠŸèƒ½",-1)),e("ul",null,[(t(!0),n(c,null,h(G.value,s=>(t(),n("li",{key:s.label},[s.to&&!s.disabled?(t(),f(b,{key:0,class:_(["edamame-sidebar-item",{active:k(s)}]),to:s.to},{default:C(()=>[s.icon?(t(),n("span",he,[s.icon===B?(t(),f(P,{key:0,size:20})):(t(),n(c,{key:1},[N(i(s.icon),1)],64))])):u("",!0),e("p",fe,[N(i(s.label)+" ",1),s.label==="è±†èŽ¢"&&m(o).isStudent&&v.value>0?(t(),n("span",ge,i(v.value),1)):u("",!0)])]),_:2},1032,["class","to"])):(t(),n("div",ye,[s.icon?(t(),n("span",ke,[s.icon===B?(t(),f(P,{key:0,size:20})):(t(),n(c,{key:1},[N(i(s.icon),1)],64))])):u("",!0),e("p",Ae,i(s.label),1)]))]))),128))])]),w.value.length>0?(t(),n("nav",Se,[a[5]||(a[5]=e("p",{class:"section-label"},"ç®¡ç†",-1)),e("ul",null,[(t(!0),n(c,null,h(w.value,s=>(t(),n("li",{key:s.label},[s.to&&!s.disabled?(t(),f(b,{key:0,class:_(["edamame-sidebar-item",{active:k(s)}]),to:s.to},{default:C(()=>[e("p",Ce,i(s.label),1)]),_:2},1032,["class","to"])):(t(),n("div",Ne,[e("p",Be,i(s.label),1)]))]))),128))])])):u("",!0),x.value.length>0?(t(),n("nav",we,[a[6]||(a[6]=e("p",{class:"section-label"},"è¶…ç´šç®¡ç†",-1)),e("ul",null,[(t(!0),n(c,null,h(x.value,s=>(t(),n("li",{key:s.label},[s.to&&!s.disabled?(t(),f(b,{key:0,class:_(["edamame-sidebar-item super-admin-item",{active:k(s)}]),to:s.to},{default:C(()=>[e("p",xe,i(s.label),1)]),_:2},1032,["class","to"])):(t(),n("div",ze,[e("p",Me,i(s.label),1)]))]))),128))])])):u("",!0),e("div",{class:"sidebar-footer"},[e("div",{class:"footer-brand"},[e("img",{src:V,alt:"å¥è±†",class:"footer-logo"}),a[7]||(a[7]=e("span",{class:"footer-title"},"å¥è±† 2.0",-1))]),a[8]||(a[8]=e("div",{class:"footer-credits"},[e("p",null,"é–‹ç™¼ï¼šæ±ªæ¶µå±¹ã€å¼µè€å¸«"),e("p",null,"ç¾Žè¡“ï¼šä¸å¥•è¾°ã€å¾æšæ´‹")],-1))])])}}}),$e=F(Ue,[["__scopeId","data-v-dab007c6"]]),Ie={class:"app-layout"},Pe={class:"app-main"},je={class:"app-content"},De=j({__name:"AppLayout",setup(L){return(o,p)=>{const d=D("router-view");return t(),n("div",Ie,[I($e),e("section",Pe,[e("div",je,[I(d)])])])}}}),Oe=F(De,[["__scopeId","data-v-a70dcd22"]]);export{Oe as default};
