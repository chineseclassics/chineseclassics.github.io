import{q as f,d as g,s as b,v as x,a as s,b as e,F as c,h as u,e as h,f as r,t as l,o as a,_ as y}from"./index-j5Zq0Ivf.js";import{u as k}from"./useSupabase-BYLXQxLp.js";const L=f("home",{state:()=>({topPoems:[],poemsLoading:!1,poemsError:null}),actions:{async fetchLatestPoems(p=3){this.poemsLoading=!0,this.poemsError=null;try{const i=k(),{data:n,error:d}=await i.from("poems").select("id,title,author,dynasty,content,created_at").order("created_at",{ascending:!1}).limit(p);if(d)throw d;this.topPoems=n??[]}catch(i){this.poemsError=i instanceof Error?i.message:"讀取資料時發生未知錯誤"}finally{this.poemsLoading=!1}}}}),j={class:"judou-container edamame-bg"},P={class:"judou-grid"},S={class:"edamame-glass hover-lift judou-card"},E={class:"actions-grid"},B=["href"],H={class:"edamame-text-level-subtitle"},q={class:"edamame-text-level-detail"},w={class:"edamame-glass hover-lift judou-card"},C={class:"stats-grid"},F={class:"edamame-text-level-detail"},N={class:"edamame-heading-gradient stat-value"},R={class:"edamame-text-level-detail"},V={class:"edamame-glass hover-lift judou-card"},A={class:"poem-header"},D={key:0,class:"edamame-text-level-detail"},I={key:0,class:"poem-error edamame-text-level-detail"},M={key:1,class:"poem-list"},T={class:"poem-title edamame-text-level-subtitle"},z={class:"poem-author edamame-text-level-detail"},G={key:0,class:"poem-item"},J=g({__name:"HomePage",setup(p){const i=[{label:"進入主頁",description:"Latest feed & stats",href:"#",variant:"primary"},{label:"練習中心",description:"Select passages & submit",href:"#",variant:"secondary"},{label:"排行榜",description:"Realtime standings",href:"#",variant:"outline"}],n=[{title:"活躍豆友",value:"1,024",detail:"+128 今日"},{title:"提交練習",value:"8,530",detail:"本週"},{title:"豆子等級",value:"Lv. 12",detail:"向前 65 exp"}],d=L(),{topPoems:m,poemsLoading:v,poemsError:_}=b(d);return x(()=>{m.value.length||d.fetchLatestPoems()}),(K,o)=>(a(),s("main",j,[e("section",P,[e("article",S,[o[0]||(o[0]=e("p",{class:"edamame-text-level-subtitle"},"快速進入",-1)),e("div",E,[(a(),s(c,null,u(i,t=>e("a",{key:t.label,class:"edamame-sidebar-item judou-action",href:t.href},[e("div",null,[e("p",H,l(t.label),1),e("p",q,l(t.description),1)])],8,B)),64))])]),e("article",w,[o[1]||(o[1]=e("p",{class:"edamame-text-level-subtitle"},"核心指標",-1)),e("div",C,[(a(),s(c,null,u(n,t=>e("div",{key:t.title,class:"judou-stat"},[e("p",F,l(t.title),1),e("p",N,l(t.value),1),e("p",R,l(t.detail),1)])),64))])]),e("article",V,[e("div",A,[o[2]||(o[2]=e("p",{class:"edamame-text-level-subtitle"},"最新詩文",-1)),r(v)?(a(),s("span",D,"載入中…")):h("",!0)]),r(_)?(a(),s("p",I,l(r(_)),1)):(a(),s("ul",M,[(a(!0),s(c,null,u(r(m),t=>(a(),s("li",{key:t.id,class:"poem-item"},[e("p",T,l(t.title),1),e("p",z,l(t.author||"佚名"),1)]))),128)),r(m).length?h("",!0):(a(),s("li",G,[...o[3]||(o[3]=[e("p",{class:"edamame-text-level-detail"},"Supabase 尚未有資料，請先寫入 poems 表。",-1)])]))]))])])]))}}),U=y(J,[["__scopeId","data-v-b59cdb47"]]);export{U as default};
