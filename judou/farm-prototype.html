<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±†ç”°ç³»çµ±åŸå‹ (2D å¹³é¢ç‰ˆ) - å¤ªè™›å¹»å¢ƒ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #5d9948; /* æ˜Ÿéœ²è°·å¼è‰åœ°ç¶  */
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        /* éŠæˆ²è¦–å£ */
        .game-viewport {
            position: relative;
            width: 90vw;
            height: 80vh;
            background-color: #74b75a;
            border: 8px solid #3d251e; /* æœ¨è³ªé‚Šæ¡†æ„Ÿ */
            border-radius: 4px;
            overflow: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.2), 0 20px 50px rgba(0,0,0,0.3);
        }

        /* 2D ç¶²æ ¼ç³»çµ± */
        .farm-grid {
            display: grid;
            grid-template-columns: repeat(8, 64px); /* ç¶“å…¸ 64px åƒç´ è¦æ ¼ */
            grid-template-rows: repeat(6, 64px);
            gap: 2px;
            background-color: rgba(0,0,0,0.05);
            padding: 10px;
            border-radius: 4px;
        }

        /* åœ°å¡Šæ¨£å¼ */
        .tile {
            width: 64px;
            height: 64px;
            position: relative;
            cursor: pointer;
            transition: transform 0.1s;
            image-rendering: pixelated; /* ä¿æŒåƒç´ æ¸…æ™°åº¦ */
        }

        .tile:hover {
            outline: 2px solid white;
            z-index: 10;
            transform: scale(1.05);
        }

        /* ä¸åŒåœ°å¡Šç‹€æ…‹ */
        .tile-grass { 
            background-color: #74b75a; 
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .tile-soil { 
            background-color: #8b5a2b; /* ç¿»éçš„åœŸåœ°é¡è‰² */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
            border: 1px solid #5d3a1a;
        }

        .tile-planting, .tile-ready {
            background-color: #6d4722; /* ç¨®æ¤ä¸­çš„æ·±è‰²æ¿•æ½¤åœŸåœ° */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.4);
        }

        /* æ¤ç‰©è¦–è¦º */
        .plant {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -60%);
            font-size: 2.5rem;
            pointer-events: none;
            filter: drop-shadow(0 4px 2px rgba(0,0,0,0.2));
            user-select: none;
        }

        .sprout-anim {
            animation: sprout-pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes sprout-pop {
            0% { transform: translate(-50%, -60%) scale(0); }
            100% { transform: translate(-50%, -60%) scale(1); }
        }

        /* UI å…ƒä»¶ */
        .ui-overlay {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
        }

        .stats-card {
            background: #e6ccb2; /* ç¾Šçš®ç´™è‰² */
            border: 4px solid #7f5539;
            padding: 12px 20px;
            border-radius: 4px;
            pointer-events: auto;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
        }

        .status-text {
            color: #432818;
            font-weight: bold;
        }

        .action-msg {
            position: fixed;
            bottom: 30px;
            background: #432818;
            color: #ede0d4;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .action-msg.active { opacity: 1; }

        /* ç°¡å–®çš„æŒ‰éˆ•æ¨£å¼ */
        .btn-farm {
            background: #9c6644;
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            margin-top: 8px;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 0 #7f5539;
        }
        .btn-farm:active { transform: translateY(2px); box-shadow: none; }
    </style>
</head>
<body>
    <div id="app" @contextmenu.prevent>
        <!-- èƒŒæ™¯éŸ³æ¨‚æç¤ºï¼ˆæ¨¡æ“¬ï¼‰ -->
        <div class="fixed bottom-4 right-4 text-xs text-white/50 italic">
            æ­£åœ¨æ’­æ”¾ï¼šå—å±±è€•ä½œæ›² (Stardew Style)
        </div>

        <!-- UI é ‚æ¬„ -->
        <div class="ui-overlay">
            <div class="stats-card">
                <div class="status-text flex items-center gap-4">
                    <span>ğŸŒ± ç¨®å­: {{ seeds }}</span>
                    <span>ğŸ’° é‡‘å¹£: {{ coins }}</span>
                </div>
            </div>
            
            <div class="stats-card">
                <div class="status-text italic text-sm">
                    ã€Œæ™¨èˆˆç†è’ç©¢ï¼Œå¸¶æœˆè·é‹¤æ­¸ã€
                </div>
            </div>
        </div>

        <!-- éŠæˆ²ä¸»å€åŸŸ -->
        <div class="game-viewport">
            <div class="farm-grid">
                <div 
                    v-for="(tile, index) in grid" 
                    :key="index"
                    class="tile"
                    :class="getTileClass(tile)"
                    @click="handleAction(index)"
                    @mouseover="hoveredTile = index"
                >
                    <!-- ç”Ÿé•·è¦–è¦º -->
                    <div v-if="tile.status === 'planting'" class="plant sprout-anim text-2xl">ğŸŒ±</div>
                    <div v-if="tile.status === 'growing'" class="plant sprout-anim text-3xl">ğŸŒ¿</div>
                    <div v-if="tile.status === 'ready'" class="plant sprout-anim text-4xl">ğŸ«›</div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨æç¤ºæ¬„ -->
        <div class="fixed bottom-10 left-0 right-0 flex justify-center pointer-events-none">
            <div class="stats-card bg-white/90">
                <span class="text-sm font-bold text-stone-700">{{ getHint }}</span>
            </div>
        </div>

        <!-- æµ®å‹•æ¶ˆæ¯ -->
        <div class="action-msg" :class="{ active: toast.show }">
            {{ toast.msg }}
        </div>

        <!-- å¤ªè™›å¹»å¢ƒæ‡‰ç”¨åˆ‡æ›å™¨ -->
        <script src="/assets/js/taixu-app-switcher.js"></script>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const seeds = ref(20);
                const coins = ref(50);
                const hoveredTile = ref(-1);
                const toast = ref({ show: false, msg: '' });

                // 8x6 ç¶²æ ¼åˆå§‹åŒ–
                const grid = ref(Array.from({ length: 48 }, () => ({
                    status: 'grass', // grass, soil, planting, growing, ready
                    growthProgress: 0
                })));

                const getHint = computed(() => {
                    if (hoveredTile.value === -1) return "æ­¡è¿ä¾†åˆ°å—å±±è±†ç”°";
                    const tile = grid.value[hoveredTile.value];
                    switch(tile.status) {
                        case 'grass': return "é€™æ˜¯è’è‰ï¼Œé»æ“Šã€Œé–‹è’ã€(éœ€ 5 é‡‘å¹£)";
                        case 'soil': return "é€™æ˜¯è‚¥æ²ƒçš„åœŸåœ°ï¼Œé»æ“Šã€Œæ’­ç¨®ã€(éœ€ 1 ç¨®å­)";
                        case 'planting': return "ç¨®å­æ­£åœ¨èŒèŠ½...";
                        case 'growing': return "è±†è‹—æ­£åœ¨èŒå£¯ç”Ÿé•·...";
                        case 'ready': return "æˆç†Ÿäº†ï¼é»æ“Šæ”¶ç©«ç”°è±†";
                        default: return "";
                    }
                });

                const getTileClass = (tile) => ({
                    'tile-grass': tile.status === 'grass',
                    'tile-soil': tile.status === 'soil',
                    'tile-planting': tile.status === 'planting',
                    'tile-growing': tile.status === 'growing',
                    'tile-ready': tile.status === 'ready'
                });

                const showToast = (msg) => {
                    toast.value.msg = msg;
                    toast.value.show = true;
                    setTimeout(() => toast.value.show = false, 1500);
                };

                const handleAction = (index) => {
                    const tile = grid.value[index];

                    if (tile.status === 'grass') {
                        if (coins.value >= 5) {
                            coins.value -= 5;
                            tile.status = 'soil';
                            showToast("é–‹è’æˆåŠŸï¼-5 é‡‘å¹£");
                        } else {
                            showToast("é‡‘å¹£ä¸è¶³ï¼");
                        }
                    } else if (tile.status === 'soil') {
                        if (seeds.value >= 1) {
                            seeds.value -= 1;
                            tile.status = 'planting';
                            showToast("æ’­ä¸‹å¸Œæœ›çš„ç¨®å­...");
                            
                            // æ¨¡æ“¬ç”Ÿé•·éšæ®µ
                            setTimeout(() => { tile.status = 'growing'; }, 2000);
                            setTimeout(() => { tile.status = 'ready'; }, 5000);
                        } else {
                            showToast("ç¨®å­ä¸å¤ äº†ï¼Œå¿«å»ç·´ç¿’å§ï¼");
                        }
                    } else if (tile.status === 'ready') {
                        const reward = Math.floor(Math.random() * 5) + 5;
                        coins.value += reward;
                        tile.status = 'soil';
                        showToast(`æ”¶ç©«æˆåŠŸï¼ç²å¾—ç”°è±†ï¼Œè³£å¾— ${reward} é‡‘å¹£`);
                    }
                };

                return {
                    seeds, coins, grid, hoveredTile, toast,
                    getHint, getTileClass, handleAction
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
