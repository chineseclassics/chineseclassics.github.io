---
description: 文檔創建規範 - 少而精，避免過度記錄
alwaysApply: true
---

# 文檔創建規範

> 原則：**少而精** - 只記錄重要的架構決策和複雜功能，避免為每個小修復創建文檔

## 🎯 何時創建文檔

### ✅ 應該創建文檔的情況

1. **重大架構決策**
   - 認證系統設計
   - 數據庫架構變更
   - 技術棧選擇

2. **複雜功能實施**
   - 需要多個步驟
   - 涉及多個文件
   - 大型功能開發

3. **部署指南**
   - 生產環境部署
   - CI/CD 配置
   - 環境設置

4. **設計文檔**
   - 系統設計
   - API 設計
   - 數據模型

5. **會話總結**
   - 一次會話修復多個相關問題
   - 創建**一個**總結文檔包含所有修復

### ❌ 不應該創建文檔的情況

- 小型 bug 修復（在代碼註釋中說明）
- 診斷性臨時文檔（問題解決後應刪除）
- 單個小問題（寫在會話總結中）
- 重複內容（合併到現有文檔）
- 細節性修復（如 CSS 調整、文字修改）

## 📋 核心原則

### 1. 少而精

```markdown
# ❌ 錯誤做法：每個小問題一個文檔
- WORD_CARD_DISPLAY_FIX.md
- WORDBOOK_QUERY_TIMEOUT_FIX.md
- WORDBOOK_QUEUE_FIX.md
- WORDBOOK_SYNC_WAIT_FIX.md
- WORDBOOK_EMPTY_FIX.md
= 5 個文檔

# ✅ 正確做法：合併成一個總結
- SESSION_FIX_SUMMARY_2025-10-12.md（包含所有 4-5 個修復）
= 1 個文檔
```

### 2. 合併優先

多個相關問題應該合併成一個文檔：

```markdown
# 會話總結格式
## 修復清單
### 1. 問題 A
- 原因
- 解決方案
- 影響文件

### 2. 問題 B
- 原因
- 解決方案
- 影響文件

### 3. 問題 C
...
```

### 3. 定期清理

- 診斷文檔用完即刪
- 過時文檔及時更新或刪除
- 重複內容合併

## 📝 文檔命名規範

### 會話總結
```
SESSION_FIX_SUMMARY_YYYY-MM-DD.md
SESSION_FEATURE_SUMMARY_YYYY-MM-DD.md
```

### 架構文檔
```
AUTH_ARCHITECTURE.md
DATABASE_DESIGN.md
SUPABASE_ARCHITECTURE.md
```

### 部署文檔
```
DEPLOYMENT_GUIDE.md
EDGE_FUNCTION_DEPLOY.md
```

### 設計文檔
```
DESIGN.md
API_DESIGN.md
```

## 🗂️ 文檔位置

### 平台級文檔
```
/TAIXU_ARCHITECTURE.md
/README.md
/AGENTS.md
```

### 子項目文檔
```
story-vocab/
├── README.md              # 項目說明（快速開始）
└── docs/                  # 所有詳細文檔
    ├── README.md          # 文檔索引
    ├── DESIGN.md          # 設計文檔
    ├── DEPLOYMENT*.md     # 部署相關
    └── SESSION_*.md       # 會話總結
```

## ✍️ 創建文檔的決策流程

```
遇到問題/完成功能
    ↓
是重大架構決策嗎？ ───Yes→ 創建獨立文檔
    ↓ No
是複雜功能實施嗎？ ───Yes→ 創建獨立文檔
    ↓ No
是會話中的多個修復嗎？ ───Yes→ 創建會話總結
    ↓ No
是單個小修復嗎？ ───Yes→ 代碼註釋即可，不創建文檔
    ↓
已有相關文檔嗎？ ───Yes→ 更新現有文檔
    ↓ No
合併到會話總結中
```

## 📊 文檔質量標準

### 好的文檔特徵
- ✅ 聚焦一個主題或一組相關問題
- ✅ 包含問題、原因、解決方案
- ✅ 提供代碼範例
- ✅ 列出影響的文件
- ✅ 控制在合理篇幅（通常 < 500 行）

### 避免的文檔特徵
- ❌ 過度詳細（每個步驟都記錄）
- ❌ 過度細分（每個小問題一個文檔）
- ❌ 臨時診斷信息（應該刪除）
- ❌ 重複內容（應該合併）

## 🔍 文檔審查清單

創建文檔前問自己：

- [ ] 這是重大架構決策或複雜功能嗎？
- [ ] 可以合併到現有文檔嗎？
- [ ] 可以只寫在代碼註釋中嗎？
- [ ] 這個文檔將來還有參考價值嗎？
- [ ] 文檔命名清晰描述性嗎？
- [ ] 文檔放在正確的位置嗎？

## 🎯 實際範例

### 範例 1：多個相關修復 ✅

```markdown
# 2025-10-12 生詞本優化總結

修復 4 個相關問題：
1. 詞語卡顯示問題
2. 查詢超時問題
3. 頻繁插入超時
4. 生詞本顯示為空

影響文件：
- story-vocab/js/ui/screens.js
- story-vocab/js/features/wordbook.js
```

### 範例 2：單個小修復 ❌ → ✅

```markdown
# ❌ 不要創建：BUTTON_COLOR_FIX.md
改為：在代碼中添加註釋
```

```css
/* 修復按鈕顏色對比度問題 (2025-10-12) */
.btn-primary {
    background: #007bff; /* 從 #0066cc 改為 #007bff，提高可讀性 */
}
```

### 範例 3：診斷文檔 ❌ → ✅

```markdown
# ❌ 創建了：WORDBOOK_EMPTY_FIX.md（診斷用）
# ✅ 問題解決後：刪除診斷文檔，保留會話總結
```

## 📚 相關規則

- `@file-organization` - 文件組織規範
- `@how-to-create-rules` - 如何創建規則

---

**適用範圍**：所有太虛幻境項目和子項目  
**最後更新**：2025-10-12
