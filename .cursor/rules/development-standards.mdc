---
description: 太虛幻境開發標準 - 語言、代碼、文件組織、應用開發規範
alwaysApply: true
---

# 開發標準

## 🌐 語言規範

### 核心原則
- 始終使用繁體中文回應
- 代碼註釋使用繁體中文
- 文檔使用繁體中文

## 💻 代碼規範

### 通用規則
- 使用清晰的變量和函數命名（繁體中文註釋）
- 保持函數簡潔，單一職責
- 添加必要的註釋說明複雜邏輯
- 避免過度工程化

### 禁止行為
- ❌ 不要在太虛幻境根目錄創建子項目的文件
- ❌ 不要在子項目根目錄堆積文檔
- ❌ 不要隨意修改 Git 配置
- ❌ 不要運行破壞性的 Git 命令（force push、hard reset）
- ❌ 不要未經確認就提交代碼

## 📁 文件組織規範

### 核心原則
1. **兩層結構**：太虛幻境根目錄（平台級）+ 子項目目錄（應用級）
2. **完全自包含**：每個子項目是獨立單元，所有資源都在內部
3. **文檔集中**：所有詳細文檔必須在子項目的 `docs/` 文件夾內
4. **根目錄簡潔**：子項目根目錄只放 README.md、index.html 和工具腳本

### 平台級目錄（只放平台級內容）
```
/chineseclassics.github.io/
├── index.html                    # 平台入口
├── TAIXU_ARCHITECTURE.md         # 平台架構文檔
├── README.md                     # 平台說明
├── supabase/                     # 平台級 Supabase 預留
├── package.json                  # 平台級配置
└── story-vocab/                  # 子項目（完全自包含）
```

**禁止在根目錄放置**：
- ❌ 子項目專屬的文檔
- ❌ 子項目專屬的工具腳本
- ❌ 子項目專屬的資源文件

## 🎯 應用開發規範

### 核心原則
1. **應用獨立性**：每個應用是完全自包含的單元
2. **統一導航**：所有應用必須引入應用切換器組件
3. **路徑規範**：使用絕對路徑確保跨層級導航

### 應用切換器組件

**必須引入**：
```html
<script src="/assets/js/taixu-app-switcher.js"></script>
```

**功能說明**：
- 自動創建浮動 Logo（右側垂直居中）
- 提供應用切換器模態框
- 支持快速返回主頁
- 支持切換到其他應用

### URL 路徑規範

**重要**：所有應用 URL 必須使用**絕對路徑**

```javascript
// ✅ 正確：絕對路徑
url: '/cilong.html'
url: '/story-vocab/index.html'

// ❌ 錯誤：相對路徑
url: 'cilong.html'
url: '../cilong.html'
```

**原因**：
- 組件會被不同層級的頁面引用
- 相對路徑會導致導航錯誤
- 絕對路徑確保在任何位置都能正確跳轉

## 🎯 黃金規則
- 📄 除了 README.md，所有 .md 文檔都放在 `docs/` 內
- 🔧 工具腳本放在項目根目錄（方便執行）
- 🚫 絕不在太虛幻境根目錄放子項目的文件
- 🔗 所有應用必須引入應用切換器組件
- 🛣️ 所有應用 URL 必須使用絕對路徑

## 🏗️ 新項目初始化

### 標準文件結構
```
應用名/
├── index.html              # 主入口（必需）
├── README.md               # 應用說明（必需）
├── js/                     # JavaScript（推薦）
├── css/                    # 樣式文件（推薦）
├── assets/                 # 資源文件（推薦）
│   ├── fonts/
│   ├── audio/
│   ├── images/
│   └── data/
└── docs/                   # 詳細文檔（可選）
```

### HTML 模板要求
```html
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>應用名稱 - 太虛幻境</title>
</head>
<body>
    <!-- 應用內容 -->
    
    <!-- ⭐ 必需：應用切換器組件（在 </body> 之前） -->
    <script src="/assets/js/taixu-app-switcher.js"></script>
</body>
</html>
```

### 應用註冊
新應用需要在兩個地方註冊（使用絕對路徑）：
1. 主頁 `index.html` 的 `apps` 數組
2. `assets/js/taixu-app-switcher.js` 的應用列表

## 🔍 代碼審查要點

### 完成修改後檢查
- [ ] 功能完整性：所有任務是否完成？
- [ ] 代碼簡潔性：是否有重複代碼？是否過度工程化？
- [ ] 錯誤處理：是否有適當的 null 檢查和錯誤處理？
- [ ] 性能優化：是否有不必要的 DOM 操作或重複計算？
- [ ] 兼容性：是否破壞了現有功能？

### 避免過度工程化
- ❌ 不要為了展示技術而增加不必要的複雜度
- ❌ 不要創建過多的小方法（能用 5 行解決不用 50 行）
- ✅ 優先使用最簡單直接的解決方案

---

**適用範圍**：所有太虛幻境項目和子項目  
**維護者**：太虛幻境開發團隊